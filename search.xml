<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Goodbye 2020</title>
      <link href="2021/01/09/Goodbye2020/"/>
      <url>2021/01/09/Goodbye2020/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ã©ã‚“ãªé¡˜ã„ã‚‚ å˜˜ã˜ã‚ƒãªã„<br />ä½ çš„æ‰€æœ‰æ„¿æœ› ç»éå—æŸ¯ä¸€æ¢¦<br />ãã£ã¨ã‹ãªã†ã‹ã‚‰â€¦<br />éƒ½ä¸€å®šå¯ä»¥å®ç°</p></blockquote><h1 id="é€‰æ‹©"><a class="markdownIt-Anchor" href="#é€‰æ‹©"></a> é€‰æ‹©</h1><p>â€ƒâ€ƒè¯»ç ”è¿˜æ˜¯å·¥ä½œï¼Œåˆæ˜¯å†ä¸€æ¬¡é¢ä¸´é€‰æ‹©çš„æ—¶å€™ã€‚å¯èƒ½æ˜¯è§‰å¾—è‡ªå·±è¿˜å¤ªèœï¼Œå¯èƒ½æ˜¯æƒ³å°è¯•ç§‘ç ”ï¼Œå¯èƒ½æ˜¯æƒ³å¤šæ¡è·¯ï¼Œåˆå¯èƒ½æ˜¯æƒ³å†å‡ºå»çœ‹çœ‹ï¼Œæœ€åè¿˜æ˜¯åšå®šä¸‹æ¥ç»§ç»­è¯»ç ”ï¼ˆ<s>æƒ³å¤šäº†ä¹Ÿæ²¡å¾—ç”¨ï¼Œé€‰å“ªä¸ªæ›´å¥½è°çŸ¥é“å‘¢</s>ï¼‰ã€‚å¼€å­¦åå¤ä¹ ç”±ä¸‰äººç»„-&gt;äºŒäººç»„ï¼ˆ<s>æ˜¾ç„¶æ˜¯è¢«æŸäººæŠ›å¼ƒäº†</s>ğŸ˜ï¼‰-&gt;solo-&gt;è€ƒç ”/æåŸºå¤§é˜Ÿ</p><h1 id="æ¯•ä¸šå­£"><a class="markdownIt-Anchor" href="#æ¯•ä¸šå­£"></a> æ¯•ä¸šå­£</h1><p>â€ƒâ€ƒåˆåˆ°äº†æ¯•ä¸šçš„æ—¶é—´äº†ï¼Œé€èµ°äº†ä¸€æ³¢å­¦é•¿å­¦å§ã€‚</p><img src="https://i.loli.net/2021/01/09/mPOoxfnRsgbJLVw.jpg" alt="CY BJ ME" style="zoom:50%;" /><p>â€ƒâ€ƒè™½ç„¶BJæ¯•ä¸šäº†ï¼Œä½†è¿˜å¸®æˆ‘ä»¬è§„åˆ’ç€è€ƒç ”çš„å„ç§ğŸ‘ï¼Œ<s>å°±å·®å¸®æˆ‘ä»¬è€ƒäº†</s></p><h1 id="è¿™æ˜¯æ„å¤–"><a class="markdownIt-Anchor" href="#è¿™æ˜¯æ„å¤–"></a> è¿™æ˜¯æ„å¤–</h1><p>â€ƒâ€ƒä½œä¸ºä¸€åä¿ç ”è¾¹ç¼˜äººï¼Œè¦ä¸æ˜¯å°ä¼™ä¼´è¯´ï¼Œæˆ‘å¯èƒ½éƒ½ä¸ä¼šå»å°è¯•æŠ•å¤ä»¤è¥ã€‚</p><p>â€ƒâ€ƒè®²åˆ°å¤ä»¤è¥ä¹ŸæŒºæç¬‘çš„ï¼Œä¸¤æ¬¡é¢è¯•ï¼Œä¸€æ¬¡å¼€å§‹è¯´æœ‰è‹±è¯­è‡ªæˆ‘ä»‹ç»ï¼Œç»“æœå‡†å¤‡äº†æ²¡ç”¨ä¸Šï¼Œç¬¬äºŒæ¬¡ä¸€å¼€å§‹è¯´æ— è‹±è¯­è‡ªæˆ‘ä»‹ç»ï¼Œç»“æœæ²¡å‡†å¤‡ç°åœºç»“ç»“å·´å·´å®åœ¨å°´å°¬ğŸ˜‡ã€‚ä¸æƒ³èŠ±å¤ªå¤šæ—¶é—´ï¼Œæˆ‘å°±æŠ•äº†ä¸¤å­¦æ ¡NWPUï¼ˆå› ä¸ºæ¯”èµ›å»è¿‡ï¼‰å’ŒSEUï¼ˆå› ä¸ºBJå°±åœ¨SEUï¼‰ï¼Œå¥½åœ¨éƒ½æ‹¿åˆ°äº†ä¼˜è¥ï¼ŒğŸ•ğŸ’©è¿å§ã€‚</p><p>â€ƒâ€ƒæœ€åæœ¬æ ¡æ¨å…åå•ä¸‹æ¥è¿˜æ˜¯åˆ«äººå‘Šè¯‰æˆ‘çš„ï¼Œæˆ‘æ˜¯å‘†äº†ï¼ŒçœŸæ²¡æƒ³åˆ°ã€‚æ™šä¸Šå°±å’ŒBJé€šäº†ä¸€é€šç”µè¯ï¼Œå’ŒéŸ¬éŸ¬åœ¨æ´—æ¾¡é—´å­å­å­äº†å¾ˆä¹…ï¼Œåˆ°å‡Œæ™¨æ‰å»ç¡ï¼ˆæœ‰äººä¸€èµ·åˆ†äº«å–œæ‚¦ï¼Œæ‰æ˜¯çœŸçš„å¼€å¿ƒå§</p><img src="https://i.loli.net/2021/01/09/SqfiNVoM7jQWnDY.jpg" style="zoom: 80%;" /><p>â€ƒâ€ƒç»™æˆ‘æœŸé—´ï¼Œé˜µäº¡çš„phoneä¸ŠæŸ±é¦™ï¼Œè‚¯å®šæ˜¯å®ƒå¸èµ°äº†æˆ‘çš„éœ‰è¿ã€‚</p><h1 id="2020ç»ˆ"><a class="markdownIt-Anchor" href="#2020ç»ˆ"></a> 2020ç»ˆ</h1><p>â€ƒâ€ƒå…ˆä¸Šå²¸äº†ï¼Œæœ€é‡è¦çš„äº‹æƒ…é‚£è‚¯å®šæ˜¯å¹²é¥­äº†ã€‚</p><img src="https://i.loli.net/2021/01/09/kg8TYaEFM1fAovO.jpg" style="zoom:80%;" /><p>â€ƒâ€ƒæˆ‘å¿…é¡»è¯´ï¼Œåƒé¥­çš„è‚¯å®šéƒ½èƒ½ä¸Šå²¸ã€‚</p><p>â€ƒâ€ƒ2020ï¼Œå‘ç”Ÿäº†å¾ˆå¤šæ„æƒ³ä¸åˆ°çš„äº‹ï¼Œå¯¹äºæˆ‘ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæœ‰å¥½æœ‰åã€‚</p><p>â€ƒâ€ƒ2021ï¼Œä¸æ±‚æƒŠå–œï¼Œä½†æ±‚å¯»å¸¸ï¼ˆ<s>copy from BJ</s>ï¼‰</p><p><img src="https://i.loli.net/2021/01/09/gIAUhHEPQ1BWpFm.jpg" alt="æ‹›è´¢/å¥½è¿å–µ" /></p>]]></content>
      
      
      <categories>
          
          <category> é—²æ¥å­å­ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Pytorch ç”±å¤šä¸ªä¸åŒçš„ç½‘ç»œæ¨¡å‹ç»„åˆè€Œæˆçš„æ¨¡å‹ï¼ˆç”¨ä¸€ä¸ªæŸå¤±å‡½æ•°ï¼Œå’Œä¼˜åŒ–æ–¹æ³•å»è®­ç»ƒï¼‰</title>
      <link href="2020/11/30/Pytorch%20%E7%94%B1%E5%A4%9A%E4%B8%AA%E4%B8%8D%E5%90%8C%E7%9A%84%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%BB%84%E5%90%88%E6%A8%A1%E5%9E%8B/"/>
      <url>2020/11/30/Pytorch%20%E7%94%B1%E5%A4%9A%E4%B8%AA%E4%B8%8D%E5%90%8C%E7%9A%84%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E7%BB%84%E5%90%88%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>ä¸€å¼€å§‹å†™æ¨¡å‹çš„æ—¶å€™ï¼Œç½‘ä¸Šå­¦ä¹ åˆ°çš„éƒ½æ˜¯é‚£ç§éå¸¸ç®€å•çš„æ¨¡å‹ï¼Œå¯æ˜¯æˆ‘è¦å®ç°çš„æ¨¡å‹æ˜¯å°†å¤šä¸ªæ¨¡å‹å¥—èµ·æ¥ï¼Œä¸€ä¸ªå¤§æ¨¡å‹ï¼Œä¸€èµ·è®­ç»ƒã€‚<br />â€ƒâ€ƒ å…¶å®åªè¦å…ˆå®šä¹‰å‡ ä¸ªå°æ¨¡å‹ï¼Œç„¶åå°†å…¶å®šä¹‰åœ¨å¤§æ¨¡å‹çš„initä¸­ï¼Œç„¶åç”¨forwardæ¥æ§åˆ¶å†…éƒ¨çš„è¿ä½œå³å¯ï¼Œç›´æ¥çœ‹ä»£ç å§ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model_one</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, n_input, n_output</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Model_one, self).__init__()</span><br><span class="line">        self.predict = nn.Linear(n_input, n_output, bias=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        out = self.predict(x)</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model_two</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, n_input, n_output</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Model_two, self).__init__()</span><br><span class="line">        self.hidden1 = nn.Linear(n_input, <span class="number">128</span>)</span><br><span class="line">        self.hidden2 = nn.Linear(<span class="number">128</span>, <span class="number">64</span>)</span><br><span class="line">        self.predict = nn.Linear(<span class="number">64</span>, n_output)</span><br><span class="line">        self.dropout = nn.Dropout(p=<span class="number">0.5</span>)</span><br><span class="line">        self.dropout2 = nn.Dropout(p=<span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        out = self.hidden1(x)</span><br><span class="line">        out = self.dropout(out)</span><br><span class="line">        out = F.relu(out)</span><br><span class="line"></span><br><span class="line">        out = self.hidden2(out)</span><br><span class="line">        out = self.dropout(out)</span><br><span class="line">        out = F.relu(out)</span><br><span class="line"></span><br><span class="line">        predict = self.predict(out)</span><br><span class="line">        predict = self.dropout2(predict)</span><br><span class="line">        predict = torch.sigmoid(predict)</span><br><span class="line">        <span class="keyword">return</span> predict</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        out = self.hidden1(x)</span><br><span class="line">        out = F.relu(out)</span><br><span class="line">        out = self.hidden2(out)</span><br><span class="line">        out = F.relu(out)</span><br><span class="line">        out = self.hidden3(out)</span><br><span class="line">        out = F.relu(out)</span><br><span class="line">        predict = self.predict(out)</span><br><span class="line">        predict = torch.sigmoid(predict)</span><br><span class="line">        <span class="keyword">return</span> predict</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Model</span>(<span class="params">nn.Module</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, category_len, grid_len, K</span>):</span></span><br><span class="line">        <span class="built_in">super</span>(Model, self).__init__()</span><br><span class="line">        self.category_model = Model_one(category_len, K)</span><br><span class="line">        self.grid_model = Model_one(grid_len, K)</span><br><span class="line">        self.category_bias_model = Model_one(category_len, K)</span><br><span class="line">        self.grid_bias_model = Model_two(grid_len, K)</span><br><span class="line">        self.MLP_model = Model_two(<span class="number">2</span> * K, K)</span><br><span class="line">        self.NeuMF_model = Model_one(<span class="number">2</span> * K, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span>(<span class="params">self, category_input, grid_input</span>):</span></span><br><span class="line">        category_out = self.category_model(category_input)</span><br><span class="line">        grid_out = self.grid_model(grid_input)</span><br><span class="line">        SVD_out = category_out * grid_out</span><br><span class="line">        bu = self.category_bias_model(category_input)</span><br><span class="line">        bi = self.grid_bias_model(grid_input)</span><br><span class="line">        SVD_out = SVD_out + bu + bi</span><br><span class="line">        MLP_input = torch.cat((category_out, grid_out), <span class="number">1</span>)  <span class="comment"># æ¨ªå‘æ‹¼æ¥</span></span><br><span class="line">        MLP_out = self.MLP_model(MLP_input)</span><br><span class="line">        NeuMF_RS_input = torch.cat((SVD_out, MLP_out), <span class="number">1</span>)  <span class="comment"># æ¨ªå‘æ‹¼æ¥</span></span><br><span class="line">        NeuMF_RS_out = self.NeuMF_model(NeuMF_RS_input)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> NeuMF_RS_out</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„Model_oneå’ŒModel_twoå®šä¹‰çš„å°æ¨¡å‹éƒ½æ˜¯å¤§æ¨¡å‹çš„ç»„æˆéƒ¨åˆ†ï¼Œåªè¦æ§åˆ¶å¥½å…¶ä¸­è¾“å…¥è¾“å‡ºçš„è¡”æ¥å³å¯ã€‚<br />â€ƒâ€ƒ å…¶ä¸­çš„dropoutåœ¨è¿™æ˜¯ç”¨æ¥é˜²æ­¢è¿‡æ‹Ÿåˆçš„ï¼Œä¸ç”¨å…³æ³¨ï¼Œå…³æ³¨ç½‘ç»œæ˜¯å¦‚ä½•å†™çš„å°±å¯ä»¥äº†ã€‚<br />å¤ªç¬¨äº†ï¼Œä¸€å¼€å§‹å®Œå…¨ä¸æ‡‚æ€ä¹ˆå†™</p>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pytroch å¯¹çŸ©é˜µå½¢çŠ¶çš„å˜åŒ–å’Œæ‹¼æ¥</title>
      <link href="2020/11/30/Pytroch%20%E5%AF%B9%E7%9F%A9%E9%98%B5%E5%BD%A2%E7%8A%B6%E7%9A%84%E5%8F%98%E5%8C%96%E5%92%8C%E6%8B%BC%E6%8E%A5/"/>
      <url>2020/11/30/Pytroch%20%E5%AF%B9%E7%9F%A9%E9%98%B5%E5%BD%A2%E7%8A%B6%E7%9A%84%E5%8F%98%E5%8C%96%E5%92%8C%E6%8B%BC%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸»è¦ç”¨åˆ°viewå’Œcatä¸¤ä¸ªå‡½æ•°è¿™é‡Œå°±ç®€å•åœ°ä½¿ç”¨"><a class="markdownIt-Anchor" href="#ä¸»è¦ç”¨åˆ°viewå’Œcatä¸¤ä¸ªå‡½æ•°è¿™é‡Œå°±ç®€å•åœ°ä½¿ç”¨"></a> ä¸»è¦ç”¨åˆ°viewå’Œcatä¸¤ä¸ªå‡½æ•°ï¼Œè¿™é‡Œå°±ç®€å•åœ°ä½¿ç”¨</h2><h3 id="1torchview"><a class="markdownIt-Anchor" href="#1torchview"></a> 1.torch.view()</h3><p>ä¸»è¦æ˜¯ç”¨æ¥æ”¹å˜çŸ©é˜µçš„å½¢æ€ï¼Œæ¯”å¦‚ç°åœ¨æ˜¯ä¸€ä¸ª[5,3]çš„çŸ©é˜µï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨viewå‡½æ•°å°†[5,3]çš„çŸ©é˜µå˜æˆ[3,5] , [1,15]æˆ–ç­‰ç­‰çš„å½¢æ€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">out = torch.tensor([[<span class="number">0.1</span>],[<span class="number">0.2</span>],[<span class="number">0.3</span>]])</span><br><span class="line">print(out.size())</span><br><span class="line">out = out.view(-<span class="number">1</span>, <span class="built_in">len</span>(out))</span><br><span class="line">print(out.size())</span><br><span class="line">print(out) </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">Print:</span><br><span class="line">torch.Size([<span class="number">3</span>, <span class="number">1</span>])</span><br><span class="line">torch.Size([<span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line">tensor([[<span class="number">0.1000</span>, <span class="number">0.2000</span>, <span class="number">0.3000</span>]])       </span><br></pre></td></tr></table></figure><p>viewå¯ä»¥ç›´æ¥ä¼ å…¥è¦å˜æˆçš„å½¢æ€ï¼Œå‡ è¡Œå‡ åˆ—ï¼Œä¹Ÿå¯ä»¥åªå†™è¡Œæˆ–è€…åˆ—ï¼Œå¦ä¸€ä¸ªç”¨-1å³å¯ï¼Œä¼šè‡ªåŠ¨å¡«å……ã€‚</p><h3 id="2torchcat"><a class="markdownIt-Anchor" href="#2torchcat"></a> 2.torch.cat()</h3><p>ç”¨æ¥æ‹¼æ¥ä¸¤ä¸ªçŸ©é˜µï¼Œæ¯”å¦‚è¡Œæ‹¼æ¥æˆ–æ˜¯åˆ—æ‹¼æ¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">x = torch.tensor([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]])</span><br><span class="line">y = torch.tensor([[<span class="number">7</span>, <span class="number">8</span>], [<span class="number">9</span>, <span class="number">10</span>], [<span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line">horizontal_splicing_out = torch.cat((x, y), <span class="number">1</span>)  <span class="comment"># æ¨ªå‘æ‹¼æ¥</span></span><br><span class="line">longitudinal_splicing_out = torch.cat((x, y), <span class="number">0</span>)  <span class="comment"># çºµå‘æ‹¼æ¥</span></span><br><span class="line">print(<span class="string">&#x27;horizontal_splicing_out&#x27;</span>, horizontal_splicing_out)</span><br><span class="line">print(<span class="string">&#x27;longitudinal_splicing_out&#x27;</span>, longitudinal_splicing_out)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">Printï¼š</span><br><span class="line">horizontal_splicing_out tensor([[ <span class="number">1</span>,  <span class="number">2</span>,  <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>,  <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">        [ <span class="number">5</span>,  <span class="number">6</span>, <span class="number">11</span>, <span class="number">12</span>]])</span><br><span class="line">longitudinal_splicing_out tensor([[ <span class="number">1</span>,  <span class="number">2</span>],</span><br><span class="line">        [ <span class="number">3</span>,  <span class="number">4</span>],</span><br><span class="line">        [ <span class="number">5</span>,  <span class="number">6</span>],</span><br><span class="line">        [ <span class="number">7</span>,  <span class="number">8</span>],</span><br><span class="line">        [ <span class="number">9</span>, <span class="number">10</span>],</span><br><span class="line">        [<span class="number">11</span>, <span class="number">12</span>]])</span><br></pre></td></tr></table></figure><p>å¦‚ä»£ç æ‰€ç¤ºï¼Œç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯è¦æ‹¼æ¥çš„ä¸¤ä¸ªçŸ©é˜µï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼Œ1å°±æ˜¯æ¨ªå‘æ‹¼æ¥ï¼Œ0å°±æ˜¯çºµå‘æ‹¼æ¥ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æœºå™¨å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pytorch </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¼–è¯‘åŸç†çš„äº¿ç‚¹ç‚¹ä½œä¸š</title>
      <link href="2020/04/06/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%9A%84%E4%BA%BF%E7%82%B9%E7%82%B9%E4%BD%9C%E4%B8%9A/"/>
      <url>2020/04/06/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%9A%84%E4%BA%BF%E7%82%B9%E7%82%B9%E4%BD%9C%E4%B8%9A/</url>
      
        <content type="html"><![CDATA[<p>ç”¨æŸç§é«˜çº§è¯­è¨€å†™å‡ºï¼š</p><p>(1)å°†æ­£è§„å¼å˜æˆNFAçš„ç®—æ³•ï¼›</p><p>(2)å°†NFAç¡®å®šåŒ–çš„ç®—æ³•ï¼›</p><p>(3) DFAçŠ¶æ€æœ€å°‘åŒ–çš„ç®—æ³•ã€‚</p><p><s>å†™å®Œå°±å®Œäº‹äº† ï¼Œ æ²¡å’‹æµ‹è¯•æ‹‰</s> ğŸ‘</p><p>ä¸çŸ¥é“è€å¸ˆæ˜¯ä¸æ˜¯è¿™ä¸ªæ„æ€å•Šï¼Œå¥½åƒåˆ°æœ€åå°±å‡ ä¸ªäººå†™äº†ğŸ’©ğŸ’©ğŸ’©</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e2</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line"><span class="keyword">char</span> value;</span><br><span class="line"><span class="keyword">int</span> to;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; v[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> id=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"><span class="comment">//-------------------------NFA---------------------------//</span></span><br><span class="line"><span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; st,ed,str;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_nfa</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;s&lt;&lt;<span class="string">&quot;çš„NFAæ˜¯ï¼š&quot;</span>&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=id;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it:v[i])&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;it.value&lt;&lt;<span class="string">&quot;-&gt;&quot;</span>&lt;&lt;it.to&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">connection</span><span class="params">(<span class="keyword">char</span> ch)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> nst,nsst;</span><br><span class="line">nst=st.top();</span><br><span class="line">st.pop();</span><br><span class="line">nsst=st.top();</span><br><span class="line"><span class="keyword">if</span>(ch!=<span class="string">&#x27;@&#x27;</span>) v[nsst].push_back(&#123;ch,nst&#125;);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">run1</span><span class="params">()</span></span>&#123;<span class="comment">// &#x27;(&#x27;</span></span><br><span class="line">ed.push(++id);<span class="comment">//è¿™ä¸ªæ‹¬å·çš„ç»“æŸèŠ‚ç‚¹ </span></span><br><span class="line">str.push(<span class="string">&#x27;(&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">run2</span><span class="params">()</span></span>&#123;<span class="comment">// &#x27;)&#x27;</span></span><br><span class="line"><span class="keyword">int</span> nst=st.top(),nsst;</span><br><span class="line"><span class="keyword">int</span> ned=ed.top();</span><br><span class="line">v[nst].push_back(&#123;<span class="string">&#x27;^&#x27;</span>,ned&#125;);<span class="comment">//&#x27;^&#x27;ä»£è¡¨ç©ºä¸²ï¼Œå…ˆå°†æœ€åä¸€ä¸ªå­—ç¬¦äº§ç”Ÿçš„èŠ‚ç‚¹è¿æ¥åˆ°ç»“æŸèŠ‚ç‚¹ </span></span><br><span class="line"><span class="keyword">char</span> ch=str.top();</span><br><span class="line"><span class="keyword">while</span>(ch!=<span class="string">&#x27;(&#x27;</span>)&#123;<span class="comment">//å°†æ‹¬å·å†…çš„è¿èµ·æ¥ </span></span><br><span class="line">connection(ch);</span><br><span class="line">str.pop();</span><br><span class="line">ch=str.top();</span><br><span class="line">&#125;</span><br><span class="line">str.pop();</span><br><span class="line">str.push(<span class="string">&#x27;@&#x27;</span>);</span><br><span class="line"><span class="comment">//æ‹¬å·è¿™ä¸ªæ•´ä½“çš„å ä½ç¬¦ï¼Œå› ä¸ºå¤„ç†æ‹¬å·æ—¶å¤„ç†äº†è¿™ä¸ªæ•´ä½“ä¸å‰é¢çš„è¿æ¥ï¼Œæ•…è·³è¿‡ </span></span><br><span class="line">ned=ed.top(); </span><br><span class="line">st.push(ned);<span class="comment">//è¿™æ ·å°±å¯è§†æ‹¬å·æ•´ä½“ä¸ºä¸€ä¸ªæ™®é€šå­—ç¬¦äº† </span></span><br><span class="line">ed.pop();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">run3</span><span class="params">()</span></span>&#123;<span class="comment">// &#x27;|&#x27;</span></span><br><span class="line"><span class="keyword">int</span> nst=st.top();</span><br><span class="line"><span class="keyword">int</span> ned=ed.top();</span><br><span class="line">v[nst].push_back(&#123;<span class="string">&#x27;^&#x27;</span>,ned&#125;);</span><br><span class="line"><span class="keyword">char</span> ch=str.top();</span><br><span class="line"><span class="keyword">while</span>(ch!=<span class="string">&#x27;(&#x27;</span> &amp;&amp; ch!=<span class="string">&#x27;S&#x27;</span>)&#123;<span class="comment">//å°†&#x27;|&#x27;å‰çš„è¿æ¥ </span></span><br><span class="line">connection(ch);</span><br><span class="line">str.pop();</span><br><span class="line">ch=str.top();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">run4</span><span class="params">()</span></span>&#123;<span class="comment">// &#x27;*&#x27;</span></span><br><span class="line"><span class="comment">//æœ‰å¦‚a*æˆ–()*å› ä¸ºä¸Šè¿°å¤„ç†éƒ½è§†ä¸ºa </span></span><br><span class="line"><span class="keyword">int</span> nst=st.top();</span><br><span class="line">st.pop();</span><br><span class="line"><span class="keyword">int</span> nsst=st.top();</span><br><span class="line">v[nst].push_back(&#123;<span class="string">&#x27;^&#x27;</span>,nsst&#125;);</span><br><span class="line">v[nsst].push_back(&#123;<span class="string">&#x27;^&#x27;</span>,nst&#125;);</span><br><span class="line">st.push(nst);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">run5</span><span class="params">(<span class="keyword">char</span> c)</span></span>&#123;<span class="comment">// æ™®é€šå­—ç¬¦ </span></span><br><span class="line">str.push(c);</span><br><span class="line">st.push(++id);<span class="comment">//æ˜¯è¿™ä¸ªå­—ç¬¦çš„ç»“æŸï¼Œä¸‹ä¸€ä¸ªå­—ç¬¦çš„å¼€å§‹æ ‡è®° </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">nfa</span><span class="params">()</span></span>&#123;</span><br><span class="line">str.push(<span class="string">&#x27;S&#x27;</span>);</span><br><span class="line">st.push(id);<span class="comment">//å…¨ä¸²çš„å¼€å§‹ä¸º0ï¼Œç»“æŸä¸º1 </span></span><br><span class="line">ed.push(++id);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">char</span> c:s)&#123;</span><br><span class="line"><span class="keyword">if</span>(c==<span class="string">&#x27;(&#x27;</span>) run1(); </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;)&#x27;</span>) run2();</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;|&#x27;</span>) run3();</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(c==<span class="string">&#x27;*&#x27;</span>) run4();</span><br><span class="line"><span class="keyword">else</span> run5(c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> ch=str.top();</span><br><span class="line"><span class="keyword">if</span>(st.top()!=<span class="number">0</span>) v[st.top()].push_back(&#123;<span class="string">&#x27;^&#x27;</span>,<span class="number">1</span>&#125;);</span><br><span class="line"><span class="comment">//åé¢çš„å¼€å§‹å³å‰ä¸²çš„ç»“æŸï¼Œå°†å…¶è¿æ¥åˆ°ç»“æŸæ ‡è®°1 </span></span><br><span class="line"><span class="keyword">while</span>(ch!=<span class="string">&#x27;S&#x27;</span>)&#123; </span><br><span class="line">connection(ch);</span><br><span class="line">str.pop();</span><br><span class="line">ch=str.top();</span><br><span class="line">&#125;</span><br><span class="line">print_nfa();</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="comment">//------------------------DFA--------------------------//</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> did=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; dfav[maxn&lt;&lt;<span class="number">2</span>];<span class="comment">//dfaä¸‹çš„å›¾ </span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">bool</span> fg;<span class="comment">//1è¡¨ç¤ºè¿˜æœ‰ç»ˆæ€ï¼Œåä¹‹æ—  </span></span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; ns;<span class="comment">//é›†åˆ </span></span><br><span class="line">&#125;; </span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>,node &gt; mp;<span class="comment">//dfaä¸­çš„åºå·ï¼Œåºå·åŒ…å«çš„nodeé›†åˆ </span></span><br><span class="line"><span class="keyword">bool</span> vis[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">bool</span> svis[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">char</span>&gt; diff;<span class="comment">//ä¸åŒçš„å­—ç¬¦ </span></span><br><span class="line"><span class="function">node <span class="title">bfs</span><span class="params">(<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; u,<span class="keyword">char</span> c)</span></span>&#123; <span class="comment">//åœ¨åŸå›¾ä¸­ä»ué›†åˆå‡ºå‘åªèƒ½èµ°cçš„é›†åˆ </span></span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> t:u)&#123;</span><br><span class="line">q.push(t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; tv;</span><br><span class="line"><span class="keyword">bool</span> bfg=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line"><span class="keyword">int</span> tp=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it:v[tp])&#123;</span><br><span class="line"><span class="keyword">if</span>(it.value!=c) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(vis[it.to]==<span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">vis[it.to]=<span class="number">1</span>;</span><br><span class="line">tv.insert(it.to);</span><br><span class="line">                    <span class="keyword">if</span>(c==<span class="string">&#x27;^&#x27;</span>) q.push(it.to); </span><br><span class="line"><span class="keyword">if</span>(it.to==<span class="number">1</span>) bfg=<span class="number">1</span>;<span class="comment">//åŒ…å«ç»ˆæ€ </span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> node&#123;bfg,tv&#125;;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; x,<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; y)</span></span>&#123;<span class="comment">//æ¯”è¾ƒä¸¤ä¸ªé›†åˆçš„å…³ç³» </span></span><br><span class="line"><span class="comment">//0ï¼šç›¸åŒ 1ï¼šä¸åŒ </span></span><br><span class="line"><span class="keyword">if</span>((<span class="keyword">int</span>)x.size()!=(<span class="keyword">int</span>)y.size()) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt;::iterator ix,iy;</span><br><span class="line"><span class="keyword">for</span>(ix=x.begin(),iy=y.begin();ix!=x.end();++ix,++iy)&#123;</span><br><span class="line"><span class="keyword">if</span>(*ix!=*iy) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="function">node <span class="title">merge</span><span class="params">(node a,node b)</span></span>&#123;<span class="comment">//åˆå¹¶é›†åˆ </span></span><br><span class="line">node c;</span><br><span class="line"><span class="keyword">if</span>(a.fg || b.fg)c.fg=<span class="number">1</span>;</span><br><span class="line">c.ns.insert(a.ns.begin(),a.ns.end());</span><br><span class="line">c.ns.insert(b.ns.begin(),b.ns.end());</span><br><span class="line"><span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_set</span><span class="params">(<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; s)</span></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;é›†åˆä¸ºï¼š&quot;</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> i:s)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_dfa</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;åºå·é›†åˆï¼š&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=did;++i)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(mp[i].fg) <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;æ˜¯ç»ˆæ€ï¼Œ&quot;</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;ä¸æ˜¯ç»ˆæ€ï¼Œ&quot;</span>; </span><br><span class="line">print_set(mp[i].ns);</span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;DFAæ˜¯ï¼š&quot;</span>&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=did;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it:dfav[i])&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;--&quot;</span>&lt;&lt;it.value&lt;&lt;<span class="string">&quot;-&gt;&quot;</span>&lt;&lt;it.to&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfa</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; nu;</span><br><span class="line">node nd;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=id;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it:v[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(it.value!=<span class="string">&#x27;^&#x27;</span>) diff.insert(it.value);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">nu.insert(<span class="number">0</span>);</span><br><span class="line">nd=bfs(nu,<span class="string">&#x27;^&#x27;</span>);</span><br><span class="line">mp[<span class="number">0</span>]=nd;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">q.push(<span class="number">0</span>);</span><br><span class="line">nu.clear(),svis[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line"><span class="keyword">int</span> tp=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; tpset=mp[tp].ns; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">char</span> c:diff)&#123;<span class="comment">//å…ˆèµ°ä¸€ä¸ªcå†èµ°ä¸€ä¸ªç©º </span></span><br><span class="line">node cnd=bfs(tpset,c);</span><br><span class="line">node knd=bfs(cnd.ns,<span class="string">&#x27;^&#x27;</span>);</span><br><span class="line">knd=merge(cnd,knd);</span><br><span class="line"><span class="keyword">if</span>(!knd.ns.size()) <span class="keyword">continue</span>; <span class="comment">//ç©ºé›†out </span></span><br><span class="line"><span class="keyword">bool</span> type=check(tpset,knd.ns);<span class="comment">//knd.ns:èµ°å‡ºæ¥çš„é›†åˆ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//éªŒè¯æ˜¯å¦äº§ç”Ÿæ–°é›†åˆ 0:ç›¸åŒï¼Œ1ï¼šä¸åŒ </span></span><br><span class="line"><span class="keyword">bool</span> ffg=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it:mp)&#123;</span><br><span class="line"><span class="keyword">if</span>(!check(it.second.ns,knd.ns))&#123;<span class="comment">//ä¸ä»¥å‰çš„é›†åˆç›¸åŒ </span></span><br><span class="line">dfav[tp].push_back(&#123;c,it.first&#125;);</span><br><span class="line">ffg=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>; </span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span>(ffg) <span class="keyword">continue</span>;</span><br><span class="line"><span class="comment">//äº§ç”Ÿäº†æ–°çš„é›†åˆ </span></span><br><span class="line">mp[++did]=knd;</span><br><span class="line">dfav[tp].push_back(&#123;c,did&#125;);</span><br><span class="line">q.push(did); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">print_dfa();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//------------------------Min_DFA--------------------------//</span></span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; miv[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> fa[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; &gt;setv;</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">char</span>,<span class="keyword">int</span>&gt; myhash;<span class="comment">//å­—ç¬¦æ˜ å°„</span></span><br><span class="line"><span class="keyword">int</span> charnum; </span><br><span class="line"><span class="keyword">int</span> matrix[maxn&lt;&lt;<span class="number">1</span>][maxn&lt;&lt;<span class="number">1</span>];<span class="comment">//å˜æ¢çŸ©é˜µ </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">setv.clear();</span><br><span class="line">charnum=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">char</span> c:diff) myhash[c]=++charnum; <span class="comment">//å­—ç¬¦æ˜ å°„ä¸ºæ•°å­— æ„é€ å˜æ¢çŸ©é˜µ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=did;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=charnum;++j) matrix[i][j]=<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=did;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it:dfav[i])&#123;</span><br><span class="line">matrix[i][myhash[it.value]]=it.to;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sec</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> u==fa[u]?u:fa[u]=sec(fa[u]); </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unit</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">x=sec(x),y=sec(y);</span><br><span class="line"><span class="keyword">if</span>(x==y) <span class="keyword">return</span>;</span><br><span class="line">fa[y]=x;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unitset</span><span class="params">(<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; s)</span></span>&#123;<span class="comment">//åˆå¹¶é›†åˆ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> i:s) fa[i]=i;</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt;::iterator it;</span><br><span class="line"><span class="keyword">for</span>(it=s.begin();it!=s.end();++it)&#123;</span><br><span class="line"><span class="keyword">if</span>(it!=s.begin())&#123;</span><br><span class="line"><span class="keyword">int</span> a=*it,b=*(--it);</span><br><span class="line">++it;</span><br><span class="line">unit(a,b);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="built_in">pair</span>&lt;<span class="keyword">bool</span>,<span class="built_in">vector</span>&lt;<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; &gt; &gt; divide(<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; ns,<span class="keyword">char</span> c)&#123;<span class="comment">//æ ¹æ®cæ¥åˆ’åˆ†å­é›† </span></span><br><span class="line"><span class="comment">//1:ä¸å¯æ‹†åˆ†  0å¯æ‹†åˆ†,åˆ™è¿”å›ä¸€ä¸ªé›†åˆç°‡</span></span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; allfa;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; &gt; res;</span><br><span class="line"><span class="keyword">bool</span> fg=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i:ns)&#123;</span><br><span class="line"><span class="keyword">if</span>(matrix[i][myhash[c]]==<span class="number">-1</span>) allfa.insert(<span class="number">-1</span>),fg=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> allfa.insert(sec(i));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(allfa.size()==<span class="number">1</span>) <span class="keyword">return</span> <span class="built_in">make_pair</span>(<span class="number">1</span>,res);</span><br><span class="line"><span class="keyword">if</span>(fg)&#123; <span class="comment">//-1,å³æ²¡æœ‰cï¼Œå•ç‹¬è€ƒè™‘ </span></span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; newset;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i:ns)&#123;</span><br><span class="line"><span class="keyword">if</span>(matrix[i][myhash[c]]==<span class="number">-1</span>) newset.insert(i);</span><br><span class="line">&#125;</span><br><span class="line">res.push_back(newset);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> nfa:allfa)&#123;</span><br><span class="line"><span class="keyword">if</span>(nfa==<span class="number">-1</span>) <span class="keyword">continue</span>; </span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; newset;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i:ns)&#123;</span><br><span class="line"><span class="keyword">if</span>(sec(matrix[i][myhash[c]])==nfa) newset.insert(i); </span><br><span class="line">&#125;</span><br><span class="line">res.push_back(newset);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> nset:res) unitset(nset);<span class="comment">//åˆ†å­é›†ä¹‹åï¼Œé‡æ–°å•ç‹¬åˆå¹¶ </span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">make_pair</span>(<span class="number">0</span>,res);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">pair</span>&lt;<span class="keyword">bool</span>,<span class="built_in">vector</span>&lt;<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; &gt; &gt; check(<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; ns)&#123;<span class="comment">//æ£€éªŒæ¯ä¸ªé›†åˆå˜åŒ–çŠ¶æ€æ˜¯å¦ç›¸åŒ </span></span><br><span class="line"><span class="comment">//1:å¯è§†ä¸ºä¸€æ•´ä½“  0éœ€è¦æ‹†åˆ†,åˆ™è¿”å›ä¸€ä¸ªé›†åˆç°‡ </span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; &gt; res,run;</span><br><span class="line"><span class="keyword">if</span>(ns.size()==<span class="number">1</span>)&#123;<span class="comment">//å•ä¸ªå…ƒç´ æ— æ³•æ‹†åˆ† </span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">make_pair</span>(<span class="number">1</span>,res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt;::iterator it;</span><br><span class="line">run.push_back(ns);</span><br><span class="line"><span class="keyword">bool</span> allflag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>( (<span class="keyword">int</span>)run.size()!=<span class="number">0</span> )&#123;<span class="comment">//ç›´åˆ°æ¯ä¸ªå­é›†éƒ½ä¸å¯åˆ’åˆ† </span></span><br><span class="line"><span class="keyword">bool</span> fg=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; &gt; tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> nset:run)&#123;</span><br><span class="line"><span class="keyword">bool</span> nsetflag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">char</span> c:diff)&#123;</span><br><span class="line"><span class="built_in">pair</span>&lt;<span class="keyword">bool</span>,<span class="built_in">vector</span>&lt;<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; &gt; &gt; p= divide(nset,c);</span><br><span class="line"><span class="keyword">if</span>(p.first==<span class="number">0</span>)&#123;</span><br><span class="line">allflag=<span class="number">0</span>;</span><br><span class="line">nsetflag=<span class="number">0</span>;</span><br><span class="line">tp.insert(tp.end(),p.second.begin(),p.second.end());</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(nsetflag)&#123;<span class="comment">//è¯´æ˜è¿™ä¸ªå­é›†æš‚æ—¶ä¸å¯æ‹†åˆ†äº† </span></span><br><span class="line">res.push_back(nset); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">run=tp;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">return</span> <span class="built_in">make_pair</span>(allflag,res);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">min_dfa</span><span class="params">()</span></span>&#123;<span class="comment">//å¯¹dfavè¿›è¡Œæœ€å°åŒ– </span></span><br><span class="line"><span class="comment">//vector&lt;int&gt; dfav[] è®°å½•äº†å›¾ </span></span><br><span class="line"><span class="comment">//map&lt;int,node&gt; mp è®°å½•äº†ç‚¹çš„ä¿¡æ¯ </span></span><br><span class="line">init();<span class="comment">//åˆå§‹åŒ– </span></span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; end_state,initial_state;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it:mp)&#123;</span><br><span class="line"><span class="keyword">if</span>(it.second.fg)&#123;<span class="comment">//ç»ˆæ€ </span></span><br><span class="line">end_state.insert(it.first);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> initial_state.insert(it.first);<span class="comment">//åˆæ€ </span></span><br><span class="line">&#125;</span><br><span class="line">unitset(initial_state);</span><br><span class="line">unitset(end_state);</span><br><span class="line">setv.push_back(end_state);</span><br><span class="line">setv.push_back(initial_state);</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">bool</span> flag=<span class="number">1</span>; </span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; &gt; tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> nset:setv)&#123;</span><br><span class="line"><span class="built_in">pair</span>&lt;<span class="keyword">bool</span>,<span class="built_in">vector</span>&lt;<span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; &gt; &gt; np=check(nset);</span><br><span class="line"><span class="keyword">if</span>(np.first==<span class="number">0</span>) flag=<span class="number">0</span>;</span><br><span class="line">tp.insert(tp.end(),np.second.begin(),np.second.end());</span><br><span class="line">&#125;</span><br><span class="line">setv=tp;</span><br><span class="line"><span class="keyword">if</span>(flag) <span class="keyword">break</span>;<span class="comment">//å·²ç»å…¨éƒ½ä¸å¯æ‹†åˆ† </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ„å›¾ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> nset:setv)&#123;<span class="comment">//æ¯ä¸ªé›†åˆé€‰ä¸€ä¸ªä»£è¡¨ </span></span><br><span class="line"><span class="keyword">char</span> rep=sec(*(nset.begin()));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> c:diff)&#123;</span><br><span class="line"><span class="keyword">if</span>(matrix[rep][myhash[c]]==<span class="number">-1</span>) <span class="keyword">continue</span>;</span><br><span class="line">miv[rep].push_back(&#123;c,sec(matrix[rep][myhash[c]])&#125;);</span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;è¾“å…¥æ­£è§„å¼ï¼š&quot;</span>;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;s;</span><br><span class="line">nfa(); </span><br><span class="line">dfa();</span><br><span class="line">min_dfa();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">è¾“å…¥æ­£è§„å¼ï¼ša|b*</span></span><br><span class="line"><span class="comment">a|b*çš„NFAæ˜¯ï¼š</span></span><br><span class="line"><span class="comment">0--a-&gt;2</span></span><br><span class="line"><span class="comment">0--^-&gt;3</span></span><br><span class="line"><span class="comment">0--b-&gt;3</span></span><br><span class="line"><span class="comment">2--^-&gt;1</span></span><br><span class="line"><span class="comment">3--^-&gt;0</span></span><br><span class="line"><span class="comment">3--^-&gt;1</span></span><br><span class="line"><span class="comment">åºå·é›†åˆï¼š</span></span><br><span class="line"><span class="comment">0 æ˜¯ç»ˆæ€ï¼Œé›†åˆä¸ºï¼š0 1 3</span></span><br><span class="line"><span class="comment">1 æ˜¯ç»ˆæ€ï¼Œé›†åˆä¸ºï¼š1 2</span></span><br><span class="line"><span class="comment">DFAæ˜¯ï¼š</span></span><br><span class="line"><span class="comment">0--a-&gt;1</span></span><br><span class="line"><span class="comment">0--b-&gt;0</span></span><br><span class="line"><span class="comment">*/</span> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–è¯‘åŸç† </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„ACMä¹‹æ—…</title>
      <link href="2020/01/15/%E6%88%91%E7%9A%84ACM%E4%B9%8B%E6%97%85/"/>
      <url>2020/01/15/%E6%88%91%E7%9A%84ACM%E4%B9%8B%E6%97%85/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>ä»…ä»¥æ­¤æ¥è®°å½•æˆ‘çŸ­æš‚çš„ACMæ—¶å…‰</strong></p><p><strong>ä»ä¸€ä¸ªè’Ÿè’»æˆé•¿ä¸ºä¸€åªå¹´é¾„æ›´å¤§çš„è’Ÿè’»</strong></p></blockquote><p>â€ƒâ€ƒÂ å¤§ä¸€ä¸Šå­¦æœŸï¼Œåœ¨CYçš„â€æ€‚æ¿â€œä¸‹ï¼Œæˆ‘åŠ å…¥äº†é™¢é‡Œçš„ç®—æ³•ç»„ç»‡ï¼Œå¯èƒ½æ˜¯å½“æ—¶çš„è‡ªå·±å¤ªæ— èŠï¼Œæ²¡ä»€ä¹ˆäº‹æƒ…å¯åšï¼Œäºæ˜¯å°±å¼€å§‹å­¦ç®—æ³•å•¦ã€‚åœ¨å®éªŒå®¤é‡Œè®¤è¯†äº†å¾ˆå¤šğŸ‚çš„å°ä¼™ä¼´ï¼ŒåŒ…æ‹¬ä¹‹åçš„é˜Ÿå‹ã€‚</p><p>â€ƒâ€ƒå—åˆ°å¾ˆå¤šäººçš„å¸®åŠ©ï¼Œæˆ‘çš„ç®—æ³•å­¦ä¹ ä¹Ÿæ¸æ¸æ­¥å…¥æ­£è½¨ã€‚ä½†æ˜¯å¯¹äºå¼±æ ¡ï¼Œæˆ‘çŸ¥é“å‚åŠ *CPCå¯¹äºå½“æ—¶çš„æˆ‘æ˜¯å¥¢æœ›ï¼Œä¸€æ˜¯å­¦æ ¡ä¸å¤ªæ”¯æŒï¼ŒäºŒæ˜¯æ²¡æœ‰ç°åœºèµ›çš„åé¢ã€‚å“ï¼Œå½“æ—¶æƒ³ï¼Œåæ­£è¿™äº›å’Œæˆ‘ä¹Ÿæ²¡å•¥å…³ç³»ï¼Œå…ˆå¥½å¥½å­¦å§ã€‚ä¸å­¦å¯èƒ½å°±ä¸ä¼šæœ‰ä¸‹é¢è¿™äº›ç»å†äº†ã€‚ğŸ’©ğŸ’©ğŸ’©</p><h2 id="ç¬¬ä¸€æ¬¡å‚åŠ æ ¡èµ›"><a class="markdownIt-Anchor" href="#ç¬¬ä¸€æ¬¡å‚åŠ æ ¡èµ›"></a> ç¬¬ä¸€æ¬¡å‚åŠ æ ¡èµ›</h2><p><img src="https://i.loli.net/2021/01/08/3Y4itnCVkKq5RcL.jpg" alt="" /></p><p>è¿˜è®°å¾—ï¼Œå‰ä¸€å¤©è¿˜å’ŒCYåƒäº†ä¸€é¡¿ä¸å¤ªå¥½åƒçš„ç«é”…ï¼Œæ‹‰äº†å¥½å‡ å›è‚šå­ã€‚</p><h2 id="ç†¬å¤œæ‰“cfçš„æ—¥å­"><a class="markdownIt-Anchor" href="#ç†¬å¤œæ‰“cfçš„æ—¥å­"></a> ç†¬å¤œæ‰“CFçš„æ—¥å­</h2><p><img src="https://i.loli.net/2021/01/08/EAodOnhKcJCS3iV.jpg" alt="" /></p><p>å‘å¾®ï¼Œä½†æ˜¯ä¸€èµ·è¡¥é¢˜å¾ˆnice</p><h2 id="2019-è“æ¡¥æ¯å›½èµ›åŒ—äº¬"><a class="markdownIt-Anchor" href="#2019-è“æ¡¥æ¯å›½èµ›åŒ—äº¬"></a> 2019 è“æ¡¥æ¯å›½èµ›ï¼ˆåŒ—äº¬ï¼‰</h2><img src="https://i.loli.net/2021/01/08/yJH9adhoi2AQgxq.jpg" style="zoom:30%;" /><p>å’ŒCYå’ŒBJåœ¨åŒ—äº¬è¡—å¤´æ€¥é€Ÿç‹‚å¥”è¿˜æ˜¯é”™è¿‡äº†æ•…å®«çš„é—­å…³æ—¶é—´ï¼Œé—¨å£çœ‹è§ç†Ÿæ‚‰çš„å’•å’•å’•</p><p><img src="https://i.loli.net/2021/01/08/4z1hGx2oNbAfViX.jpg" alt="" /></p><p>åŒ—äº¬å§é“ºå›æ¥çš„ä¸‰å…„å¼Ÿï¼Œè®²é“ç†ï¼Œæˆ‘ç¡å¾—è¿˜æŒºé¦™çš„</p><h2 id="2019-jscpc"><a class="markdownIt-Anchor" href="#2019-jscpc"></a> 2019 JSCPC</h2><p><img src="https://i.loli.net/2021/01/08/uWEIRB9K2hrG4Tf.jpg" alt="" /></p><p>ç¬¬ä¸€æ¬¡ç°åœºèµ›ï¼Œæ²¡æ‰“é“å°±æ˜¯èƒœåˆ©ï¼Œæ²¡æƒ³åˆ°ç¨³æ‰ç¨³æ‰“æ‹¿äº†ä¸€ç­‰ï¼Œå½“å³æ™šä¸Šå¥–åŠ±äº†ä¸€é¡¿ç«é”…ğŸ»</p><h2 id="2019-icpcå—æ˜Œé‚€è¯·èµ›"><a class="markdownIt-Anchor" href="#2019-icpcå—æ˜Œé‚€è¯·èµ›"></a> 2019 ICPCå—æ˜Œé‚€è¯·èµ›</h2><p><img src="https://i.loli.net/2021/01/08/QO8o5pIZT9NLmcu.jpg" alt="" /></p><p><img src="https://i.loli.net/2021/01/08/gBdxusj3H96mCPb.jpg" alt="è¿™æ˜¯BJçš„ä¸»æ„" /></p><p><img src="https://i.loli.net/2021/01/08/TxEkLerubQHIj6d.jpg" alt="" /></p><p>ç¬¬ä¸€æ¬¡å‡ºçœæ‰“ICPCç»“æœå°±è¿™ä¹ˆæƒ¨ï¼Œæ”¶è·äº†ç¬¬ä¸€æšé“ç‰Œï¼ˆ<s>Så¥–</s>ï¼‰ï¼Œä¹Ÿæ¸…æ¥šè®¤è¯†åˆ°äº†è‡ªå·±çš„ä¸è¶³ã€‚</p><h2 id="wannaflyè®­ç»ƒè¥"><a class="markdownIt-Anchor" href="#wannaflyè®­ç»ƒè¥"></a> Wannaflyè®­ç»ƒè¥</h2><img src="https://i.loli.net/2021/01/08/iqmxvcFUBz81y4a.jpg" style="zoom:33%;" /><img src="https://i.loli.net/2021/01/08/rOslGvt2nCgA7oH.jpg" alt="å’Œwlsåˆå½±" style="zoom:50%;" /><img src="https://i.loli.net/2021/01/08/admIjpuCVqQJyfL.jpg" style="zoom:50%;" /><p>è§åˆ°äº†å¾ˆå¤šå·¨ä½¬ï¼Œä¹Ÿè®¤è¯†äº†å¾ˆå¤šä¸€èµ·åŠªåŠ›çš„äººã€‚</p><h2 id="2019-icpcåŒºåŸŸèµ›å—äº¬"><a class="markdownIt-Anchor" href="#2019-icpcåŒºåŸŸèµ›å—äº¬"></a> 2019 ICPCåŒºåŸŸèµ›ï¼ˆå—äº¬ï¼‰</h2><p><img src="https://i.loli.net/2021/01/08/Mmo4Y8SqjRzV56X.jpg" alt="" /></p><img src="https://i.loli.net/2021/01/08/vz8UMQjC7EDI6Tp.jpg" style="zoom:30%;" /><p>æ²¡æœ‰æƒ³è±¡ä¸­çš„ç‹‚å–œï¼Œæ„Ÿè§‰ä¸€åˆ‡éƒ½å€¼äº†</p><h2 id="2019-icpc-ec-final-è¥¿å®‰"><a class="markdownIt-Anchor" href="#2019-icpc-ec-final-è¥¿å®‰"></a> 2019 ICPC EC-Final ï¼ˆè¥¿å®‰ï¼‰</h2><img src="https://i.loli.net/2021/01/08/7wDgbnHoOGx9B3J.jpg" style="zoom:30%;" /><p><img src="https://i.loli.net/2021/01/08/adQhJZrD4tXL5AF.jpg" alt="" /></p><img src="https://i.loli.net/2021/01/08/g7r9WG4dyVPDte1.jpg" style="zoom:33%;" /><p>æœ€åä¸€æˆ˜é€€å½¹äº†ï¼Œæ²¡æ‰“é“å°±æ˜¯èƒœåˆ©ã€‚å¿«ä¹çš„æ—¶å…‰æ€»æ˜¯çŸ­æš‚</p><h2 id="ç»ˆ"><a class="markdownIt-Anchor" href="#ç»ˆ"></a> ç»ˆ</h2><img src="https://i.loli.net/2021/01/08/CpHJvS2qyaT91b4.jpg" style="zoom:33%;" /><p>â€ƒâ€ƒè™½ç„¶åªæ‰“äº†å‡ åœºç°åœºèµ›ï¼Œæ„Ÿè§‰æ‰å¼€å§‹å°±ç»“æŸäº†ï¼Œä½†æ˜¯è¿‡ç¨‹çœŸçš„å¾ˆå……å®ï¼ˆ<s>å› ä¸ºä¸€ç›´åœ¨åˆ·é¢˜å•ŠğŸ’©</s>ï¼‰ã€‚æ„Ÿè°¢ä¸€è·¯å¸®åŠ©æˆ‘çš„ä¼™ä¼´è¿˜æœ‰ä¸€èµ·åŠªåŠ›çš„é˜Ÿå‹ã€‚</p><blockquote><p><strong>You will tell the story on when these dreams will come true</strong></p><p><strong>ä½ èƒ½è®²è¿°è¿™ä¸ªæ•…äº‹ï¼Œåœ¨æ¢¦å®ç°ä¹‹æ—¶</strong></p><p><strong>So letâ€™s keep on walking 'til we reach the end</strong></p><p><strong>æ‰€ä»¥ç»§ç»­å‰è¡Œå§ï¼Œç›´åˆ°å°½å¤´</strong></p></blockquote><blockquote><p><em>æ¯”èµ›ç»“æŸåå°±æ— ç¼è¡”æ¥è¿›å…¥äº†å¤‡ç ”é˜¶æ®µï¼Œè¿™ä¸ªå…¶å®ä¹Ÿæ˜¯æœ€è¿‘æ‰å†™çš„ï¼Œ<s>éƒ½2021äº†ï¼Œæ—¶é—´çœŸå¿«</s></em></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> é—²æ¥å­å­ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç‰¹æ®Šçš„SPFAåˆ¤æ–­è´Ÿç¯</title>
      <link href="2019/11/15/%E7%89%B9%E6%AE%8A%E7%9A%84SPFA%E5%88%A4%E6%96%AD%E8%B4%9F%E7%8E%AF/"/>
      <url>2019/11/15/%E7%89%B9%E6%AE%8A%E7%9A%84SPFA%E5%88%A4%E6%96%AD%E8%B4%9F%E7%8E%AF/</url>
      
        <content type="html"><![CDATA[<p><strong><a href="https://www.cnblogs.com/myx12345/p/6212893.html">åˆ«äººçš„ä»‹ç»</a></strong></p><p><strong>å€Ÿç”¨äº†å¤§ä½¬çš„æ€è€ƒï¼š</strong></p><p>èµ‹æ‰€æœ‰dis[i]=0ï¼Œè·‘æœ€é•¿è·¯ï¼Œå¦‚æœæŸä¸ªå…ƒç´ å…¥é˜Ÿæ¬¡æ•°è¶…è¿‡ç‚¹æ•°å°±è¯´æ˜æœ‰æ­£ç¯ã€‚</p><p>ä½¿ç”¨DFSç‰ˆæœ¬çš„SPFAåšæ¯”BFSå¿«10å€ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p><p>è®ºæ–‡é‡Œé«˜å¤§ä¸Šçœ‹ä¸æ‡‚ï¼Œè’Ÿè’»ç”¨ç®€å•ç²—æš´çš„æ–¹æ³•æƒ³äº†ä¸€ä¸‹ï¼š</p><p>å¦‚æœæŸä¸ªç¯æœ‰Kä¸ªç‚¹ç»„æˆï¼ŒBFSä¼šä»Kä¸ªç‚¹ä¸­çš„æŸä¸ªç‚¹å¼€å§‹ï¼Œæ¯æ¬¡éƒ½æ¢ä¸€ä¸ªç‚¹æ‰©å±•ä¸€æ¬¡ï¼Œå¯èƒ½è¾¾åˆ°Oï¼ˆN*K^2ï¼‰</p><p>DFSåˆ™åªé€‰å…¶ä¸­çš„ä¸€ä¸ªç‚¹ä¸æ–­æ‰©å±•ï¼ŒKæ¬¡å°±èƒ½ä½¿è‡ªå·±é‡æ–°å…¥é˜Ÿä¸€æ¬¡ï¼Œè¿™æ ·å°±æ˜¯Oï¼ˆN*Kï¼‰</p><p>å­°ä¼˜å­°åŠ£ä¸€çœ¼åˆ†æ˜ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">3e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//il int Add(int &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(int &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> T,n,M1,M2;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span><span class="keyword">int</span> to,w;&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; G[N];</span><br><span class="line"> </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;++i) G[i].clear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> w)</span></span>&#123;</span><br><span class="line">    G[u].push_back(&#123;v,w&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> ins[N],dis[N],t[N];</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">ck</span><span class="params">()</span></span>&#123; <span class="comment">//åˆ¤æ–­è´Ÿç¯ </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;++i) ins[i]=dis[i]=t[i]=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; stk;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;++i)&#123;</span><br><span class="line">        ins[i]=<span class="number">1</span>,t[i]=<span class="number">1</span>;</span><br><span class="line">        stk.push(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> u;</span><br><span class="line">    <span class="keyword">while</span>(!stk.empty())&#123;</span><br><span class="line">        u=stk.top(),stk.pop();</span><br><span class="line">        ins[u]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> tp:G[u])&#123;</span><br><span class="line">            <span class="keyword">int</span> to=tp.to,w=tp.w;</span><br><span class="line">            <span class="keyword">if</span>(dis[to]&gt;dis[u]+w)&#123;</span><br><span class="line">                dis[to]=dis[u]+w;</span><br><span class="line">                <span class="keyword">if</span>(!ins[to])&#123;</span><br><span class="line">                    stk.push(to);</span><br><span class="line">                    ins[to]=<span class="number">1</span>,t[to]++;</span><br><span class="line">                    <span class="keyword">if</span>(t[to]==n+<span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//æœ‰è´Ÿç¯ </span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//æ— è´Ÿç¯ </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//    std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) L - LRU Algorithm Gym - 102394L (æ¨¡æ‹Ÿ+å­—å…¸æ ‘)</title>
      <link href="2019/11/14/(CodeForces)%20L%20-%20LRU%20Algorithm%20Gym-102394L/"/>
      <url>2019/11/14/(CodeForces)%20L%20-%20LRU%20Algorithm%20Gym-102394L/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://codeforces.com/gym/102394/problem/L">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> ç»™å®šä¸€ä¸ªnä¸ªæ•°çš„æ•°å­—åºåˆ—ï¼Œç¬¬iä¸ªæ•°ä¸ºa[i]ï¼Œæ¯æ¬¡æ“ä½œä¼šå°†a[i]æ’å…¥æˆ–ç§»åˆ°æœ€å‰ç«¯ï¼š</p><p>1.è‹¥a[i]å·²ç»åœ¨åºåˆ—ä¸­å‡ºç°è¿‡ï¼Œåˆ™å°†å…¶ç§»åˆ°æœ€å‰ç«¯ï¼Œå¹¶åˆ é™¤åŸå‡ºç°ä½ç½®</p><p>2.è‹¥a[i]æœªå‡ºç°è¿‡ï¼Œåˆ™ç›´æ¥å°†å…¶æ’å…¥åˆ°æœ€å‰ç«¯</p><p>æœ‰qä¸ªè¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®ç»™å‡ºä¸€ä¸ªé•¿åº¦ä¸ºmçš„åºåˆ—ï¼Œé—®æ˜¯å¦åœ¨æŸä¸ªæ—¶åˆ»è¯¢é—®åºåˆ—ä¸æ“ä½œçš„åºåˆ—ç›¸åŒï¼Œå¿½ç•¥åç¼€çš„0</p><p>ï¼ˆå°±æ˜¯æ“ä½œç³»ç»Ÿä¸­çš„LRUï¼Œåˆšå¥½åœ¨å­¦</p><p><em><strong>è§£ï¼š</strong></em> ç”±äºç‰©ç†å—çš„ä¸ªæ•°ä¸çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥å¿½ç•¥æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„åˆ é™¤æ“ä½œï¼Œåªæ‰§è¡Œä¸Šè¿°å°†å…¶ç§»åŠ¨åˆ°æœ€å‰é¢çš„æ“ä½œï¼›åœ¨æ¨¡æ‹Ÿä¹‹å‰æˆ‘ä»¬å°†qæ¬¡æŸ¥è¯¢çš„åºåˆ—æ’å…¥å­—å…¸æ ‘ï¼Œè¿™é‡Œçš„å­—å…¸æ ‘ç”¨unordered_mapæ¥æ“ä½œå°±å¥½äº†ï¼Œè®°å½•æ¯ä¸ªåºåˆ—çš„ç»“æŸèŠ‚ç‚¹ï¼›ç„¶åæˆ‘ä»¬å°±æ¨¡æ‹Ÿlruï¼Œæ¯ä¸€æ¬¡å¾ªç¯ï¼Œå°±åœ¨å­—å…¸æ ‘ä¸­è·‘ä¸€æ¬¡å½“å‰çš„listï¼Œè·‘åˆ°çš„ç‚¹å°±visä¸º1ï¼Œè¿™æ ·æˆ‘ä»¬æœ€ååªè¦çœ‹ç»“æŸèŠ‚ç‚¹å°±å¯ä»¥äº†ï¼ˆç”¨stlæ˜¯å¾ˆæ–¹ä¾¿ï¼Œä¸è¿‡è¢«å¡äº†å°±å¾ˆéš¾å—äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//il int Add(int &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(int &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> T,n,q,a[N],len[N],b[N];</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; tr[N];</span><br><span class="line"><span class="keyword">int</span> cnt,root;</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">newnode</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ++cnt;</span><br><span class="line">    tr[cnt].clear(),vis[cnt]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cnt=<span class="number">0</span>;</span><br><span class="line">    root=newnode();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> rt=root;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=len;++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!tr[rt].count(b[i]))&#123;</span><br><span class="line">            tr[rt][b[i]]=newnode();</span><br><span class="line">        &#125;</span><br><span class="line">        rt=tr[rt][b[i]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> rt;<span class="comment">//ç»“ç‚¹åæ ‡</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> ls[N];</span><br><span class="line"><span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt;::iterator mp[N];</span><br><span class="line"><span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt; li;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">    li.clear();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) mp[a[i]]=li.end();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(mp[a[i]]!=li.end())&#123;</span><br><span class="line">            li.erase(mp[a[i]]);</span><br><span class="line">        &#125;</span><br><span class="line">        li.push_front(a[i]);</span><br><span class="line">        mp[a[i]]=li.begin();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">int</span> rt=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> u:li)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!tr[rt].count(u))&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            rt=tr[rt][u];</span><br><span class="line">            vis[rt]=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(tr[rt].count(<span class="number">0</span>))&#123;</span><br><span class="line">            rt=tr[rt][<span class="number">0</span>];</span><br><span class="line">            vis[rt]=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ£€æŸ¥æ‰€æœ‰æŸ¥è¯¢ä¸²çš„ç»“æŸèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(vis[ls[i]]) <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//    std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line">    read(T);</span><br><span class="line">    <span class="keyword">while</span>(T--)&#123;</span><br><span class="line">        init();</span><br><span class="line">        read(n),read(q);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) read(a[i]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;++i)&#123;</span><br><span class="line">            read(len[i]);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=len[i];++j) read(b[j]);</span><br><span class="line">            ls[i]=add(len[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        run();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
            <tag> å­—å…¸æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) F - Rectangles Gym - 101982F (çº¿æ®µæ ‘+æ‰«æçº¿)</title>
      <link href="2019/10/16/(CodeForces)%20F%20-%20Rectangles%20Gym%20-%20101982F/"/>
      <url>2019/10/16/(CodeForces)%20F%20-%20Rectangles%20Gym%20-%20101982F/</url>
      
        <content type="html"><![CDATA[<p><em><strong>é¢˜æ„ï¼š</strong></em> ç»™å‡ºnä¸ªçŸ©å½¢çš„ä½ç½®ï¼Œé—®é‡å å¥‡æ•°ä¸ªçŸ©å½¢çš„é¢ç§¯ä¹‹å’Œ</p><p><em><strong>è§£ï¼š</strong></em> æ±‚é¢ç§¯å¹¶çš„æ—¶å€™æ˜¯åªè¦çº¿æ®µè¢«è¦†ç›–çš„æ¬¡æ•°å¤§äº0ï¼Œé‚£å°±æ˜¯ç®—è¿›å»çš„ï¼Œè€Œè¿™ä¸ªåªè¦å¥‡æ•°è¦†ç›–ï¼Œæ‰€ä»¥åªè¦å¼‚æˆ–å°±å¯ä»¥äº†ï¼Œåªæœ‰å¥‡æ•°æ¬¡è¦†ç›–çš„çº¿æ®µï¼Œæˆ‘ä»¬æ‰è€ƒè™‘äº†ã€‚ï¼ˆæŠŠæ‰«æçº¿çš„çŸ¥è¯†éƒ½å¿˜äº†ï¼Œé‚£æ—¶å€™ä¹Ÿæ²¡å­¦å¥½</p><p><strong><a href="https://blog.csdn.net/xianpingping/article/details/83032798">å­¦ä¹ æ‰«æçº¿</a></strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(int &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(int &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    ll l,r,h;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> node &amp;tp )<span class="keyword">const</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> h&lt;tp.h;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;line[N&lt;&lt;<span class="number">1</span>];</span><br><span class="line">ll s[N&lt;&lt;<span class="number">1</span>],sz[N&lt;&lt;<span class="number">3</span>];</span><br><span class="line"><span class="keyword">bool</span> lz[N&lt;&lt;<span class="number">3</span>];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">cg</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;<span class="comment">//åè½¬</span></span><br><span class="line">    <span class="keyword">int</span> all=s[r]-s[l];</span><br><span class="line">    sz[rt]=all-sz[rt];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(lz[rt])&#123;</span><br><span class="line">        <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        cg(rt&lt;&lt;<span class="number">1</span>,l,mid),cg(rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid,r);</span><br><span class="line">        lz[rt&lt;&lt;<span class="number">1</span>]^=<span class="number">1</span>,lz[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]^=<span class="number">1</span>;</span><br><span class="line">        lz[rt]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> L,<span class="keyword">int</span> R)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=s[l] &amp;&amp; R&gt;=s[r])&#123;</span><br><span class="line">        cg(rt,l,r);</span><br><span class="line">        lz[rt]^=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    pushdown(rt,l,r);</span><br><span class="line">    <span class="keyword">if</span>(L&lt;s[mid]) update(l,mid,rt&lt;&lt;<span class="number">1</span>,L,R);</span><br><span class="line">    <span class="keyword">if</span>(R&gt;s[mid]) update(mid,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,L,R);</span><br><span class="line">    sz[rt]=sz[rt&lt;&lt;<span class="number">1</span>]+sz[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//    std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="keyword">int</span> x1,y1,x2,y2,cnt=<span class="number">0</span>,tot=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;x1,&amp;y1,&amp;x2,&amp;y2);</span><br><span class="line">        line[++cnt]=&#123;x1,x2,y1&#125;;</span><br><span class="line">        line[++cnt]=&#123;x1,x2,y2&#125;;</span><br><span class="line">        s[++tot]=x1,s[++tot]=x2;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(line+<span class="number">1</span>,line+cnt+<span class="number">1</span>);</span><br><span class="line">    sort(s+<span class="number">1</span>,s+tot+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> all=unique(s+<span class="number">1</span>,s+tot+<span class="number">1</span>)-(s+<span class="number">1</span>);</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt<span class="number">-1</span>;++i)&#123;</span><br><span class="line">        update(<span class="number">1</span>,all,<span class="number">1</span>,line[i].l,line[i].r);</span><br><span class="line">        ans+=sz[<span class="number">1</span>]*(line[i+<span class="number">1</span>].h-line[i].h);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) J - Shopping Gym - 101201J (çº¿æ®µæ ‘+å–æ¨¡)</title>
      <link href="2019/10/15/(CodeForces)%20J%20-%20Shopping%20Gym%20-%20101201J/"/>
      <url>2019/10/15/(CodeForces)%20J%20-%20Shopping%20Gym%20-%20101201J/</url>
      
        <content type="html"><![CDATA[<p><em><strong>é¢˜æ„</strong></em> :æ¯æ¬¡ç»™ä½ v ,l,r,è®©ä½ å°†vé€ä¸ªå¯¹åŒºé—´l~rçš„æ•°å–æ¨¡ï¼Œæ±‚æœ€åç»“æœã€‚</p><p><em><strong>è§£ï¼š</strong></em> å¯¹äºä¸€ä¸ªæ•°å–æ¨¡ï¼Œé‚£åªæœ‰æ¨¡æ•°å°äºç­‰äºå®ƒå–æ¨¡æ‰æœ‰æ„ä¹‰ï¼Œè¦ä¸ç„¶å–æ¨¡çš„ç»“æœè¿˜æ˜¯å®ƒæœ¬èº«ï¼Œæ‰€ä»¥æˆ‘ä»¬å–åŒºé—´ä¸­ç¬¬ä¸€ä¸ªå°äºç­‰äºè¯¥æ•°çš„ï¼Œå¹¶ä»ä»–çš„ä½ç½®å‘åç»§ç»­æ‰¾ï¼Œå› ä¸ºå–æ¨¡æ¯æ¬¡ä¸‹é™ä¸€åŠï¼Œç„¶åæ‰¾åŒºé—´å°äºè¯¥æ•°æœ€å…ˆå‡ºç°çš„çº¿æ®µæ ‘å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e5</span>+<span class="number">7</span>;</span><br><span class="line">ll a[N];</span><br><span class="line">ll mi[<span class="number">4</span>*N];</span><br><span class="line">  <span class="keyword">int</span> n,q;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line">    mi[rt]=min(mi[rt&lt;&lt;<span class="number">1</span>],mi[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l==r) &#123;</span><br><span class="line">        mi[rt]=a[l];</span><br><span class="line">   <span class="comment">//     cout&lt;&lt;l&lt;&lt;&quot; &quot;&lt;&lt;r&lt;&lt;&quot; :&quot;&lt;&lt;a[l]&lt;&lt;endl;</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(rt&lt;&lt;<span class="number">1</span>,l,mid);</span><br><span class="line">    build(rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid+<span class="number">1</span>,r);</span><br><span class="line">    pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    ll id,w;</span><br><span class="line">&#125;tp,qu;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R,ll X)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(mi[rt]&gt;X) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(r&lt;L || R&lt;l) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">   <span class="comment">//     cout&lt;&lt;rt&lt;&lt;&quot; &quot;&lt;&lt;l&lt;&lt;&quot; &quot;&lt;&lt;r&lt;&lt;&quot; :&quot;&lt;&lt;mi[rt]&lt;&lt;endl;</span></span><br><span class="line">        qu=&#123;l,mi[rt]&#125;;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(mi[rt&lt;&lt;<span class="number">1</span>]&lt;=X &amp;&amp; L&lt;=mid)&#123;</span><br><span class="line">        query(rt&lt;&lt;<span class="number">1</span>,l,mid,L,R,X);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(qu.id!=<span class="number">0</span> &amp;&amp; qu.w!=<span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(mi[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]&lt;=X &amp;&amp; R&gt;mid)&#123;</span><br><span class="line">        query(rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid+<span class="number">1</span>,r,L,R,X);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">check</span><span class="params">(ll v,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> L=l,R=r;</span><br><span class="line">    ll nv=v;</span><br><span class="line">    <span class="keyword">while</span>(L&lt;=R)&#123;</span><br><span class="line">        qu=&#123;<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">        query(<span class="number">1</span>,<span class="number">1</span>,n,L,R,nv);</span><br><span class="line">   <span class="comment">//     cout&lt;&lt;qu.id&lt;&lt;&quot; &quot;&lt;&lt;qu.w&lt;&lt;endl;</span></span><br><span class="line">        <span class="keyword">if</span>(qu.id==<span class="number">0</span> &amp;&amp; qu.w==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            nv%=qu.w;</span><br><span class="line">            <span class="keyword">if</span>(nv==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            L=qu.id;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> nv;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;q);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    build(<span class="number">1</span>,<span class="number">1</span>,n);</span><br><span class="line">    <span class="keyword">while</span>(q--) &#123;</span><br><span class="line">        ll v;<span class="keyword">int</span> l,r;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld%d%d&quot;</span>,&amp;v,&amp;l,&amp;r);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,check(v,l,r));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P3121 [USACO15FEB]å®¡æŸ¥ï¼ˆé»„é‡‘ï¼‰Censoring (Gold) (ACè‡ªåŠ¨æœº)</title>
      <link href="2019/10/12/(Luogu)%20P3121%20%5BUSACO15FEB%5D%E5%AE%A1%E6%9F%A5%EF%BC%88%E9%BB%84%E9%87%91%EF%BC%89/"/>
      <url>2019/10/12/(Luogu)%20P3121%20%5BUSACO15FEB%5D%E5%AE%A1%E6%9F%A5%EF%BC%88%E9%BB%84%E9%87%91%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://www.luogu.org/problem/P3121">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> ç»™ä½ åŒ¹é…ä¸²ï¼Œç„¶åæœ‰å¾ˆå¤šæ¨¡å¼ä¸²ï¼Œè¦åˆ é™¤åŒ¹é…ä¸²ä¸­æ‰€æœ‰çš„æ¨¡å¼ä¸²ï¼ˆåˆ é™¤çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°æ–°çš„æ¨¡å¼ä¸²</p><p><em><strong>è§£ï¼š</strong></em> åŒ¹é…çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸ªæ ˆå»è®°å½•ï¼Œä¸€æ—¦åŒ¹é…ï¼Œå‡å»é•¿åº¦ï¼Œå°±å¯ä»¥å›å»åˆ°åˆ é™¤åæœ€åä¸€ä¸ªå­—ç¬¦çš„èŠ‚ç‚¹å¤„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(int &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(int &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> son[<span class="number">26</span>],fail,flag;</span><br><span class="line">&#125;tr[N];</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="keyword">char</span> stk[N],str[N],ss[N];</span><br><span class="line"><span class="keyword">int</span> stpos[N],n;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">1</span>,top=<span class="number">0</span>;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">char</span> *s)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=<span class="number">1</span>,len=<span class="built_in">strlen</span>(s),id;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!tr[root].son[id])&#123;</span><br><span class="line">tr[root].son[id]=++cnt;</span><br><span class="line">&#125;</span><br><span class="line">root=tr[root].son[id];</span><br><span class="line">&#125; </span><br><span class="line">tr[root].flag=len;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">getFail</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;++i) tr[<span class="number">0</span>].son[i]=<span class="number">1</span>;</span><br><span class="line">q.push(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> u,ufail,v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">u=q.front(),ufail=tr[u].fail,q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;++i)&#123;</span><br><span class="line">v=tr[u].son[i];</span><br><span class="line"><span class="keyword">if</span>(!v)&#123;</span><br><span class="line">tr[u].son[i]=tr[ufail].son[i];</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">tr[v].fail=tr[ufail].son[i];</span><br><span class="line">q.push(v);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">match</span><span class="params">(<span class="keyword">char</span> *s)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> len=<span class="built_in">strlen</span>(s),root=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">stk[++top]=s[i];</span><br><span class="line">stpos[top]=root;<span class="comment">//ä¸Šä¸€ä¸ªèŠ‚ç‚¹ </span></span><br><span class="line">root=tr[root].son[s[i]-<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(tr[root].flag)&#123;</span><br><span class="line">top-=tr[root].flag,root=stpos[top+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,str);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,ss);</span><br><span class="line">add(ss);</span><br><span class="line">&#125;</span><br><span class="line">getFail();</span><br><span class="line">match(str);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=top;++i)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>,stk[i]);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACè‡ªåŠ¨æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) D å¾·è‚²åˆ†åšå¼ˆæ”¿æ²»è¯¾ (ç½‘ç»œæµ)</title>
      <link href="2019/10/12/(Nowcoder)%20D%20%E5%BE%B7%E8%82%B2%E5%88%86%E5%8D%9A%E5%BC%88%E6%94%BF%E6%B2%BB%E8%AF%BE/"/>
      <url>2019/10/12/(Nowcoder)%20D%20%E5%BE%B7%E8%82%B2%E5%88%86%E5%8D%9A%E5%BC%88%E6%94%BF%E6%B2%BB%E8%AF%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://ac.nowcoder.com/acm/contest/1114/D">ä¼ é€é—¨</a></h1><p>è§£ï¼šè¿™ä¸ªé¢˜ä¸€å¼€å§‹çœŸæ²¡æƒ³åˆ°ç½‘ç»œæµï¼Œåªè€ƒè™‘æ•°å­—ä¸ä¸€æ ·çš„éª°å­ï¼ˆç”¨äºŒè¿›åˆ¶å°±å¯ä»¥åŒºåˆ†äº†ï¼‰ï¼Œç„¶åè¿™äº›éª°å­å¯ä»¥å˜æˆä¸åŒçš„æ•°å­—ï¼Œå¯¹äºæ¯ä¸€æ¬¡è¯¢é—®ï¼Œæˆ‘ä»¬è€ƒè™‘å»ºå›¾å°±å¯ä»¥äº†ï¼Œä»æºç‚¹åˆ°æ¯ä¸€ä¸ªéª°å­è¿ä¸€æ¡æµé‡ä¸ºéª°å­ä¸ªæ•°ï¼Œéª°å­å¯ä»¥ç»™ä»–èƒ½å˜å¾—æ•°å­—è¿ä¸€æ¡æ— ç©·å¤§å¾—è¾¹ï¼Œç„¶åæ¯ä¸ªæ•°å­—è¿ä¸€æ¡å¯¹äºè¿™æ¬¡è¯¢é—®ä»–æ‰€éœ€è¦ä¸ªæ•°çš„è¾¹åˆ°æ±‡ç‚¹å³å¯ã€‚</p><p>ä¸€å¼€å§‹Täº†ï¼Œä»¥ä¸ºæ˜¯vectoråˆå§‹åŒ–çš„åŸå› </p><p>æ¢è‡ªå·±å‰å‘æ˜Ÿçš„æ¿å­ï¼Œæ‰å‘ç°è‡ªå·±æ¿å­å‡äº†ï¼Œé‡ç°æäº†ä¸€ä¸ª</p><p>æœ€åå‘ç°æ˜¯è‡ªå·±å»ºäº†å¾ˆå¤šé‡è¾¹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(int &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(int &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to, cap, rev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; eg[N];</span><br><span class="line"><span class="keyword">int</span> dep[N], arc[N],n,q,s=<span class="number">60</span>,t=<span class="number">550</span>;</span><br><span class="line"><span class="keyword">int</span> num[<span class="number">1005</span>];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=s; i&lt;=t; ++i) eg[i].clear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[f].pb(edge &#123;t,w,(<span class="keyword">int</span>)eg[t].size()&#125;);</span><br><span class="line">eg[t].pb(edge &#123;f,<span class="number">0</span>,(<span class="keyword">int</span>)eg[f].size()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dep, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dep));</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">q.push(s);</span><br><span class="line">dep[s]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">v=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[e.to]==<span class="number">-1</span>) &#123;</span><br><span class="line">dep[e.to]=dep[v]+<span class="number">1</span>;</span><br><span class="line">q.push(e.to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> f)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(v==t)    <span class="keyword">return</span> f;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=arc[v]; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[v]+<span class="number">1</span>==dep[e.to]) &#123;</span><br><span class="line">d=dfs(e.to,t,min(f, e.cap));</span><br><span class="line"><span class="keyword">if</span> (d&gt;<span class="number">0</span>) &#123;</span><br><span class="line">e.cap -= d;</span><br><span class="line">eg[e.to][e.rev].cap+=d;</span><br><span class="line"><span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">bfs(s);</span><br><span class="line"><span class="keyword">if</span> (dep[t]==<span class="number">-1</span>) <span class="keyword">return</span> flow;</span><br><span class="line"><span class="built_in">memset</span>(arc,<span class="number">0</span>,<span class="keyword">sizeof</span>(arc));</span><br><span class="line"><span class="keyword">while</span> ((d=dfs(s,t,inf))&gt;<span class="number">0</span>) &#123;</span><br><span class="line">flow+=d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> str[<span class="number">10</span>],sq[<span class="number">2000005</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a[<span class="number">10</span>];</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; all;</span><br><span class="line"><span class="keyword">int</span> nd[<span class="number">10</span>],base=<span class="number">515</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;q);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,str);</span><br><span class="line"><span class="keyword">int</span> len=<span class="built_in">strlen</span>(str),sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line">sum+=(<span class="number">1</span>&lt;&lt;(str[i]-<span class="string">&#x27;1&#x27;</span>));</span><br><span class="line">&#125;</span><br><span class="line">num[sum]++;<span class="comment">//è®°å½•ç›¸åŒç±»å‹éª°å­ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">if</span>(all.find(sum)==all.end()) &#123;</span><br><span class="line">all.insert(sum);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line">a[str[i]-<span class="string">&#x27;0&#x27;</span>].pb(sum);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(q--) &#123;</span><br><span class="line">init(),ms(nd,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,sq);</span><br><span class="line"><span class="keyword">int</span> len=<span class="built_in">strlen</span>(sq);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line">nd[sq[i]-<span class="string">&#x27;0&#x27;</span>]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> to:all) &#123;</span><br><span class="line">add(s,to,num[to]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">9</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!nd[i]) <span class="keyword">continue</span>;</span><br><span class="line">add(i+base,t,nd[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> fr:a[i]) &#123;</span><br><span class="line">add(fr,i+base,inf);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dinic(s,t)==len) <span class="built_in">printf</span>(<span class="string">&quot;dyf\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;zzk\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">5e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">8e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(int &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(int &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to,nex,cap,flow;</span><br><span class="line">&#125; edge[M];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Dinic</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> n,s,t,cur[N],d[N],head[N],tol;</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> _n,<span class="keyword">int</span> _s,<span class="keyword">int</span> <span class="keyword">_t</span>)</span> </span>&#123;</span><br><span class="line">n=_n,s=_s,t=<span class="keyword">_t</span>,tol=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) head[i]=<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">edge[tol].to=v,edge[tol].cap=c,edge[tol].flow=<span class="number">0</span>;</span><br><span class="line">edge[tol].nex=head[u],head[u]=tol++;</span><br><span class="line">edge[tol].to=u,edge[tol].cap=<span class="number">0</span>,edge[tol].flow=<span class="number">0</span>;</span><br><span class="line">edge[tol].nex=head[v],head[v]=tol++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> que[N],front,tail;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) vis[i]=<span class="literal">false</span>;</span><br><span class="line">front=<span class="number">0</span>,tail=<span class="number">-1</span>,que[++tail]=s,vis[s]=<span class="literal">true</span>,d[s]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(front&lt;=tail) &#123;</span><br><span class="line"><span class="keyword">int</span> x=que[front++];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=head[x]; ~i; i=edge[i].nex) &#123;</span><br><span class="line">Edge&amp; e=edge[i];</span><br><span class="line"><span class="keyword">if</span>(!vis[e.to]&amp;&amp;e.cap&gt;e.flow) &#123;</span><br><span class="line">vis[e.to]=<span class="literal">true</span>;</span><br><span class="line">d[e.to]=d[x]+<span class="number">1</span>;</span><br><span class="line">que[++tail]=e.to;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> vis[t];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x==t || a==<span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line"><span class="keyword">int</span> flow=<span class="number">0</span>,f;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span>&amp; i=cur[x]; ~i; i=edge[i].nex) &#123;</span><br><span class="line">Edge&amp; e=edge[i];</span><br><span class="line"><span class="keyword">if</span>(d[x]+<span class="number">1</span>==d[e.to] &amp;&amp; (f=dfs(e.to,min(a,e.cap-e.flow)))&gt;<span class="number">0</span>) &#123;</span><br><span class="line">e.flow+=f,edge[i^<span class="number">1</span>].flow-=f;</span><br><span class="line">flow+=f,a-=f;</span><br><span class="line"><span class="keyword">if</span>(a==<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Maxflow</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(bfs()) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) cur[i]=head[i];</span><br><span class="line">flow+=dfs(s,inf);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line">&#125; dinic;</span><br><span class="line"><span class="keyword">char</span> str[<span class="number">10</span>],sq[<span class="number">2000005</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; a[<span class="number">10</span>];</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; all;</span><br><span class="line"><span class="keyword">int</span> nd[<span class="number">10</span>],n,Q,num[<span class="number">1000</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> s=<span class="number">0</span>,t=<span class="number">650</span>,base=<span class="number">600</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;Q);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,str);</span><br><span class="line"><span class="keyword">int</span> len=<span class="built_in">strlen</span>(str),sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line">sum+=(<span class="number">1</span>&lt;&lt;(str[i]-<span class="string">&#x27;1&#x27;</span>));</span><br><span class="line">&#125;</span><br><span class="line">num[sum]++;<span class="comment">//è®°å½•ç›¸åŒç±»å‹éª°å­ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">if</span>(all.find(sum)==all.end()) &#123;</span><br><span class="line">all.insert(sum);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line">a[str[i]-<span class="string">&#x27;0&#x27;</span>].pb(sum);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(Q--) &#123;</span><br><span class="line">dinic.init(t+<span class="number">5</span>,s,t);</span><br><span class="line">ms(nd,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,sq);</span><br><span class="line"><span class="keyword">int</span> len=<span class="built_in">strlen</span>(sq);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line">nd[sq[i]-<span class="string">&#x27;0&#x27;</span>]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> to:all) &#123;</span><br><span class="line">dinic.add(s,to,num[to]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">9</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!nd[i]) <span class="keyword">continue</span>;</span><br><span class="line">dinic.add(i+base,t,nd[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> fr:a[i]) &#123;</span><br><span class="line">dinic.add(fr,i+base,inf);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dinic.Maxflow()==len) <span class="built_in">printf</span>(<span class="string">&quot;dyf\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;zzk\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œæµ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(2019 CCPC ç§¦çš‡å²›) A - Angle Beats (è®¡ç®—å‡ ä½•)</title>
      <link href="2019/10/10/(2019%20CCPC%20%E7%A7%A6%E7%9A%87%E5%B2%9B)%20A%20-%20Angle%20Beats/"/>
      <url>2019/10/10/(2019%20CCPC%20%E7%A7%A6%E7%9A%87%E5%B2%9B)%20A%20-%20Angle%20Beats/</url>
      
        <content type="html"><![CDATA[<p><em><strong>è§£ï¼š</strong></em> æ²¡åšè¿‡å‡ ä½•é¢˜ï¼Œä½†è¿˜æ˜¯çœ‹äº†è¿™ä¸ªé¢˜ï¼Œæ€æƒ³è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œåˆ†ä¸¤ç±»ï¼Œä¸€ä¸ªå°±æ˜¯ä»¥è¯¢é—®ç‚¹ä¸ºç›´è§’ç‚¹ï¼Œå†é€‰å‡ºä¸€ä¸ªç‚¹æ±‚å‡ºä¸€ä¸ªæ–œç‡ï¼Œç„¶åæ±‚åœ¨å¦ä¸€æ¡è¾¹ä¸Šçš„ç‚¹ï¼›ç¬¬äºŒç±»å°±æ˜¯è¯¢é—®ç‚¹ä¸æ˜¯ç›´è§’ç‚¹ï¼Œé‚£å°±å…¶ä»–çš„ç‚¹ä½œä¸ºç›´è§’ç‚¹ï¼Œæ¥æ›´æ–°è¿™qæ¬¡è¯¢é—®çš„ç‚¹ã€‚</p><p>ç„¶åå°±æ˜¯æ€ä¹ˆå†™ä¸Tå‘¢ï¼Œçœ‹åˆ°ä¸€ç§mapç»´æŠ¤çš„å†™æ³•å¾ˆå¦™å•Šï¼Œé”®å€¼ä¸ºå‘é‡ï¼Œå°±æ˜¯æ–œç‡ï¼Œç„¶åå€¼å°±æ˜¯ä¸ªæ•°ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„å‘é‡éƒ½å˜åˆ°ä¸€äºŒè±¡é™ï¼Œå› ä¸ºå¯¹äºä¸€æ¡è¾¹ï¼Œé¡ºæ—¶é’ˆçš„ç›´è§’å’Œé€†æ—¶é’ˆçš„ç›´è§’éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åœ¨è¿™å°†å…¶å½’ä¸ºä¸€ç±»ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ï¼ˆ-x,-yï¼‰è½¬åŒ–å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e3</span>+<span class="number">5</span>; </span><br><span class="line"><span class="comment">//il int Add(int &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(int &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">ll x,y;</span><br><span class="line"><span class="function">il node <span class="title">change</span><span class="params">()</span><span class="keyword">const</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;<span class="number">0</span> || (x==<span class="number">0</span> &amp;&amp; y&lt;<span class="number">0</span>)) <span class="keyword">return</span> &#123;-x,-y&#125;;</span><br><span class="line"><span class="keyword">return</span> &#123;x,y&#125;;</span><br><span class="line">&#125;</span><br><span class="line">node <span class="keyword">operator</span> -(<span class="keyword">const</span> node &amp;tp) <span class="keyword">const</span>&#123; <span class="comment">//ä¿è¯åœ¨ä¸€äºŒè±¡é™ï¼Œè§’åº¦å‡å°180ï¼Œä½†æ±‚å¾—ç›´è§’ï¼Œæ‰€ä»¥ä¸å½±å“ </span></span><br><span class="line"><span class="keyword">return</span> &#123;x-tp.x,y-tp.y&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> node &amp;tp)<span class="keyword">const</span>&#123;<span class="comment">//è§’åº¦ä»å°åˆ°å¤§ </span></span><br><span class="line">node na=change(),nb=tp.change();</span><br><span class="line"><span class="keyword">return</span> na.x*nb.y &lt; na.y*nb.x;</span><br><span class="line">&#125;</span><br><span class="line">&#125;a[N],qu[N];</span><br><span class="line"><span class="built_in">map</span>&lt;node,<span class="keyword">int</span>&gt; mp; </span><br><span class="line"><span class="keyword">int</span> n,q,ans[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;q;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i].x&gt;&gt;a[i].y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;qu[i].x&gt;&gt;qu[i].y;</span><br><span class="line">&#125;</span><br><span class="line">node k;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;++i)&#123;<span class="comment">//è¯¢é—®ç‚¹ä½œä¸ºç›´è§’ç‚¹ </span></span><br><span class="line">mp.clear(); </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line">mp[a[j]-qu[i]]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line">k=a[j]-qu[i];</span><br><span class="line">k=&#123;-k.y,k.x&#125;;</span><br><span class="line">ans[i]+=mp[k];</span><br><span class="line">&#125;</span><br><span class="line">ans[i]/=<span class="number">2</span>;<span class="comment">//å› ä¸ºä¸€ä¸ªç›´è§’è¢«ç®—äº†ä¸¤é </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;<span class="comment">//è¯¢é—®ç‚¹ä¸ä½œä¸ºç›´è§’ç‚¹ </span></span><br><span class="line">mp.clear(); </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(i!=j) mp[a[j]-a[i]]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=q;++j)&#123;</span><br><span class="line">k=qu[j]-a[i];</span><br><span class="line">k=&#123;-k.y,k.x&#125;;</span><br><span class="line">ans[j]+=mp[k];</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;++i) <span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—å‡ ä½• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P3950 éƒ¨è½å†²çª (LCT || æ ‘é“¾å‰–åˆ†)</title>
      <link href="2019/10/05/(Luogu)%20P3950%20%E9%83%A8%E8%90%BD%E5%86%B2%E7%AA%81%20(LCT%20%20%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86)/"/>
      <url>2019/10/05/(Luogu)%20P3950%20%E9%83%A8%E8%90%BD%E5%86%B2%E7%AA%81%20(LCT%20%20%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86)/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://www.luogu.org/problem/P3950">ä¼ é€é—¨</a></h1><h2 id="1-lctè§£å†³"><a class="markdownIt-Anchor" href="#1-lctè§£å†³"></a> 1. LCTè§£å†³</h2><p><em><strong>è§£ï¼š</strong></em> LCTè§£å†³è¿™ä¸ªå°±éå¸¸ç›´æ¥äº†ï¼Œç›´æ¥æ–­è¾¹è¿è¾¹ï¼Œæ£€æŸ¥ä¸€ä¸‹è¿é€šæ€§å°±è¡Œäº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ls ch[x][0]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rs ch[x][1]</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">3e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//il int Add(int &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(int &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> f[N],ch[N][<span class="number">2</span>],v[N],s[N],st[N],sz[N];</span><br><span class="line"><span class="keyword">bool</span> r[N];</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">isroot</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> ch[f[x]][<span class="number">0</span>]==x || ch[f[x]][<span class="number">1</span>]==x; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">sz[x]=sz[ls]+sz[rs]+<span class="number">1</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">swap(ls,rs),r[x]^=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(r[x])&#123;</span><br><span class="line"><span class="keyword">if</span>(ls) reverse(ls);</span><br><span class="line"><span class="keyword">if</span>(rs) reverse(rs);</span><br><span class="line">r[x]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> y=f[x],z=f[y],k=(ch[y][<span class="number">1</span>]==x),w=ch[x][!k];</span><br><span class="line"><span class="keyword">if</span>(isroot(y))ch[z][ch[z][<span class="number">1</span>]==y]=x;</span><br><span class="line">ch[x][!k]=y,ch[y][k]=w;</span><br><span class="line"><span class="keyword">if</span>(w) f[w]=y;</span><br><span class="line">f[y]=x,f[x]=z;</span><br><span class="line">pushup(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> y=x,z=<span class="number">0</span>;</span><br><span class="line">st[++z]=y;</span><br><span class="line"><span class="keyword">while</span>(isroot(y)) st[++z]=y=f[y];</span><br><span class="line"><span class="keyword">while</span>(z) pushdown(st[z--]);</span><br><span class="line"><span class="keyword">while</span>(isroot(x))&#123;</span><br><span class="line">y=f[x],z=f[y];</span><br><span class="line"><span class="keyword">if</span>(isroot(y)) rotate((ch[y][<span class="number">0</span>]==x)^(ch[z][<span class="number">0</span>]==y)?x:y);</span><br><span class="line">rotate(x);</span><br><span class="line">&#125;</span><br><span class="line">pushup(x);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">access</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> y=<span class="number">0</span>;x;x=f[y=x])&#123;</span><br><span class="line">splay(x),rs=y,pushup(x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">makeroot</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">access(x),splay(x);</span><br><span class="line">reverse(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">findroot</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//æŸ¥æ‰¾åœ¨åŸæ ‘çš„æ ¹ </span></span><br><span class="line">access(x),splay(x);</span><br><span class="line"><span class="keyword">while</span>(ls) pushdown(x),x=ls;</span><br><span class="line">splay(x);</span><br><span class="line"><span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">split</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">makeroot(x);</span><br><span class="line">access(y),splay(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¿è¯åˆæ³•çš„æƒ…å†µä¸‹ </span></span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">link</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">makeroot(x),f[x]=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">cut</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">split(x,y);</span><br><span class="line">f[x]=ch[y][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">char</span> op[<span class="number">2</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> u,v;</span><br><span class="line">&#125;q[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">read(n),read(m);</span><br><span class="line"><span class="keyword">int</span> x,y,cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line">read(x),read(y);</span><br><span class="line">link(x,y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(m--)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,op);</span><br><span class="line"><span class="keyword">if</span>(op[<span class="number">0</span>]==<span class="string">&#x27;Q&#x27;</span>)&#123;</span><br><span class="line">read(x),read(y);</span><br><span class="line"><span class="keyword">if</span>(findroot(x)==findroot(y)) <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(op[<span class="number">0</span>]==<span class="string">&#x27;C&#x27;</span>)&#123;</span><br><span class="line">read(x),read(y);</span><br><span class="line">q[++cnt]=&#123;x,y&#125;;</span><br><span class="line">cut(x,y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">read(x);</span><br><span class="line">link(q[x].u,q[x].v);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-æ ‘é“¾å‰–åˆ†è§£å†³"><a class="markdownIt-Anchor" href="#2-æ ‘é“¾å‰–åˆ†è§£å†³"></a> 2. æ ‘é“¾å‰–åˆ†è§£å†³</h2><p><em><strong>è§£ï¼š</strong></em> å½“è¾¹ä¸Šæœ‰æˆ˜äº‰æ—¶ï¼Œé‚£å°±å°†è¿™æ¡è¾¹+1ï¼ŒæŸ¥è¯¢xèƒ½å¦åˆ°yï¼Œå°±æ˜¯æŸ¥è¯¢xåˆ°yçš„è·¯å¾„æƒå€¼å’Œæ˜¯å¦ä¸º0ï¼Œæ ‘å‰–æœ¬æ¥ç»´æŠ¤ç‚¹ï¼Œæˆ‘ä»¬å°†æ¯æ¡è¾¹åˆ†ç»™è¾¹ä¸Šæ·±åº¦è¾ƒå¤§çš„ä¸€ä¸ªç‚¹ä¸Šï¼Œæ— è®ºæ˜¯ä¿®æ”¹è¿˜æ˜¯æŸ¥è¯¢æ“ä½œï¼Œå…ˆå…¨éƒ¨ç®—ä¸Šï¼Œç„¶ååªè¦å¯¹xï¼Œyçš„æœ€è¿‘å…¬å…±ç¥–å…ˆå–æ¶ˆä»–çš„æ“ä½œå°±å¯ä»¥äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mid ((l+r)&gt;&gt;1)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">3e5</span>+<span class="number">5</span>; </span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[N]; </span><br><span class="line"><span class="keyword">int</span> n,m,dep[N],sz[N],son[N],fa[N],id[N],bel[N],cnt;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> ff)</span></span>&#123;</span><br><span class="line">fa[x]=ff,dep[x]=dep[ff]+<span class="number">1</span>,sz[x]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> mx=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> to:G[x])&#123;</span><br><span class="line"><span class="keyword">if</span>(to==ff) <span class="keyword">continue</span>;</span><br><span class="line">dfs1(to,x);</span><br><span class="line">sz[x]+=sz[to];</span><br><span class="line"><span class="keyword">if</span>(sz[to]&gt;mx) son[x]=to,mx=sz[to];</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> topx)</span></span>&#123;</span><br><span class="line">id[x]=++cnt,bel[x]=topx;</span><br><span class="line"><span class="keyword">if</span>(!son[x]) <span class="keyword">return</span> ;</span><br><span class="line">dfs2(son[x],topx);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> to:G[x])&#123;</span><br><span class="line"><span class="keyword">if</span>(to==fa[x] || to==son[x]) <span class="keyword">continue</span>;</span><br><span class="line">dfs2(to,to);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> lz[N&lt;&lt;<span class="number">2</span>],s[N&lt;&lt;<span class="number">2</span>],tsz[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(lz[rt])&#123;</span><br><span class="line">lz[rt&lt;&lt;<span class="number">1</span>]+=lz[rt],lz[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=lz[rt];</span><br><span class="line">s[rt&lt;&lt;<span class="number">1</span>]+=tsz[rt&lt;&lt;<span class="number">1</span>]*lz[rt];</span><br><span class="line">s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=tsz[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]*lz[rt];</span><br><span class="line">lz[rt]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">tsz[rt]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">build(l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">tsz[rt]=tsz[rt&lt;&lt;<span class="number">1</span>]+tsz[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> C)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l &amp;&amp; r&lt;=R)&#123;</span><br><span class="line">s[rt]+=C*tsz[rt],lz[rt]+=C;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">pushdown(rt);</span><br><span class="line"><span class="keyword">if</span>(L&lt;=mid) update(l,mid,rt&lt;&lt;<span class="number">1</span>,L,R,C);</span><br><span class="line"><span class="keyword">if</span>(R&gt;mid) update(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,L,R,C);</span><br><span class="line">s[rt]=s[rt&lt;&lt;<span class="number">1</span>]+s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> L,<span class="keyword">int</span> R)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l &amp;&amp; r&lt;=R)&#123;</span><br><span class="line"><span class="keyword">return</span> s[rt];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">pushdown(rt);</span><br><span class="line"><span class="keyword">if</span>(L&lt;=mid) ans+=query(l,mid,rt&lt;&lt;<span class="number">1</span>,L,R);</span><br><span class="line"><span class="keyword">if</span>(R&gt;mid) ans+=query(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,L,R);</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">r_update</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> w)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(bel[x]!=bel[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[bel[x]]&lt;dep[bel[y]]) swap(x,y);</span><br><span class="line">update(<span class="number">1</span>,n,<span class="number">1</span>,id[bel[x]],id[x],w);</span><br><span class="line">x=fa[bel[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&gt;dep[y]) swap(x,y);</span><br><span class="line">update(<span class="number">1</span>,n,<span class="number">1</span>,id[x],id[y],w);</span><br><span class="line">update(<span class="number">1</span>,n,<span class="number">1</span>,id[x],id[x],-w);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">r_ask</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(bel[x]!=bel[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[bel[x]]&lt;dep[bel[y]]) swap(x,y);</span><br><span class="line">res+=query(<span class="number">1</span>,n,<span class="number">1</span>,id[bel[x]],id[x]);</span><br><span class="line">x=fa[bel[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&gt;dep[y]) swap(x,y);</span><br><span class="line">res+=query(<span class="number">1</span>,n,<span class="number">1</span>,id[x],id[y]);</span><br><span class="line">res-=query(<span class="number">1</span>,n,<span class="number">1</span>,id[x],id[x]);</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> op[<span class="number">2</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> u,v;</span><br><span class="line">&#125;q[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">read(n),read(m);</span><br><span class="line"><span class="keyword">int</span> x,y,tot=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line">read(x),read(y);</span><br><span class="line">G[x].pb(y),G[y].pb(x);</span><br><span class="line">&#125;</span><br><span class="line">dfs1(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">dfs2(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">while</span>(m--)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,op);</span><br><span class="line"><span class="keyword">if</span>(op[<span class="number">0</span>]==<span class="string">&#x27;Q&#x27;</span>)&#123;</span><br><span class="line">read(x),read(y);</span><br><span class="line"><span class="keyword">if</span>(r_ask(x,y)==<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(op[<span class="number">0</span>]==<span class="string">&#x27;C&#x27;</span>)&#123;</span><br><span class="line">read(x),read(y);</span><br><span class="line">q[++tot]=&#123;x,y&#125;;</span><br><span class="line">r_update(x,y,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">read(x);</span><br><span class="line">r_update(q[x].u,q[x].v,<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘é“¾å‰–åˆ† </tag>
            
            <tag> lct </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LCTåŠ¨æ€æ ‘-åŸºç¡€æ¨¡æ¿ï¼ˆluogu P3690ï¼‰</title>
      <link href="2019/10/04/LCT%E5%8A%A8%E6%80%81%E6%A0%91-%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/"/>
      <url>2019/10/04/LCT%E5%8A%A8%E6%80%81%E6%A0%91-%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="å­¦ä¹ æ¥è‡ª"><a class="markdownIt-Anchor" href="#å­¦ä¹ æ¥è‡ª"></a> <a href="https://www.cnblogs.com/flashhu/p/8324551.html">å­¦ä¹ æ¥è‡ª</a></h1><h1 id="p3690-æ¨¡æ¿link-cut-tree-åŠ¨æ€æ ‘"><a class="markdownIt-Anchor" href="#p3690-æ¨¡æ¿link-cut-tree-åŠ¨æ€æ ‘"></a> <a href="https://www.luogu.org/problem/P3690">P3690 ã€æ¨¡æ¿ã€‘Link Cut Tree ï¼ˆåŠ¨æ€æ ‘ï¼‰</a></h1><p>ç»™å®šnä¸ªç‚¹ä»¥åŠæ¯ä¸ªç‚¹çš„æƒå€¼ï¼Œè¦ä½ å¤„ç†æ¥ä¸‹æ¥çš„mä¸ªæ“ä½œã€‚æ“ä½œæœ‰4ç§ã€‚æ“ä½œä»0åˆ°3ç¼–å·ã€‚ç‚¹ä»1åˆ°nç¼–å·ã€‚</p><p>0ï¼šåæ¥ä¸¤ä¸ªæ•´æ•°(xï¼Œy)ï¼Œä»£è¡¨è¯¢é—®ä»xåˆ°yçš„è·¯å¾„ä¸Šçš„ç‚¹çš„æƒå€¼çš„xorå’Œã€‚ä¿è¯xåˆ°yæ˜¯è”é€šçš„ã€‚</p><p>1ï¼šåæ¥ä¸¤ä¸ªæ•´æ•°(xï¼Œy)ï¼Œä»£è¡¨è¿æ¥xåˆ°yï¼Œè‹¥xåˆ°yå·²ç»è”é€šåˆ™æ— éœ€è¿æ¥ã€‚</p><p>2ï¼šåæ¥ä¸¤ä¸ªæ•´æ•°(xï¼Œy)ï¼Œä»£è¡¨åˆ é™¤è¾¹(xï¼Œy)ï¼Œä¸ä¿è¯è¾¹(xï¼Œy)å­˜åœ¨ã€‚</p><p>3ï¼šåæ¥ä¸¤ä¸ªæ•´æ•°(xï¼Œy)ï¼Œä»£è¡¨å°†ç‚¹xä¸Šçš„æƒå€¼å˜æˆyã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ls ch[x][0]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rs ch[x][1]</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">3e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//il int Add(int &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(int &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> f[N],ch[N][<span class="number">2</span>],v[N],s[N],st[N];</span><br><span class="line"><span class="keyword">bool</span> r[N];</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">isroot</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦ä¸ºä¸€ä¸ªSplayçš„æ ¹</span></span><br><span class="line"><span class="keyword">return</span> ch[f[x]][<span class="number">0</span>]==x || ch[f[x]][<span class="number">1</span>]==x; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//ä¸Šä¼ ä¿¡æ¯</span></span><br><span class="line">s[x]=s[ls]^s[rs]^v[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//ç¿»è½¬</span></span><br><span class="line">swap(ls,rs),r[x]^=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//åˆ¤æ–­å¹¶é‡Šæ”¾æ‡’æ ‡è®°</span></span><br><span class="line"><span class="keyword">if</span>(r[x])&#123;</span><br><span class="line"><span class="keyword">if</span>(ls) reverse(ls);</span><br><span class="line"><span class="keyword">if</span>(rs) reverse(rs);</span><br><span class="line">r[x]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//ä¸€æ¬¡æ—‹è½¬</span></span><br><span class="line"><span class="keyword">int</span> y=f[x],z=f[y],k=(ch[y][<span class="number">1</span>]==x),w=ch[x][!k];</span><br><span class="line"><span class="keyword">if</span>(isroot(y))ch[z][ch[z][<span class="number">1</span>]==y]=x;</span><br><span class="line">ch[x][!k]=y,ch[y][k]=w;</span><br><span class="line"><span class="keyword">if</span>(w) f[w]=y;</span><br><span class="line">f[y]=x,f[x]=z;</span><br><span class="line">pushup(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//æ‰€æœ‰æ“ä½œçš„ç›®æ ‡éƒ½æ˜¯è¯¥Splayçš„æ ¹</span></span><br><span class="line"><span class="keyword">int</span> y=x,z=<span class="number">0</span>;</span><br><span class="line">st[++z]=y;</span><br><span class="line"><span class="keyword">while</span>(isroot(y)) st[++z]=y=f[y];</span><br><span class="line"><span class="keyword">while</span>(z) pushdown(st[z--]);</span><br><span class="line"><span class="keyword">while</span>(isroot(x))&#123;</span><br><span class="line">y=f[x],z=f[y];</span><br><span class="line"><span class="keyword">if</span>(isroot(y)) rotate((ch[y][<span class="number">0</span>]==x)^(ch[z][<span class="number">0</span>]==y)?x:y);</span><br><span class="line">rotate(x);</span><br><span class="line">&#125;</span><br><span class="line">pushup(x);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">access</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//è®¿é—®</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> y=<span class="number">0</span>;x;x=f[y=x])&#123;</span><br><span class="line">splay(x),rs=y,pushup(x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">makeroot</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//å°†xæ¢æˆæ ¹</span></span><br><span class="line">access(x),splay(x);</span><br><span class="line">reverse(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">findroot</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//æ‰¾æ ¹ï¼ˆåœ¨çœŸå®çš„æ ‘ä¸­çš„ï¼‰</span></span><br><span class="line">access(x),splay(x);</span><br><span class="line"><span class="keyword">while</span>(ls) pushdown(x),x=ls;</span><br><span class="line">splay(x);</span><br><span class="line"><span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">split</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;æå–è·¯å¾„ </span><br><span class="line">makeroot(x);</span><br><span class="line">access(y),splay(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">link</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="comment">//è¿è¾¹</span></span><br><span class="line">makeroot(x);</span><br><span class="line"><span class="keyword">if</span>(findroot(y)!=x) f[x]=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">cut</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="comment">//æ–­è¾¹</span></span><br><span class="line">makeroot(x);</span><br><span class="line"><span class="keyword">if</span>(findroot(y)==x &amp;&amp; f[y]==x &amp;&amp; !ch[y][<span class="number">0</span>])&#123;</span><br><span class="line">f[y]=ch[x][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">pushup(x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">//ä¿è¯åˆæ³•çš„æƒ…å†µä¸‹ </span></span><br><span class="line"><span class="comment">il void link(int x,int y)&#123;</span></span><br><span class="line"><span class="comment">makeroot(x),f[x]=y;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">il void cut(int x,int y)&#123;</span></span><br><span class="line"><span class="comment">split(x,y);</span></span><br><span class="line"><span class="comment">f[x]=ch[y][0]=0;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">int</span> n,m,type,x,y;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">read(n),read(m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) read(v[i]);</span><br><span class="line"><span class="keyword">while</span>(m--) &#123;</span><br><span class="line">read(type),read(x),read(y);</span><br><span class="line"><span class="keyword">switch</span>(type) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">split(x,y);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,s[y]);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">link(x,y);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">cut(x,y);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">splay(x);</span><br><span class="line">v[x]=y;<span class="comment">//å…ˆæŠŠxè½¬ä¸Šå»å†ä¿®æ”¹ï¼Œä¸ç„¶ä¼šå½±å“Splayä¿¡æ¯çš„æ­£ç¡®æ€§</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lct </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èƒŒåŒ…ä¹è®² 11é¢˜</title>
      <link href="2019/09/21/%E8%83%8C%E5%8C%85%E4%B9%9D%E8%AE%B2%2011%E9%A2%98/"/>
      <url>2019/09/21/%E8%83%8C%E5%8C%85%E4%B9%9D%E8%AE%B2%2011%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="èšèšè§†é¢‘è®²çš„å¤ªå¥½äº†"><a class="markdownIt-Anchor" href="#èšèšè§†é¢‘è®²çš„å¤ªå¥½äº†"></a> èšèšè§†é¢‘è®²çš„å¤ªå¥½äº†</h1><h1 id="å‰å…­è®²"><a class="markdownIt-Anchor" href="#å‰å…­è®²"></a> <a href="https://www.bilibili.com/video/av33930433/?p=1">å‰å…­è®²</a> <a href="https://www.bilibili.com/video/av34467850/?p=2">æœ€åä¸‰è®²</a></h1><p>é‡æ–°å¤ä¹ äº†ä¸€éèƒŒåŒ…é—®é¢˜ã€‚</p><h2 id="é¢˜ç›®å…¨åœ¨è¿™äº†"><a class="markdownIt-Anchor" href="#é¢˜ç›®å…¨åœ¨è¿™äº†"></a> <a href="https://www.acwing.com/problem/">é¢˜ç›®å…¨åœ¨è¿™äº†</a></h2><h2 id="1-01èƒŒåŒ…é—®é¢˜"><a class="markdownIt-Anchor" href="#1-01èƒŒåŒ…é—®é¢˜"></a> 1.  <em><strong>01èƒŒåŒ…é—®é¢˜</strong></em></h2>   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> dp[N],n,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,v,w;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;v&gt;&gt;w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=v;--j) dp[j]=max(dp[j],dp[j-v]+w);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-å®Œå…¨èƒŒåŒ…"><a class="markdownIt-Anchor" href="#2-å®Œå…¨èƒŒåŒ…"></a> 2. <em><strong>å®Œå…¨èƒŒåŒ…</strong></em></h2>   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> dp[N],n,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,v,w;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;v&gt;&gt;w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=v;j&lt;=m;++j) dp[j]=max(dp[j],dp[j-v]+w);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-å¤šé‡èƒŒåŒ…é—®é¢˜-i"><a class="markdownIt-Anchor" href="#3-å¤šé‡èƒŒåŒ…é—®é¢˜-i"></a> 3. <em><strong>å¤šé‡èƒŒåŒ…é—®é¢˜ I</strong></em></h2>   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">105</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> dp[N],n,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,v,w,s;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;v&gt;&gt;w&gt;&gt;s;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=v;--j)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;=s &amp;&amp; k*v&lt;=j;++k)&#123;</span><br><span class="line">dp[j]=max(dp[j],dp[j-k*v]+k*w);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-å¤šé‡èƒŒåŒ…é—®é¢˜-ii"><a class="markdownIt-Anchor" href="#4-å¤šé‡èƒŒåŒ…é—®é¢˜-ii"></a> 4. <em><strong>å¤šé‡èƒŒåŒ…é—®é¢˜ II</strong></em></h2><p>äºŒè¿›åˆ¶æ‹†åˆ†ä¼˜åŒ–ï¼Œç„¶åä½œä¸º01èƒŒåŒ…æ¥è€ƒè™‘å³å¯ï¼Œå°†sæ‹†æˆ2è¿›åˆ¶è¡¨ç¤ºï¼Œæœ€åå¤šçš„é‚£ä¸ªéƒ¨åˆ†å•ç‹¬æ‹¿å‡ºæ¥ã€‚</p>   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> v,w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; a;</span><br><span class="line"><span class="keyword">int</span> n,m,dp[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,v,w,s;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;v&gt;&gt;w&gt;&gt;s;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=s;k*=<span class="number">2</span>)&#123;</span><br><span class="line">a.pb(&#123;v*k,w*k&#125;);</span><br><span class="line">s-=k;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(s) a.pb(&#123;v*s,w*s&#125;);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it:a)&#123;</span><br><span class="line"><span class="keyword">int</span> v=it.v,w=it.w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=v;--j) dp[j]=max(dp[j],dp[j-v]+w);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[m]&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-å¤šé‡èƒŒåŒ…é—®é¢˜-iii"><a class="markdownIt-Anchor" href="#5-å¤šé‡èƒŒåŒ…é—®é¢˜-iii"></a> 5. <strong>å¤šé‡èƒŒåŒ…é—®é¢˜ III</strong></h2><p>å•è°ƒé˜Ÿåˆ—ä¼˜åŒ–ï¼Œå¯¹äºä¸€ä¸ªä½“ç§¯ä¸ºvçš„ç‰©å“ï¼Œæˆ‘ä»¬è€ƒè™‘åˆ°ä»–çš„æ›´æ–°ï¼Œå°†ä½“ç§¯%vçš„å€¼è¿›è¡Œåˆ†ç»„ï¼Œä¸€ä¸ªç»„ä¹‹é—´æ‰ä¼šæœ‰é€’æ¨å…³ç³»ï¼Œè€Œä¸åŒçš„ç»„ä¹‹é—´æ˜¯ä¸ä¼šæœ‰æ›´æ–°å’Œé€’æ¨å…³ç³»çš„ã€‚è€ƒè™‘å¯¹äºä¸€ä¸ªdp[j] æ˜¯ä»ä¸Šä¸€å±‚dp[j-v]+w,</p><p>dp[j-2<em>v]+2</em>wâ€¦â€¦.æ›´æ–°æ¥ï¼Œé‚£å¯¹äºdp[j+v]å°±æ˜¯ä»ä¸Šä¸€å±‚dp[j]+wï¼Œdp[j-v]+2<em>wâ€¦â€¦æ›´æ–°è€Œæ¥ï¼Œå…¶å®å°±æ˜¯å¯¹äºdp[j],dp[j+v]å°±æ˜¯å¹³ç§»çš„ä¸€æ ¼ï¼Œç„¶åæ€»ä½“+wï¼›ä½†æ˜¯åŸæ¥æ•°çš„å¤§å°å…³ç³»å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥è¿™é‡Œç”¨å•è°ƒé˜Ÿåˆ—ç»´æŠ¤å³å¯ï¼Œåªæ˜¯åŠ çš„x</em>wå‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™ä¸ªæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®—ä¸jå·®å‡ ä¸ªvï¼Œå°±å¯ä»¥å¾—å‡ºäº†å˜›ã€‚</p>   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,m,dp[N][<span class="number">2</span>],q[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">bool</span> fg=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> tt=<span class="number">-1</span>,hh=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,v,w,s;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;v&gt;&gt;w&gt;&gt;s;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;v;++j)&#123;<span class="comment">//å°†ä½“ç§¯æŒ‰%vçš„å€¼è¿›è¡Œåˆ†ç±» </span></span><br><span class="line">tt=<span class="number">-1</span>,hh=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=j;k&lt;=m;k+=v)&#123;</span><br><span class="line">dp[k][fg]=dp[k][fg^<span class="number">1</span>];</span><br><span class="line"><span class="keyword">while</span>(hh&lt;=tt &amp;&amp; k-s*v&gt;q[hh]) hh++;</span><br><span class="line"><span class="keyword">if</span>(hh&lt;=tt) dp[k][fg]=max(dp[k][fg],dp[q[hh]][fg^<span class="number">1</span>]+(k-q[hh])/v*w);</span><br><span class="line"><span class="keyword">while</span>(hh&lt;=tt &amp;&amp; dp[q[tt]][fg^<span class="number">1</span>]-(q[tt]-j)/v*w &lt;= dp[k][fg^<span class="number">1</span>]-(k-j)/v*w) tt--; </span><br><span class="line">q[++tt]=k;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">fg^=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[m][fg^<span class="number">1</span>]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-æ··åˆèƒŒåŒ…é—®é¢˜"><a class="markdownIt-Anchor" href="#6-æ··åˆèƒŒåŒ…é—®é¢˜"></a> 6. <em><strong>æ··åˆèƒŒåŒ…é—®é¢˜</strong></em></h2><p>å³åŒ…å«äº†01èƒŒåŒ…ï¼Œå®Œå…¨èƒŒåŒ…å’Œå¤šé‡èƒŒåŒ…ï¼Œè¿™é‡Œå¯ä»¥å°†å¤šé‡èƒŒåŒ…æ‹†åˆ†æˆ01èƒŒåŒ…ï¼Œç„¶åæˆ‘ä»¬åªéœ€è¦è€ƒè™‘01èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…ï¼Œè¿™é‡Œä¸¤ä¸ªæ³¨æ„å¾ªç¯çš„æ–¹å‘å³å¯ã€‚</p>   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> dp[N],n,m;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> type,v,w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; a;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,v,w,s;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;v&gt;&gt;w&gt;&gt;s;</span><br><span class="line"><span class="keyword">if</span>(s==<span class="number">-1</span>) a.pb(&#123;<span class="number">-1</span>,v,w&#125;);<span class="comment">//01èƒŒåŒ… </span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(s==<span class="number">0</span>) a.pb(&#123;<span class="number">0</span>,v,w&#125;);<span class="comment">//å¤šé‡èƒŒåŒ… </span></span><br><span class="line"><span class="keyword">else</span>&#123;<span class="comment">//å®Œå…¨èƒŒåŒ…æ‹†æˆ01èƒŒåŒ… </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=s;k*=<span class="number">2</span>)&#123;</span><br><span class="line">a.pb(&#123;<span class="number">-1</span>,v*k,w*k&#125;);</span><br><span class="line">s-=k; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span>(s) a.pb(&#123;<span class="number">-1</span>,v*s,w*s&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> v,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it:a)&#123;</span><br><span class="line">v=it.v,w=it.w;</span><br><span class="line"><span class="keyword">if</span>(it.type==<span class="number">-1</span>)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=m;i&gt;=v;--i) dp[i]=max(dp[i],dp[i-v]+w);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=v;i&lt;=m;++i) dp[i]=max(dp[i],dp[i-v]+w);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜"><a class="markdownIt-Anchor" href="#7-äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜"></a> 7. <em><strong>äºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜</strong></em></h2><p>å¤šäº†ä¸€ç»´é‡é‡ï¼Œè¿™é‡Œç›´æ¥è€ƒè™‘å¤šå¾ªç¯ä¸€å±‚é‡é‡å³å¯ï¼Œ01èƒŒåŒ…ä»å¤§åˆ°å°è¿›è¡Œæ›´æ–°å³å¯ã€‚</p>   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> dp[N][N],n,V,M;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;V&gt;&gt;M;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,v,m,w;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;v&gt;&gt;m&gt;&gt;w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=V;j&gt;=v;--j)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=M;k&gt;=m;--k)&#123;</span><br><span class="line">dp[j][k]=max(dp[j][k],dp[j-v][k-m]+w);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[V][M]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="8-åˆ†ç»„èƒŒåŒ…é—®é¢˜"><a class="markdownIt-Anchor" href="#8-åˆ†ç»„èƒŒåŒ…é—®é¢˜"></a> 8. <em><strong>åˆ†ç»„èƒŒåŒ…é—®é¢˜</strong></em></h2><p>å¤šä¸€é‡å¾ªç¯ï¼Œæ¥åˆ¤æ–­é€‰è¿™ä¸€ç»„é‡Œçš„å“ªä¸€ä¸ª</p>   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e2</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,m,v[N],w[N],dp[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,s;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;s;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=s;++j) <span class="built_in">cin</span>&gt;&gt;v[j]&gt;&gt;w[j];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=<span class="number">0</span>;--j)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=s;++k)&#123;</span><br><span class="line"><span class="keyword">if</span>(j&gt;=v[k]) dp[j]=max(dp[j],dp[j-v[k]]+w[k]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="9-æœ‰ä¾èµ–çš„èƒŒåŒ…é—®é¢˜"><a class="markdownIt-Anchor" href="#9-æœ‰ä¾èµ–çš„èƒŒåŒ…é—®é¢˜"></a> 9. <em><strong>æœ‰ä¾èµ–çš„èƒŒåŒ…é—®é¢˜</strong></em></h2><p>dp[i][j]:å½“é€‰iä¸ºèŠ‚ç‚¹ï¼Œç©ºé—´ä¸å¤§äºjçš„æœ€å¤§å€¼</p>   <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e2</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> dp[N][N];<span class="comment">//dp[i][j]:å½“é€‰iä¸ºèŠ‚ç‚¹ï¼Œç©ºé—´ä¸å¤§äºjçš„æœ€å¤§å€¼</span></span><br><span class="line"><span class="keyword">int</span> n,m,v[N],w[N],root; </span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[N];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> son:G[u])&#123;</span><br><span class="line">dfs(son);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=m-v[u];j&gt;=<span class="number">0</span>;--j)&#123;<span class="comment">//ç»™uç©ºå‡ºv[u]ç©ºé—´ï¼Œå‰©ä¸‹çš„åˆ†ç»™å„¿å­ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;=j;++k)&#123;</span><br><span class="line">dp[u][j]=max(dp[u][j],dp[u][j-k]+dp[son][k]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=v[u];--j) dp[u][j]=dp[u][j-v[u]]+w[u];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=v[u]<span class="number">-1</span>;j&gt;=<span class="number">0</span>;--j) dp[u][j]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,np;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;v[i]&gt;&gt;w[i]&gt;&gt;np;</span><br><span class="line"><span class="keyword">if</span>(np==<span class="number">-1</span>) root=i;</span><br><span class="line"><span class="keyword">else</span> G[np].pb(i);</span><br><span class="line">&#125;</span><br><span class="line">dfs(root);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[root][m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h2 id="10-èƒŒåŒ…é—®é¢˜æ±‚æ–¹æ¡ˆæ•°"><a class="markdownIt-Anchor" href="#10-èƒŒåŒ…é—®é¢˜æ±‚æ–¹æ¡ˆæ•°"></a> 10. <em><strong>èƒŒåŒ…é—®é¢˜æ±‚æ–¹æ¡ˆæ•°</strong></em></h2><pre><code>è¿™é‡Œåˆå§‹åŒ–ä¸èƒ½éšä¾¿çš„é»˜è®¤ä¸º0äº†ï¼Œå› ä¸ºè¿™é‡Œéœ€è¦æ›´æ–°æ–¹æ¡ˆæ•°ï¼Œå‰é¢çš„dp[i]è¡¨ç¤ºä½“ç§¯ä¸å¤§äºiçš„æœ€å¤§ä»·å€¼ï¼Œï¼ˆè¿™å’Œå…¨éƒ¨åˆå§‹åŒ–ä¸º0æœ‰å…³ï¼Œå› ä¸ºå¦‚æœå½“ç©ºé—´ä¸ºkæ—¶å–å¾—æœ€å¤§ä»·å€¼ï¼Œå› ä¸ºæˆ‘ä»¬å°†dp[m-k]åˆå§‹åŒ–ä¸º0ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥å¾—åˆ°æœ€å€¼ï¼Œä½†å®é™…ç©ºé—´ä¸ä¸ºmï¼‰è¿™æ ·çš„è¯ä¸åˆ©äºæ›´æ–°æ–¹æ¡ˆæ•°ã€‚ç°åœ¨åˆå§‹è¯åªå°†dp[0]å®šä¹‰ä¸º0ï¼Œå…¶ä»–çš„å®šä¹‰ä¸º-infï¼Œdp[i]è¡¨ç¤ºç©ºé—´æ°å¥½ä¸ºiæ—¶çš„æœ€å¤§ä»·å€¼ï¼Œè¿™æ ·æ˜¯ç¬¦åˆå®é™…æƒ…å†µçš„ï¼Œæœ€åçš„mxæ˜¯è¦æ‰«ä¸€éæ•°ç»„çš„ï¼Œå› ä¸ºæœ€å¤§ä»·å€¼å¹¶ä¸ä¸€å®šåœ¨æœ€å¤§ç©ºé—´å–å¾—ã€‚<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e3</span>+<span class="number">5</span>; </span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> &amp;x,ll y)</span> </span>&#123;<span class="keyword">return</span> x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span><br><span class="line"><span class="comment">//il int Mul(int &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> dp[N],num[N];</span><br><span class="line"><span class="comment">//dp[i]:ä½“ç§¯ä¸ºiæ—¶çš„æœ€å¤§ä»·å€¼ï¼Œnum[i]:æ»¡è¶³ä½“ç§¯ä¸ºiæœ€å¤§ä»·å€¼çš„æ–¹æ¡ˆæ•° </span></span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">num[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i) dp[i]=-inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,v,w;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;v&gt;&gt;w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=v;--j)&#123;</span><br><span class="line"><span class="keyword">int</span> mx,mxnum=<span class="number">0</span>;</span><br><span class="line">mx=max(dp[j],dp[j-v]+w);</span><br><span class="line"><span class="keyword">if</span>(mx==dp[j]) Add(mxnum,num[j]);</span><br><span class="line"><span class="keyword">if</span>(mx==dp[j-v]+w) Add(mxnum,num[j-v]);</span><br><span class="line">dp[j]=mx,num[j]=mxnum;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> ans=-inf,all=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;++j) ans=max(ans,dp[j]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(dp[j]==ans) Add(all,num[j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;all&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><h2 id="11-èƒŒåŒ…é—®é¢˜æ±‚å…·ä½“æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#11-èƒŒåŒ…é—®é¢˜æ±‚å…·ä½“æ–¹æ¡ˆ"></a> 11. <em><strong>èƒŒåŒ…é—®é¢˜æ±‚å…·ä½“æ–¹æ¡ˆ</strong></em></h2><pre><code>å› ä¸ºé¢˜ç›®è¦æ±‚å­—å…¸åºï¼Œæ‰€ä»¥iä»å¤§åˆ°å°ç€æ¥ï¼Œç„¶åä»1åˆ°nä»å°åˆ°å¤§è´ªå¿ƒçš„è€ƒè™‘ã€‚è§†é¢‘ä¸­ä»£ç å°‘åŠ äº†ä¸€ä¸ªnv-v[i]çš„åˆ¤æ–­ã€‚<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(int &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(int &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,m,dp[N][N],v[N],w[N];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) <span class="built_in">cin</span>&gt;&gt;v[i]&gt;&gt;w[i];</span><br><span class="line"><span class="comment">//ä»åå¾€å‰æ›´æ–° </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=n;i&gt;=<span class="number">1</span>;--i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(j&gt;=v[i]) dp[i][j]=max(dp[i+<span class="number">1</span>][j],dp[i+<span class="number">1</span>][j-v[i]]+w[i]);</span><br><span class="line"><span class="keyword">else</span> dp[i][j]=dp[i+<span class="number">1</span>][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> nv=m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(nv-v[i]&gt;=<span class="number">0</span> &amp;&amp; dp[i][nv]==dp[i+<span class="number">1</span>][nv-v[i]]+w[i])&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">nv-=v[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><p>â€‹</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> ä¸“é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è«é˜Ÿæ¨¡æ¿(åŸºç¡€è«é˜Ÿï¼Œå¸¦ä¿®æ”¹çš„è«é˜Ÿï¼Œæ ‘ä¸Šè«é˜Ÿ..)</title>
      <link href="2019/09/20/%E8%8E%AB%E9%98%9F%E6%A8%A1%E6%9D%BF/"/>
      <url>2019/09/20/%E8%8E%AB%E9%98%9F%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="å­¦ä¹ äºèƒ¡å°å…”åšå®¢"><a class="markdownIt-Anchor" href="#å­¦ä¹ äºèƒ¡å°å…”åšå®¢"></a> <a href="https://www.cnblogs.com/RabbitHu/p/MoDuiTutorial.html">å­¦ä¹ äºèƒ¡å°å…”åšå®¢</a> <a href="https://www.cnblogs.com/zwfymqz/p/9223425.html">è‡ªä¸ºé£æœˆé©¬å‰å’åšå®¢</a></h1><h2 id="ä¸å¸¦ä¿®æ”¹è«é˜Ÿ"><a class="markdownIt-Anchor" href="#ä¸å¸¦ä¿®æ”¹è«é˜Ÿ"></a> <strong>ä¸å¸¦ä¿®æ”¹è«é˜Ÿï¼š</strong></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> id,l,r;</span><br><span class="line">&#125;q[N];</span><br><span class="line"><span class="keyword">int</span> n,m,num[N],a[N],ans[N],base,sum=<span class="number">0</span>;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">ka</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> (x<span class="number">-1</span>)/base+<span class="number">1</span>;&#125;</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> ka(x.l)==ka(y.l)?x.r&lt;y.r:x.l&lt;y.l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!num[x]) sum++;</span><br><span class="line">num[x]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">del</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">num[x]--;</span><br><span class="line"><span class="keyword">if</span>(!num[x]) sum--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line">read(n);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) read(a[i]);</span><br><span class="line">read(m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i) read(q[i].l),read(q[i].r),q[i].id=i;</span><br><span class="line">base=<span class="built_in">sqrt</span>(n)+<span class="number">1</span>;</span><br><span class="line">sort(q+<span class="number">1</span>,q+m+<span class="number">1</span>,cmp);</span><br><span class="line"><span class="keyword">int</span> l=<span class="number">1</span>,r=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="keyword">while</span>(l&lt;q[i].l) del(a[l++]);</span><br><span class="line"><span class="keyword">while</span>(l&gt;q[i].l) add(a[--l]);</span><br><span class="line"><span class="keyword">while</span>(r&lt;q[i].r) add(a[++r]);</span><br><span class="line"><span class="keyword">while</span>(r&gt;q[i].r) del(a[r--]);</span><br><span class="line">ans[q[i].id]=sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h2 id="å¸¦ä¿®æ”¹è«é˜ŸåŠ å…¥æ—¶é—´è½´å³å¯"><a class="markdownIt-Anchor" href="#å¸¦ä¿®æ”¹è«é˜ŸåŠ å…¥æ—¶é—´è½´å³å¯"></a> <strong>å¸¦ä¿®æ”¹è«é˜Ÿï¼šåŠ å…¥æ—¶é—´è½´å³å¯</strong></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,m,a[N],ans[N],num[N],base,sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> qid=<span class="number">0</span>,cid=<span class="number">0</span>,cur=<span class="number">0</span>,l,r;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Q</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> id,l,r;<span class="comment">//idå³ä¸ºæ—¶é—´è½´ </span></span><br><span class="line">&#125;qu[N];</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">ka</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> (x<span class="number">-1</span>)/base+<span class="number">1</span>;&#125;</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Q x,Q y)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(ka(x.l)!=ka(y.l)) <span class="keyword">return</span> x.l&lt;y.l;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(ka(x.r)!=ka(y.r)) <span class="keyword">return</span> x.r&lt;y.r;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> x.id&lt;y.id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">C</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> id,pos,val,pre;</span><br><span class="line">&#125;cg[N];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!num[x]) sum++;</span><br><span class="line">num[x]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">del</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">num[x]--;</span><br><span class="line"><span class="keyword">if</span>(!num[x]) sum--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">preadd</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//å¢åŠ ä¿®æ”¹æ“ä½œ </span></span><br><span class="line"><span class="keyword">if</span>(cg[x].pos&gt;=l &amp;&amp; cg[x].pos&lt;=r)&#123;</span><br><span class="line">num[a[cg[x].pos]]--;</span><br><span class="line"><span class="keyword">if</span>(!num[a[cg[x].pos]]) sum--;</span><br><span class="line">&#125;</span><br><span class="line">cg[x].pre=a[cg[x].pos];</span><br><span class="line">a[cg[x].pos]=cg[x].val;</span><br><span class="line"><span class="keyword">if</span>(cg[x].pos&gt;=l &amp;&amp; cg[x].pos&lt;=r)&#123;</span><br><span class="line"><span class="keyword">if</span>(!num[a[cg[x].pos]]) sum++;</span><br><span class="line">num[a[cg[x].pos]]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">predel</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//æ’¤é”€ä¿®æ”¹æ“ä½œ </span></span><br><span class="line"><span class="keyword">if</span>(cg[x].pos&gt;=l &amp;&amp; cg[x].pos&lt;=r)&#123;</span><br><span class="line">num[a[cg[x].pos]]--;</span><br><span class="line"><span class="keyword">if</span>(!num[a[cg[x].pos]]) sum--;</span><br><span class="line">&#125;</span><br><span class="line">a[cg[x].pos]=cg[x].pre;</span><br><span class="line"><span class="keyword">if</span>(cg[x].pos&gt;=l &amp;&amp; cg[x].pos&lt;=r)&#123;</span><br><span class="line"><span class="keyword">if</span>(!num[a[cg[x].pos]]) sum++;</span><br><span class="line">num[a[cg[x].pos]]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> time)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(cur&lt;cid &amp;&amp; cg[cur+<span class="number">1</span>].id&lt;time) preadd(++cur);</span><br><span class="line"><span class="keyword">while</span>(cur&gt;=<span class="number">1</span> &amp;&amp; cg[cur].id&gt;time) predel(cur--);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line">read(n),read(m);</span><br><span class="line">base=<span class="built_in">sqrt</span>(n)+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) read(a[i]);</span><br><span class="line"><span class="keyword">char</span> op[<span class="number">2</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,x,y;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,op);</span><br><span class="line">read(x),read(y);</span><br><span class="line"><span class="keyword">if</span>(op[<span class="number">0</span>]==<span class="string">&#x27;Q&#x27;</span>)qu[++qid]=&#123;i,x,y&#125;;</span><br><span class="line"><span class="keyword">else</span> cg[++cid]=&#123;i,x,y,<span class="number">0</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line">sort(qu+<span class="number">1</span>,qu+qid+<span class="number">1</span>,cmp);</span><br><span class="line">l=<span class="number">1</span>,r=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=qid;++i)&#123;</span><br><span class="line">solve(qu[i].id);</span><br><span class="line"><span class="keyword">while</span>(l&lt;qu[i].l) del(a[l++]);</span><br><span class="line"><span class="keyword">while</span>(l&gt;qu[i].l) add(a[--l]);</span><br><span class="line"><span class="keyword">while</span>(r&lt;qu[i].r) add(a[++r]);</span><br><span class="line"><span class="keyword">while</span>(r&gt;qu[i].r) del(a[r--]);</span><br><span class="line">ans[qu[i].id]=sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(ans[i]) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ ‘ä¸Šè«é˜Ÿå‰ç½®æŠ€èƒ½ç®€å•åˆ†å—"><a class="markdownIt-Anchor" href="#æ ‘ä¸Šè«é˜Ÿå‰ç½®æŠ€èƒ½ç®€å•åˆ†å—"></a> <strong>æ ‘ä¸Šè«é˜Ÿå‰ç½®æŠ€èƒ½ï¼šï¼ˆç®€å•åˆ†å—ï¼‰</strong></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,B,stk[N*<span class="number">2</span>],cap[N],bel[N],top=<span class="number">0</span>,cnt=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[N];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> st=top,to;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;SZ(G[x]);++i)&#123;</span><br><span class="line">to=G[x][i];</span><br><span class="line"><span class="keyword">if</span>(to==f) <span class="keyword">continue</span>;</span><br><span class="line">dfs(to,x);</span><br><span class="line"><span class="keyword">if</span>(top-st&gt;=B)&#123;</span><br><span class="line">cap[++cnt]=x;</span><br><span class="line"><span class="keyword">while</span>(top&gt;st) bel[stk[top--]]=cnt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">stk[++top]=x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;B);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,x,y;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">G[x].pb(y),G[y].pb(x);</span><br><span class="line">&#125;</span><br><span class="line">dfs(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span>(top) bel[stk[top--]]=cnt;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,cnt);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,bel[i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;++i) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,cap[i]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§è¿˜æ²¡æ€ä¹ˆçœ‹æ‡‚ï¼Œä¾‹é¢˜æ˜¯å¸¦ä¿®æ”¹çš„è«é˜Ÿ</p><p>ä»ç¬¬äºŒç¯‡åšå®¢å­¦ä¹ äº†ç”¨æ‹¬å·åºåˆ—è§£å†³çš„æ–¹æ³•</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,m,dep[N],fa[N][<span class="number">25</span>],lg[N];</span><br><span class="line"><span class="keyword">int</span> st[N],ed[N],pot[N],tot=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> a[N],sa[N],block,ka[N*<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> num[N],sum=<span class="number">0</span>,ans[N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[N];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">lg[<span class="number">0</span>]=<span class="number">-1</span>,block=<span class="built_in">sqrt</span>(n)+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;++i) lg[i]=lg[i&gt;&gt;<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">sort(sa+<span class="number">1</span>,sa+n+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> sz=unique(sa+<span class="number">1</span>,sa+n+<span class="number">1</span>)-sa<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) a[i]=lower_bound(sa+<span class="number">1</span>,sa+sz+<span class="number">1</span>,a[i])-sa;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,len=n*<span class="number">2</span>;i&lt;=len;++i) ka[i]=i/block+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> np,<span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line">dep[np]=dep[f]+<span class="number">1</span>,fa[np][<span class="number">0</span>]=f;</span><br><span class="line">st[np]=++tot,pot[tot]=np;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=lg[dep[np]]+<span class="number">1</span>;++i) fa[np][i]=fa[fa[np][i<span class="number">-1</span>]][i<span class="number">-1</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> to:G[np])&#123;</span><br><span class="line"><span class="keyword">if</span>(to!=f) dfs(to,np);</span><br><span class="line">&#125;</span><br><span class="line">ed[np]=++tot,pot[tot]=np;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">getlca</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[u]&lt;dep[v]) swap(u,v);</span><br><span class="line"><span class="keyword">while</span>(dep[u]!=dep[v])u=fa[u][lg[dep[u]-dep[v]]];</span><br><span class="line"><span class="keyword">if</span>(u==v) <span class="keyword">return</span> u;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=lg[dep[u]];i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line"><span class="keyword">if</span>(fa[u][i]!=fa[v][i]) u=fa[u][i],v=fa[v][i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> fa[u][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Q</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> id,l,r,lca;</span><br><span class="line">&#125;q[N];</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Q x,Q y)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> ka[x.l]==ka[y.l]?x.r&lt;y.r:x.l&lt;y.l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!num[x]) sum++;</span><br><span class="line">num[x]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">del</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">num[x]--;</span><br><span class="line"><span class="keyword">if</span>(!num[x]) sum--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">cg</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(vis[x]) del(a[x]);</span><br><span class="line"><span class="keyword">else</span> add(a[x]);</span><br><span class="line">vis[x]^=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line">read(n),read(m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) read(a[i]),sa[i]=a[i];</span><br><span class="line">init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,x,y;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line">read(x),read(y);</span><br><span class="line">G[x].pb(y),G[y].pb(x);</span><br><span class="line">&#125;</span><br><span class="line">dfs(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,x,y;i&lt;=m;++i)&#123;</span><br><span class="line">read(x),read(y);</span><br><span class="line"><span class="keyword">if</span>(st[x]&gt;st[y]) swap(x,y);</span><br><span class="line"><span class="keyword">int</span> lca=getlca(x,y);</span><br><span class="line"><span class="keyword">if</span>(lca==x) q[i]=&#123;i,st[x],st[y],<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">else</span> q[i]=&#123;i,ed[x],st[y],lca&#125;;</span><br><span class="line"><span class="comment">//cout&lt;&lt;&quot;MQ &quot;&lt;&lt;i&lt;&lt;&quot; &quot;&lt;&lt;q[i].l&lt;&lt;&quot; &quot;&lt;&lt;q[i].r&lt;&lt;&quot; &quot;&lt;&lt;q[i].lca&lt;&lt;endl; </span></span><br><span class="line">&#125;</span><br><span class="line">sort(q+<span class="number">1</span>,q+m+<span class="number">1</span>,cmp);</span><br><span class="line"><span class="keyword">int</span> l=<span class="number">1</span>,r=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="comment">//cout&lt;&lt;&quot;solve &quot;&lt;&lt;q[i].l&lt;&lt;&quot; &quot;&lt;&lt;q[i].r&lt;&lt;endl;</span></span><br><span class="line"><span class="keyword">while</span>(l&lt;q[i].l) cg(pot[l++]);</span><br><span class="line"><span class="keyword">while</span>(l&gt;q[i].l) cg(pot[--l]);</span><br><span class="line"><span class="keyword">while</span>(r&lt;q[i].r) cg(pot[++r]);</span><br><span class="line"><span class="keyword">while</span>(r&gt;q[i].r) cg(pot[r--]);</span><br><span class="line"><span class="keyword">if</span>(q[i].lca) cg(q[i].lca);</span><br><span class="line">ans[q[i].id]=sum;</span><br><span class="line"><span class="keyword">if</span>(q[i].lca) cg(q[i].lca);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è«é˜Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) E. Xenia and Tree (lca+åˆ†å—+æœ€çŸ­è·¯)</title>
      <link href="2019/09/19/(CodeForces)%20E.%20Xenia%20and%20Tree/"/>
      <url>2019/09/19/(CodeForces)%20E.%20Xenia%20and%20Tree/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://codeforces.com/contest/342/problem/E">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„</strong></em> ï¼šç»™å®šä¸€æ£µæ ‘ï¼Œä¸€å¼€å§‹åªæœ‰1ä¸ºçº¢ï¼Œå…¶ä»–ç‚¹ä¸ºè“ã€‚ä¸¤ç§æ“ä½œï¼š1ï¼ŒæŠŠä¸€ä¸ªç‚¹æŸ“æˆçº¢ç‚¹ã€‚2ï¼Œè¯¢é—®ä¸€ä¸ªç‚¹åˆ°æœ€è¿‘çº¢ç‚¹çš„è·ç¦»ã€‚</p><p><em><strong>è§£</strong></em> ï¼šæ•°æ®é‡åªæœ‰1e5,næ ¹å·n*logåº”è¯¥æ˜¯å¯ä»¥çš„ï¼Œä¸»è¦æ˜¯è¿™ä¸ªæŸ“è‰²åï¼Œæˆ‘ä»¬ä¸èƒ½æ¯ä¸€æ¬¡æŸ“è‰²åéƒ½å»è·‘ä¸€æ¬¡æœ€çŸ­è·¯ï¼ˆbfså°±å¯ä»¥äº†ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å½“ä¿®æ”¹æ•°ç›®è¾¾åˆ°æ ¹å·næ—¶å†å»è¿›è¡Œä¸€æ¬¡æœ€çŸ­è·¯ï¼ŒæŸ¥è¯¢æ˜¯å¦‚æœæœ‰ç‚¹æ˜¯æœªæ›´æ–°çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡lcaæ¥æ±‚å¾—ä¸¤ç‚¹çš„è·ç¦»ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯å¤æ‚åº¦æ˜¯å¯è¡Œçš„ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxbit=<span class="number">20</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,m,base;</span><br><span class="line"><span class="keyword">int</span> dep[N],fa[N][maxbit],lg[N],dis[N];<span class="comment">//dis:åˆ°çº¢ç‚¹æœ€è¿‘çš„è·ç¦» </span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">lg[<span class="number">0</span>]=<span class="number">-1</span>,base=<span class="built_in">sqrt</span>(n)+<span class="number">1</span>,vis[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;++i) lg[i]=lg[i&gt;&gt;<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> np,<span class="keyword">int</span> f)</span></span>&#123;</span><br><span class="line">dep[np]=dep[f]+<span class="number">1</span>,fa[np][<span class="number">0</span>]=f,dis[np]=dep[np]<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=lg[dep[np]]+<span class="number">1</span>;++i) fa[np][i]=fa[fa[np][i<span class="number">-1</span>]][i<span class="number">-1</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> to:G[np])&#123;</span><br><span class="line"><span class="keyword">if</span>(to!=f) dfs(to,np);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[u]&lt;dep[v]) swap(u,v);</span><br><span class="line"><span class="keyword">while</span>(dep[u]!=dep[v])u=fa[u][lg[dep[u]-dep[v]]];</span><br><span class="line"><span class="keyword">if</span>(u==v) <span class="keyword">return</span> u;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=lg[dep[u]];i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line"><span class="keyword">if</span>(fa[u][i]!=fa[v][i]) u=fa[u][i],v=fa[v][i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> fa[u][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dist</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> dep[u]+dep[v]<span class="number">-2</span>*dep[lca(u,v)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> q[N],cnt=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; qe;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> x;</span><br><span class="line"><span class="keyword">while</span>(!qe.empty())&#123;</span><br><span class="line">x=qe.front(),qe.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> to:G[x])&#123;</span><br><span class="line"><span class="keyword">if</span>(dis[to]&gt;dis[x]+<span class="number">1</span>)&#123;</span><br><span class="line">dis[to]=dis[x]+<span class="number">1</span>;</span><br><span class="line">qe.push(to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(vis[x]) <span class="keyword">return</span>;</span><br><span class="line">vis[x]=<span class="number">1</span>,dis[x]=<span class="number">0</span>,q[++cnt]=x,qe.push(x);</span><br><span class="line"><span class="keyword">if</span>(cnt==base)&#123;</span><br><span class="line">solve();</span><br><span class="line">cnt=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> ans=dis[x];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;++i) ans=min(ans,dist(q[i],x));</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,x,y;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">G[x].pb(y),G[y].pb(x);</span><br><span class="line">&#125;</span><br><span class="line">dfs(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,op,x;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;op&gt;&gt;x;</span><br><span class="line"><span class="keyword">if</span>(op==<span class="number">1</span>) update(x);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;query(x)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lca </tag>
            
            <tag> åˆ†å— </tag>
            
            <tag> æœ€çŸ­è·¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ‰æµé‡ä¸Šç•Œæœ€å°è´¹ç”¨æœ€å¤§æµ</title>
      <link href="2019/09/18/%E6%9C%89%E6%B5%81%E9%87%8F%E4%B8%8A%E7%95%8C%E6%9C%80%E5%B0%8F%E8%B4%B9%E7%94%A8%E6%9C%80%E5%A4%A7%E6%B5%81/"/>
      <url>2019/09/18/%E6%9C%89%E6%B5%81%E9%87%8F%E4%B8%8A%E7%95%8C%E6%9C%80%E5%B0%8F%E8%B4%B9%E7%94%A8%E6%9C%80%E5%A4%A7%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<p>æœ‰æµé‡ä¸Šç•Œæœ€å°è´¹ç”¨æœ€å¤§æµåŸºç¡€æ¨¡æ¿</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">pair</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pii;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to, cap, cost, rev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> V,H[N+<span class="number">5</span>],dis[N+<span class="number">5</span>],PreV[N+<span class="number">5</span>],PreE[N+<span class="number">5</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; G[N+<span class="number">5</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">V=n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=V; ++i) G[i].clear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddEdge</span><span class="params">(<span class="keyword">int</span> from,<span class="keyword">int</span> to,<span class="keyword">int</span> cap,<span class="keyword">int</span> cost)</span> </span>&#123;</span><br><span class="line">G[from].push_back(edge &#123;to,cap,cost,SZ(G[to])&#125;);</span><br><span class="line">G[to].push_back(edge &#123;from,<span class="number">0</span>,-cost,SZ(G[from])<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Min_cost_max_flow</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t,<span class="keyword">int</span> f,<span class="keyword">int</span>&amp; flow)</span> </span>&#123;</span><br><span class="line"><span class="comment">//æºç‚¹   æ±‡ç‚¹  é™å®šæµé‡   æœ€åçš„æœ€å¤§æµ</span></span><br><span class="line"><span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">fill(H,H+<span class="number">1</span>+V,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span> (f) &#123;</span><br><span class="line"><span class="built_in">priority_queue</span> &lt;<span class="built_in">pair</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;,<span class="built_in">vector</span>&lt;<span class="built_in">pair</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&gt;,greater&lt;<span class="built_in">pair</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&gt; &gt; q;</span><br><span class="line">fill(dis,dis+<span class="number">1</span>+V,inf);</span><br><span class="line">dis[s]=<span class="number">0</span>;</span><br><span class="line">q.push(<span class="built_in">pair</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;(<span class="number">0</span>,s));</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line"><span class="built_in">pair</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;now=q.top();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">int</span> v=now.second;</span><br><span class="line"><span class="keyword">if</span>(dis[v]&lt;now.first) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;SZ(G[v]); ++i) &#123;</span><br><span class="line">edge&amp; e = G[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dis[e.to]&gt;dis[v]+e.cost+H[v]-H[e.to]) &#123;</span><br><span class="line">dis[e.to]=dis[v]+e.cost+H[v]-H[e.to];</span><br><span class="line">PreV[e.to]=v,PreE[e.to]=i;</span><br><span class="line">q.push(<span class="built_in">pair</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;(dis[e.to],e.to));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (dis[t]==inf)<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=V; ++i) H[i]+=dis[i];</span><br><span class="line"><span class="keyword">int</span> d=f;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> v=t; v!=s; v=PreV[v]) d=min(d,G[PreV[v]][PreE[v]].cap);</span><br><span class="line">f-=d,flow+=d,res+=d*H[t];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> v=t; v!=s; v=PreV[v]) &#123;</span><br><span class="line">edge&amp; e=G[PreV[v]][PreE[v]];</span><br><span class="line">e.cap-=d;</span><br><span class="line">G[v][e.rev].cap+=d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a[N],T;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line"><span class="keyword">while</span>(T--) &#123;</span><br><span class="line"><span class="keyword">int</span> n,k;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;k);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line"><span class="keyword">int</span> ss=<span class="number">0</span>,s=<span class="number">1</span>,t=<span class="number">2</span>*n+<span class="number">2</span>,tt=<span class="number">2</span>*n+<span class="number">3</span>;</span><br><span class="line">init(tt+<span class="number">1</span>);</span><br><span class="line">AddEdge(ss,s,k,<span class="number">0</span>);</span><br><span class="line">AddEdge(t,tt,k,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">AddEdge(s,i+<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">AddEdge(i+<span class="number">1</span>+n,t,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">AddEdge(i+<span class="number">1</span>,i+<span class="number">1</span>+n,<span class="number">1</span>,-a[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>; j&lt;=n; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(a[j]&gt;=a[i]) AddEdge(<span class="number">1</span>+i+n,<span class="number">1</span>+j,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,-Min_cost_max_flow(ss,tt,inf,ans));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œæµ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(2019æ­ç”µå¤šæ ¡3) Distribution of books (dp+ç¦»æ•£åŒ–+çº¿æ®µæ ‘)</title>
      <link href="2019/09/17/(2019%E6%9D%AD%E7%94%B5%E5%A4%9A%E6%A0%A13)%20Distribution%20of%20books/"/>
      <url>2019/09/17/(2019%E6%9D%AD%E7%94%B5%E5%A4%9A%E6%A0%A13)%20Distribution%20of%20books/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://acm.hdu.edu.cn/showproblem.php?pid=6606">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> nä¸ªæ•°ï¼Œå¯ä»¥é€‰æ‹©å‰m(mè‡ªå®š)ä¸ªæ•°åˆ†æˆkå—ï¼Œé—®æ¯å—çš„æ•°å­—å’Œçš„æœ€å¤§å€¼æœ€å°æ˜¯å¤šå°‘</p><p><em><strong>è§£ï¼š</strong></em> é¦–å…ˆæˆ‘ä»¬å¯ä»¥äºŒåˆ†è¿™ä¸ªæœ€å°çš„æœ€å¤§å€¼midï¼Œç„¶åå»checkï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰dp[i]ï¼Œå‰iæœ¬ä¹¦åœ¨æ»¡è¶³&lt;=midçš„æƒ…å†µä¸‹æœ€å¤šå¯ä»¥åˆ†æˆå‡ å—ï¼Œé‚£ä¹ˆå½“sum[i]&lt;=midçš„æƒ…å†µä¸‹ï¼Œdp[i]=1,åä¹‹0ï¼›æ›´æ–°çš„è¯dp[i]=max(dp[i],dp[i]+1) (å½“sum[i]-sum[j]&lt;=midçš„æƒ…å†µä¸‹)ï¼Œè¿™æ ·æ˜¯ä¸€ä¸ªn^2çš„å¤æ‚åº¦æ˜¾ç„¶ä¸è¡Œï¼Œæˆ‘ä»¬å°±æ˜¯æƒ³çŸ¥é“é‚£äº›sum[j]&gt;=sum[i]-midçš„jä¸­æœ€å¤§çš„dp[j]å˜›ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å»ºä¸€é¢—æƒå€¼çº¿æ®µæ ‘ï¼Œæœ€ä¸‹é¢ä¸€å±‚ä¸ºsum[j],å€¼å°±æ˜¯dp[j],å½“ç„¶ç”±äºè¿™é‡Œçš„sumä¼šå¾ˆå¤§ï¼Œæ‰€ä»¥éœ€è¦ç¦»æ•£åŒ–ã€‚ç„¶ådp[i]å¾—å‡ºä¹‹åï¼Œå†æ›´æ–°ä¸€ä¸‹çº¿æ®µæ ‘å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mid ((l+r)&gt;&gt;1)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e5</span>+<span class="number">105</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> T,n,k,a[N],sid[N],tr[N&lt;&lt;<span class="number">2</span>],sz;</span><br><span class="line">ll sum[N],s[N];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">tr[rt]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span> ;</span><br><span class="line">build(l,mid,rt&lt;&lt;<span class="number">1</span>),build(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l &amp;&amp; R&gt;=r)<span class="keyword">return</span> tr[rt];</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=mid) ans=max(ans,query(l,mid,L,R,rt&lt;&lt;<span class="number">1</span>));</span><br><span class="line"><span class="keyword">if</span>(R&gt;mid) ans=max(ans,query(mid+<span class="number">1</span>,r,L,R,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>));</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> x,<span class="keyword">int</span> c,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">tr[rt]=max(tr[rt],c);</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=mid) update(l,mid,x,c,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span> update(mid+<span class="number">1</span>,r,x,c,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">tr[rt]=max(tr[rt&lt;&lt;<span class="number">1</span>],tr[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> dp[N];<span class="comment">//å‰iæœ¬ä¹¦æœ€å¤šå¯ä»¥åˆ†ç»™å‡ ä¸ªäºº(åœ¨åŒºé—´å’Œ&lt;=xçš„æƒ…å†µä¸‹ </span></span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">ck</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line">build(<span class="number">1</span>,sz,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) dp[i]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> pos,q,num=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(sum[i]&lt;=x) dp[i]=<span class="number">1</span>;</span><br><span class="line">pos=lower_bound(s+<span class="number">1</span>,s+sz+<span class="number">1</span>,sum[i]-x)-s;</span><br><span class="line">q=query(<span class="number">1</span>,sz,pos,sz,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(q!=<span class="number">0</span>) dp[i]=max(dp[i],q+<span class="number">1</span>);</span><br><span class="line">num=max(num,dp[i]);</span><br><span class="line">update(<span class="number">1</span>,sz,sid[i],dp[i],<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(num&gt;=k)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">else</span><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line">read(T);</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line">read(n),read(k);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">read(a[i]),sum[i]=sum[i<span class="number">-1</span>]+a[i],s[i]=sum[i];</span><br><span class="line">&#125;</span><br><span class="line">sort(s+<span class="number">1</span>,s+n+<span class="number">1</span>);</span><br><span class="line">sz=unique(s+<span class="number">1</span>,s+n+<span class="number">1</span>)-(s+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) sid[i]=lower_bound(s+<span class="number">1</span>,s+sz+<span class="number">1</span>,sum[i])-s;</span><br><span class="line">ll le=<span class="number">-1e18</span>,ri=<span class="number">1e18</span>,md,ans=<span class="number">1e18</span>;</span><br><span class="line"><span class="keyword">while</span>(le&lt;=ri)&#123;</span><br><span class="line">md=(le+ri)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(ck(md)) ans=md,ri=md<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">else</span> le=md+<span class="number">1</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> HDU </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(2019æ²ˆé˜³ç½‘ç»œèµ›) Bï¼ŒDï¼ŒH</title>
      <link href="2019/09/15/(2019%E6%B2%88%E9%98%B3%E7%BD%91%E7%BB%9C%E8%B5%9B)B,D,H/"/>
      <url>2019/09/15/(2019%E6%B2%88%E9%98%B3%E7%BD%91%E7%BB%9C%E8%B5%9B)B,D,H/</url>
      
        <content type="html"><![CDATA[<h1 id="b-dudus-maze-æ¦‚ç‡"><a class="markdownIt-Anchor" href="#b-dudus-maze-æ¦‚ç‡"></a> B. Duduâ€™s maze (æ¦‚ç‡)</h1><h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://nanti.jisuanke.com/t/41402">ä¼ é€é—¨</a></h1><p>è§£ï¼šæ¯”èµ›çš„æ—¶å€™æ€è·¯è·‘åäº†ï¼Œçœ‹äº†é¢˜è§£æ‰æç„¶å¤§æ‚ŸT T</p><p><img src="https://img-blog.csdnimg.cn/2019091510361754.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RERF9NYXN0ZXI=,size_16,color_FFFFFF,t_70" alt="img" /></p><p>coutçš„æµ®ç‚¹æ•°è¾“å‡ºæ˜¯çœŸçš„éº»çƒ¦å‘€</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> T,n,m,k,fa[N],num[N],a[N];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; eg[N];</span><br><span class="line"><span class="keyword">bool</span> fg[N];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;++i) fa[i]=i,num[i]=<span class="number">1</span>,fg[i]=<span class="number">0</span>,eg[i].clear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x==fa[x]) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> fa[x]=find(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">unite</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">x=find(x),y=find(y);</span><br><span class="line"><span class="keyword">if</span>(x==y) <span class="keyword">return</span>;</span><br><span class="line">fa[x]=y,num[y]+=num[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;k;</span><br><span class="line">init();</span><br><span class="line"><span class="keyword">int</span> x,y,cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">eg[x].pb(y),eg[y].pb(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x,fg[x]=<span class="number">1</span>;</span><br><span class="line">a[++cnt]=x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(fg[i]) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> to:eg[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(!fg[to]) unite(i,to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> rt=find(<span class="number">1</span>),res=num[rt];</span><br><span class="line"><span class="keyword">if</span>(res==n-k)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;fixed&lt;&lt;setprecision(<span class="number">8</span>)&lt;&lt;<span class="number">1.0</span>*res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">double</span> res2=<span class="number">0.0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;++i)&#123;</span><br><span class="line"><span class="keyword">int</span> tp=a[i],yes=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> to:eg[tp])&#123;</span><br><span class="line"><span class="keyword">if</span>(find(to)==rt)&#123;</span><br><span class="line">yes=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(yes==<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> to:eg[tp])&#123;</span><br><span class="line"><span class="keyword">if</span>(fg[to]) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(find(to)==rt) <span class="keyword">continue</span>;</span><br><span class="line">sum+=num[find(to)];</span><br><span class="line">&#125;</span><br><span class="line">res2=max(res2,<span class="number">1.0</span>*sum/SZ(eg[tp]));</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;fixed&lt;&lt;setprecision(<span class="number">8</span>)&lt;&lt;res2+<span class="number">1.0</span>*res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="d-fish-eating-fruit-ç‚¹åˆ†æ²»"><a class="markdownIt-Anchor" href="#d-fish-eating-fruit-ç‚¹åˆ†æ²»"></a> D. Fish eating fruit (ç‚¹åˆ†æ²»)</h1><h1 id="ä¼ é€é—¨-2"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨-2"></a> <a href="https://nanti.jisuanke.com/t/41403">ä¼ é€é—¨</a></h1><p>è§£ï¼šå°±æ˜¯æ±‚å›¾ä¸­æ‰€æœ‰è·¯å¾„%3ä¸º0ï¼Œ1ï¼Œ2çš„è·¯å¾„å’Œã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Add</span><span class="params">(ll &amp;x,ll y)</span> </span>&#123;<span class="keyword">return</span> x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Mul</span><span class="params">(ll &amp;x,ll y)</span> </span>&#123;<span class="keyword">return</span> x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span><br><span class="line"><span class="keyword">int</span> n,k,sz[maxn],root,mx,all,cnt;</span><br><span class="line">ll dis[maxn],q[maxn],ans0,ans1,ans2;</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> to,w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; mp[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">getroot</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa)</span></span>&#123; </span><br><span class="line">sz[x]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> num=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)(mp[x].size());++i)&#123;</span><br><span class="line"><span class="keyword">int</span> nto=mp[x][i].to;</span><br><span class="line"><span class="keyword">if</span>(vis[nto] || fa==nto) <span class="keyword">continue</span>;</span><br><span class="line">getroot(nto,x);</span><br><span class="line">sz[x]+=sz[nto];</span><br><span class="line">num=max(num,sz[nto]);</span><br><span class="line">&#125;</span><br><span class="line">num=max(num,all-num);</span><br><span class="line"><span class="keyword">if</span>(num&lt;mx)&#123;</span><br><span class="line">mx=num;</span><br><span class="line">root=x;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">getdis</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> fa)</span></span>&#123; </span><br><span class="line">q[++cnt]=dis[x];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)(mp[x].size());++i)&#123;</span><br><span class="line"><span class="keyword">int</span> nto=mp[x][i].to,nw=mp[x][i].w;</span><br><span class="line"><span class="keyword">if</span>(nto==fa || vis[nto]) <span class="keyword">continue</span>;</span><br><span class="line">dis[nto]=dis[x]+nw;</span><br><span class="line">getdis(nto,x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">run</span><span class="params">(ll &amp;rs,ll x,<span class="keyword">int</span> type)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(type==<span class="number">1</span>) rs=(rs+x)%mod;</span><br><span class="line"><span class="keyword">else</span> rs=(rs-x+mod)%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> v,<span class="keyword">int</span> type)</span></span>&#123; </span><br><span class="line">cnt=<span class="number">0</span>,dis[x]=v;</span><br><span class="line">getdis(x,<span class="number">0</span>);</span><br><span class="line">ll num0=<span class="number">0</span>,num1=<span class="number">0</span>,num2=<span class="number">0</span>,n0=<span class="number">0</span>,n1=<span class="number">0</span>,n2=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(q[i]%<span class="number">3</span>==<span class="number">0</span>) Add(num0,q[i]),n0++;</span><br><span class="line"><span class="keyword">if</span>(q[i]%<span class="number">3</span>==<span class="number">1</span>) Add(num1,q[i]),n1++;</span><br><span class="line"><span class="keyword">if</span>(q[i]%<span class="number">3</span>==<span class="number">2</span>) Add(num2,q[i]),n2++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(q[i]%<span class="number">3</span>==<span class="number">0</span>)&#123;</span><br><span class="line">run(ans0,n0*q[i]%mod+num0,type);</span><br><span class="line">run(ans1,n1*q[i]%mod+num1,type);</span><br><span class="line">run(ans2,n2*q[i]%mod+num2,type);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(q[i]%<span class="number">3</span>==<span class="number">1</span>)&#123;</span><br><span class="line">run(ans0,n2*q[i]%mod+num2,type);</span><br><span class="line">run(ans1,n0*q[i]%mod+num0,type);</span><br><span class="line">run(ans2,n1*q[i]%mod+num1,type);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(q[i]%<span class="number">3</span>==<span class="number">2</span>)&#123;</span><br><span class="line">run(ans0,n1*q[i]%mod+num1,type);</span><br><span class="line">run(ans1,n2*q[i]%mod+num2,type);</span><br><span class="line">run(ans2,n0*q[i]%mod+num0,type);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; </span><br><span class="line">calc(x,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">vis[x]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;SZ(mp[x]);++i)&#123;</span><br><span class="line"><span class="keyword">int</span> nto=mp[x][i].to,nw=mp[x][i].w;</span><br><span class="line"><span class="keyword">if</span>(vis[nto]) <span class="keyword">continue</span>;</span><br><span class="line">calc(nto,nw,<span class="number">-1</span>); </span><br><span class="line">all=sz[x],mx=inf;</span><br><span class="line">getroot(nto,<span class="number">0</span>);</span><br><span class="line">dfs(root);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n)!=EOF)&#123;</span><br><span class="line">all=n,ans0=<span class="number">0</span>,ans1=<span class="number">0</span>,ans2=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> x,y,z;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line">read(x),read(y),read(z);</span><br><span class="line">x++,y++;</span><br><span class="line">mp[x].pb(node&#123;y,z&#125;);</span><br><span class="line">mp[y].pb(node&#123;x,z&#125;);</span><br><span class="line">&#125;</span><br><span class="line">mx=inf;</span><br><span class="line">getroot(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">dfs(root);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d %d %d\n&quot;</span>,ans0%mod,ans1%mod,ans2%mod);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n+<span class="number">5</span>;++i)&#123;</span><br><span class="line">mp[i].clear();vis[i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="h-texas-holdem-poker-æ¨¡æ‹Ÿ"><a class="markdownIt-Anchor" href="#h-texas-holdem-poker-æ¨¡æ‹Ÿ"></a> H. Texas holdâ€™em Poker (æ¨¡æ‹Ÿ)</h1><h1 id="ä¼ é€é—¨-3"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨-3"></a> <a href="https://nanti.jisuanke.com/t/41408">ä¼ é€é—¨</a></h1><p>è§£ï¼šç»†å¿ƒçš„æ¨¡æ‹Ÿå³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">char</span>,<span class="keyword">int</span>&gt; mp;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="built_in">string</span> name;</span><br><span class="line"><span class="keyword">int</span> type;</span><br><span class="line"><span class="keyword">int</span> two1,two2,three,four,shun,sum;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clean</span><span class="params">()</span></span>&#123;</span><br><span class="line">name=<span class="string">&quot;&quot;</span>,type=<span class="number">0</span>,two1=<span class="number">0</span>,two2=<span class="number">0</span>,three=<span class="number">0</span>,four=<span class="number">0</span>,shun=<span class="number">0</span>,sum=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; a[N];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x.type!=y.type) <span class="keyword">return</span> x.type&gt;y.type;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(x.type==<span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(x.sum!=y.sum) <span class="keyword">return</span> x.sum&gt;y.sum;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> x.name&lt;y.name;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(x.type==<span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(x.two1!=y.two1) <span class="keyword">return</span> x.two1&gt;y.two1;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(x.sum!=y.sum) <span class="keyword">return</span> x.sum&gt;y.sum;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> x.name&lt;y.name;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(x.type==<span class="number">2</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(x.two2!=y.two2) <span class="keyword">return</span> x.two2&gt;y.two2;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(x.two1!=y.two1) <span class="keyword">return</span> x.two1&gt;y.two1;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(x.sum!=y.sum) <span class="keyword">return</span> x.sum&gt;y.sum;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> x.name&lt;y.name;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(x.type==<span class="number">3</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(x.three!=y.three) <span class="keyword">return</span> x.three&gt;y.three;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(x.sum!=y.sum) <span class="keyword">return</span> x.sum&gt;y.sum;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> x.name&lt;y.name;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(x.type==<span class="number">4</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(x.three!=y.three) <span class="keyword">return</span> x.three&gt;y.three;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(x.two1!=y.two1) <span class="keyword">return</span> x.two1&gt;y.two1;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(x.sum!=y.sum) <span class="keyword">return</span> x.sum&gt;y.sum;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> x.name&lt;y.name;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(x.type==<span class="number">5</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(x.four!=y.four) <span class="keyword">return</span> x.four&gt;y.four;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(x.sum!=y.sum) <span class="keyword">return</span> x.sum&gt;y.sum;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> x.name&lt;y.name;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(x.type==<span class="number">6</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(x.shun!=y.shun) <span class="keyword">return</span> x.shun&gt;y.shun;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> x.name&lt;y.name;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">return</span> x.name&lt;y.name;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,tt[<span class="number">10</span>],num[<span class="number">15</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">mp[<span class="string">&#x27;A&#x27;</span>]=<span class="number">1</span>,mp[<span class="string">&#x27;J&#x27;</span>]=<span class="number">11</span>,mp[<span class="string">&#x27;Q&#x27;</span>]=<span class="number">12</span>,mp[<span class="string">&#x27;K&#x27;</span>]=<span class="number">13</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">char</span> c=<span class="string">&#x27;1&#x27;</span>; c&lt;=<span class="string">&#x27;9&#x27;</span>; ++c) mp[c]=c-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n) &#123;</span><br><span class="line"><span class="built_in">string</span> na,s;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;na&gt;&gt;s;</span><br><span class="line">a[i].name=na;</span><br><span class="line">cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>,len=SZ(s); j&lt;len; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(j&lt;len<span class="number">-1</span> &amp;&amp; s[j]==<span class="string">&#x27;1&#x27;</span> &amp;&amp; s[j+<span class="number">1</span>]==<span class="string">&#x27;0&#x27;</span>) tt[++cnt]=<span class="number">10</span>,++j;</span><br><span class="line"><span class="keyword">else</span> tt[++cnt]=mp[s[j]];</span><br><span class="line">&#125;</span><br><span class="line">sort(tt+<span class="number">1</span>,tt+cnt+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(tt[<span class="number">1</span>]==<span class="number">1</span> &amp;&amp; tt[<span class="number">2</span>]==<span class="number">10</span> &amp;&amp; tt[<span class="number">3</span>]==<span class="number">11</span> &amp;&amp; tt[<span class="number">4</span>]==<span class="number">12</span> &amp;&amp; tt[<span class="number">5</span>]==<span class="number">13</span>) a[i].type=<span class="number">7</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">int</span> four=<span class="number">0</span>,one=<span class="number">0</span>,two1=<span class="number">0</span>,two2=<span class="number">0</span>,three=<span class="number">0</span>,shun=<span class="number">0</span>,sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">bool</span> fg=<span class="number">0</span>;</span><br><span class="line">ms(num,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=cnt; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(!fg &amp;&amp; j&gt;<span class="number">1</span> &amp;&amp; tt[j]-tt[j<span class="number">-1</span>]!=<span class="number">1</span>) fg=<span class="number">1</span>;</span><br><span class="line">num[tt[j]]++;</span><br><span class="line">sum+=tt[j];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!fg) &#123;</span><br><span class="line">a[i].type=<span class="number">6</span>;</span><br><span class="line">a[i].shun=tt[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=<span class="number">13</span>; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(num[j]==<span class="number">2</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(two1==<span class="number">0</span>) two1=j;</span><br><span class="line"><span class="keyword">else</span> two2=j;</span><br><span class="line">sum-=j*<span class="number">2</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(num[j]==<span class="number">3</span>) three=j,sum-=<span class="number">3</span>*j;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(num[j]==<span class="number">4</span>) four=j,sum-=<span class="number">4</span>*j;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(four!=<span class="number">0</span>) &#123;</span><br><span class="line">a[i].type=<span class="number">5</span>;</span><br><span class="line">a[i].four=four;</span><br><span class="line">a[i].sum=sum;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(three!=<span class="number">0</span> &amp;&amp; two1!=<span class="number">0</span>) &#123;</span><br><span class="line">a[i].type=<span class="number">4</span>;</span><br><span class="line">a[i].three=three,a[i].two1=two1;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(three!=<span class="number">0</span>) &#123;</span><br><span class="line">a[i].type=<span class="number">3</span>;</span><br><span class="line">a[i].three=three,a[i].sum=sum;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(two1!=<span class="number">0</span> &amp;&amp; two2!=<span class="number">0</span>) &#123;</span><br><span class="line">a[i].type=<span class="number">2</span>;</span><br><span class="line">a[i].two1=two1,a[i].two2=two2;</span><br><span class="line">a[i].sum=sum;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(two1!=<span class="number">0</span>) &#123;</span><br><span class="line">a[i].type=<span class="number">1</span>;</span><br><span class="line">a[i].two1=two1;</span><br><span class="line">a[i].sum=sum;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">a[i].type=<span class="number">0</span>;</span><br><span class="line">a[i].sum=sum;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">sort(a+<span class="number">1</span>,a+n+<span class="number">1</span>,cmp);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;a[i].name&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) a[i].clean();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
            <tag> æ•°è®º </tag>
            
            <tag> ç‚¹åˆ†æ²» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(2019å—æ˜Œé‚€è¯·ç½‘ç»œèµ›) J.Distance on the tree (æ ‘é“¾å‰–åˆ†+ä¸»å¸­æ ‘)</title>
      <link href="2019/09/10/(2019%E5%8D%97%E6%98%8C%E9%82%80%E8%AF%B7%E7%BD%91%E7%BB%9C%E8%B5%9B)%20J.Distance%20on%20the%20tree/"/>
      <url>2019/09/10/(2019%E5%8D%97%E6%98%8C%E9%82%80%E8%AF%B7%E7%BD%91%E7%BB%9C%E8%B5%9B)%20J.Distance%20on%20the%20tree/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://nanti.jisuanke.com/t/38229">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„</strong></em> ï¼šç»™ä¸€é¢—æ ‘ï¼Œmæ¬¡æŸ¥è¯¢ui-&gt;viè¿™æ¡é“¾ä¸­è¾¹æƒå°äºç­‰äºkiçš„è¾¹æ•°ã€‚</p><p><em><strong>è§£ï¼š</strong></em> æ ‘é“¾å‰–åˆ†+ä¸»å¸­æ ‘æ€è·¯å¾ˆæ¸…æ™°ï¼Œå¯ä»¥è§£å†³ï¼›ï¼ˆåˆå› ä¸ºæ•°ç»„å¼€å°äº†è€Œç‹‚Tä¸æ­¢</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mid ((l+r)&gt;&gt;1)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e5</span>+<span class="number">5</span>; </span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span><span class="keyword">int</span> to,w;&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; G[N];</span><br><span class="line"><span class="keyword">int</span> dep[N],fa[N],son[N],sz[N],ed[N],ned[N],id[N],bel[N],cnt;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> ff)</span></span>&#123;</span><br><span class="line">dep[x]=dep[ff]+<span class="number">1</span>;</span><br><span class="line">fa[x]=ff,sz[x]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> mx=<span class="number">-1</span>,to,w,len=SZ(G[x]);</span><br><span class="line">node tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">tp=G[x][i],to=tp.to,w=tp.w;</span><br><span class="line"><span class="keyword">if</span>(to==ff) <span class="keyword">continue</span>;</span><br><span class="line">ed[to]=w;</span><br><span class="line">dfs1(to,x);</span><br><span class="line">sz[x]+=sz[to];</span><br><span class="line"><span class="keyword">if</span>(sz[to]&gt;mx) son[x]=to,mx=sz[to];</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> topx)</span></span>&#123;</span><br><span class="line">id[x]=++cnt,ned[cnt]=ed[x];</span><br><span class="line">bel[x]=topx;</span><br><span class="line"><span class="keyword">if</span>(!son[x]) <span class="keyword">return</span>;</span><br><span class="line">dfs2(son[x],topx);</span><br><span class="line"><span class="keyword">int</span> to,len=SZ(G[x]);</span><br><span class="line">node tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">tp=G[x][i],to=tp.to;</span><br><span class="line"><span class="keyword">if</span>(to==son[x] || to==fa[x]) <span class="keyword">continue</span>;</span><br><span class="line">dfs2(to,to);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">int</span> n,m,b[N],tot=<span class="number">0</span>,rt[N*<span class="number">20</span>],ls[N*<span class="number">20</span>],rs[N*<span class="number">20</span>],s[N*<span class="number">20</span>],all=<span class="number">0</span>;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> &amp;rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">rt=++tot,s[rt]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span>;</span><br><span class="line">build(ls[rt],l,mid),build(rs[rt],mid+<span class="number">1</span>,r);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> &amp;rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> last,<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">rt=++tot,ls[rt]=ls[last],rs[rt]=rs[last];</span><br><span class="line">s[rt]=s[last]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span>(p&lt;=mid) update(ls[rt],l,mid,ls[last],p);</span><br><span class="line"><span class="keyword">else</span> update(rs[rt],mid+<span class="number">1</span>,r,rs[last],p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> ss,<span class="keyword">int</span> ee,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span> s[ee]-s[ss];</span><br><span class="line"><span class="keyword">if</span>(k&gt;mid) <span class="keyword">return</span> s[ls[ee]]-s[ls[ss]]+query(rs[ss],rs[ee],mid+<span class="number">1</span>,r,k);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(k==mid) <span class="keyword">return</span> s[ls[ee]]-s[ls[ss]];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> query(ls[ss],ls[ee],l,mid,k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">r_query</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">//cout&lt;&lt;&quot;r_query &quot;&lt;&lt;x&lt;&lt;&quot; &quot;&lt;&lt;y&lt;&lt;&quot; &quot;&lt;&lt;k&lt;&lt;endl;</span></span><br><span class="line"><span class="comment">//cout&lt;&lt;bel[x]&lt;&lt;&quot; &quot;&lt;&lt;bel[y]&lt;&lt;endl;</span></span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(bel[x]!=bel[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[bel[x]]&lt;dep[bel[y]]) swap(x,y);</span><br><span class="line">res+=query(rt[id[bel[x]]<span class="number">-1</span>],rt[id[x]],<span class="number">1</span>,all,k);</span><br><span class="line">x=fa[bel[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&gt;dep[y]) swap(x,y);</span><br><span class="line">res+=query(rt[id[x]],rt[id[y]],<span class="number">1</span>,all,k);</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Q</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> l,r,k;</span><br><span class="line">&#125;qu[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line">read(n),read(m);</span><br><span class="line"><span class="keyword">int</span> x,y,w,tt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line">read(x),read(y),read(w);</span><br><span class="line">G[x].pb(&#123;y,w&#125;);</span><br><span class="line">G[y].pb(&#123;x,w&#125;);</span><br><span class="line">b[++tt]=w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line">read(x),read(y),read(w);</span><br><span class="line">qu[i]=&#123;x,y,w&#125;;</span><br><span class="line">b[++tt]=w;</span><br><span class="line">&#125;</span><br><span class="line">dfs1(<span class="number">1</span>,<span class="number">0</span>),dfs2(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">b[++tt]=<span class="number">0</span>;</span><br><span class="line">sort(b+<span class="number">1</span>,b+tt+<span class="number">1</span>);</span><br><span class="line">all=unique(b+<span class="number">1</span>,b+tt+<span class="number">1</span>)-(b+<span class="number">1</span>);</span><br><span class="line">build(rt[<span class="number">0</span>],<span class="number">1</span>,all);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">ned[i]=lower_bound(b+<span class="number">1</span>,b+all+<span class="number">1</span>,ned[i])-b;</span><br><span class="line">update(rt[i],<span class="number">1</span>,all,rt[i<span class="number">-1</span>],ned[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line">qu[i].k=lower_bound(b+<span class="number">1</span>,b+all+<span class="number">1</span>,qu[i].k)-b;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,r_query(qu[i].l,qu[i].r,qu[i].k));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸»å¸­æ ‘ </tag>
            
            <tag> æ ‘é“¾å‰–åˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(2019å—æ˜Œç½‘ç»œèµ›) C. Hello 2019 ï¼ˆçŸ©é˜µå»ºæ¨¡+çº¿æ®µæ ‘ç»´æŠ¤ï¼‰</title>
      <link href="2019/09/09/(2019%E5%8D%97%E6%98%8C%E7%BD%91%E7%BB%9C%E8%B5%9B)%20C.%20Hello%202019/"/>
      <url>2019/09/09/(2019%E5%8D%97%E6%98%8C%E7%BD%91%E7%BB%9C%E8%B5%9B)%20C.%20Hello%202019/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://nanti.jisuanke.com/t/41350">ä¼ é€é—¨</a></h1><p>è¿™æ˜¯ä¸€é“CFåŸé¢˜ï¼Œ<a href="https://blog.csdn.net/dreaming__ldx/article/details/81153858">æ€è·¯åœ¨è¿™</a></p><p>çº¿æ®µæ ‘ç»´æŠ¤çš„æ—¶å€™ï¼Œåªè¦ä»å³åˆ°å·¦ç»´æŠ¤ï¼Œä¸å°±å˜æˆäº†åªèƒ½æœ‰2019ä¸èƒ½æœ‰2018äº†å—ï¼Œï¼ˆå…³é”®æ˜¯æˆ‘ä¹Ÿä¸ä¼šæ­£ç€è€ƒè™‘å‘€T T</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;rt,ll y) &#123;return rt=rt+y&gt;=mod?rt+y-mod:rt+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;rt,ll y) &#123;return rt=rt*y&gt;=mod?rt*y%mod:rt*y;&#125;</span></span><br><span class="line"><span class="keyword">char</span> s[N];</span><br><span class="line"><span class="keyword">int</span> num[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Ma</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> mat[<span class="number">5</span>][<span class="number">5</span>];</span><br><span class="line">Ma <span class="keyword">operator</span> + (<span class="keyword">const</span> Ma x) <span class="keyword">const</span>&#123;</span><br><span class="line">Ma ans;</span><br><span class="line">ms(ans.mat,<span class="number">0x3f</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;<span class="number">5</span>; ++j) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;<span class="number">5</span>; ++k) &#123;</span><br><span class="line">ans.mat[i][j]=min(ans.mat[i][j],mat[i][k]+x.mat[k][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line">&#125; a[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">çŠ¶æ€0ï¼šè¿2éƒ½æ²¡æœ‰</span></span><br><span class="line"><span class="comment">çŠ¶æ€1ï¼šåªæœ‰2ï¼Œæ²¡æœ‰0è¿åœ¨åé¢</span></span><br><span class="line"><span class="comment">çŠ¶æ€2ï¼šå‡ºç°20ï¼Œæ²¡æœ‰1è¿åœ¨åé¢</span></span><br><span class="line"><span class="comment">çŠ¶æ€3ï¼šå‡ºç°201ï¼Œæ²¡æœ‰9è¿åœ¨åé¢</span></span><br><span class="line"><span class="comment">çŠ¶æ€4ï¼šå‡ºç°2019</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; ++i) </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;<span class="number">5</span>; ++j) a[rt].mat[i][j]=(i==j)?<span class="number">0</span>:inf;</span><br><span class="line"><span class="keyword">if</span>(num[l]==<span class="number">2</span>) a[rt].mat[<span class="number">0</span>][<span class="number">1</span>]=<span class="number">0</span>,a[rt].mat[<span class="number">0</span>][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(num[l]==<span class="number">0</span>) a[rt].mat[<span class="number">1</span>][<span class="number">2</span>]=<span class="number">0</span>,a[rt].mat[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(num[l]==<span class="number">1</span>) a[rt].mat[<span class="number">2</span>][<span class="number">3</span>]=<span class="number">0</span>,a[rt].mat[<span class="number">2</span>][<span class="number">2</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(num[l]==<span class="number">9</span>) a[rt].mat[<span class="number">3</span>][<span class="number">4</span>]=<span class="number">0</span>,a[rt].mat[<span class="number">3</span>][<span class="number">3</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(num[l]==<span class="number">8</span>) a[rt].mat[<span class="number">3</span>][<span class="number">3</span>]=<span class="number">1</span>,a[rt].mat[<span class="number">4</span>][<span class="number">4</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">a[rt]=a[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+a[rt&lt;&lt;<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il Ma <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l&amp;&amp;r&lt;=R) <span class="keyword">return</span> a[rt];</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(mid&lt;L) <span class="keyword">return</span> query(mid+<span class="number">1</span>,r,L,R,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(mid&gt;=R) <span class="keyword">return</span> query(l,mid,L,R,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">return</span> query(mid+<span class="number">1</span>,r,L,R,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>)+query(l,mid,L,R,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n,q;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%s&quot;</span>,&amp;n,&amp;q,s+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) num[i]=s[i]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">while</span>(q--) &#123;</span><br><span class="line"><span class="keyword">int</span> l,r;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;l,&amp;r);</span><br><span class="line"><span class="keyword">int</span> ans=query(<span class="number">1</span>,n,l,r,<span class="number">1</span>).mat[<span class="number">0</span>][<span class="number">4</span>];</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,(ans==inf?<span class="number">-1</span>:ans));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(2019å¾å·ç½‘ç»œèµ›) B. so easy (çº¿æ®µæ ‘ || å¹¶æŸ¥é›†)</title>
      <link href="2019/09/07/(2019%E5%BE%90%E5%B7%9E%E7%BD%91%E7%BB%9C%E8%B5%9B)%20B%20so%20easy/"/>
      <url>2019/09/07/(2019%E5%BE%90%E5%B7%9E%E7%BD%91%E7%BB%9C%E8%B5%9B)%20B%20so%20easy/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://nanti.jisuanke.com/t/41384">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> å°±æ˜¯ä¸¤ç§æ“ä½œï¼Œ1ï¼šä½¿å¾—xç‚¹æ— æ•ˆï¼Œ2ï¼šæŸ¥æ‰¾å¤§äºç­‰äºxçš„æœ€å°æœ‰æ•ˆç‚¹</p><p><em><strong>è§£ï¼š</strong></em> ç”±äºæ•°æ®è¾¾åˆ°1e9ä¸å¥½setï¼Œæ‰€ä»¥å°±çº¿æ®µæ ‘æ“ä½œå°±åƒäº†ï¼ŒèŠ‚ç‚¹ç»´æŠ¤åŒºé—´ï¼Œå’Œå­˜åœ¨çš„æœ‰æ•ˆç‚¹æ•°ï¼Œç„¶åæŸ¥è¯¢çš„æ—¶å€™ï¼Œç”¨å­˜åœ¨çš„æœ‰æ•ˆç‚¹æ•°å‰ªæä¸€ä¸‹å³å¯ã€‚ï¼ˆå¥½åƒæœ‰æš´åŠ›è¿‡çš„ï¼Ÿï¼Ÿï¼Ÿ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line">ll b[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> op,x;</span><br><span class="line">&#125;qu[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">T</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> l,r;</span><br><span class="line">ll sum;</span><br><span class="line">&#125;s[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">s[rt].sum=s[rt&lt;&lt;<span class="number">1</span>].sum+s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123; <span class="comment">//å·¦é—­å³å¼€ </span></span><br><span class="line">s[rt].l=b[l],s[rt].r=b[l+<span class="number">1</span>];</span><br><span class="line">s[rt].sum=s[rt].r-s[rt].l;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">s[rt].l=s[rt&lt;&lt;<span class="number">1</span>].l,s[rt].r=s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].r;</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> X)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">s[rt].sum--;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(X&lt;s[rt&lt;&lt;<span class="number">1</span>].r) update(l,mid,rt&lt;&lt;<span class="number">1</span>,X);</span><br><span class="line"><span class="keyword">else</span> update(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,X);</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line">ll res=<span class="number">0</span>;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> X)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123;</span><br><span class="line"><span class="keyword">if</span>(s[rt].sum==s[rt].r-s[rt].l)&#123;</span><br><span class="line">res=s[rt].l;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">res=s[rt].l+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(X&lt;s[rt&lt;&lt;<span class="number">1</span>].r &amp;&amp; s[rt&lt;&lt;<span class="number">1</span>].sum) query(l,mid,rt&lt;&lt;<span class="number">1</span>,X);</span><br><span class="line"><span class="keyword">if</span>(res==<span class="number">0</span> &amp;&amp; s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum) query(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,X);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>,op,x;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;qu[i].op,&amp;qu[i].x);</span><br><span class="line"><span class="keyword">if</span>(x&gt;n) <span class="keyword">continue</span>;</span><br><span class="line">b[++cnt]=qu[i].x;</span><br><span class="line">&#125;</span><br><span class="line">b[++cnt]=n+<span class="number">5</span>;</span><br><span class="line">sort(b+<span class="number">1</span>,b+cnt+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> sz=unique(b+<span class="number">1</span>,b+cnt+<span class="number">1</span>)-(b+<span class="number">1</span>); </span><br><span class="line">build(<span class="number">1</span>,sz<span class="number">-1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(qu[i].op==<span class="number">2</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(qu[i].x&gt;n) <span class="built_in">printf</span>(<span class="string">&quot;-1\n&quot;</span>);</span><br><span class="line">res=<span class="number">0</span>;</span><br><span class="line">query(<span class="number">1</span>,sz<span class="number">-1</span>,<span class="number">1</span>,qu[i].x);</span><br><span class="line"><span class="keyword">if</span>(res!=<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,res);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;-1\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(qu[i].x&gt;n) <span class="keyword">continue</span>;</span><br><span class="line">update(<span class="number">1</span>,sz<span class="number">-1</span>,<span class="number">1</span>,qu[i].x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>é¢˜è§£ç”¨mapæ¨¡æ‹Ÿå¹¶æŸ¥é›†ç®€å•å¥½å†™ï¼Œèœå•Šï¼›</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; fa;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(!fa.count(x)) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">return</span> fa[x]=find(fa[x]);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">int</span> op,x;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;op,&amp;x);</span><br><span class="line"><span class="keyword">if</span>(op==<span class="number">1</span>)fa[x]=find(x+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">int</span> ans=find(x);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,(ans&gt;n?<span class="number">-1</span>:ans));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> å¹¶æŸ¥é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(2019å¾å·ç½‘ç»œèµ›) I. query (æ ‘çŠ¶æ•°ç»„)</title>
      <link href="2019/09/07/(2019%E5%BE%90%E5%B7%9E%E7%BD%91%E7%BB%9C%E8%B5%9B)%20I.%20query/"/>
      <url>2019/09/07/(2019%E5%BE%90%E5%B7%9E%E7%BD%91%E7%BB%9C%E8%B5%9B)%20I.%20query/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://nanti.jisuanke.com/t/41391">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> ä¸€ä¸ª1~nçš„å…¨æ’åˆ—ï¼Œæœ‰mæ¬¡æŸ¥è¯¢ï¼ŒæŸ¥è¯¢[l,r]ä¸­æ»¡è¶³ï¼ˆl&lt;=i&lt;j&lt;=rï¼‰a[i]å’Œa[j]æ˜¯å€æ•°å…³ç³»çš„ç‚¹å¯¹ã€‚</p><p><em><strong>è§£ï¼š</strong></em> æˆ‘ä»¬ç”¨s[i]è¡¨ç¤ºå¸¦ç¬¬iä¸ªï¼Œå‰é¢æ€»å…±ç”¨s[i]ä¸ªæ»¡è¶³æ¡ä»¶çš„ç‚¹å¯¹ï¼Œè€ƒè™‘[l,r]å°±æ˜¯s[r]-s[l-1]å—ï¼Œæ˜¾ç„¶è¿˜å¤šè€ƒè™‘äº†é‚£ç§ä¸€ä¸ªç‚¹åœ¨[1,l-1],ä¸€ä¸ªç‚¹åœ¨[l,r]é‡Œçš„è¿™ç§ç‚¹å¯¹ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ç§å‡æ‰ã€‚ä»ç¬¬ä¸€ä¸ªç‚¹å¾€åè€ƒè™‘ï¼Œé‚£ä¹ˆå¯ä»¥å’Œè¿™ä¸ªç‚¹æ„æˆç‚¹å¯¹çš„ï¼Œæ˜¾ç„¶å°±æ˜¯å®ƒçš„å€æ•°æˆ–è€…å®ƒçš„å› å­ï¼Œå½“ç„¶ä¸åŒ…æ‹¬å®ƒæœ¬èº«ï¼Œæˆ‘ä»¬åªåŠ å…¥posä½å¤§äºç°åœ¨iä½çš„ï¼Œé¿å…é‡å¤æ·»åŠ ã€‚å½“qu[j].l==iæ—¶ï¼Œæˆ‘ä»¬å…ˆä¸åŠ å…¥a[i],è€Œæ˜¯è€ƒè™‘å‡å»å·²ç»å‡ºç°åœ¨[l,r]ä¸­çš„ç‚¹å¯¹ï¼Œè¿™ä¸å°±æ˜¯æˆ‘ä»¬å¯¹äºè¿™qu[j]æŸ¥è¯¢è¦å‡æ‰çš„å—ï¼Œç„¶åå†åŠ å…¥a[i]çš„è´¡çŒ®ï¼›è€Œå¯¹äºq[j].r==i,å½“ç„¶æ˜¯å…ˆè€ƒè™‘a[i]çš„è´¡çŒ®ï¼Œç„¶ååŠ ä¸Š[l,r]ä¸­çš„ç‚¹å¯¹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> low(x) (x&amp;(-x))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line">ll s[N],ans[N];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(p&lt;N) s[p]+=x,p+=low(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il ll <span class="title">ask</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">ll res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(p) res+=s[p],p-=low(p);</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il ll <span class="title">r_ask</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> ask(r)-ask(l<span class="number">-1</span>);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">int</span> pos[N],n,m,a[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> l,r,id;</span><br><span class="line">&#125;qu[N];</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">cmpl</span><span class="params">(node a,node b)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(a.l==b.l) <span class="keyword">return</span> a.r&lt;b.r;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> a.l&lt;b.l; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">cmpr</span><span class="params">(node a,node b)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(a.r==b.r) <span class="keyword">return</span> a.l&lt;b.l;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> a.r&lt;b.r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;N;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(ll j=<span class="number">2</span>;j*j&lt;=i;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(i%j==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(j*j==i) v[i].pb(j);</span><br><span class="line"><span class="keyword">else</span> v[i].pb(j),v[i].pb(i/j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">v[i].pb(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line">init();</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,a+i);</span><br><span class="line">pos[a[i]]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;qu[i].l,&amp;qu[i].r);</span><br><span class="line">qu[i].id=i;</span><br><span class="line">&#125;</span><br><span class="line">sort(qu+<span class="number">1</span>,qu+m+<span class="number">1</span>,cmpl);</span><br><span class="line"><span class="keyword">int</span> j=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">while</span>(qu[j].l==i &amp;&amp; j&lt;=m)&#123;</span><br><span class="line">ans[qu[j].id]-=r_ask(qu[j].l,qu[j].r);</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(ll k=<span class="number">2</span>;k*a[i]&lt;=n;++k)&#123;</span><br><span class="line"><span class="keyword">if</span>(pos[k*a[i]]&gt;i) add(pos[k*a[i]],<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> t:v[a[i]])&#123;</span><br><span class="line"><span class="keyword">if</span>(pos[t]&gt;i) add(pos[t],<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ms(s,<span class="number">0</span>);</span><br><span class="line">sort(qu+<span class="number">1</span>,qu+m+<span class="number">1</span>,cmpr);</span><br><span class="line">j=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(ll k=<span class="number">2</span>;k*a[i]&lt;=n;++k)&#123;</span><br><span class="line"><span class="keyword">if</span>(pos[k*a[i]]&gt;i) add(pos[k*a[i]],<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> t:v[a[i]])&#123;</span><br><span class="line"><span class="keyword">if</span>(pos[t]&gt;i) add(pos[t],<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(qu[j].r==i &amp;&amp; j&lt;=m)&#123;</span><br><span class="line">ans[qu[j].id]+=r_ask(qu[j].l,qu[j].r);</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘çŠ¶æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luguo) P3401 æ´›è°·æ ‘ (æ ‘é“¾å‰–åˆ†+çº¿æ®µæ ‘)</title>
      <link href="2019/09/07/(Luguo)%20P3401%20%E6%B4%9B%E8%B0%B7%E6%A0%91/"/>
      <url>2019/09/07/(Luguo)%20P3401%20%E6%B4%9B%E8%B0%B7%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://www.luogu.org/problem/P3401">ä¼ é€é—¨</a></h1><p><em><strong>è§£</strong></em>ï¼šé¦–å…ˆå¼‚æˆ–ä¹Ÿæ˜¯å…·æœ‰å‰ç¼€æ€§è´¨çš„ï¼Œb[i]ä»£è¡¨ä»iç‚¹å¼‚æˆ–åˆ°æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆiåˆ°jçš„å¼‚æˆ–å’Œå°±æ˜¯b[i]^b[j],ä½†æ˜¯é¢˜ç›®æ±‚å¾—æ˜¯i~jè·¯å¾„ä¸Šæ‰€ä»¥å­è·¯å¾„çš„å¼‚æˆ–å’Œï¼Œæ˜¾ç„¶æ˜¯ä¸èƒ½ä¸€ä¸ªä¸€ä¸ªçš„æ±‚ï¼Œæ€è·¯ä¹Ÿå¾ˆå·§å¦™ï¼Œæˆ‘ä»¬å°†è¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰çš„b[]æ‹¿å‡ºæ¥ï¼Œå¯¹æ¯ä¸€ä½è¿›è¡Œç»´æŠ¤ï¼Œçœ‹çœ‹è¿™äº›æ•°åœ¨è¿™ä¸€ä½ä¸Šæœ‰å¤šå°‘1ï¼Œå’Œ0ï¼Œé‚£ä¹ˆè¿™ä¸€ä½å¯¹ç»“æœçš„è´¡çŒ®ä¸å°±æ˜¯(1&lt;&lt;i)<em>num1</em>num0å—ï¼›è¿˜æœ‰ä¿®æ”¹ï¼Œé¦–å…ˆä¿®æ”¹å½±å“çš„è‚¯å®šæ˜¯è¯¥èŠ‚ç‚¹ä¸‹é¢å­æ ‘æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œä¿®æ”¹è¿˜æ˜¯æ¯ä¸€ä½æ¯ä¸€ä½çš„çœ‹ï¼Œå¦‚æœæœ‰ä¸€ä½çš„1å˜æˆäº†0ï¼Œé‚£è¯´æ˜0çš„ä¸ªæ•°å’Œ1çš„ä¸ªæ•°äº’æ¢ï¼Œrevä¸€ä¸‹å°±å¯ä»¥ã€‚è¿™é‡Œç”¨çº¿æ®µæ ‘å»ç»´æŠ¤æ¯ä¸€ä½å°±å¯ä»¥äº†ã€‚å‰©ä¸‹çš„éƒ¨åˆ†å°±æ˜¯æ•°é“¾å‰–åˆ†çš„åŸºæœ¬æ“ä½œäº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">5e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,q,ed[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span><span class="keyword">int</span> to,w;&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; eg[N];</span><br><span class="line"><span class="keyword">int</span> dep[N],fa[N],sz[N],son[N],id[N],bel[N],cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> b[N],nb[N]; <span class="comment">//b[i]:iåˆ°æ ¹å¼‚æˆ–çš„ç»“æœ</span></span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> ff)</span></span>&#123;</span><br><span class="line">vis[x]=<span class="literal">true</span>;</span><br><span class="line">    dep[x]=dep[ff]+<span class="number">1</span>;</span><br><span class="line">    fa[x]=ff,sz[x]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> mx=<span class="number">-1</span>,to;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;SZ(eg[x]);++i)&#123;</span><br><span class="line">to=eg[x][i].to;</span><br><span class="line"><span class="keyword">if</span>(to==ff || vis[to]) <span class="keyword">continue</span>;</span><br><span class="line">b[to]=b[x]^eg[x][i].w;</span><br><span class="line">ed[to]=eg[x][i].w;</span><br><span class="line">dfs1(to,x);</span><br><span class="line">sz[x]+=sz[to];</span><br><span class="line"><span class="keyword">if</span>(sz[to]&gt;mx)son[x]=to,mx=sz[to];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> topx)</span></span>&#123;</span><br><span class="line">    id[x]=++cnt;</span><br><span class="line">    bel[x]=topx,nb[cnt]=b[x];</span><br><span class="line">    <span class="keyword">if</span>(!son[x]) <span class="keyword">return</span> ;</span><br><span class="line">    dfs2(son[x],topx);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,to;i&lt;SZ(eg[x]);++i)&#123;</span><br><span class="line">        to=eg[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(to==fa[x] || to==son[x]) <span class="keyword">continue</span>;</span><br><span class="line">        dfs2(to,to);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">T</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> n1,n0;</span><br><span class="line">    <span class="keyword">bool</span> rev;</span><br><span class="line">    T()&#123;n1=<span class="number">0</span>,n0=<span class="number">0</span>,rev=<span class="number">0</span>;&#125;</span><br><span class="line">&#125;t[<span class="number">15</span>][N&lt;&lt;<span class="number">3</span>];</span><br><span class="line"><span class="function">il T <span class="title">add</span><span class="params">(T a,T b)</span></span>&#123;</span><br><span class="line">    T res;</span><br><span class="line">    res.n1=a.n1+b.n1;</span><br><span class="line">    res.n0=a.n0+b.n0;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> k,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(t[k][rt].rev)&#123;</span><br><span class="line">        swap(t[k][rt&lt;&lt;<span class="number">1</span>].n1,t[k][rt&lt;&lt;<span class="number">1</span>].n0);</span><br><span class="line">        swap(t[k][rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].n1,t[k][rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].n0);</span><br><span class="line">        t[k][rt&lt;&lt;<span class="number">1</span>].rev^=<span class="number">1</span>;</span><br><span class="line">        t[k][rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].rev^=<span class="number">1</span>;</span><br><span class="line">        t[k][rt].rev=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="comment">//cout&lt;&lt;&quot;build &quot;&lt;&lt;l&lt;&lt;&quot; &quot;&lt;&lt;r&lt;&lt;&quot; &quot;&lt;&lt;rt&lt;&lt;&quot; &quot;&lt;&lt;k&lt;&lt;endl;</span></span><br><span class="line">    <span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">        <span class="keyword">if</span>((nb[l]&gt;&gt;k)&amp;<span class="number">1</span>) t[k][rt].n1=<span class="number">1</span>,t[k][rt].n0=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> t[k][rt].n1=<span class="number">0</span>,t[k][rt].n0=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(l,mid,rt&lt;&lt;<span class="number">1</span>,k),build(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,k);</span><br><span class="line">    t[k][rt]=add(t[k][rt&lt;&lt;<span class="number">1</span>],t[k][rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rev</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> rt,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=l &amp;&amp; R&gt;=r)&#123;</span><br><span class="line">        swap(t[k][rt].n1,t[k][rt].n0);</span><br><span class="line">        t[k][rt].rev^=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    pushdown(k,rt);</span><br><span class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=mid) rev(l,mid,L,R,rt&lt;&lt;<span class="number">1</span>,k);</span><br><span class="line">    <span class="keyword">if</span>(R&gt;mid) rev(mid+<span class="number">1</span>,r,L,R,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,k);</span><br><span class="line">    t[k][rt]=add(t[k][rt&lt;&lt;<span class="number">1</span>],t[k][rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> w)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">10</span>;++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(((w^ed[u])&gt;&gt;i)&amp;<span class="number">1</span>) rev(<span class="number">1</span>,n,id[u],id[u]+sz[u]<span class="number">-1</span>,<span class="number">1</span>,i);</span><br><span class="line">    &#125;</span><br><span class="line">    ed[u]=w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">T <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> rt,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=l &amp;&amp; R&gt;=r)&#123;</span><br><span class="line">        <span class="keyword">return</span> t[k][rt];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    pushdown(k,rt);</span><br><span class="line">    T res,ls,rs;</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=mid)&#123;</span><br><span class="line">        ls=query(l,mid,L,R,rt&lt;&lt;<span class="number">1</span>,k);</span><br><span class="line">        res.n0+=ls.n0,res.n1+=ls.n1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(R&gt;mid)&#123;</span><br><span class="line">        rs=query(mid+<span class="number">1</span>,r,L,R,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,k);</span><br><span class="line">        res.n0+=rs.n0,res.n1+=rs.n1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">    ll res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> pu=u,pv=v;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">10</span>;++i)&#123;</span><br><span class="line">        u=pu,v=pv;</span><br><span class="line">        T rs,tp;</span><br><span class="line">        <span class="keyword">while</span>(bel[u]!=bel[v])&#123;</span><br><span class="line">            <span class="keyword">if</span>(dep[bel[u]]&lt;dep[bel[v]]) swap(u,v);</span><br><span class="line">            tp=query(<span class="number">1</span>,n,id[bel[u]],id[u],<span class="number">1</span>,i);</span><br><span class="line">            rs=add(rs,tp);</span><br><span class="line">            u=fa[bel[u]];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(dep[u]&gt;dep[v]) swap(u,v);</span><br><span class="line">        rs=add(rs,query(<span class="number">1</span>,n,id[u],id[v],<span class="number">1</span>,i));</span><br><span class="line">        res+=(<span class="number">1LL</span>&lt;&lt;i)*rs.n0*rs.n1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;q;</span><br><span class="line">    <span class="keyword">int</span> u,v,w,op;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">        eg[u].pb(node&#123;v,w&#125;);</span><br><span class="line">        eg[v].pb(node&#123;u,w&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs1(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">dfs2(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">10</span>;++i) build(<span class="number">1</span>,n,<span class="number">1</span>,i);</span><br><span class="line">    <span class="keyword">while</span>(q--)&#123;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;op&gt;&gt;u&gt;&gt;v;</span><br><span class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>) <span class="built_in">cout</span>&lt;&lt;query(u,v)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">cin</span>&gt;&gt;w;</span><br><span class="line">            <span class="keyword">if</span>(u!=fa[v]) swap(u,v);</span><br><span class="line">            update(v,w);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> æ ‘é“¾å‰–åˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¬§æ‹‰é™å¹‚æ¨¡æ¿</title>
      <link href="2019/09/03/%E6%AC%A7%E6%8B%89%E9%99%8D%E5%B9%82%E6%A8%A1%E6%9D%BF/"/>
      <url>2019/09/03/%E6%AC%A7%E6%8B%89%E9%99%8D%E5%B9%82%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p>é™å¹‚å…¬å¼ï¼š <img src="https://img-blog.csdnimg.cn/20190903163949301.png" alt="img" /></p><p>ç”¨å¤§ä½¬çš„Modå‡½æ•°ï¼Œå°±å¯ä»¥ç»Ÿç»ŸæŒ‰ç¬¬ä¸€ç§å»è€ƒè™‘ã€‚<a href="https://www.cnblogs.com/ACMLCZH/p/8117161.html?tdsourcetag=s_pctim_aiomsg">å¤§ä½¬çš„è¯æ˜</a></p><p><a href="https://blog.csdn.net/TDD_Master/article/details/100521985">ä¸‹é¢˜æ˜¯2019å—äº¬ç½‘ç»œèµ›B</a></p><p>æœ€åæ±‚è§£çš„å°±æ˜¯a<sup>a</sup>aâ€¦ å…±bä¸ªaï¼Œ%mçš„ç»“æœ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="function">il ll <span class="title">Mod</span><span class="params">(ll x,ll mod)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> x&lt;mod?x:x%mod+mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> phi[N],prime[N],tot;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Euler</span><span class="params">()</span></span>&#123; <span class="comment">//phi[i]:å°äºæˆ–ç­‰äºiçš„æ•°ä¸­ä¸iäº’è´¨çš„æ•°çš„æ•°ç›®</span></span><br><span class="line">phi[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;N;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(!phi[i])&#123;</span><br><span class="line">phi[i]=i<span class="number">-1</span>;</span><br><span class="line">prime[++tot]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=tot &amp;&amp; <span class="number">1LL</span>*i*prime[j]&lt;N;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(i%prime[j]) phi[i*prime[j]]=phi[i]*(prime[j]<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">phi[i*prime[j]]=phi[i]*prime[j];</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il ll <span class="title">mpow</span><span class="params">(ll x,ll n,ll p)</span></span>&#123;</span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(n)&#123;</span><br><span class="line"><span class="keyword">if</span>(n&amp;<span class="number">1</span>) ans=Mod(ans*x,p);</span><br><span class="line">x=Mod(x*x,p);</span><br><span class="line">n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il ll <span class="title">dfs</span><span class="params">(ll a,ll sp,ll p)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(sp==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(p==<span class="number">1</span>) <span class="keyword">return</span> a;</span><br><span class="line">ll res=dfs(a,sp<span class="number">-1</span>,phi[p]);</span><br><span class="line"><span class="keyword">return</span> mpow(a,res,p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);<span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">Euler();</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line"><span class="keyword">int</span> a,b,m;</span><br><span class="line"><span class="keyword">while</span>(T--)&#123; <span class="comment">//æ±‚è§£çš„æ˜¯a^a...å…±bä¸ªa %mçš„ç»“æœ </span></span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;m;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dfs(a,b,m)%m&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(2019å—äº¬ç½‘ç»œèµ›) I. Washing clothes ï¼ˆè´ªå¿ƒï¼‰</title>
      <link href="2019/09/02/(2019%E5%8D%97%E4%BA%AC%E7%BD%91%E7%BB%9C%E8%B5%9B)%20I.%20Washing%20clothes/"/>
      <url>2019/09/02/(2019%E5%8D%97%E4%BA%AC%E7%BD%91%E7%BB%9C%E8%B5%9B)%20I.%20Washing%20clothes/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://nanti.jisuanke.com/t/41306">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„</strong></em> ï¼šæ¯ä¸ªäººtiæ—¶é—´åˆ°æ´—è¡£åº—ï¼Œä½†æ˜¯åªæœ‰ä¸€å°æ´—è¡£æœºï¼Œæ¯æ¬¡èŠ±è´¹çš„æ—¶é—´æ˜¯xï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥äººæ´—ï¼ŒèŠ±è´¹çš„æ—¶é—´ä¸ºy,æ±‚å½“xå±äº[1,y],æ‰€æœ‰äººæ‰€è¦èŠ±è´¹çš„æœ€å°‘æ—¶é—´ã€‚</p><p><em><strong>è§£ï¼š</strong></em> è´ªå¿ƒè€ƒè™‘æ‰‹æ´—çš„äººæ˜¯è¿ç»­çš„ï¼Œè€Œä¸”æœºå™¨æ´—ä¹Ÿæ˜¯è¿ç»­çš„ï¼Œå› ä¸ºåªè¦è€ƒè™‘æœ€åä¸€ä¸ªå®Œæˆçš„äººã€‚è€ƒè™‘å‰é¢æ‰‹æ´—çš„æ—¶é—´ï¼Œéšç€içš„å¢åŠ æ˜¯ä¸€ä¸ªé€’å¢å‡½æ•°ï¼Œè€Œæœºå™¨æ´—æ—¶é—´æ˜¯ä¸€ä¸ªé€’å‡çš„å‡½æ•°ï¼Œè€Œæˆ‘ä»¬è¦å–è¿™ä¸¤ä¸ªå‡½æ•°çš„æœ€å¤§å€¼ çš„æœ€å°å€¼ï¼Œå‡½æ•°å°±æ˜¯ä¸€ä¸ªVå‹çš„ï¼Œé‚£æ€ä¹ˆæ‰¾åˆ°é‚£ä¸ªæå°å€¼ç‚¹iå‘¢ã€‚æˆ‘è€ƒè™‘çš„pæ˜¯æ‰‹æ´—æ—¶é—´å¤§äºç­‰äºåé¢pä¸ªäººæœºæ´—çš„æ—¶é—´ ï¼Œè¯´æ˜ä»è¯¥ç‚¹ä½œä¸ºæ‰‹æ´—æœ€åçš„ç»“æŸç‚¹æ˜¯æœ‰å¯èƒ½å½±å“ç»“æœçš„ï¼Œè€Œå¦‚æœå†å¾€å‰ä¸€ç‚¹ï¼Œæ‰‹æ´—æ—¶é—´å·²ç»ä¸å¯èƒ½å½±å“æœ€ç»ˆç»“æœï¼Œè€Œä¸”æœºæ´—æ—¶é—´è¿˜å¯èƒ½ä¼šå˜å¤§ã€‚å…¶å®æˆ‘ä»¬è¦è€ƒè™‘çš„å°±æ˜¯æœ€å°å€¼é™„è¿‘çš„é‚£ä¸‰ä¸ªå¯èƒ½çš„æœ€å°ç‚¹å°±å¯ä»¥äº†ï¼Œn-p-1ï¼Œn-pï¼Œn-p+1ã€‚</p><p>è€ƒè™‘n-pç‚¹ï¼Œå¦‚æœæ‰‹æ´—æ—¶é—´å¤§äºæœºæ´—æ—¶é—´é‚£å¤§äºçš„éƒ¨åˆ†ä¹Ÿæ˜¯å°äºä¸€æ¬¡æœºæ´—çš„æ—¶é—´ï¼Œç°åœ¨çš„æœ€å°æ—¶é—´å°±æ˜¯æ‰‹æ´—æ—¶é—´ï¼Œå¦‚æœå¤§äºæ‰‹æ´—æ—¶é—´ï¼Œé‚£å°±ä¸è°ˆäº†ã€‚ä½ è€ƒè™‘å†å¾€å‰ä¸€ç‚¹n-p-1ï¼Œé‚£å°±æ˜¯p+1ä¸ªæœºæ´—æ—¶é—´ï¼Œè‚¯å®šæ˜¯å¤§äºåˆšæ‰çš„æ‰‹æ´—æ—¶é—´äº†ã€‚è€Œå†å¾€åè€ƒè™‘n-p+1,æ­¤æ—¶çš„æ‰‹æ´—æ—¶é—´å¤§äºn-pçš„æ‰‹æ´—æ—¶é—´ï¼Œæœºæ´—æ—¶é—´æ˜¯å°äºn-pçš„æœºæ´—æ—¶é—´çš„ï¼Œé‚£ä¼šä¸ä¼šæœ‰å°äºn-pæ‰€ç”»æ—¶é—´çš„å¯èƒ½å‘¢ï¼Œè€ƒè™‘n-pæ‰‹æ´—æ—¶é—´æ¯”æœºæ´—æ—¶é—´é•¿ï¼Œé‚£ç­”æ¡ˆå°±æ˜¯æ‰‹æ´—æ—¶é—´ï¼Œç°åœ¨n-p+1æ‰‹æ´—æ—¶é—´å¤§äºn-pæ‰‹æ´—æ—¶é—´æ‰€ä»¥ä¸å¯èƒ½ï¼›è€ƒè™‘n-pæœºæ´—æ—¶é—´æ¯”æ‰‹æ´—æ—¶é—´é•¿ï¼Œé‚£ç­”æ¡ˆå°±æ˜¯æœºæ´—æ—¶é—´ï¼Œè¿™é‡Œæ„Ÿè§‰æƒ³çš„è¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šâ€¦</p><p>èœé€¼æ²¡æƒ³æ¸…æ¥šéƒ½æ˜¯ä»n-pç‚¹åé¢ç»Ÿç»Ÿè€ƒè™‘ï¼Œmaxï¼ˆæ‰‹æ´—æ—¶é—´ï¼Œæœºå™¨æ—¶é—´ï¼‰å†å–æœ€å°å€¼ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line">ll a[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">sort(a+<span class="number">1</span>,a+n+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">1</span>; x&lt;=m; ++x) &#123;</span><br><span class="line"><span class="keyword">int</span> p=min(n,m/x); <span class="comment">//æ‰‹æ´—å¤§äºç­‰äºåé¢pä¸ªäººæœºæ´—çš„æ—¶é—´ </span></span><br><span class="line">ll nxt=<span class="number">0</span>,res=inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=n; i&gt;n-p; --i) &#123; <span class="comment">//æ‰€æœ‰å¯èƒ½çš„æœ€å°å€¼ç‚¹ </span></span><br><span class="line">nxt=max(nxt,a[i]+<span class="number">1LL</span>*(n-i+<span class="number">1</span>)*x);</span><br><span class="line">ll tp=nxt;</span><br><span class="line"><span class="keyword">if</span>(i&gt;<span class="number">1</span>) tp=max(nxt,a[i<span class="number">-1</span>]+m);</span><br><span class="line">res=min(res,tp); </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span>(x==m) <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>å·¨ä½¬éƒ½æ˜¯ç›´æ¥n-pä½œä¸ºæå€¼ç‚¹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line">ll a[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">sort(a+<span class="number">1</span>,a+n+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">1</span>; x&lt;=m; ++x) &#123;</span><br><span class="line"><span class="keyword">int</span> p=min(n,m/x); <span class="comment">//å¤§äºç­‰äºåé¢pä¸ªäººæœºæ´—çš„æ—¶é—´ </span></span><br><span class="line">ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(p&lt;n) ans=max(ans,a[n-p]+m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=n; i&gt;n-p; --i) ans=max(ans,a[i]+<span class="number">1LL</span>*(n-i+<span class="number">1</span>)*x);</span><br><span class="line"><span class="keyword">if</span>(x==m) <span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯»å…¥è¾“å‡ºæŒ‚ï¼ˆä»¥å¤‡ä¸æ—¶ä¹‹éœ€ï¼‰</title>
      <link href="2019/08/25/%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%8C%82/"/>
      <url>2019/08/25/%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%8C%82/</url>
      
        <content type="html"><![CDATA[<p><strong>è¯»å…¥</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢è¿™ä¸ªæ›´å¿«ï¼Œä½†æ˜¯è¦ctrl+zç»“æŸå¤šç»„è¯»å…¥ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">char</span> <span class="title">nc</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">char</span> buf[<span class="number">1000000</span>],*p1=buf,*p2=buf;</span><br><span class="line"><span class="keyword">return</span> p1==p2&amp;&amp;(p2=(p1=buf)+fread(buf,<span class="number">1</span>,<span class="number">1000000</span>,<span class="built_in">stdin</span>),p1==p2)?EOF:*p1++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;sum)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch=nc();sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(!(ch&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;ch&lt;=<span class="string">&#x27;9&#x27;</span>)) ch=nc();</span><br><span class="line"><span class="keyword">while</span>(ch&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;ch&lt;=<span class="string">&#x27;9&#x27;</span>) sum=(sum&lt;&lt;<span class="number">3</span>)+(sum&lt;&lt;<span class="number">1</span>)+(ch<span class="number">-48</span>),ch=nc();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;<span class="number">0</span>) &#123;x=-x;<span class="built_in">putchar</span>(<span class="string">&#x27;-&#x27;</span>);&#125;</span><br><span class="line"><span class="keyword">if</span>(x&gt;<span class="number">9</span>) print(x/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">putchar</span>(x%<span class="number">10</span>+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>(CCPC) ç½‘ç»œèµ› 1002 array (çº¿æ®µæ ‘å‰ªæ)</title>
      <link href="2019/08/24/(CCPC)%20%E7%BD%91%E7%BB%9C%E8%B5%9B%201002%20array/"/>
      <url>2019/08/24/(CCPC)%20%E7%BD%91%E7%BB%9C%E8%B5%9B%201002%20array/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://acm.hdu.edu.cn/showproblem.php?pid=6703">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> ç»™ä½ ä¸€ä¸ªåºåˆ—ï¼Œæ¯æ¬¡æŸ¥è¯¢ã€1ï¼Œrã€‘&gt;=k æœ€å°çš„æ²¡æœ‰å‡ºç°çš„aiå€¼ã€‚</p><p><em><strong>è§£ï¼š</strong></em> å°±æ˜¯ä¸€é¢—æƒå€¼çº¿æ®µæ ‘ï¼ŒåŒæ—¶èŠ‚ç‚¹ç”¨lsç»´æŠ¤ä»–ä»£è¡¨åŒºé—´æ‰€æœ‰å€¼å‡ºç°ä½ç½®çš„æœ€å¤§å€¼ï¼Œæ²¡æœ‰å‡ºç°ï¼ˆæˆ–ä¿®æ”¹ï¼‰éƒ½ç½®æˆæ— ç©·å¤§ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œèµ°å·¦å³å„¿å­æ ¹æ®kæ¥ï¼Œæ»¡è¶³æ¡ä»¶ä¼˜å…ˆè¿›å…¥å·¦å„¿å­ï¼Œä½†æ˜¯è¦åˆ¤æ–­ä¸€ä¸‹lsï¼ˆlsonï¼‰æ˜¯å¦ï¼rï¼Œå¦‚æœå°äºrï¼Œé‚£è¯´æ˜æ‰€æœ‰å€¼éƒ½åœ¨å°äºrçš„åŒºé—´å‡ºç°äº†ï¼Œå°±æ²¡å¿…è¦è¿›å…¥ã€‚ç„¶åé€’å½’åˆ°å¶å­èŠ‚ç‚¹ï¼Œå‡ºç°çš„ä½ç½®ï¼rï¼Œé‚£å°±è¯´æ˜ç­”æ¡ˆæ˜¯è¿™ä¸ªläº†ã€‚åœ¨å·¦å„¿å­æ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆçš„è¯ï¼Œåœ¨å›æº¯çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå¯ä»¥è¿›å…¥å³å„¿å­ï¼Œé‚£å°±è¯´æ˜ç­”æ¡ˆä¸€å®šä¼šåœ¨å³å„¿å­åŒºé—´ä¸­äº†ï¼Œå› ä¸ºå³å„¿å­åŒºé—´å€¼&gt;kä¸”å­˜åœ¨å€¼çš„ä¸‹æ ‡&gt;r,æ‰€ä»¥åªè¦æ‰¾åˆ°ä¸‹è¡¨ï¼ræœ€å°çš„æ•°å³å¯ã€‚æœ€åçš„æƒ…å†µåœ¨æ ‘ä¸­èµ°å‡ºçš„æƒ…å†µå°±æ˜¯ä¸€ä¸ªäººå½¢çš„æ ·å­ï¼Œ2*logã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e7</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> a[maxn],b[maxn],ls[maxn];</span><br><span class="line"><span class="keyword">int</span> fg[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">ls[rt]=max(ls[rt&lt;&lt;<span class="number">1</span>],ls[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">ls[rt]=b[l];</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">ls[rt]=b[l]=inf;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=mid) update(l,mid,rt&lt;&lt;<span class="number">1</span>,x);</span><br><span class="line"><span class="keyword">else</span> update(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,x);</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> ans;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> R,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123;</span><br><span class="line"><span class="keyword">if</span>(ls[rt]&gt;R) ans=l;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(k&lt;=mid &amp;&amp; ls[rt&lt;&lt;<span class="number">1</span>]&gt;R) query(l,mid,rt&lt;&lt;<span class="number">1</span>,R,k);</span><br><span class="line"><span class="keyword">if</span>((k&gt;mid || ans==inf) &amp;&amp; ls[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]&gt;R) query(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,R,k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> T,n,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=T;++t)&#123;</span><br><span class="line"><span class="keyword">int</span> lans=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">b[a[i]]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=n+<span class="number">1</span>;i&lt;=n+<span class="number">10</span>;++i) b[i]=inf;</span><br><span class="line">build(<span class="number">1</span>,n+<span class="number">10</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> op,t1,t2,r,k;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;op,&amp;t1);</span><br><span class="line"><span class="keyword">if</span>(op==<span class="number">1</span>)&#123;</span><br><span class="line">t1=t1^lans;</span><br><span class="line"><span class="keyword">if</span>(fg[t1]!=t) update(<span class="number">1</span>,n+<span class="number">10</span>,<span class="number">1</span>,a[t1]),fg[t1]=t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;t2);</span><br><span class="line">r=t1^lans,k=t2^lans;</span><br><span class="line">ans=inf;</span><br><span class="line">query(<span class="number">1</span>,n+<span class="number">10</span>,<span class="number">1</span>,r,k);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans);</span><br><span class="line">lans=ans;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CCPC) ç½‘ç»œèµ› 1004 path (æ€ç»´)</title>
      <link href="2019/08/24/(CCPC)%20%E7%BD%91%E7%BB%9C%E8%B5%9B%201004%20path/"/>
      <url>2019/08/24/(CCPC)%20%E7%BD%91%E7%BB%9C%E8%B5%9B%201004%20path/</url>
      
        <content type="html"><![CDATA[<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=6705">ä¼ é€é—¨</a></p><p><em><strong>é¢˜æ„ï¼š</strong></em> ç»™ä½ æœ‰å‘å›¾ï¼Œæ¯æ¬¡æŸ¥è¯¢ç¬¬ké•¿çš„è·¯å¾„ï¼Œè€Œä¸”è¿™é‡Œé¢ç¯çŠ¶è·¯å¾„å¯ä»¥æ— é™èµ°ã€‚</p><p><em><strong>è§£ï¼š</strong></em> è¢«æ¬¡å¤§æœ€çŸ­è·¯ï¼Œæˆ–è€…ç¬¬kå¤§æœ€çŸ­è·¯çš„æ€æƒ³æ‰€é™åˆ¶äº†ï¼Œé¢˜è§£çš„æ€è·¯å°±å¾ˆç®€å•äº†ï¼Œè¢«æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦ï¼Œå°±æ˜¯ç”¨ä¼˜å…ˆé˜Ÿåˆ—æŒ‰ç…§è·ç¦»ä»å°åˆ°å¤§æ’åºï¼ŒæŠŠä¸€ä¸ªç‚¹å–å‡ºæ—¶ï¼Œå¯èƒ½åŠ è¿›å»çš„ç­”æ¡ˆå°±æ˜¯å½“å‰è¿™ä¸ªèŠ‚ç‚¹è¿å‡ºå»çš„è¾¹æœ€çŸ­çš„é‚£ä¸€æ¡ï¼ˆç‚¹å‡ºå»çš„è¾¹ä¹Ÿéœ€è¦æ’åºï¼‰ï¼Œæˆ–è€…ä¸Šä¸€ä¸ªèŠ‚ç‚¹è¿˜å¯ä»¥å»¶å±•å‡ºå»çš„è·¯å¾„ã€‚åœ¨å°†æŸ¥è¯¢æ’åºä¸€ä¸‹ï¼Œå°±å¯ä»¥äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">ll to,w;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> node &amp;p) <span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> w&lt;p.w;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; mp[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">P</span> &#123;</span></span><br><span class="line">ll pdist,pre,id,ndist,np;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> P &amp;p) <span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> ndist&gt;p.ndist;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;P&gt; q;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">PP</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> id,k;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> PP &amp;p) <span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> k&lt;p.k;</span><br><span class="line">&#125;</span><br><span class="line">&#125; qu[maxn];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> T,n,m,qnum,ans[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line"><span class="keyword">while</span>(T--) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;qnum);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) mp[i].clear();</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) q.pop();</span><br><span class="line"> </span><br><span class="line">ll u,v,w,k;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;u,&amp;v,&amp;w);</span><br><span class="line">mp[u].push_back(node &#123;v,w&#125;);</span><br><span class="line">q.push(P &#123;<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>,w,v&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">sort(mp[i].begin(),mp[i].end());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=qnum; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;k);</span><br><span class="line">qu[i]=PP &#123;i,k&#125;;</span><br><span class="line">&#125;</span><br><span class="line">sort(qu+<span class="number">1</span>,qu+qnum+<span class="number">1</span>);</span><br><span class="line"> </span><br><span class="line">ll pdist,pre,id,ndist,np,cnt=<span class="number">1</span>,qid=<span class="number">1</span>;</span><br><span class="line">P top;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">top=q.top(),q.pop();</span><br><span class="line"><span class="keyword">while</span>(cnt == qu[qid].k &amp;&amp; qid&lt;=qnum) &#123;</span><br><span class="line">ans[qu[qid].id]=top.ndist;</span><br><span class="line">qid++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(qid==qnum+<span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">cnt++,k--;</span><br><span class="line">pdist=top.pdist,pre=top.pre;</span><br><span class="line">id=top.id,ndist=top.ndist,np=top.np;</span><br><span class="line"><span class="comment">//cout&lt;&lt;pdist&lt;&lt;&quot; &quot;&lt;&lt;pre&lt;&lt;&quot; &quot;&lt;&lt;id&lt;&lt;&quot; &quot;&lt;&lt;ndist&lt;&lt;&quot; &quot;&lt;&lt;np&lt;&lt;endl;</span></span><br><span class="line"><span class="keyword">if</span>(pre!=<span class="number">-1</span> &amp;&amp; id&lt;(<span class="keyword">int</span>)mp[pre].size()) &#123;</span><br><span class="line">q.push(P &#123;pdist,pre,id+<span class="number">1</span>,pdist+mp[pre][id].w,mp[pre][id].to&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>((<span class="keyword">int</span>)mp[np].size()) q.push(P &#123;ndist,np,<span class="number">1</span>,ndist+mp[np][<span class="number">0</span>].w,mp[np][<span class="number">0</span>].to&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=qnum; ++i) <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans[i]);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ€ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ®µæ ‘å¥—å¹³è¡¡æ ‘åŸºç¡€æ¨¡æ¿</title>
      <link href="2019/08/22/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%A5%97%E5%B9%B3%E8%A1%A1%E6%A0%91%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/"/>
      <url>2019/08/22/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%A5%97%E5%B9%B3%E8%A1%A1%E6%A0%91%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problem/P3380">P3380 ã€æ¨¡æ¿ã€‘äºŒé€¼å¹³è¡¡æ ‘ï¼ˆæ ‘å¥—æ ‘ï¼‰</a></p><p>è¦å¼€O2æ‰èƒ½è¿‡T_T</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">2147483647</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> n,m,a[maxn];</span><br><span class="line"><span class="keyword">int</span> rt[maxn*<span class="number">25</span>],tot=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">namespace</span> SP &#123;</span><br><span class="line"><span class="keyword">int</span> ch[maxn*<span class="number">25</span>][<span class="number">2</span>],val[maxn*<span class="number">25</span>],cnt[maxn*<span class="number">25</span>],par[maxn*<span class="number">25</span>],sz[maxn*<span class="number">25</span>];</span><br><span class="line"> </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">sz[x]=sz[ch[x][<span class="number">0</span>]]+sz[ch[x][<span class="number">1</span>]]+cnt[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">ws</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> ch[par[x]][<span class="number">1</span>]==x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> f=par[x],ff=par[f],k=ws(x),w=ch[x][k^<span class="number">1</span>];</span><br><span class="line">ch[f][k]=w,par[w]=f;</span><br><span class="line">ch[ff][ws(f)]=x,par[x]=ff;</span><br><span class="line">ch[x][k^<span class="number">1</span>]=f,par[f]=x;</span><br><span class="line">pushup(f),pushup(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> x,<span class="keyword">int</span> goal=<span class="number">0</span>)</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(par[x]!=goal) &#123;</span><br><span class="line"><span class="keyword">int</span> f=par[x],ff=par[f];</span><br><span class="line"><span class="keyword">if</span>(ff!=goal) &#123;</span><br><span class="line"><span class="keyword">if</span>(ws(x)==ws(f)) rotate(f);</span><br><span class="line"><span class="keyword">else</span> rotate(x);</span><br><span class="line">&#125;</span><br><span class="line">rotate(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!goal) rt[i]=x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> cur=rt[i];</span><br><span class="line"><span class="keyword">while</span>(ch[cur][x&gt;val[cur]] &amp;&amp; x!=val[cur]) &#123;</span><br><span class="line">cur=ch[cur][x&gt;val[cur]];</span><br><span class="line">&#125;</span><br><span class="line">splay(i,cur);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> cur=rt[i],p=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(rt[i]==<span class="number">0</span>) &#123;</span><br><span class="line">cur=rt[i]=++tot;</span><br><span class="line">val[cur]=x,sz[cur]=cnt[cur]=<span class="number">1</span>;</span><br><span class="line">ch[cur][<span class="number">1</span>]=ch[cur][<span class="number">0</span>]=<span class="number">0</span>,par[cur]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(cur &amp;&amp; val[cur]!=x) &#123;</span><br><span class="line">p=cur;</span><br><span class="line">cur=ch[cur][x&gt;val[cur]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cur) cnt[cur]++;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cur=++tot;</span><br><span class="line"><span class="keyword">if</span>(p) ch[p][x&gt;val[p]]=cur;</span><br><span class="line">ch[cur][<span class="number">0</span>]=ch[cur][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">par[cur]=p,val[cur]=x;</span><br><span class="line">cnt[cur]=sz[cur]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">splay(i,cur);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Rank</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">Find(i,x);</span><br><span class="line"><span class="keyword">return</span> sz[ch[rt[i]][<span class="number">0</span>]]+(val[rt[i]]&lt;x?cnt[rt[i]]:<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Pre</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">Find(i,x);</span><br><span class="line"><span class="keyword">if</span>(val[rt[i]]&lt;x) <span class="keyword">return</span> rt[i];</span><br><span class="line"><span class="keyword">int</span> cur=ch[rt[i]][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">while</span>(ch[cur][<span class="number">1</span>]) cur=ch[cur][<span class="number">1</span>];</span><br><span class="line"><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Back</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">Find(i,x);</span><br><span class="line"><span class="keyword">if</span>(val[rt[i]]&gt;x) <span class="keyword">return</span> rt[i];</span><br><span class="line"><span class="keyword">int</span> cur=ch[rt[i]][<span class="number">1</span>];</span><br><span class="line"><span class="keyword">while</span>(ch[cur][<span class="number">0</span>]) cur=ch[cur][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Prenum</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> val[Pre(i,x)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Backnum</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> val[Back(i,x)];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">Remove</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> last=Pre(i,x),beh=Back(i,x);</span><br><span class="line">splay(i,last),splay(i,beh,last);</span><br><span class="line"><span class="keyword">int</span> del=ch[beh][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span>(cnt[del]&gt;<span class="number">1</span>) &#123;</span><br><span class="line">cnt[del]--;</span><br><span class="line">splay(i,del);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> ch[beh][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span> Seg &#123;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">spbuild</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> nrt)</span> </span>&#123;</span><br><span class="line">SP::Insert(nrt,-inf),SP::Insert(nrt,inf);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=l; i&lt;=r; ++i) SP::Insert(nrt,a[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> nrt)</span> </span>&#123;</span><br><span class="line">spbuild(l,r,nrt);</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,mid,nrt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(mid+<span class="number">1</span>,r,nrt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> x,<span class="keyword">int</span> C,<span class="keyword">int</span> nrt)</span> </span>&#123;</span><br><span class="line">SP::Remove(nrt,a[x]);</span><br><span class="line">SP::Insert(nrt,C);</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=mid) update(l,mid,x,C,nrt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span> update(mid+<span class="number">1</span>,r,x,C,nrt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">qRank</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> nrt,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l &amp;&amp; R&gt;=r)<span class="keyword">return</span> SP::Rank(nrt,k)<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>,num=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=mid) num+=qRank(L,R,l,mid,nrt&lt;&lt;<span class="number">1</span>,k);</span><br><span class="line"><span class="keyword">if</span>(R&gt;mid) num+=qRank(L,R,mid+<span class="number">1</span>,r,nrt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,k);</span><br><span class="line"><span class="keyword">return</span> num;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">qRank</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> qRank(L,R,<span class="number">1</span>,n,<span class="number">1</span>,k)+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">qPre_Back</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> nrt,<span class="keyword">int</span> k,<span class="keyword">bool</span> fg)</span></span>&#123;</span><br><span class="line"><span class="comment">//fg==1?Pre:Back</span></span><br><span class="line"><span class="keyword">int</span> ans=fg?-inf:inf;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l &amp;&amp; R&gt;=r)&#123;</span><br><span class="line">fg?(ans=max(ans,SP::Prenum(nrt,k))):(ans=min(ans,SP::Backnum(nrt,k)));</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=mid)&#123;</span><br><span class="line"> <span class="keyword">if</span>(fg) ans=max(ans,qPre_Back(L,R,l,mid,nrt&lt;&lt;<span class="number">1</span>,k,fg));</span><br><span class="line"> <span class="keyword">else</span> ans=min(ans,qPre_Back(L,R,l,mid,nrt&lt;&lt;<span class="number">1</span>,k,fg));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(R&gt;mid)&#123;</span><br><span class="line"><span class="keyword">if</span>(fg) ans=max(ans,qPre_Back(L,R,mid+<span class="number">1</span>,r,nrt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,k,fg));</span><br><span class="line"><span class="keyword">else</span> ans=min(ans,qPre_Back(L,R,mid+<span class="number">1</span>,r,nrt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,k,fg));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">getKth</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> le=<span class="number">0</span>,ri=<span class="number">1e8</span>,ans=<span class="number">0</span>,mid;</span><br><span class="line"><span class="keyword">while</span>(le&lt;=ri)&#123;</span><br><span class="line">mid=(le+ri)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(Seg::qRank(L,R,mid)&lt;=k) ans=mid,le=mid+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> ri=mid<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//std::ios::sync_with_stdio(0);cin.tie(0);</span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i)<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i]);</span><br><span class="line">Seg::build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> op,x,y,z;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;op,&amp;x,&amp;y);</span><br><span class="line"><span class="keyword">if</span>(op==<span class="number">3</span>) Seg::update(<span class="number">1</span>,n,x,y,<span class="number">1</span>),a[x]=y;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;z);</span><br><span class="line"><span class="keyword">if</span>(op==<span class="number">1</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,Seg::qRank(x,y,z));</span><br><span class="line"><span class="keyword">if</span>(op==<span class="number">2</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,getKth(x,y,z));</span><br><span class="line"><span class="keyword">if</span>(op==<span class="number">4</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,Seg::qPre_Back(x,y,<span class="number">1</span>,n,<span class="number">1</span>,z,<span class="number">1</span>));</span><br><span class="line"><span class="keyword">if</span>(op==<span class="number">5</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,Seg::qPre_Back(x,y,<span class="number">1</span>,n,<span class="number">1</span>,z,<span class="number">0</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> å¹³è¡¡æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) 2019å¤šæ ¡ç¬¬ä¹åœºBï¼ŒDï¼ŒEï¼ŒHï¼ŒJ</title>
      <link href="2019/08/16/(Nowcoder)%202019%E5%A4%9A%E6%A0%A1%E7%AC%AC%E4%B9%9D%E5%9C%BA/"/>
      <url>2019/08/16/(Nowcoder)%202019%E5%A4%9A%E6%A0%A1%E7%AC%AC%E4%B9%9D%E5%9C%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://ac.nowcoder.com/acm/contest/889#question">ä¼ é€é—¨</a></h1><h1 id="bquadratic-equation"><a class="markdownIt-Anchor" href="#bquadratic-equation"></a> B.Quadratic equation</h1><p>è§£ï¼šæ²¡å‚ä¸è®¨è®º<img src="https://img-blog.csdnimg.cn/20190816100929274.jpg" alt="img" />ï¼Œåˆ†æä¸€æ³¢ï¼Œç”¨äºŒæ¬¡å‰©ä½™å³å¯.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll p = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line">ll w;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">num</span> &#123;</span></span><br><span class="line">ll x,y;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">num <span class="title">mul</span><span class="params">(num a,num b,ll p)</span> </span>&#123;</span><br><span class="line">num ans= &#123;<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line">ans.x=((a.x*b.x%p+a.y*b.y%p*w%p)%p+p)%p;</span><br><span class="line">ans.y=((a.x*b.y%p+a.y*b.x%p)%p+p)%p;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">powwR</span><span class="params">(ll a,ll b,ll p)</span> </span>&#123;</span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(b) &#123;</span><br><span class="line"><span class="keyword">if</span>(b&amp;<span class="number">1</span>)ans=<span class="number">1ll</span>*ans%p*a%p;</span><br><span class="line">a=a%p*a%p;</span><br><span class="line">b&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans%p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">powwi</span><span class="params">(num a,ll b,ll p)</span> </span>&#123;</span><br><span class="line">num ans= &#123;<span class="number">1</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">while</span>(b) &#123;</span><br><span class="line"><span class="keyword">if</span>(b&amp;<span class="number">1</span>)ans=mul(ans,a,p);</span><br><span class="line">a=mul(a,a,p);</span><br><span class="line">b&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans.x%p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">(ll n,ll p)</span> </span>&#123;</span><br><span class="line">n%=p;</span><br><span class="line"><span class="keyword">if</span>(p==<span class="number">2</span>)<span class="keyword">return</span> n;</span><br><span class="line"><span class="keyword">if</span>(powwR(n,(p<span class="number">-1</span>)/<span class="number">2</span>,p)==p<span class="number">-1</span>)<span class="keyword">return</span> <span class="number">-1</span>;<span class="comment">//ä¸å­˜åœ¨</span></span><br><span class="line">ll a;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">a=rand()%p;</span><br><span class="line">w=((a*a%p-n)%p+p)%p;</span><br><span class="line"><span class="keyword">if</span>(powwR(w,(p<span class="number">-1</span>)/<span class="number">2</span>,p)==p<span class="number">-1</span>)<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">num x= &#123;a,<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">return</span> powwi(x,(p+<span class="number">1</span>)/<span class="number">2</span>,p);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">srand(time(<span class="number">0</span>));</span><br><span class="line"><span class="keyword">int</span> t;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;t);</span><br><span class="line"><span class="keyword">while</span>(t--) &#123;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> x[<span class="number">5</span>] = &#123;<span class="number">0</span>&#125;,y[<span class="number">5</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">ll b,c;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;b,&amp;c);</span><br><span class="line">ll ans3 = b;</span><br><span class="line">ll ans4 = b+p;</span><br><span class="line">ll n = b*b<span class="number">-4</span>*c;</span><br><span class="line"><span class="keyword">if</span>(n==<span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(ans3%<span class="number">2</span>==<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld %lld\n&quot;</span>,ans3/<span class="number">2</span>,ans3/<span class="number">2</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(ans4%<span class="number">2</span>==<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">&quot;%lld %lld\n&quot;</span>,ans4/<span class="number">2</span>,ans4/<span class="number">2</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">ll ans1=solve(n,p);</span><br><span class="line">ll ans2=p-ans1;</span><br><span class="line"><span class="keyword">if</span>(ans1&gt;ans2) swap(ans1,ans2);</span><br><span class="line"><span class="keyword">if</span>(ans1&lt;<span class="number">0</span> || ans2&lt;<span class="number">0</span> || ans3&lt;<span class="number">0</span> || ans4&lt;<span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;-1 -1\n&quot;</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">x[++cnt] = (ans1+ans3)%<span class="number">2</span>==<span class="number">0</span> ? (ans1+ans3)/<span class="number">2</span> : <span class="number">-1</span>;</span><br><span class="line">x[++cnt] = (ans1+ans4)%<span class="number">2</span>==<span class="number">0</span> ? (ans1+ans4)/<span class="number">2</span> : <span class="number">-1</span>;</span><br><span class="line">x[++cnt] = (ans2+ans3)%<span class="number">2</span>==<span class="number">0</span> ? (ans2+ans3)/<span class="number">2</span> : <span class="number">-1</span>;</span><br><span class="line">x[++cnt] = (ans2+ans4)%<span class="number">2</span>==<span class="number">0</span> ? (ans2+ans4)/<span class="number">2</span> : <span class="number">-1</span>;</span><br><span class="line">cnt = <span class="number">0</span>;</span><br><span class="line">y[++cnt] = (ans3-ans1)%<span class="number">2</span>==<span class="number">0</span> ? (ans3-ans1)/<span class="number">2</span> : <span class="number">-1</span>;</span><br><span class="line">y[++cnt] = (ans3-ans2)%<span class="number">2</span>==<span class="number">0</span> ? (ans3-ans2)/<span class="number">2</span> : <span class="number">-1</span>;</span><br><span class="line">y[++cnt] = (ans4-ans1)%<span class="number">2</span>==<span class="number">0</span> ? (ans4-ans1)/<span class="number">2</span> : <span class="number">-1</span>;</span><br><span class="line">y[++cnt] = (ans4-ans2)%<span class="number">2</span>==<span class="number">0</span> ? (ans4-ans2)/<span class="number">2</span> : <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ansx,ansy;</span><br><span class="line"><span class="keyword">bool</span> found = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">4</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=<span class="number">4</span>; j++) &#123;</span><br><span class="line"><span class="keyword">if</span>(x[i]&gt;=<span class="number">0</span> &amp;&amp; y[j]&gt;=<span class="number">0</span> &amp;&amp; x[i]&lt;p &amp;&amp; y[j]&lt;p &amp;&amp; (x[i]+y[j])%p==b &amp;&amp; x[i]*y[j]%p==c) &#123;</span><br><span class="line">ansx = x[i];</span><br><span class="line">ansy = y[j];</span><br><span class="line">found = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(found) &#123;</span><br><span class="line"><span class="keyword">if</span>(ansx&gt;ansy) swap(ansx,ansy);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld %lld\n&quot;</span>,ansx,ansy);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!found) <span class="built_in">printf</span>(<span class="string">&quot;-1 -1\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="dknapsack-cryptosystem"><a class="markdownIt-Anchor" href="#dknapsack-cryptosystem"></a> D.Knapsack Cryptosystem</h1><p>é¢˜æ„ï¼šç»™ä½ ä¸€å †æ•°ï¼Œé€‰å‡ºä¸€äº›æ•°çš„å’Œä¸ºsï¼Œæ±‚è§£æ–¹æ¡ˆè¾“å‡ºã€‚</p><p>è§£ï¼š36ç›´æ¥æœç´¢å‰ªæè‚¯å®šæ˜¯ä¼šTçš„ï¼ŒæŠ˜åŠæœç´¢ï¼Œç›´æ¥æš´åŠ›äºŒè¿›åˆ¶æšä¸¾å°±å¯ä»¥äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">1000000007</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line">ll n,s,b[maxn],a[<span class="number">40</span>];</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;ll,<span class="built_in">string</span>&gt; sum;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;s);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;a[i]);</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>,bit;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=(n+<span class="number">1</span>)/<span class="number">2</span>+<span class="number">1</span>;i&lt;=n;++i) b[++cnt]=a[i];</span><br><span class="line">bit=(<span class="number">1</span>&lt;&lt;(cnt));</span><br><span class="line">ll ns;</span><br><span class="line"><span class="built_in">string</span> ss;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;bit;++i)&#123;</span><br><span class="line">ns=<span class="number">0</span>,ss=<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=cnt<span class="number">-1</span>;j&gt;=<span class="number">0</span>;--j)&#123;</span><br><span class="line"><span class="keyword">if</span>((i&gt;&gt;j)&amp;<span class="number">1</span>) ns+=b[cnt-j],ss+=<span class="string">&quot;1&quot;</span>;</span><br><span class="line"><span class="keyword">else</span> ss+=<span class="string">&quot;0&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">sum[ns]=ss;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> pcnt=n-cnt;</span><br><span class="line">bit=(<span class="number">1</span>&lt;&lt;(pcnt));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;bit;++i)&#123;</span><br><span class="line">ns=<span class="number">0</span>,ss=<span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=pcnt<span class="number">-1</span>;j&gt;=<span class="number">0</span>;--j)&#123;</span><br><span class="line"><span class="keyword">if</span>((i&gt;&gt;j)&amp;<span class="number">1</span>) ns+=a[pcnt-j],ss+=<span class="string">&quot;1&quot;</span>;</span><br><span class="line"><span class="keyword">else</span> ss+=<span class="string">&quot;0&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(sum.count(s-ns)!=<span class="number">0</span>)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ss&lt;&lt;sum[s-ns]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="eall-men-are-brothers"><a class="markdownIt-Anchor" href="#eall-men-are-brothers"></a> E.All men are brothers</h1><p>é¢˜æ„ï¼šnä¸ªäººï¼Œmæ¬¡äº¤æœ‹å‹ï¼Œæ¯æ¬¡éƒ½è¦è¯¢é—®æ‰€æœ‰äººä¸­é€‰å‡º4ä¸ªäººäº’ä¸æ˜¯æœ‹å‹çš„æ–¹æ¡ˆæ•°ã€‚</p><p>è§£ï¼šæœ‹å‹å…³ç³»ç”¨å¹¶æŸ¥é›†ç»´æŠ¤å°±è¡Œäº†ï¼Œä¸€å¼€å§‹ç­”æ¡ˆä¸ºC(n,2),æ¯æ¬¡äº¤æœ‹å‹ï¼Œå¦‚æœè¿˜ä¸æ˜¯æœ‹å‹ï¼Œé‚£ä¹ˆSZã€Uã€‘å’ŒSZã€Vã€‘ä¸­å‡ºç°åœ¨ä¸€èµ·å°†ä¼šä¸åˆæ³•ï¼Œæˆ‘ä»¬ç°åœ¨å…¶ä½™çš„n-sz[U]-sz[V]é€‰å‡ºä¸¤ä¸ªç»„æˆä¸åˆæ³•ï¼Œä½†æ˜¯è¦å‡å»åœ¨å…¶ä»–åŒä¸€ä¸ªå—ä¸­å–ä¸¤ä¸ªçš„æ–¹æ¡ˆæ•°ï¼Œè¿™å°±æ˜¯è¿™æ¬¡åˆå¹¶æ‰€ä»¥ä¸åœ¨åˆæ³•çš„äº†ï¼Œå‡å»ã€‚ç”¨ä¸€ä¸ªsumå–ç»´æŠ¤æ‰€æœ‰å—ä¸­å–ä¸¤ä¸ªçš„æ–¹æ¡ˆæ•°å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> fa[N];</span><br><span class="line">ll sz[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(fa[x]==x) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> fa[x]=find(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ll n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) fa[i]=i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) sz[i]=<span class="number">1</span>;</span><br><span class="line">    ll tot=n,sum=<span class="number">0</span>;</span><br><span class="line">    ll ans=(<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span>)n*(n<span class="number">-1</span>)/<span class="number">2</span>*(n<span class="number">-2</span>)/<span class="number">3</span>*(n<span class="number">-3</span>)/<span class="number">4</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> u,v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;u,&amp;v);</span><br><span class="line">        <span class="keyword">int</span> U=find(u);</span><br><span class="line">        <span class="keyword">int</span> V=find(v);</span><br><span class="line">        <span class="keyword">if</span>(U==V) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            tot--;</span><br><span class="line">            <span class="keyword">if</span>(tot&lt;<span class="number">4</span>) ans=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                ll cnt=n-sz[U]-sz[V];</span><br><span class="line">                cnt=(cnt<span class="number">-1</span>)*cnt/<span class="number">2</span>;</span><br><span class="line">                sum-=(sz[U]*(sz[U]<span class="number">-1</span>)/<span class="number">2</span>);</span><br><span class="line">                sum-=(sz[V]*(sz[V]<span class="number">-1</span>)/<span class="number">2</span>);</span><br><span class="line">                cnt-=sum;</span><br><span class="line">                ans-=sz[U]*sz[V]*(cnt);</span><br><span class="line">                sum+=(sz[U]+sz[V])*(sz[U]+sz[V]<span class="number">-1</span>)/<span class="number">2</span>;</span><br><span class="line">                sz[U]+=sz[V];</span><br><span class="line">                fa[V]=U;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="hcutting-bamboos"><a class="markdownIt-Anchor" href="#hcutting-bamboos"></a> H.Cutting Bamboos</h1><p>é¢˜æ„ï¼šç ç«¹å­ï¼Œç»™å‡ºæ‰€æœ‰ç«¹å­çš„é«˜åº¦ï¼Œæœ‰qæ¬¡æŸ¥è¯¢ï¼Œl,r,x,y,å°±æ˜¯å¯¹äºlï¼ŒråŒºé—´çš„ç«¹å­è¦ç”¨yæ¬¡ç å®Œï¼Œè€Œä¸”æ¯æ¬¡ç æ‰çš„é•¿åº¦è¦æ˜¯ä¸€æ ·çš„ï¼Œæ±‚ç¬¬xç ç«¹å­çš„é«˜åº¦ã€‚</p><p>è§£ï¼šå…ˆç”¨ä¸»å¸­æ•°ç»´æŠ¤é«˜åº¦åœ¨ã€l,rã€‘ ç«¹å­çš„æ€»é«˜åº¦å’Œä¸ªæ•°ã€‚æŸ¥è¯¢äºŒåˆ†xçš„é«˜åº¦midå³å¯ï¼ˆä¸æ™“å¾—æ€ä¹ˆç›´æ¥ç®—ï¼‰ï¼Œçœ‹çœ‹é«˜åº¦ä¸ºmidæ—¶èƒ½å¦ç æ‰xæ¬¡éœ€è¦ç æ‰çš„é«˜åº¦å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">ll sum,num;</span><br><span class="line">&#125;tr[maxn*<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> tot=<span class="number">0</span>,ls[maxn*<span class="number">20</span>],rs[maxn*<span class="number">20</span>],rt[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> &amp;rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">rt=++tot;</span><br><span class="line">tr[rt].sum=tr[rt].num=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(ls[rt],l,mid);</span><br><span class="line">build(rs[rt],mid+<span class="number">1</span>,r);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> &amp;rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> pre,<span class="keyword">int</span> h)</span></span>&#123;</span><br><span class="line">rt=++tot;</span><br><span class="line">ls[rt]=ls[pre],rs[rt]=rs[pre];</span><br><span class="line">tr[rt].num=tr[pre].num+<span class="number">1</span>;</span><br><span class="line">tr[rt].sum=tr[pre].sum+h;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(h&lt;=mid) update(ls[rt],l,mid,ls[pre],h);</span><br><span class="line"><span class="keyword">else</span> update(rs[rt],mid+<span class="number">1</span>,r,rs[pre],h);</span><br><span class="line">&#125;</span><br><span class="line">ll ss,nn;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> nh)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l&gt;=nh)&#123;</span><br><span class="line">ss+=tr[y].sum-tr[x].sum;</span><br><span class="line">nn+=tr[y].num-tr[x].num;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(nh&lt;=mid)&#123;</span><br><span class="line">ss+=tr[rs[y]].sum-tr[rs[x]].sum;</span><br><span class="line">nn+=tr[rs[y]].num-tr[rs[x]].num;</span><br><span class="line">query(ls[x],ls[y],l,mid,nh);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> query(rs[x],rs[y],mid+<span class="number">1</span>,r,nh);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,q,h[maxn],mx=<span class="number">100000</span>;</span><br><span class="line">ll s[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;q);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;h[i]);</span><br><span class="line">s[i]=s[i<span class="number">-1</span>]+h[i];</span><br><span class="line">&#125;</span><br><span class="line">build(rt[<span class="number">0</span>],<span class="number">1</span>,mx);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) update(rt[i],<span class="number">1</span>,mx,rt[i<span class="number">-1</span>],h[i]);</span><br><span class="line"><span class="keyword">int</span> l,r,x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;l,&amp;r,&amp;x,&amp;y);</span><br><span class="line"><span class="keyword">double</span> le=<span class="number">0.0</span>,ri=mx*<span class="number">1.0</span>,ans=<span class="number">0.0</span>;</span><br><span class="line"><span class="keyword">double</span> solve=<span class="number">1.0</span>*(s[r]-s[l<span class="number">-1</span>])/y*x;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">fabs</span>(ri-le)&gt;eps)&#123;</span><br><span class="line"><span class="keyword">double</span> mid=(le+ri)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> mh=<span class="built_in">ceil</span>(mid);</span><br><span class="line">ss=<span class="number">0</span>,nn=<span class="number">0</span>;</span><br><span class="line">query(rt[l<span class="number">-1</span>],rt[r],<span class="number">1</span>,mx,mh);</span><br><span class="line"><span class="keyword">if</span>(<span class="number">1.0</span>*ss<span class="number">-1.0</span>*nn*mid&gt;solve)&#123;</span><br><span class="line">le=mid+eps;</span><br><span class="line">ans=mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> ri=mid-eps;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.15lf\n&quot;</span>,ans);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="jsymmetrical-painting"><a class="markdownIt-Anchor" href="#jsymmetrical-painting"></a> J.Symmetrical Painting</h1><p>é¢˜æ„ï¼šå¾ˆå¤šé»‘è‰²ç«–æ¡ï¼Œä½ å¯ä»¥é€‰æ‹©æŠŠä»»æ„çš„éƒ¨åˆ†æ¶‚ç™½ï¼Œä½¿å¾—æœ€åå‰©ä¸‹çš„éƒ¨åˆ†æœ‰æ°´å¹³å¯¹ç§°è½´ã€‚</p><p>è§£ï¼šæœ‰0.5çš„å­˜åœ¨ï¼Œå°†Lï¼ŒRå…¨éƒ½æ‹‰é•¿ä¸¤å€å…ˆã€‚å…¨éƒ¨çœ‹æˆæ¨ªæ¡ï¼Œæ”¾åœ¨xyè½´ä¸Šçœ‹å¥½äº†ï¼Œç”¨å‡½æ•°y=kx+bæ¥è¡¨ç¤ºå½“å¯¹ç§°è½´ä¸ºxæ—¶ï¼Œé¢ç§¯ä¸ºxã€‚è€ƒè™‘åªæœ‰ä¸€æ ¹æ¨ªçº¿çš„æ—¶å€™ï¼Œé‚£ä»–çš„å‡½æ•°å›¾åƒå°±æ˜¯ä¸€ä¸ªå±±å½¢çš„ï¼Œæœ€å¤§å€¼åœ¨ä¸­é—´ï¼Œè€Œä¸”æ–œç‡ä¸º1çš„-1ï¼Œå› ä¸ºå½“è¾¾åˆ°ä¸­é—´çš„æ—¶å€™é¢ç§¯å°±æ˜¯é»‘æ¡çš„å®é™…é•¿åº¦ï¼Œå³ç°åœ¨é»‘æ¡é•¿çš„ä¸€åŠï¼Œå¥½ç†è§£ã€‚è€Œæœ‰å¾ˆå¤šé»‘æ¡é‚£å°±æ—¶å¤šä¸ªä¸€æ¬¡å‡½æ•°çš„å åŠ ã€‚è€Œä¸”å¯èƒ½çš„æå€¼å°±å¯èƒ½å‡ºç°åœ¨æ¯ä¸ªé»‘æ¡çš„å·¦ç«¯ç‚¹ï¼Œä¸­é—´å’Œå³ç«¯ç‚¹ã€‚å‡½æ•°å åŠ å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://img-blog.csdnimg.cn/2019081610514217.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RERF9NYXN0ZXI=,size_16,color_FFFFFF,t_70" alt="img" /></p><p>ç«¯ç‚¹å¤„ï¼Œç”¨1ï¼Œ-2ï¼Œ1æ¥ç»´æŠ¤ç°åœ¨çš„æ–œç‡å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">3e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(ll &amp;x,ll y) &#123;return x=x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll &amp;x,ll y) &#123;return x=x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">ll x,k;</span><br><span class="line">&#125;s[maxn*<span class="number">3</span>];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span> </span>&#123;<span class="keyword">return</span> x.x&lt;y.x;&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>,L,R,n;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;L,&amp;R);</span><br><span class="line">s[++cnt]=node&#123;L*<span class="number">2</span>,<span class="number">1</span>&#125;;</span><br><span class="line">s[++cnt]=node&#123;L+R,<span class="number">-2</span>&#125;;</span><br><span class="line">s[++cnt]=node&#123;R*<span class="number">2</span>,<span class="number">1</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line">sort(s+<span class="number">1</span>,s+cnt+<span class="number">1</span>,cmp);</span><br><span class="line">ll px=<span class="number">0</span>,nk=<span class="number">0</span>,ans=<span class="number">0</span>,tp=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">1</span>) px=s[i].x,nk+=s[i].k;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">tp+=nk*(s[i].x-px);</span><br><span class="line">nk+=s[i].k,px=s[i].x;</span><br><span class="line">ans=max(tp,ans);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ ‘é“¾å‰–åˆ†åŸºç¡€æ¨¡æ¿</title>
      <link href="2019/08/12/%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/"/>
      <url>2019/08/12/%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•ä¸€ä¸‹æ ‘é“¾å‰–åˆ†åŸºç¡€æ¨¡æ¿</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,r;</span><br><span class="line">ll psum[maxn],sump[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; eg[maxn];</span><br><span class="line"><span class="comment">/* BIT */</span> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> p,ll x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> pp=p;</span><br><span class="line"><span class="keyword">while</span>(pp&lt;=n) psum[pp]+=x*p,sump[pp]+=x,pp+=pp&amp;-pp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,ll x)</span> </span>&#123;</span><br><span class="line">update(l,x),update(r+<span class="number">1</span>,-x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">ll sum=<span class="number">0</span>,pp=p;</span><br><span class="line"><span class="keyword">while</span>(pp) sum=sump[pp]*(p+<span class="number">1</span>)-psum[pp],pp-=pp&amp;-pp;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> query(r)-query(l<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> dep[maxn],fa[maxn],sz[maxn],son[maxn],id[maxn];</span><br><span class="line"><span class="keyword">int</span> w[maxn],nw[maxn],bel[maxn],cnt=<span class="number">0</span>;</span><br><span class="line"><span class="comment">/* TCP */</span> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> ff)</span></span>&#123;</span><br><span class="line">dep[x]=dep[ff]+<span class="number">1</span>;</span><br><span class="line">fa[x]=ff,sz[x]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> mx=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;SZ(eg[x]);++i)&#123;</span><br><span class="line"><span class="keyword">int</span> to=eg[x][i];</span><br><span class="line"><span class="keyword">if</span>(to==ff) <span class="keyword">continue</span>;</span><br><span class="line">dfs1(to,x);</span><br><span class="line">sz[x]+=sz[to];</span><br><span class="line"><span class="keyword">if</span>(sz[to]&gt;mx)&#123;</span><br><span class="line">son[x]=to,mx=sz[to]; </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> topx)</span></span>&#123;</span><br><span class="line">id[x]=++cnt;</span><br><span class="line">nw[cnt]=w[x];</span><br><span class="line">bel[x]=topx;</span><br><span class="line"><span class="keyword">if</span>(!son[x]) <span class="keyword">return</span>;</span><br><span class="line">dfs2(son[x],topx); <span class="comment">//é‡å„¿å­ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;SZ(eg[x]);++i)&#123; <span class="comment">//è½»å„¿å­ </span></span><br><span class="line"><span class="keyword">int</span> to=eg[x][i];</span><br><span class="line"><span class="keyword">if</span>(to==fa[x] || to==son[x]) <span class="keyword">continue</span>;</span><br><span class="line">dfs2(to,to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">r_update</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,ll z)</span></span>&#123; <span class="comment">//å°†x~yæœ€çŸ­è·ç¦»ä¸Šçš„ç‚¹+z </span></span><br><span class="line"><span class="keyword">while</span>(bel[x]!=bel[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[bel[x]]&lt;dep[bel[y]]) swap(x,y);</span><br><span class="line">add(id[bel[x]],id[x],z);</span><br><span class="line">x=fa[bel[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&gt;dep[y]) swap(x,y);</span><br><span class="line">add(id[x],id[y],z);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">p_update</span><span class="params">(<span class="keyword">int</span> x,ll z)</span></span>&#123; <span class="comment">//å°†xçš„å­æ ‘éƒ½+z </span></span><br><span class="line">add(id[x],id[x]+sz[x]<span class="number">-1</span>,z);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">ll <span class="title">r_ask</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123; <span class="comment">// è¯¢é—®x~yæœ€çŸ­è·ç¦»ä¸Šçš„ç‚¹å€¼å’Œ </span></span><br><span class="line">ll res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(bel[x]!=bel[y])&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[bel[x]]&lt;dep[bel[y]]) swap(x,y);</span><br><span class="line">res+=query(id[bel[x]],id[x]);</span><br><span class="line">x=fa[bel[x]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&gt;dep[y]) swap(x,y);</span><br><span class="line">res+=query(id[x],id[y]); </span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">p_ask</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//è¯¢é—®xçš„å­æ ‘ç‚¹å€¼å’Œ </span></span><br><span class="line"><span class="keyword">return</span> query(id[x],id[x]+sz[x]<span class="number">-1</span>); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;r);  </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,w+i);</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">eg[x].pb(y),eg[y].pb(x);</span><br><span class="line">&#125;</span><br><span class="line">dfs1(r,<span class="number">0</span>); <span class="comment">//ä¸¤æ¬¡ä»æ ¹dfs </span></span><br><span class="line">dfs2(r,r);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) add(id[i],id[i],nw[id[i]]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘é“¾å‰–åˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) J.Just Jump (åŠ¨æ€è§„åˆ’+ç»„åˆæ•°+å®¹æ–¥)</title>
      <link href="2019/08/11/(Nowcoder)%20J.Just%20Jump/"/>
      <url>2019/08/11/(Nowcoder)%20J.Just%20Jump/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://ac.nowcoder.com/acm/contest/888/J">ä¼ é€é—¨</a></h1><p>é¢˜æ„ï¼šLé•¿çš„æ•°è½´ï¼Œä»0å¼€å§‹è·³ï¼Œæ¯æ¬¡å¯ä»¥è·³&gt;=dçš„è·ç¦»ï¼Œä½†æ˜¯æœ‰mé™åˆ¶ï¼Œå°±æ˜¯tiæ—¶åˆ»ä¸å¾—è·³åˆ°piå¤„ï¼Œæ±‚åˆ°Lçš„æ–¹æ¡ˆæ•°</p><p>è§£ï¼šå…ˆä¸è€ƒè™‘mé™åˆ¶ï¼Œdpå¾ˆå®¹æ˜“æ¨å‡ºäº†ï¼Œå‰ç¼€å’Œä¼˜åŒ–å°±æ˜¯O(n)çš„ã€‚ç„¶åè€ƒè™‘é™åˆ¶å‡å»ï¼Œå°±æ˜¯æ±‚å‡ºç»è¿‡ä¸€æ¬¡pi(é™åˆ¶å¤„)å†æŠµè¾¾Lçš„æ–¹æ¡ˆæ•°ï¼Œè¿™é‡Œæˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°å®¹æ–¥å®šç†ï¼Œç”¨å®¹æ–¥æ¥æ±‚ã€‚å®˜è§£ï¼š</p><p><img src="https://img-blog.csdnimg.cn/20190811153238168.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RERF9NYXN0ZXI=,size_16,color_FFFFFF,t_70" alt="" /></p><p>è§£é‡Šä¸€ä¸‹è¿™ä¸ªç»„åˆæ•°ï¼Œå°±æ˜¯å…ˆpiå…ˆå‡å»d*tiçš„æœ€ä½é™åˆ¶ï¼Œå‰©ä¸‹çš„å°±æ˜¯å¤šä½™çš„éƒ¨åˆ†ï¼Œä½†æ˜¯tiæ¬¡è·³è·ƒå¯èƒ½ä¼šæœ‰0(å¤šä½™éƒ¨åˆ†) ï¼Œä¸‹é¢å°±çœ‹ä½œå°çƒäº†ï¼Œå› ä¸ºæœ‰0ï¼Œæ‰€ä»¥å°±åŠ å…¥tiä¸ªçƒï¼Œç°åœ¨å°±æ˜¯è¦æ±‚å°çƒæ”¾å…¥tiä¸ªç›’å­éç©ºäº†ï¼Œç„¶åå†æ’å…¥ti-1å—éš”æ¿å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">998244353</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e7</span>+<span class="number">5</span>,M=<span class="number">3e3</span>+<span class="number">5</span>;</span><br><span class="line">ll dp[N],sum[N],b[M];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    ll t,p;</span><br><span class="line">&#125;a[M];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span> </span>&#123;<span class="keyword">return</span> x.p&lt;y.p;&#125;</span><br><span class="line"> </span><br><span class="line">ll l,d,m;</span><br><span class="line">ll fac[N],inv[N];</span><br><span class="line"><span class="function">ll <span class="title">fpow</span><span class="params">(ll x,ll y)</span> </span>&#123;</span><br><span class="line">    ll ans=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(y) &#123;</span><br><span class="line">        <span class="keyword">if</span>(y&amp;<span class="number">1</span>) ans=(ans*x)%mod;</span><br><span class="line">        x=(x*x)%mod;</span><br><span class="line">        y&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">C</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(m&gt;n || n&lt;<span class="number">0</span> || m&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    ll ans=<span class="number">1</span>;</span><br><span class="line">    ans=(ans*fac[n])%mod;</span><br><span class="line">    ans=(ans*inv[m])%mod;</span><br><span class="line">    ans=(ans*inv[n-m])%mod;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">fac[<span class="number">0</span>]=inv[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">10000000</span>;i++) fac[i]=(<span class="number">1LL</span>*fac[i<span class="number">-1</span>]*i)%mod;</span><br><span class="line">    inv[<span class="number">10000000</span>]=fpow(fac[<span class="number">10000000</span>],mod<span class="number">-2</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">9999999</span>;i&gt;=<span class="number">1</span>;i--) inv[i]=(<span class="number">1LL</span>*inv[i+<span class="number">1</span>]*(i+<span class="number">1</span>))%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">cal</span><span class="params">(ll p,ll t)</span> </span>&#123;</span><br><span class="line">    p-=t*d;</span><br><span class="line">    <span class="keyword">if</span>(p&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> C(p+t<span class="number">-1</span>,t<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">sort(a+<span class="number">1</span>,a+<span class="number">1</span>+m,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) &#123;</span><br><span class="line">        b[i]=cal(a[i].p,a[i].t); </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;i;j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j].t&gt;a[i].t) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(a[j].p==a[i].p) <span class="keyword">continue</span>;</span><br><span class="line">            b[i]=(b[i]<span class="number">-1LL</span>*b[j]*cal(a[i].p-a[j].p,a[i].t-a[j].t)+mod)%mod;     </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">ll res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)</span><br><span class="line">res=(res+b[i]*dp[l-a[i].p]%mod)%mod;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    init();</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;l,&amp;d,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;a[i].t,&amp;a[i].p);</span><br><span class="line">    dp[<span class="number">0</span>]=sum[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=l;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&lt;d) dp[i]=<span class="number">0</span>,sum[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> dp[i]=sum[i-d],sum[i]=(sum[i<span class="number">-1</span>]+dp[i])%mod;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,(dp[l]-solve()+mod)%mod);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) ç‰›å®¢å¯’å‡ç®—æ³•åŸºç¡€é›†è®­è¥3 B å¤„å¥³åº§çš„æ¯”èµ›èµ„æ ¼ (æ‹“æ‰‘æ’åº)</title>
      <link href="2019/08/11/(Nowcoder)%20%E7%89%9B%E5%AE%A2%E5%AF%92%E5%81%87%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E9%9B%86%E8%AE%AD%E8%90%A53%20B%20%E5%A4%84%E5%A5%B3%E5%BA%A7%E7%9A%84%E6%AF%94%E8%B5%9B%E8%B5%84%E6%A0%BC/"/>
      <url>2019/08/11/(Nowcoder)%20%E7%89%9B%E5%AE%A2%E5%AF%92%E5%81%87%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E9%9B%86%E8%AE%AD%E8%90%A53%20B%20%E5%A4%84%E5%A5%B3%E5%BA%A7%E7%9A%84%E6%AF%94%E8%B5%9B%E8%B5%84%E6%A0%BC/</url>
      
        <content type="html"><![CDATA[<p><a href="https://ac.nowcoder.com/acm/contest/329/B">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è¿™é¢˜è¯»ä¸€éé¢˜ç›®ä¹‹åï¼Œå¾ˆå®¹æ˜“çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªæœ€çŸ­è·¯çš„é—®é¢˜ï¼Œæ­ä¹˜ä¸€æ¡çº¿è·¯æ—¶ï¼Œæ”¶è·çš„é’±æ˜¯å¾—åˆ°çš„é’±å‡å»ç¥¨ä»·ï¼Œæˆ‘ä»¬è‡ªç„¶æƒ³è¦è·å¾—çš„é’±è¶Šå¤šè¶Šå¥½ï¼Œè½¬åŒ–æˆæœ€çŸ­è·¯é—®é¢˜ï¼ŒåŠ ä¸ªè´Ÿå·å°±è¡Œäº†ï¼Œ-ï¼ˆå¾—åˆ°çš„é’±-ç¥¨ä»·ï¼‰ï¼Œç¥¨ä»·-å¾—åˆ°çš„é’±çš„æ„ä¹‰å…¶å®å°±æ˜¯ä»˜å‡ºçš„é’±ï¼Œè‡ªç„¶è¶Šå°‘è¶Šå¥½ã€‚æœ€åæœ€çŸ­è·¯çš„å€¼ä¸ºè´Ÿï¼Œå³å¾—åˆ°é’±ï¼Œä¸ºæ­£ï¼Œå³ä»˜å‡ºé’±ï¼Œè€ƒè™‘åˆ°æœ‰è´Ÿè¾¹ï¼Œå°±æƒ³åˆ°äº†spfaï¼Œä½†æ˜¯å´Täº†ï¼Œé‡æ–°çœ‹é¢˜ï¼Œè¯¥é¢˜å¼ºè°ƒ äº†è¡Œç¨‹ä¸ä¼šå½¢æˆç¯ï¼Œé‚£èµ·ç‚¹çš„å…¥åº¦å¿…ä¸º0ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ‹“æ‰‘æ’åºï¼Œå»è¾¹çš„æ—¶å€™æ›´æ–°distï¼Œè¿™æ ·å°±åªè¦æŠŠå›¾æ‰«ä¸€éäº†ã€‚</p><p><em><strong>æ³¨æ„ï¼š</strong></em> è¿™é¢˜æœ€åé—®çš„éƒ½æ˜¯å…³äºç»è´¹çš„ï¼Œå¦‚æœç»è´¹è´Ÿè´£äººåˆ°æ¯”èµ›åœ°æ˜¯èµšé’±çš„ï¼Œé‚£å®ƒä¸ä¼šç»™å¤„å¥³åº§ä¸€åˆ†é’±ï¼ŒåŒæ—¶å¤„å¥³åº§åˆ°æ¯”èµ›åœ°æ˜¯èµšé’±çš„ï¼Œä»–ä¸ä¼šèŠ±ä¸€åˆ†ç»è´¹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">0x7f7f7f7f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line">ll dist1[maxn],dist2[maxn];</span><br><span class="line"><span class="comment">// åˆ†åˆ«æ˜¯å¤„å¥³åº§å’Œæ•™ç»ƒçš„æœ€çŸ­è·¯</span></span><br><span class="line">ll T,N,M,x,y,z,a,b;</span><br><span class="line">ll in1[maxn],in2[maxn];</span><br><span class="line"><span class="comment">// åˆ†åˆ«æ˜¯å¤„å¥³åº§å’Œæ•™ç»ƒçš„å…¥åº¦</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line">ll to;</span><br><span class="line">ll w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; t1[maxn],t2[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dist1,<span class="number">0x7f</span>,<span class="keyword">sizeof</span>(dist1));</span><br><span class="line"><span class="built_in">memset</span>(dist2,<span class="number">0x7f</span>,<span class="keyword">sizeof</span>(dist2));</span><br><span class="line"><span class="built_in">queue</span>&lt;ll&gt; q1,q2;</span><br><span class="line">dist1[<span class="number">1</span>]=<span class="number">0</span>,dist2[<span class="number">1</span>]=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=N; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!in1[i]) &#123;</span><br><span class="line">q1.push(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!in2[i]) &#123;</span><br><span class="line">q2.push(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ll num1,num2;</span><br><span class="line"><span class="keyword">while</span>(!q1.empty()) &#123;</span><br><span class="line"><span class="keyword">int</span> np=q1.front();</span><br><span class="line">q1.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)t1[np].size(); ++i) &#123;</span><br><span class="line">edge tp=t1[np][i];</span><br><span class="line"><span class="keyword">int</span> nto=tp.to,nw=tp.w;</span><br><span class="line">dist1[nto]=min(dist1[nto],dist1[np]+nw);</span><br><span class="line">in1[nto]--;</span><br><span class="line"><span class="keyword">if</span>(!in1[nto]) &#123;</span><br><span class="line">q1.push(nto);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">num1=dist1[N];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span>(!q2.empty()) &#123;</span><br><span class="line"><span class="keyword">int</span> np=q2.front();</span><br><span class="line">q2.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)t2[np].size(); ++i) &#123;</span><br><span class="line">edge tp=t2[np][i];</span><br><span class="line"><span class="keyword">int</span> nto=tp.to,nw=tp.w;</span><br><span class="line">dist2[nto]=min(dist2[nto],dist2[np]+nw);</span><br><span class="line">in2[nto]--;</span><br><span class="line"><span class="keyword">if</span>(!in2[nto]) &#123;</span><br><span class="line">q2.push(nto);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">num2=dist2[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(num2&lt;=<span class="number">0</span>)num2=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(num1&lt;=<span class="number">0</span>)num1=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(num2-num1&gt;<span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;cnznb!!!&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;num2-num1&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(num2-num1==<span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;oof!!!&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(num2-num1&lt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;rip!!!&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;num1-num2&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line"><span class="keyword">while</span>(T--) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;N&gt;&gt;M;</span><br><span class="line"><span class="built_in">memset</span>(in1,<span class="number">0</span>,<span class="keyword">sizeof</span>(in1));</span><br><span class="line"><span class="built_in">memset</span>(in2,<span class="number">0</span>,<span class="keyword">sizeof</span>(in2));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;++i)&#123;</span><br><span class="line">t1[i].clear();</span><br><span class="line">t2[i].clear();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;M; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;z&gt;&gt;a&gt;&gt;b;</span><br><span class="line">t1[x].push_back(edge &#123;y,z-a&#125;);</span><br><span class="line">in1[y]++;</span><br><span class="line">t2[x].push_back(edge &#123;y,z-b&#125;);</span><br><span class="line">in2[y]++;</span><br><span class="line">&#125;</span><br><span class="line">solve();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‹“æ‰‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) E.Explorer (çº¿æ®µæ ‘+å¯æ’¤é”€å¹¶æŸ¥é›†)</title>
      <link href="2019/08/10/(Nowcoder)%20E.Explorer/"/>
      <url>2019/08/10/(Nowcoder)%20E.Explorer/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://ac.nowcoder.com/acm/contest/888/E">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> ç»™å‡ºä¸€ä¸ªæ— å‘å›¾ï¼Œæ¯æ¡è¾¹æœ‰ä¸€ä¸ªsizeåŒºé—´[l,r]ï¼Œä»£è¡¨å¯ä»¥é€šè¿‡äººçš„å¤§å°ï¼Œæ±‚å¯ä»¥ä»1åˆ°nï¼Œäººçš„å¤§å°çš„æ–¹æ¡ˆæ•°ã€‚</p><p><em><strong>è§£ï¼š</strong></em> å¯ä»¥lctåšï¼Œå¯æ˜¯æˆ‘è¿˜æ²¡å­¦è¿‡lctã€‚çº¿æ®µæ ‘+å¹¶æŸ¥é›†çš„åšæ³•ï¼Œæˆ‘ä»¬å…ˆç¦»æ•£åŒ–sizeï¼Œä½¿å¾—çº¿æ®µæ ‘çš„èŠ‚ç‚¹ä»£è¡¨sizeçš„ä¸€æ®µåŒºé—´ï¼Œå…¨éƒ¨å·¦å¼€å³é—­ï¼ˆè¿™æ ·å¥½å¤„ç†ï¼‰ã€‚ç„¶åæˆ‘ä»¬å°†ç¬¦åˆèŠ‚ç‚¹çš„è¾¹åŠ è¿›å»ï¼Œä¸éœ€è¦ä¸‹æ”¾ã€‚æœ€åæˆ‘ä»¬ä¸€éæ·±æœï¼Œæ·±æœçš„åŒæ—¶å°†è¯¥èŠ‚ç‚¹çš„è¾¹ï¼Œç”¨å¹¶æŸ¥é›†ç»´æŠ¤ç‚¹ä¹‹é—´çš„è”é€šæ€§ï¼Œæœåˆ°å¶å­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œè¯´æ˜æ¶µç›–äº†è¿™æ®µåŒºé—´çš„è¾¹éƒ½å·²ç»è¢«åŠ è¿›å»äº†ï¼Œåˆ¤æ–­1å’Œnçš„è”é€šæ€§ï¼Œå¦‚æœè”é€šï¼Œé‚£ä»£è¡¨è¿™æ®µsizeçš„åŒºé—´å†…çš„å€¼éƒ½æ˜¯å¯ä»¥ä½¿å¾—1åˆ°nçš„ï¼ŒåŠ ä¸Šè´¡çŒ®ã€‚å›æº¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†åŠ çš„è¾¹æ’¤é”€å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(int x,int y) &#123;return x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll x,int y) &#123;return x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> s[maxn&lt;&lt;<span class="number">2</span>],n,m,ans=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; un[maxn&lt;&lt;<span class="number">3</span>][<span class="number">2</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Collect</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> fa[maxn],rk[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;maxn;++i) fa[i]=i,rk[i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(x^fa[x]) x=fa[x];</span><br><span class="line"><span class="keyword">return</span> x; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unite</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">x=search(x),y=search(y);</span><br><span class="line"><span class="keyword">if</span>(x==y) <span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">if</span>(rk[x]&gt;rk[y])&#123;</span><br><span class="line">fa[y]=x;</span><br><span class="line">un[rt][<span class="number">1</span>].pb(x),un[rt][<span class="number">0</span>].pb(y); <span class="comment">//father and son </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">fa[x]=y;</span><br><span class="line"><span class="keyword">if</span>(rk[x]==rk[y]) rk[y]++;</span><br><span class="line">un[rt][<span class="number">1</span>].pb(y),un[rt][<span class="number">0</span>].pb(x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reunite</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> len=SZ(un[rt][<span class="number">1</span>]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">rk[un[rt][<span class="number">1</span>][i]]-=rk[un[rt][<span class="number">0</span>][i]];</span><br><span class="line">fa[un[rt][<span class="number">0</span>][i]]=un[rt][<span class="number">0</span>][i];</span><br><span class="line">&#125;</span><br><span class="line">un[rt][<span class="number">1</span>].clear(),un[rt][<span class="number">0</span>].clear();</span><br><span class="line">&#125;</span><br><span class="line">&#125;co;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Tree</span> &#123;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> l,r;</span><br><span class="line"><span class="keyword">bool</span> fg;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line">&#125; sum[maxn&lt;&lt;<span class="number">3</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line">sum[rt].fg=<span class="number">1</span>;</span><br><span class="line">sum[rt].l=s[l],sum[rt].r=s[l+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">sum[rt].l=sum[rt&lt;&lt;<span class="number">1</span>].l,sum[rt].r=sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> rt,<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=sum[rt].l &amp;&amp; R&gt;=sum[rt].r)&#123;</span><br><span class="line">sum[rt].v.pb(u);</span><br><span class="line">sum[rt].v.pb(v);</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(L&lt;sum[rt&lt;&lt;<span class="number">1</span>].r) update(L,R,rt&lt;&lt;<span class="number">1</span>,u,v);</span><br><span class="line"><span class="keyword">if</span>(R&gt;sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].l) update(L,R,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,u,v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">over</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(SZ(sum[rt].v))&#123;</span><br><span class="line"><span class="keyword">int</span> len=SZ(sum[rt].v);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i+=<span class="number">2</span>)&#123;</span><br><span class="line">co.unite(sum[rt].v[i],sum[rt].v[i+<span class="number">1</span>],rt);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(sum[rt].fg)&#123;</span><br><span class="line"><span class="keyword">if</span>(co.search(<span class="number">1</span>)==co.search(n))&#123;</span><br><span class="line">ans+=sum[rt].r-sum[rt].l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line">over(rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">co.reunite(rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">over(rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">co.reunite(rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;tree;</span><br><span class="line"><span class="keyword">int</span> U[maxn],V[maxn],L[maxn],R[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">int</span> tot=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;U[i],&amp;V[i],&amp;L[i],&amp;R[i]);</span><br><span class="line">s[++tot]=L[i],s[++tot]=(++R[i]);</span><br><span class="line">&#125;</span><br><span class="line">sort(s+<span class="number">1</span>,s+tot+<span class="number">1</span>);</span><br><span class="line">tot=unique(s+<span class="number">1</span>,s+tot+<span class="number">1</span>)-(s+<span class="number">1</span>);</span><br><span class="line">tree.build(<span class="number">1</span>,tot<span class="number">-1</span>,<span class="number">1</span>);</span><br><span class="line">co.init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line">tree.update(L[i],R[i],<span class="number">1</span>,U[i],V[i]);</span><br><span class="line">&#125;</span><br><span class="line">tree.over(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> å¹¶æŸ¥é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>std::pairä½œä¸ºunordered_mapçš„key</title>
      <link href="2019/08/10/pair%E4%BD%9C%E4%B8%BAunordered_map%E7%9A%84key/"/>
      <url>2019/08/10/pair%E4%BD%9C%E4%B8%BAunordered_map%E7%9A%84key/</url>
      
        <content type="html"><![CDATA[<h3 id="pairä½œä¸ºunordered_mapçš„keyéœ€è¦ä¸ºpairæ·»åŠ hashå‡½æ•°"><a class="markdownIt-Anchor" href="#pairä½œä¸ºunordered_mapçš„keyéœ€è¦ä¸ºpairæ·»åŠ hashå‡½æ•°"></a> pairä½œä¸ºunordered_mapçš„keyéœ€è¦ä¸ºpairæ·»åŠ hashå‡½æ•°</h3><p>hashå‡½æ•°æ ¹æ®é¢˜æ„è‡ªå·±è¿›è¡Œå®šä¹‰å³å¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">pair_hash</span>&#123;</span></span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T1</span>, <span class="keyword">class</span> <span class="title">T2</span>&gt;</span></span><br><span class="line">    <span class="function"><span class="built_in">std</span>::<span class="keyword">size_t</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">pair</span>&lt;T1, T2&gt;&amp; p)</span> <span class="keyword">const</span></span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> h1 = <span class="built_in">std</span>::hash&lt;T1&gt;&#123;&#125;(p.first);</span><br><span class="line">        <span class="keyword">auto</span> h2 = <span class="built_in">std</span>::hash&lt;T2&gt;&#123;&#125;(p.second);</span><br><span class="line">        <span class="keyword">return</span> h1 ^ h2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="built_in">pair</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;, <span class="keyword">int</span>, pair_hash&gt; mp;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) E.Find the median (çº¿æ®µæ ‘)</title>
      <link href="2019/08/09/(Nowcoder)%20E.Find%20the%20median/"/>
      <url>2019/08/09/(Nowcoder)%20E.Find%20the%20median/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://ac.nowcoder.com/acm/contest/887/E">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> ç»™ä½ nä¸ªåŒºé—´ï¼Œæ¯æ¬¡å¾€ä½ ç°æœ‰çš„æ•°ä¸­åŠ ä¸Šl,l+1,â€¦,r-1,rè¿™äº›æ•°ï¼Œæ±‚ç°åœ¨æ‰€æœ‰æ•°çš„ä¸­ä½æ•°</p><p><em><strong>è§£ï¼š</strong></em> åŒºé—´çš„èŒƒå›´å¾ˆå¤§ï¼Œæˆ‘ä»¬è‚¯å®šéœ€è¦ç¦»æ•£åŒ–ï¼Œè§£æ³•ä¹Ÿå¾ˆç›´è§‚ï¼Œè‚¯å®šæ˜¯çº¿æ®µæ ‘ç»´æŠ¤å—ï¼Œå°±ç»´æŠ¤åŒºé—´å‡ºç°ç‚¹çš„ä¸ªæ•°ï¼Œè¿™æ ·æˆ‘ä»¬queryçš„æ—¶å€™å°±å¯ä»¥æ ¹æ®æ•°é‡ä¸€ç›´èµ°åˆ°å¶å­èŠ‚ç‚¹ï¼Œæ±‚å‡ºç­”æ¡ˆï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯ä¸ªå¶å­èŠ‚ç‚¹å°±æ˜¯ä»£è¡¨ä¸€æ®µå°åŒºé—´äº†ã€‚è¿™é‡Œç®—æ˜¯ä¸€ä¸ªå°æŠ€å·§å§ï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰çš„åŒºé—´éƒ½çœ‹æˆæ˜¯å·¦å¼€å³é—­çš„ï¼Œè¿™æ ·å¶å­èŠ‚ç‚¹çš„åŒºé—´å°±ä¸æ€•å†²çªäº†ã€‚æ¯”å¦‚ç»™å‡ºåŒºé—´[1,3],[2,7],æˆ‘ä»¬å°†å…¶çœ‹æˆ[1,4),[2,8);ç»è¿‡æˆ‘ä»¬ç¦»æ•£åŒ–ä¼šå¾—åˆ° 1ï¼Œ2ï¼Œ4ï¼Œ8 ï¼Œé‚£æˆ‘ä»¬çº¿æ®µæ ‘çš„å¶å­èŠ‚ç‚¹æ‰€ä»£è¡¨çš„åŒºé—´å°±æ˜¯[1,2),[2,4),[4,8).</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">4e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(int x,int y) &#123;return x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll x,int y) &#123;return x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> X[maxn],Y[maxn],A1,A2,B1,B2,C1,C2,M1,M2,N;</span><br><span class="line"><span class="keyword">int</span> L[maxn],R[maxn],s[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> l,r,lz;</span><br><span class="line">ll num;</span><br><span class="line"><span class="keyword">bool</span> fg;</span><br><span class="line">&#125;sum[maxn&lt;&lt;<span class="number">3</span>];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">sum[rt].num=sum[rt&lt;&lt;<span class="number">1</span>].num+sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].num;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(sum[rt].lz)&#123;</span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>].lz+=sum[rt].lz;</span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].lz+=sum[rt].lz;</span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>].num+=<span class="number">1LL</span>*sum[rt].lz*(sum[rt&lt;&lt;<span class="number">1</span>].r-sum[rt&lt;&lt;<span class="number">1</span>].l);</span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].num+=<span class="number">1LL</span>*sum[rt].lz*(sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].r-sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].l);</span><br><span class="line">sum[rt].lz=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">sum[rt].l=s[l],sum[rt].r=s[l+<span class="number">1</span>];</span><br><span class="line">sum[rt].fg=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">sum[rt].l=sum[rt&lt;&lt;<span class="number">1</span>].l,sum[rt].r=sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=sum[rt].l &amp;&amp; R&gt;=sum[rt].r)&#123;</span><br><span class="line">sum[rt].num+=sum[rt].r-sum[rt].l;</span><br><span class="line">sum[rt].lz++;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line">pushdown(rt);</span><br><span class="line"><span class="keyword">if</span>(L&lt;sum[rt&lt;&lt;<span class="number">1</span>].r) update(L,R,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(R&gt;sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].l) update(L,R,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> rt,ll cnt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(sum[rt].fg)&#123;</span><br><span class="line">ll tp=sum[rt].num/(sum[rt].r-sum[rt].l);</span><br><span class="line"><span class="keyword">if</span>(cnt%tp==<span class="number">0</span>) <span class="keyword">return</span> sum[rt].l+(cnt/tp)<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> sum[rt].l+(cnt/tp);</span><br><span class="line">&#125;</span><br><span class="line">pushdown(rt);</span><br><span class="line"><span class="keyword">if</span>(cnt&lt;=sum[rt&lt;&lt;<span class="number">1</span>].num) <span class="keyword">return</span> query(rt&lt;&lt;<span class="number">1</span>,cnt);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> query(rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,cnt-sum[rt&lt;&lt;<span class="number">1</span>].num);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;N);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d%d%d&quot;</span>,&amp;X[<span class="number">1</span>],&amp;X[<span class="number">2</span>],&amp;A1,&amp;B1,&amp;C1,&amp;M1);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d%d%d&quot;</span>,&amp;Y[<span class="number">1</span>],&amp;Y[<span class="number">2</span>],&amp;A2,&amp;B2,&amp;C2,&amp;M2);</span><br><span class="line"><span class="keyword">int</span> tot=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&gt;=<span class="number">3</span>)&#123;</span><br><span class="line">X[i]=(<span class="number">1LL</span>*A1*X[i<span class="number">-1</span>]+<span class="number">1LL</span>*B1*X[i<span class="number">-2</span>]+C1)%M1;</span><br><span class="line">Y[i]=(<span class="number">1LL</span>*A2*Y[i<span class="number">-1</span>]+<span class="number">1LL</span>*B2*Y[i<span class="number">-2</span>]+C2)%M2;</span><br><span class="line">&#125;</span><br><span class="line">L[i]=min(X[i],Y[i])+<span class="number">1</span>;</span><br><span class="line">R[i]=max(X[i],Y[i])+<span class="number">2</span>;<span class="comment">//å·¦é—­å³å¼€ </span></span><br><span class="line">s[++tot]=L[i],s[++tot]=R[i]; </span><br><span class="line">&#125;</span><br><span class="line">sort(s+<span class="number">1</span>,s+tot+<span class="number">1</span>);</span><br><span class="line">tot=unique(s+<span class="number">1</span>,s+tot+<span class="number">1</span>)-(s+<span class="number">1</span>);</span><br><span class="line">build(<span class="number">1</span>,tot<span class="number">-1</span>,<span class="number">1</span>);</span><br><span class="line">ll all=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;++i)&#123;</span><br><span class="line">update(L[i],R[i],<span class="number">1</span>);</span><br><span class="line">all+=R[i]-L[i];</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,query(<span class="number">1</span>,(all+<span class="number">1</span>)/<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­—ç¬¦ä¸²ä¸å„ç§æ•°æ®ç±»å‹çš„ç›¸äº’è½¬å˜</title>
      <link href="2019/08/08/%E5%AD%97%E7%AC%A6%E4%B8%B2%20%E4%B8%8E%20%E5%90%84%E7%A7%8D%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%20%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E5%8F%98/"/>
      <url>2019/08/08/%E5%AD%97%E7%AC%A6%E4%B8%B2%20%E4%B8%8E%20%E5%90%84%E7%A7%8D%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%20%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E5%8F%98/</url>
      
        <content type="html"><![CDATA[<h1 id="å­—ç¬¦ä¸²è½¬å„ç§æ•°æ®ç±»å‹"><a class="markdownIt-Anchor" href="#å­—ç¬¦ä¸²è½¬å„ç§æ•°æ®ç±»å‹"></a> å­—ç¬¦ä¸²è½¬å„ç§æ•°æ®ç±»å‹</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">string</span> a=<span class="string">&quot;11&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> aa=stoi(a);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;aa&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> b=<span class="string">&quot;111111111111&quot;</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> bb=stoll(b);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;bb&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> c=<span class="string">&quot;11.1&quot;</span>;</span><br><span class="line"><span class="keyword">float</span> cc=stof(c);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;cc&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span> d=<span class="string">&quot;11.1111111&quot;</span>;</span><br><span class="line"><span class="keyword">double</span> dd=stod(d);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dd&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å„ç§æ•°æ®ç±»å‹è½¬å­—ç¬¦ä¸²"><a class="markdownIt-Anchor" href="#å„ç§æ•°æ®ç±»å‹è½¬å­—ç¬¦ä¸²"></a> å„ç§æ•°æ®ç±»å‹è½¬å­—ç¬¦ä¸²</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> a=<span class="number">11111</span>;</span><br><span class="line"><span class="built_in">string</span> aa=to_string(a);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;aa&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> b=<span class="number">1.1111111</span>;</span><br><span class="line"><span class="built_in">string</span> bb=to_string(b);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;bb&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) E.independent set 1(çŠ¶å‹dp)</title>
      <link href="2019/08/05/(Nowcoder)%20E.independent%20set%201/"/>
      <url>2019/08/05/(Nowcoder)%20E.independent%20set%201/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://ac.nowcoder.com/acm/contest/885/E">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> æ±‚é›†åˆæ‰€æœ‰å­é›†çš„ï¼ˆæœ€å¤§ç‹¬ç«‹é›†çš„ä¸ªæ•°ï¼‰ä¹‹å’Œã€‚</p><p><em><strong>è§£ï¼š</strong></em> å…ˆé¢„å¤„ç†ä¸iç‚¹ä¸ç›¸è¿çš„ç‚¹é›†åˆa[i],ç„¶åç›´æ¥äºŒè¿›åˆ¶æšä¸¾æ¯ç§å­é›†ï¼Œdpæ›´æ–°æ–¹ç¨‹å°±æ˜¯ï¼š</p><p>dp[i]=max(dp[i^(1&lt;&lt;it)],(char)(dp[i&amp;a[it]]+1)); å°±æ˜¯ä»è¯¥é›†åˆéšä¾¿å–å‡ºä¸€ä¸ª1ï¼Œä»è¦è¯¥ç‚¹å’Œä¸è¦è¯¥ç‚¹ä¸­é€‰æ‹©maxã€‚</p><p>æˆ‘ä¸€å¼€å§‹çš„å†™æ³•æ˜¯è€ƒè™‘æ”¹é›†åˆçš„æ¯ä¸€ä¸ª1ï¼Œéƒ½è¿›è¡Œä¸€æ¬¡æ›´æ–°ï¼Œè¿™æ ·æ— ç–‘æ˜¯Tçš„ï¼Œå…¶å®æƒ³æƒ³ï¼Œç”¨å“ªä¸€ä¸ª1æœ¬è´¨éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé¦–å…ˆæ¯”ç°åœ¨é›†åˆå°‘ä¸€ä¸ªç‚¹çš„dpéƒ½å·²ç»å¤„ç†ç»“æŸäº†ï¼Œè€ƒè™‘iç‚¹è¦å’Œä¸è¦çš„åŒæ—¶ï¼Œå°±å·²ç»æ¶µç›–äº†å…¶ä»–ç‚¹è¦ä¸è¦çš„æƒ…å†µï¼Œå–å¾—ä¸€ä¸ªæœ€å¤§å€¼ã€‚è¿˜æœ‰è¦ç”¨charä¸ç„¶mleã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,a[<span class="number">30</span>];</span><br><span class="line"><span class="keyword">char</span> dp[<span class="number">1</span>&lt;&lt;<span class="number">26</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">a[x]|=(<span class="number">1</span>&lt;&lt;y);</span><br><span class="line">a[y]|=(<span class="number">1</span>&lt;&lt;x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) &#123;</span><br><span class="line">a[i]=(a[i]|(<span class="number">1</span>&lt;&lt;i))^((<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line">ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> it=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;(<span class="number">1</span>&lt;&lt;n); ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!((i&gt;&gt;it)&amp;<span class="number">1</span>))it++;</span><br><span class="line">dp[i]=max(dp[i^(<span class="number">1</span>&lt;&lt;it)],(<span class="keyword">char</span>)(dp[i&amp;a[it]]+<span class="number">1</span>));</span><br><span class="line">ans+=dp[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> çŠ¶å‹dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ACè‡ªåŠ¨æœº</title>
      <link href="2019/08/05/AC%E8%87%AA%E5%8A%A8%E6%9C%BA/"/>
      <url>2019/08/05/AC%E8%87%AA%E5%8A%A8%E6%9C%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="è¿˜æ˜¯è§†é¢‘æ¯”è¾ƒå¥½æ‡‚bç«™ä¼ é€-ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#è¿˜æ˜¯è§†é¢‘æ¯”è¾ƒå¥½æ‡‚bç«™ä¼ é€-ä¼ é€é—¨"></a> è¿˜æ˜¯è§†é¢‘æ¯”è¾ƒå¥½æ‡‚ï¼Œbç«™ä¼ é€ <a href="https://www.bilibili.com/video/av6295004/?p=2">ä¼ é€é—¨</a></h1><h1 id="ä¼˜åŒ–åœ¨è¿™-ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼˜åŒ–åœ¨è¿™-ä¼ é€é—¨"></a> ä¼˜åŒ–åœ¨è¿™ <a href="https://www.luogu.org/problemnew/solution/P5357">ä¼ é€é—¨</a></h1><p>æ€æƒ³å°±æ˜¯ï¼Œä¸æš´åŠ›è·³failè¾¹ï¼Œè½¬è€Œå­˜ä¸‹æ¥ï¼Œæœ€åä¸€æ¬¡æ€§è·³ï¼Œä»ä¸‹å¾€ä¸Šè·³ï¼Œè€Œä¸”æ˜¯ä¸ªæ‹“æ‰‘ç»“æ„ã€‚</p><p>ä¼˜ç§€çš„æ¨¡æ¿è´´ä¸Šé¢ï¼›</p><h2 id="p3796-æ¨¡æ¿acè‡ªåŠ¨æœºåŠ å¼ºç‰ˆ"><a class="markdownIt-Anchor" href="#p3796-æ¨¡æ¿acè‡ªåŠ¨æœºåŠ å¼ºç‰ˆ"></a> <a href="https://www.luogu.org/problem/P3796">P3796 ã€æ¨¡æ¿ã€‘ACè‡ªåŠ¨æœºï¼ˆåŠ å¼ºç‰ˆï¼‰</a></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">155</span>*<span class="number">75</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxs=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(int x,int y) &#123;return x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll x,int y) &#123;return x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> mp[maxn],res[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AHO</span> &#123;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> son[<span class="number">26</span>],fail,flag,ans;</span><br><span class="line">&#125; trie[maxn];</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="keyword">int</span> cnt,in[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">clear</span><span class="params">(<span class="keyword">int</span> cnt)</span> </span>&#123;</span><br><span class="line">ms(trie[cnt].son,<span class="number">0</span>);</span><br><span class="line">trie[cnt].ans=trie[cnt].fail=trie[cnt].flag=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span>*s ,<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=<span class="number">1</span>,len=<span class="built_in">strlen</span>(s),id;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!trie[root].son[id]) &#123;</span><br><span class="line">trie[root].son[id]=++cnt;</span><br><span class="line">clear(cnt);</span><br><span class="line">&#125;</span><br><span class="line">root=trie[root].son[id];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!trie[root].flag) trie[root].flag=num;</span><br><span class="line">mp[num]=trie[root].flag;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getFail</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; ++i) trie[<span class="number">0</span>].son[i]=<span class="number">1</span>;</span><br><span class="line">q.push(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> u,ufail,v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">u=q.front(),ufail=trie[u].fail,q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; ++i) &#123;</span><br><span class="line">v=trie[u].son[i];</span><br><span class="line"><span class="keyword">if</span>(!v) &#123;</span><br><span class="line">trie[u].son[i]=trie[ufail].son[i];</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">trie[v].fail=trie[ufail].son[i];</span><br><span class="line">in[trie[v].fail]++,q.push(v);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=cnt; ++i) <span class="keyword">if</span>(!in[i]) q.push(i);</span><br><span class="line"><span class="keyword">int</span> u,v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">u=q.front(),q.pop();</span><br><span class="line">res[trie[u].flag]=trie[u].ans;</span><br><span class="line">v=trie[u].fail,in[v]--;</span><br><span class="line">trie[v].ans+=trie[u].ans;</span><br><span class="line"><span class="keyword">if</span>(in[v]==<span class="number">0</span>) q.push(v);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">match</span><span class="params">(<span class="keyword">char</span> *s)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=<span class="number">1</span>,len=<span class="built_in">strlen</span>(s),id;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">root=trie[root].son[id],trie[root].ans++;</span><br><span class="line">&#125;</span><br><span class="line">pushup();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">cnt=<span class="number">1</span>,ms(trie[<span class="number">1</span>].son,<span class="number">0</span>);</span><br><span class="line">trie[<span class="number">1</span>].ans=trie[<span class="number">1</span>].fail=trie[<span class="number">1</span>].ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) q.pop();</span><br><span class="line">&#125;</span><br><span class="line">&#125;aho;</span><br><span class="line"><span class="keyword">int</span> T,n;</span><br><span class="line"><span class="keyword">char</span> a[<span class="number">155</span>][<span class="number">75</span>];</span><br><span class="line"><span class="keyword">char</span> s[maxs];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span>(sc(n)!=EOF &amp;&amp; n) &#123;</span><br><span class="line">aho.init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a[i]);</span><br><span class="line">aho.insert(a[i],i);</span><br><span class="line">&#125;</span><br><span class="line">aho.getFail();</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line">aho.match(s);</span><br><span class="line"><span class="keyword">int</span> mx=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(res[mp[i]]&gt;mx) mx=res[mp[i]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,mx);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(res[mp[i]]==mx) <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,a[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="hdu-2222-keywords-search"><a class="markdownIt-Anchor" href="#hdu-2222-keywords-search"></a> <a href="http://acm.hdu.edu.cn/showproblem.php?pid=2222">HDU 2222 Keywords Search</a></h2><p>è·Ÿç€upä¸»å†™çš„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e5</span>+<span class="number">5</span>; </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxs=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(int x,int y) &#123;return x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll x,int y) &#123;return x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Aho</span>&#123;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> nxt[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">int</span> fail,cnt;</span><br><span class="line">&#125;no[maxn];</span><br><span class="line"><span class="keyword">int</span> sz;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;maxn;++i)&#123;</span><br><span class="line">ms(no[i].nxt,<span class="number">0</span>);</span><br><span class="line">no[i].fail=no[i].cnt=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">sz=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span> *s)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> len=<span class="built_in">strlen</span>(s),root=<span class="number">0</span>,id;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!no[root].nxt[id])&#123;</span><br><span class="line">no[root].nxt[id]=sz++;</span><br><span class="line">&#125;</span><br><span class="line">root=no[root].nxt[id];</span><br><span class="line">&#125;</span><br><span class="line">no[root].cnt++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span></span>&#123;</span><br><span class="line">no[<span class="number">0</span>].fail=<span class="number">-1</span>;</span><br><span class="line">q.push(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line"><span class="keyword">int</span> u=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(no[u].nxt[i])&#123;</span><br><span class="line"><span class="keyword">if</span>(u==<span class="number">0</span>) no[no[u].nxt[i]].fail=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">int</span> v=no[u].fail;</span><br><span class="line"><span class="keyword">while</span>(v!=<span class="number">-1</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(no[v].nxt[i])&#123;</span><br><span class="line">no[no[u].nxt[i]].fail=no[v].nxt[i];</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">v=no[v].fail;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(v==<span class="number">-1</span>) no[no[u].nxt[i]].fail=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">q.push(no[u].nxt[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> root)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(root)&#123;</span><br><span class="line">res+=no[root].cnt;</span><br><span class="line">no[root].cnt=<span class="number">0</span>;</span><br><span class="line">root=no[root].fail;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">match</span><span class="params">(<span class="keyword">char</span> *s)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> len=<span class="built_in">strlen</span>(s),id,res=<span class="number">0</span>,root=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(no[root].nxt[id]) root=no[root].nxt[id];</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">int</span> p=no[root].fail;</span><br><span class="line"><span class="keyword">while</span>(p!=<span class="number">-1</span> &amp;&amp; no[p].nxt[id]==<span class="number">0</span>) p=no[p].fail;</span><br><span class="line"><span class="keyword">if</span>(p==<span class="number">-1</span>) root=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> root=no[p].nxt[id];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(no[root].cnt) res+=get(root);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">&#125;aho;</span><br><span class="line"><span class="keyword">int</span> T,n;</span><br><span class="line"><span class="keyword">char</span> s[maxs];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">sc(T);</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line">sc(n);</span><br><span class="line">aho.init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line">aho.insert(s);</span><br><span class="line">&#125;</span><br><span class="line">aho.build();</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,aho.match(s));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h2 id="p3808-æ¨¡æ¿acè‡ªåŠ¨æœºç®€å•ç‰ˆ"><a class="markdownIt-Anchor" href="#p3808-æ¨¡æ¿acè‡ªåŠ¨æœºç®€å•ç‰ˆ"></a> <a href="https://www.luogu.org/problem/P3808">P3808 ã€æ¨¡æ¿ã€‘ACè‡ªåŠ¨æœºï¼ˆç®€å•ç‰ˆï¼‰</a></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxs=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(int x,int y) &#123;return x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll x,int y) &#123;return x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Aho</span> &#123;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> nxt[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">int</span> fail,cnt;</span><br><span class="line">&#125; no[maxn];</span><br><span class="line"><span class="keyword">int</span> sz=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;maxn; ++i) &#123;</span><br><span class="line">ms(no[i].nxt,<span class="number">0</span>);</span><br><span class="line">no[i].fail=no[i].cnt=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">sz=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span> *s)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> len=<span class="built_in">strlen</span>(s),root=<span class="number">0</span>,id;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!no[root].nxt[id]) &#123;</span><br><span class="line">no[root].nxt[id]=sz++;</span><br><span class="line">&#125;</span><br><span class="line">root=no[root].nxt[id];</span><br><span class="line">&#125;</span><br><span class="line">no[root].cnt++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">no[<span class="number">0</span>].fail=<span class="number">-1</span>;</span><br><span class="line">q.push(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line"><span class="keyword">int</span> u=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">26</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(no[u].nxt[i]) &#123;</span><br><span class="line"><span class="keyword">if</span>(u==<span class="number">0</span>) no[no[u].nxt[i]].fail=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">int</span> v=no[u].fail;</span><br><span class="line"><span class="keyword">while</span>(v!=<span class="number">-1</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(no[v].nxt[i]) &#123;</span><br><span class="line">no[no[u].nxt[i]].fail=no[v].nxt[i];</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">v=no[v].fail;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(v==<span class="number">-1</span>) no[no[u].nxt[i]].fail=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">q.push(no[u].nxt[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> root)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(root) &#123;</span><br><span class="line">res+=no[root].cnt;</span><br><span class="line">no[root].cnt=<span class="number">0</span>;</span><br><span class="line">root=no[root].fail;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">match</span><span class="params">(<span class="keyword">char</span> *s)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> len=<span class="built_in">strlen</span>(s),id,res=<span class="number">0</span>,root=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(no[root].nxt[id]) root=no[root].nxt[id];</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">int</span> p=no[root].fail;</span><br><span class="line"><span class="keyword">while</span>(p!=<span class="number">-1</span> &amp;&amp; no[p].nxt[id]==<span class="number">0</span>) p=no[p].fail;</span><br><span class="line"><span class="keyword">if</span>(p==<span class="number">-1</span>) root=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> root=no[p].nxt[id];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(no[root].cnt) res+=get(root);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">&#125; aho;</span><br><span class="line"><span class="keyword">int</span> T,n;</span><br><span class="line"><span class="keyword">char</span> s[maxs];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">sc(n);</span><br><span class="line"><span class="comment">//aho.init();</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line">aho.insert(s);</span><br><span class="line">&#125;</span><br><span class="line">aho.build();</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,aho.match(s));</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>å‘ç°UPä¸»çš„ä»£ç å¥½åƒè¿‡ä¸äº†åŠ å¼ºæ•°æ®ç‰ˆï¼Œçœ‹äº†æ•°æ®ç¡®å®å‡ºç°äº†é”™è¯¯ã€‚</p><p>ç´¢æ€§è¿™ä¸ªåŸºç¡€ç‰ˆæ•ˆç‡ä¹Ÿä¸è¡Œï¼Œå°±å†å­¦ä¹ äº†ä¸€ä¸‹æ‹“æ‰‘ä¼˜åŒ–ç‰ˆæœ¬ã€‚</p><h2 id="p5357-æ¨¡æ¿acè‡ªåŠ¨æœºäºŒæ¬¡åŠ å¼ºç‰ˆ"><a class="markdownIt-Anchor" href="#p5357-æ¨¡æ¿acè‡ªåŠ¨æœºäºŒæ¬¡åŠ å¼ºç‰ˆ"></a> <a href="https://www.luogu.org/problem/P5357">P5357 ã€æ¨¡æ¿ã€‘ACè‡ªåŠ¨æœºï¼ˆäºŒæ¬¡åŠ å¼ºç‰ˆï¼‰</a></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxs=<span class="number">2e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int Add(int x,int y) &#123;return x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int Mul(ll x,int y) &#123;return x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> son[<span class="number">26</span>],fail,flag,ans;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;ms(son,<span class="number">0</span>),fail=flag=ans=<span class="number">0</span>;&#125;</span><br><span class="line">&#125;trie[maxn];</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="keyword">int</span> cnt,in[maxn],mp[maxn],res[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">char</span>*s ,<span class="keyword">int</span> num)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=<span class="number">1</span>,len=<span class="built_in">strlen</span>(s),id;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!trie[root].son[id]) trie[root].son[id]=++cnt;</span><br><span class="line">root=trie[root].son[id];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!trie[root].flag) trie[root].flag=num;</span><br><span class="line">mp[num]=trie[root].flag;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">getFail</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;++i) trie[<span class="number">0</span>].son[i]=<span class="number">1</span>; </span><br><span class="line">q.push(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> u,ufail,v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">u=q.front(),ufail=trie[u].fail,q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;++i)&#123;</span><br><span class="line">v=trie[u].son[i];</span><br><span class="line"><span class="keyword">if</span>(!v)&#123;</span><br><span class="line">trie[u].son[i]=trie[ufail].son[i];</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">trie[v].fail=trie[ufail].son[i];</span><br><span class="line">in[trie[v].fail]++,q.push(v);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;++i) <span class="keyword">if</span>(!in[i]) q.push(i);</span><br><span class="line"><span class="keyword">int</span> u,v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">u=q.front(),q.pop();</span><br><span class="line">res[trie[u].flag]=trie[u].ans;</span><br><span class="line">v=trie[u].fail,in[v]--;</span><br><span class="line">trie[v].ans+=trie[u].ans;</span><br><span class="line"><span class="keyword">if</span>(in[v]==<span class="number">0</span>) q.push(v);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">match</span><span class="params">(<span class="keyword">char</span> *s)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=<span class="number">1</span>,len=<span class="built_in">strlen</span>(s),id;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">root=trie[root].son[id],trie[root].ans++;</span><br><span class="line">&#125;</span><br><span class="line">pushup();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> T,n;</span><br><span class="line"><span class="keyword">char</span> s[maxs];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">sc(n);</span><br><span class="line">cnt=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line">insert(s,i);</span><br><span class="line">&#125;</span><br><span class="line">getFail();</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s);</span><br><span class="line">match(s);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,res[mp[i]]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACè‡ªåŠ¨æœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) H.subsequence 2 (æ‹“æ‰‘)</title>
      <link href="2019/08/02/(Nowcoder)%20H.subsequence%202/"/>
      <url>2019/08/02/(Nowcoder)%20H.subsequence%202/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://ac.nowcoder.com/acm/contest/885/H">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> æ¯æ¬¡ç»™å‡ºä¸¤ä¸ªå­—æ¯å’Œé™¤å»è¿™ä¸¤ä¸ªå­—æ¯çš„åŸå­—ç¬¦ä¸²åºåˆ—ï¼Œæœ€åè®©ä½ è¾“å‡ºåŸå­—ç¬¦ä¸²ã€‚</p><p><em><strong>æ€è·¯ï¼š</strong></em> å¦‚æœèƒ½æƒ³åˆ°è½¬åŒ–ä¸ºå›¾ï¼Œå°±è§£å†³ä¸€å¤§åŠäº†ï¼Œæ‰€ä»¥ä¸€å®šä¸èƒ½å›ºå®šäº†æ€ç»´ï¼Œå­¦ä¼šè½¬æ¢ï¼Œå°†é™¤å»è¿™ä¸¤ä¸ªå­—æ¯çš„åŸå­—ç¬¦ä¸²åºåˆ—ä¸­çš„å­—ç¬¦è½¬åŒ–ä¸ºå›¾ä¸­çš„æŒ‡å‘å…³ç³»ï¼Œå¦‚æœèƒ½æ„é€ å‡ºï¼Œé‚£æœ€åå¿…å®šæ˜¯ä¸€ä¸ªæ‹“æ‰‘å›¾ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">cg</span><span class="params">(<span class="keyword">char</span> c,<span class="keyword">int</span> x)</span> </span>&#123;<span class="keyword">return</span> (c-<span class="string">&#x27;a&#x27;</span>)*<span class="number">10001</span>+x;&#125;</span><br><span class="line"><span class="function">il <span class="keyword">char</span> <span class="title">re</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;<span class="keyword">return</span> <span class="string">&#x27;a&#x27;</span>+x/<span class="number">10001</span>;&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; eg[maxn];</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">char</span>,<span class="keyword">int</span>&gt; nn;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> n,m,in[maxn],id[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> len=m*(m<span class="number">-1</span>)/<span class="number">2</span>,num;</span><br><span class="line"><span class="built_in">string</span> s1,s2;</span><br><span class="line"><span class="keyword">bool</span> fg=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=len;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;s1&gt;&gt;num;</span><br><span class="line"><span class="keyword">if</span>(num!=<span class="number">0</span>) <span class="built_in">cin</span>&gt;&gt;s2;</span><br><span class="line"><span class="keyword">int</span> n0=<span class="number">0</span>,n1=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(fg) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;num;++j)&#123;</span><br><span class="line">vis[s2[j]-<span class="string">&#x27;a&#x27;</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(s2[j]==s1[<span class="number">0</span>]) n0++,id[j]=cg(s2[j],n0);</span><br><span class="line"><span class="keyword">else</span> n1++,id[j]=cg(s2[j],n1);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!nn.count(s1[<span class="number">0</span>])) nn[s1[<span class="number">0</span>]]=n0;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(nn[s1[<span class="number">0</span>]]!=n0) fg=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(!nn.count(s1[<span class="number">1</span>])) nn[s1[<span class="number">1</span>]]=n1;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(nn[s1[<span class="number">1</span>]]!=n1) fg=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;num<span class="number">-1</span>;++j)&#123;</span><br><span class="line">eg[id[j]].pb(id[j+<span class="number">1</span>]),in[id[j+<span class="number">1</span>]]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(fg)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(!in[i*<span class="number">10001</span>+<span class="number">1</span>] &amp;&amp; vis[i]) q.push(i*<span class="number">10001</span>+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; ans;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line"><span class="keyword">int</span> np=q.front();</span><br><span class="line">ans.pb(re(np));</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;SZ(eg[np]);++i)&#123;</span><br><span class="line"><span class="keyword">int</span> to=eg[np][i];</span><br><span class="line">in[to]--;</span><br><span class="line"><span class="keyword">if</span>(!in[to]) q.push(to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(SZ(ans)!=n) <span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;SZ(ans);++i)<span class="built_in">cout</span>&lt;&lt;ans[i];</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‹“æ‰‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) B xor (çº¿æ€§åŸºäº¤ + çº¿æ®µæ ‘)</title>
      <link href="2019/07/31/(Nowcoder)%20B%20xor/"/>
      <url>2019/07/31/(Nowcoder)%20B%20xor/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://ac.nowcoder.com/acm/contest/884/B">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„</strong></em> ï¼šç»™ä½ nä¸ªé›†åˆï¼Œæ¯ä¸ªé›†åˆä¸­éƒ½æœ‰ä¸è¶…è¿‡32ä¸ªæ•°ï¼Œæ€»å…±è¯¢é—®mæ¬¡ï¼Œæ¯æ¬¡è¯¢é—®åŒºé—´ [L, R] ä¸­çš„æ‰€æœ‰é›†åˆï¼Œæ˜¯å¦éƒ½æœ‰ä¸€ä¸ªå¼‚æˆ–å’Œç­‰äºXçš„å­é›†ã€‚</p><p><em><strong>æ€è·¯</strong></em> ï¼šå¯¹äºæŸ¥è¯¢åŒºé—´çš„é›†åˆæ±‚çº¿æ€§åŸºçš„äº¤ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½è¡¨ç¤ºå‡ºæŸ¥è¯¢çš„vå³å¯ï¼Œä½†æ˜¯å…¶å®åªéœ€è¦çº¿æ®µæ ‘ç›´æ¥æŸ¥è¯¢å³å¯ï¼Œä¸å¿…å…ˆå°†äº¤æ±‚å‡ºæ¥ã€‚å¦‚ä½•æ±‚äº¤  <strong><a href="https://blog.csdn.net/WAautomaton/article/details/88881187">ä¼ é€1</a> <a href="https://ac.nowcoder.com/discuss/213230?type=101&amp;order=0&amp;pos=1&amp;page=1">ä¼ é€2</a></strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> uint;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e4</span>+<span class="number">2</span>;</span><br><span class="line">uint a[maxn&lt;&lt;<span class="number">2</span>][<span class="number">32</span>];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">insert</span><span class="params">(uint x,<span class="keyword">int</span> cur)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">31</span>; i&gt;=<span class="number">0</span>; --i) &#123;</span><br><span class="line"><span class="keyword">if</span>(x&gt;&gt;i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!a[cur][i]) &#123;</span><br><span class="line">a[cur][i]=x;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">x^=a[cur][i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line">uint t1[<span class="number">32</span>],t2[<span class="number">32</span>],ls=rt&lt;&lt;<span class="number">1</span>,rs=rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">32</span>; ++i) &#123;</span><br><span class="line">t1[i]=t2[i]=a[ls][i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">32</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(a[rs][i]) &#123;</span><br><span class="line">uint x=a[rs][i],tp=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">31</span>; j&gt;=<span class="number">0</span>; --j) &#123;</span><br><span class="line"><span class="keyword">if</span>(x&gt;&gt;j) &#123;</span><br><span class="line"><span class="keyword">if</span>(!t1[j]) &#123;</span><br><span class="line">t1[j]=x,t2[j]=tp;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">x^=t1[j],tp^=t2[j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!x) insert(tp,rt);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line"><span class="keyword">int</span> sz,tp;</span><br><span class="line">sc(sz);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;sz; ++i) &#123;</span><br><span class="line">sc(tp);</span><br><span class="line">insert(tp,rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,uint val,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l &amp;&amp; R&gt;=r) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">31</span>; i&gt;=<span class="number">0</span>; --i) &#123;</span><br><span class="line"><span class="keyword">if</span>(val&gt;&gt;i) val^=a[rt][i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> val==<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">bool</span> res=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=mid) res&amp;=query(L,R,val,l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(R&gt;mid) res&amp;=query(L,R,val,mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SC(n,m);</span><br><span class="line">build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> x,y,val;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m; ++i) &#123;</span><br><span class="line">sc(x),sc(y),sc(val);</span><br><span class="line"><span class="keyword">if</span>(query(x,y,val,<span class="number">1</span>,n,<span class="number">1</span>)) <span class="built_in">printf</span>(<span class="string">&quot;YES\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;NO\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> çº¿æ€§åŸº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) J LRU management ï¼ˆé™æ€é“¾è¡¨ï¼‰</title>
      <link href="2019/07/25/(Nowcoder)%20J%20LRU%20management/"/>
      <url>2019/07/25/(Nowcoder)%20J%20LRU%20management/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://ac.nowcoder.com/acm/contest/883/J">ä¼ é€é—¨</a></h1><p>é¢˜æ„è¯»æ‡‚äº†ï¼Œæ„Ÿè§‰è¿™å°±æ˜¯ä¸ªå¤§æ¨¡æ‹Ÿï¼Œä½†æ˜¯ç›´æ¥æ¨¡æ‹Ÿå¤æ‚åº¦å¤ªå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨é“¾è¡¨æŒ‡é’ˆæä¸€æã€‚ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘å†™çš„å®åœ¨å¤ªæŒ«ï¼Œè¿˜æ˜¯å¡å¸¸ï¼Œä¸€ç›´ç‹‚Tï¼Œå“­äº†ã€‚</p><p>åˆ’é‡ç‚¹ï¼ŒåŠ ä¸Šè¿™ä¸ªæ‰è¿‡ã€‚è®¾ç½®å“ˆå¸Œæ¡¶å¤§å°ï¼Œé˜Ÿå‹åŠ äº†æ‰è¿‡ï¼Œä¼°äº†ï¼Œæ‰çŸ¥é“è¿™ç©ä¹Ÿï¼Œç›¸è§æ¨æ™šï¼Œè¿˜æ˜¯å¤ªèœäº†å‘€ã€‚</p><p><strong>rk.rehash(500005); a.rehash(500005);</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b) for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> T,q,m;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> pre,nxt;</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>,node&gt; a;</span><br><span class="line"><span class="built_in">unordered_map</span>&lt;<span class="built_in">string</span>,<span class="keyword">int</span>&gt; rk;</span><br><span class="line"><span class="keyword">char</span> alls[maxn][<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> allop[maxn],allv[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar(); <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(ch &lt; <span class="string">&#x27;0&#x27;</span> || ch &gt; <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(ch == <span class="string">&#x27;-&#x27;</span>) f = <span class="number">-1</span>;</span><br><span class="line">        ch = getchar();</span><br><span class="line">    &#125; <span class="keyword">while</span>(<span class="string">&#x27;0&#x27;</span> &lt;= ch &amp;&amp; ch &lt;= <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">        x = x * <span class="number">10</span> + ch - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        ch = getchar();</span><br><span class="line">    &#125; <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    T = read();</span><br><span class="line">    rk.rehash(<span class="number">500005</span>);</span><br><span class="line">    a.rehash(<span class="number">500005</span>);</span><br><span class="line">    <span class="keyword">while</span>(T--)&#123;</span><br><span class="line">        q = read();</span><br><span class="line">        m = read();</span><br><span class="line">        <span class="keyword">int</span> op,s,v,nlen=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> fa=<span class="number">-1</span>,last;</span><br><span class="line">        a.clear(),rk.clear();</span><br><span class="line">        rep(i,<span class="number">1</span>,q)&#123;</span><br><span class="line">            allop[i] = read();</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot; %s&quot;</span>,alls[i]);</span><br><span class="line">            allv[i] = read();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">        rep(i,<span class="number">1</span>,q)&#123;</span><br><span class="line">            <span class="keyword">if</span>(rk.count(alls[i])==<span class="number">0</span>) rk[alls[i]]=++cnt;</span><br><span class="line">        &#125;</span><br><span class="line">        rep(i,<span class="number">1</span>,q)&#123;</span><br><span class="line">            op=allop[i],s=rk[alls[i]],v=allv[i];</span><br><span class="line">            <span class="keyword">if</span>(op==<span class="number">0</span>)&#123; <span class="comment">//add</span></span><br><span class="line">                <span class="keyword">if</span>(nlen==<span class="number">0</span>)&#123;</span><br><span class="line">                    a[fa].nxt=s;</span><br><span class="line">                    a[s].pre=fa,a[s].val=v;</span><br><span class="line">                    last=s,nlen++;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,v);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(a.count(s)==<span class="number">0</span> || a[s].val==inf)&#123; <span class="comment">//ä¸å­˜åœ¨s</span></span><br><span class="line">                        a[last].nxt=s,a[s].pre=last;</span><br><span class="line">                        a[s].val=v,last=s,nlen++;</span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,v);</span><br><span class="line">                        <span class="keyword">if</span>(nlen&gt;m)&#123; <span class="comment">//åˆ é™¤å¤´éƒ¨</span></span><br><span class="line">                            <span class="keyword">if</span>(m==<span class="number">1</span>)&#123;</span><br><span class="line">                                <span class="keyword">int</span> fato=a[fa].nxt;</span><br><span class="line">                                a[fato].val=inf;</span><br><span class="line">                                a[fato].pre=<span class="number">0</span>,a[fato].nxt=<span class="number">0</span>;</span><br><span class="line">                                a[fa].nxt=s,a[s].pre=fa;</span><br><span class="line">                                last=s;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">else</span>&#123;</span><br><span class="line">                                <span class="keyword">int</span> fato=a[fa].nxt;</span><br><span class="line">                                a[fato].val=inf;</span><br><span class="line">                                <span class="keyword">int</span> to=a[fato].nxt;</span><br><span class="line">                                a[to].pre=fa,a[fa].nxt=to;</span><br><span class="line">                                a[fato].pre=<span class="number">0</span>,a[fato].nxt=<span class="number">0</span>;</span><br><span class="line">                            &#125;</span><br><span class="line">                            nlen--;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span>&#123;<span class="comment">//å­˜åœ¨s</span></span><br><span class="line">                        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[s].val);</span><br><span class="line">                        <span class="keyword">if</span>(s==last) <span class="keyword">continue</span>;</span><br><span class="line">                        <span class="keyword">int</span> spre=a[s].pre,sto=a[s].nxt;</span><br><span class="line">                        a[sto].pre=spre,a[spre].nxt=sto;</span><br><span class="line">                        a[last].nxt=s;</span><br><span class="line">                        a[s].pre=last;</span><br><span class="line">                        last=s;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123; <span class="comment">//query</span></span><br><span class="line">                <span class="keyword">if</span>(a.count(s)==<span class="number">0</span> || a[s].val==inf)&#123;</span><br><span class="line">                    <span class="built_in">puts</span>(<span class="string">&quot;Invalid&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(v==<span class="number">0</span>)    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[s].val);</span><br><span class="line">                    <span class="keyword">if</span>(v==<span class="number">-1</span>)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(a[s].pre==fa)    <span class="built_in">puts</span>(<span class="string">&quot;Invalid&quot;</span>);</span><br><span class="line">                        <span class="keyword">else</span>    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[a[s].pre].val);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span>(v==<span class="number">1</span>)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(s==last) <span class="built_in">puts</span>(<span class="string">&quot;Invalid&quot;</span>);</span><br><span class="line">                        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,a[a[s].nxt].val);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">              </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ï¼ˆCodeForcesï¼‰D - Programming Team Gym - 101002D ï¼ˆæ ‘å‹ä¾èµ–èƒŒåŒ…ï¼‰</title>
      <link href="2019/07/24/(CodeForces)D%20-%20Programming%20Team%20Gym/"/>
      <url>2019/07/24/(CodeForces)D%20-%20Programming%20Team%20Gym/</url>
      
        <content type="html"><![CDATA[<h2 id="é¢˜ç›®biu"><a class="markdownIt-Anchor" href="#é¢˜ç›®biu"></a> <a href="http://codeforces.com/gym/101002/attachments">é¢˜ç›®biu</a></h2><h2 id="æ ‘å‹ä¾èµ–èƒŒåŒ…ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#æ ‘å‹ä¾èµ–èƒŒåŒ…ä¼ é€é—¨"></a> æ ‘å‹ä¾èµ–èƒŒåŒ…ï¼š<a href="https://www.cnblogs.com/zzqsblog/p/5537440.html?tdsourcetag=s_pcqq_aiomsg">ä¼ é€é—¨</a></h2><p>é¢˜æ„ï¼šnä¸ªå‘˜å·¥ï¼Œè¦é€‰kä¸ªå‘˜å·¥ï¼Œæ¯ä¸ªå‘˜å·¥éƒ½æœ‰ä¸€ä¸ªè–ªæ°´å’Œèƒ½åŠ›ï¼Œè¦ä½¿å¾—æœ€ç»ˆæ€§ä»·æ¯”æœ€é«˜ã€‚</p><p>ç”±äºè¿™é¢˜è¦é€‰ä¸Šå­èŠ‚ç‚¹å°±å¿…é¡»æŠŠçˆ¶èŠ‚ç‚¹é€‰ä¸Šï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±æƒ³åˆ°äº†æ ‘å‹ä¾èµ–èƒŒåŒ…ã€‚a[i]:ä»£è¡¨èƒ½åŠ›ï¼Œb[i]ä»£è¡¨è–ªæ°´</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æšä¸¾ä¸€ä¸ªç­”æ¡ˆmidï¼Œå¯ä»¥åˆ¤æ–­$$max\sum_{i=1}<sup>ka[i]/b[i]&gt;=mid$$,è¿›è¡Œcheckã€‚æˆ‘ä»¬å°†å…¬å¼è¿›è¡Œç®€å•å˜æ¢å°±æ˜¯$$max\sum_{i=1}</sup>k(a[i]-mid<em>b[i])&gt;=0$$,è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†ï¼ˆa[i]-mid</em>b[i]ï¼‰çœ‹æˆç¬¬iä»¶ç‰©å“çš„ä»·å€¼ï¼Œè€Œiä»¶ç‰©å“çš„é‡é‡å°±æ˜¯1ï¼Œåœ¨æ»¡è¶³å»å­èŠ‚ç‚¹å°±è¦å–ä¸Šçˆ¶äº²èŠ‚ç‚¹çš„å‰æä¸‹ï¼Œå–ä¸Šä¸ªk+1ä¸ªç‰©å“çš„æœ€å¤§æ”¶ç›Šã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">3e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="comment">//il int add(int x,int y) &#123;return x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int mul(ll x,int y) &#123;return x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">int</span> k,n,a[maxn],b[maxn],w[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; eg[maxn];</span><br><span class="line"><span class="keyword">int</span> sz[maxn],st[maxn],dl[maxn],t=<span class="number">0</span>;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">sz[p]=<span class="number">1</span>,st[p]=t++,dl[t<span class="number">-1</span>]=p;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> to:eg[p]) dfs(to),sz[p]+=sz[to];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">double</span> v[maxn],dp[maxn][maxn];</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">ck</span><span class="params">(<span class="keyword">double</span> ta)</span></span>&#123;</span><br><span class="line">rep(i,<span class="number">1</span>,n) v[i]=<span class="number">1.0</span>*a[i]<span class="number">-1.0</span>*b[i]*ta;</span><br><span class="line">rep(i,<span class="number">0</span>,n+<span class="number">2</span>) rep(p,<span class="number">0</span>,k+<span class="number">1</span>) dp[i][p]=dp[i][p]=-inf;</span><br><span class="line">dp[n+<span class="number">1</span>][<span class="number">0</span>]=<span class="number">0.0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=n;i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line"><span class="keyword">int</span> x=dl[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> p=<span class="number">0</span>;p&lt;=k+<span class="number">1</span>;++p)&#123;</span><br><span class="line"><span class="keyword">if</span>(p&lt;w[x])dp[i][p]=max(dp[i+sz[x]][p],dp[i][p]);</span><br><span class="line"><span class="keyword">else</span>dp[i][p]=max(max(dp[i+sz[x]][p],dp[i+<span class="number">1</span>][p-w[x]]+v[x]),dp[i][p]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dp[<span class="number">0</span>][k+<span class="number">1</span>]<span class="number">-0.0</span>&gt;eps) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">SC(k,n);</span><br><span class="line"><span class="keyword">int</span> x;</span><br><span class="line">rep(i,<span class="number">1</span>,n)&#123;</span><br><span class="line">SC(b[i],a[i]),sc(x);</span><br><span class="line">eg[x].pb(i);</span><br><span class="line">&#125;</span><br><span class="line">dfs(<span class="number">0</span>);</span><br><span class="line">rep(i,<span class="number">0</span>,n) w[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">double</span> le=<span class="number">0.0</span>,ri=inf,ans;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">abs</span>(ri-le)&gt;eps)&#123;</span><br><span class="line"><span class="keyword">double</span> mid=(ri+le)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span>(ck(mid))&#123;</span><br><span class="line">ans=mid;</span><br><span class="line">le=mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> ri=mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.3lf\n&quot;</span>,ans);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FFTåŸºç¡€æ¨¡æ¿</title>
      <link href="2019/07/23/FFT%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/"/>
      <url>2019/07/23/FFT%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://www.cnblogs.com/zwfymqz/p/8244902.html#_label5">ä¼ é€é—¨</a></h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//il int add(int x,int y) &#123;return x+y&gt;=mod?x+y-mod:x+y;&#125;</span></span><br><span class="line"><span class="comment">//il int mul(ll x,int y) &#123;return x*y&gt;=mod?x*y%mod:x*y;&#125;</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">5e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> limit=<span class="number">1</span>,L=<span class="number">0</span>,r[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Complex</span> &#123;</span></span><br><span class="line"><span class="keyword">double</span> x,y;</span><br><span class="line">Complex(<span class="keyword">double</span> xx=<span class="number">0</span>,<span class="keyword">double</span> yy=<span class="number">0</span>) &#123;</span><br><span class="line">x=xx,y=yy;</span><br><span class="line">&#125;</span><br><span class="line">Complex <span class="keyword">operator</span> + (<span class="keyword">const</span> Complex &amp;b) <span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> Complex(x+b.x,y+b.y);</span><br><span class="line">&#125;</span><br><span class="line">Complex <span class="keyword">operator</span> - (<span class="keyword">const</span> Complex &amp;b) <span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> Complex(x-b.x,y-b.y);</span><br><span class="line">&#125;</span><br><span class="line">Complex <span class="keyword">operator</span> * (<span class="keyword">const</span> Complex &amp;b) <span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> Complex(x*b.x-y*b.y,x*b.y+y*b.x);</span><br><span class="line">&#125;</span><br><span class="line">&#125; a[N],b[N];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">FFT</span><span class="params">(Complex *A,<span class="keyword">int</span> opt)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;limit; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(i&lt;r[i]) swap(A[i],A[r[i]]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> mid=<span class="number">1</span>; mid&lt;limit; mid&lt;&lt;=<span class="number">1</span>) &#123;</span><br><span class="line"><span class="function">Complex <span class="title">Wn</span><span class="params">(<span class="built_in">cos</span>(pi/mid),opt*<span class="built_in">sin</span>(pi/mid))</span></span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> R=mid&lt;&lt;<span class="number">1</span>,j=<span class="number">0</span>; j&lt;limit; j+=R) &#123;</span><br><span class="line"><span class="function">Complex <span class="title">W</span><span class="params">(<span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;mid; k++,W=W*Wn) &#123;</span><br><span class="line">Complex x=A[j+k],y=W*A[j+mid+k];</span><br><span class="line">A[j+k]=x+y;</span><br><span class="line">A[j+mid+k]=x-y;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">Solve</span><span class="params">(Complex *a,Complex *b)</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(limit&lt;=n+m) limit&lt;&lt;=<span class="number">1</span>,L++;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;limit; i++) r[i]=(r[i&gt;&gt;<span class="number">1</span>]&gt;&gt;<span class="number">1</span>)|((i&amp;<span class="number">1</span>)&lt;&lt;(L<span class="number">-1</span>)); <span class="comment">// é¢„å¤„ç†</span></span><br><span class="line">FFT(a,<span class="number">1</span>),FFT(b,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=limit; i++) a[i]=a[i]*b[i];</span><br><span class="line">FFT(a,<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++) <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;a[i].x); <span class="comment">// næ¬¡å¤šé¡¹å¼</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=m; i++) <span class="built_in">scanf</span>(<span class="string">&quot;%lf&quot;</span>,&amp;b[i].x); <span class="comment">// mæ¬¡å¤šé¡¹å¼</span></span><br><span class="line">Solve(a,b);<span class="comment">//æ±‚å‡ºä¸¤å¤šé¡¹å¼å·ç§¯</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n+m; i++)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,(<span class="keyword">int</span>)(a[i].x/limit+<span class="number">0.5</span>)); <span class="comment">//è¾“å‡ºæŒ‡æ•°ä¸ºiçš„ç³»æ•°</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> FFT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»å¸­æ ‘åŸºç¡€æ¨¡æ¿</title>
      <link href="2019/07/17/%E4%B8%BB%E5%B8%AD%E6%95%B0%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/"/>
      <url>2019/07/17/%E4%B8%BB%E5%B8%AD%E6%95%B0%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸å¸¦ä¿®æ”¹ä¸»å¸­æ ‘"><a class="markdownIt-Anchor" href="#ä¸å¸¦ä¿®æ”¹ä¸»å¸­æ ‘"></a> ä¸å¸¦ä¿®æ”¹ä¸»å¸­æ ‘</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> a[maxn],b[maxn],rt[maxn*<span class="number">20</span>],ls[maxn*<span class="number">20</span>],rs[maxn*<span class="number">20</span>],sum[maxn*<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> n,m,tot;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> &amp;rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">rt=++tot;</span><br><span class="line">sum[rt]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(ls[rt],l,mid);</span><br><span class="line">build(rs[rt],mid+<span class="number">1</span>,r); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> &amp;rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> last,<span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">rt=++tot;</span><br><span class="line">ls[rt]=ls[last],rs[rt]=rs[last];</span><br><span class="line">sum[rt]=sum[last]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(p&lt;=mid) update(ls[rt],l,mid,ls[last],p);</span><br><span class="line"><span class="keyword">else</span> update(rs[rt],mid+<span class="number">1</span>,r,rs[last],p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> ss,<span class="keyword">int</span> ee,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span> l;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> cnt=sum[ls[ee]]-sum[ls[ss]];</span><br><span class="line"><span class="keyword">if</span>(k&lt;=cnt) <span class="keyword">return</span> query(ls[ss],ls[ee],l,mid,k);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> query(rs[ss],rs[ee],mid+<span class="number">1</span>,r,k-cnt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">SC(n,m);</span><br><span class="line">rep(i,<span class="number">1</span>,n) sc(a[i]),b[i]=a[i];</span><br><span class="line">sort(b+<span class="number">1</span>,b+n+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> sz=unique(b+<span class="number">1</span>,b+n+<span class="number">1</span>)-(b+<span class="number">1</span>);</span><br><span class="line">build(rt[<span class="number">0</span>],<span class="number">1</span>,sz);</span><br><span class="line">rep(i,<span class="number">1</span>,n)&#123;</span><br><span class="line">a[i]=lower_bound(b+<span class="number">1</span>,b+sz+<span class="number">1</span>,a[i])-b; </span><br><span class="line">update(rt[i],<span class="number">1</span>,sz,rt[i<span class="number">-1</span>],a[i]);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">int</span> l,r,k;</span><br><span class="line">rep(i,<span class="number">1</span>,m)&#123;</span><br><span class="line">sc(l),sc(r),sc(k);</span><br><span class="line"><span class="keyword">int</span> id=query(rt[l<span class="number">-1</span>],rt[r],<span class="number">1</span>,sz,k);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,b[id]);</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¸¦ä¿®æ”¹çš„ä¸»å¸­æ•°"><a class="markdownIt-Anchor" href="#å¸¦ä¿®æ”¹çš„ä¸»å¸­æ•°"></a> å¸¦ä¿®æ”¹çš„ä¸»å¸­æ•°</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm=maxn*<span class="number">150</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,tot,cnt,sz,a[maxn],b[maxn*<span class="number">5</span>];</span><br><span class="line"><span class="keyword">int</span> root[maxn],ls[maxm],rs[maxm],dat[maxm];</span><br><span class="line"><span class="keyword">int</span> totL,totR;</span><br><span class="line"><span class="keyword">int</span> L[maxn],R[maxn];</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> _Tp&gt; <span class="function">il <span class="keyword">void</span> <span class="title">read</span><span class="params">(_Tp&amp;x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch;<span class="keyword">bool</span> flag=<span class="number">0</span>;x=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(ch=getchar(),!<span class="built_in">isdigit</span>(ch)) <span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">isdigit</span>(ch)) x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>,ch=getchar();</span><br><span class="line"><span class="keyword">if</span>(flag) x=-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> &amp;now, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x, <span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!now) now=++tot;</span><br><span class="line">    dat[now]+=val;</span><br><span class="line">    <span class="keyword">if</span>(l==r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;=mid) insert(ls[now],l,mid,x,val);</span><br><span class="line">    <span class="keyword">else</span> insert(rs[now],mid+<span class="number">1</span>,r,x,val);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span> l;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=totL; i++) sum-=dat[ls[L[i]]];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=totR; i++) sum+=dat[ls[R[i]]];</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(sum&gt;=k)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=totL; i++) L[i]=ls[L[i]];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=totR; i++) R[i]=ls[R[i]];</span><br><span class="line">        <span class="keyword">return</span> ask(l,mid,k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=totL; i++) L[i]=rs[L[i]];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=totR; i++) R[i]=rs[R[i]];</span><br><span class="line"><span class="keyword">return</span> ask(mid+<span class="number">1</span>,r,k-sum);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> x&amp;-x;&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> C)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t=a[x],tt=C;</span><br><span class="line">    a[x]=C;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=x; j&lt;=n; j+=lowbit(j))&#123;</span><br><span class="line">        insert(root[j],<span class="number">1</span>,sz,t,<span class="number">-1</span>);</span><br><span class="line">        insert(root[j],<span class="number">1</span>,sz,tt,<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> t)</span></span>&#123; <span class="comment">//è¿”å›ä¸‹æ ‡ </span></span><br><span class="line">    totL=totR=<span class="number">0</span>,l--;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=l; j; j-=lowbit(j)) L[++totL]=root[j];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=r; j; j-=lowbit(j)) R[++totR]=root[j];</span><br><span class="line">    <span class="keyword">int</span> id=ask(<span class="number">1</span>,sz,t);</span><br><span class="line">    <span class="keyword">return</span> id; </span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> op,l,r,k;</span><br><span class="line">&#125;q[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">read(n),read(m);</span><br><span class="line">tot=<span class="number">0</span>,cnt=<span class="number">0</span>;</span><br><span class="line">rep(i,<span class="number">1</span>,n) sc(a[i]),b[++cnt]=a[i];</span><br><span class="line"><span class="keyword">char</span> op;</span><br><span class="line"><span class="keyword">int</span> l,r,k;</span><br><span class="line">rep(i,<span class="number">1</span>,m)&#123;</span><br><span class="line">op=getchar();</span><br><span class="line"><span class="keyword">while</span>(!(op==<span class="string">&#x27;Q&#x27;</span> || op==<span class="string">&#x27;C&#x27;</span>)) op=getchar();</span><br><span class="line"><span class="keyword">if</span>(op==<span class="string">&#x27;Q&#x27;</span>)&#123;</span><br><span class="line">read(l),read(r),read(k);</span><br><span class="line">q[i]=node&#123;<span class="number">1</span>,l,r,k&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">read(l),read(r);</span><br><span class="line">b[++cnt]=r;</span><br><span class="line">q[i]=node&#123;<span class="number">0</span>,l,r,<span class="number">0</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">sort(b+<span class="number">1</span>,b+cnt+<span class="number">1</span>);</span><br><span class="line">sz=unique(b+<span class="number">1</span>,b+cnt+<span class="number">1</span>)-(b+<span class="number">1</span>);</span><br><span class="line">rep(i,<span class="number">1</span>,n)&#123;</span><br><span class="line">a[i]=lower_bound(b+<span class="number">1</span>,b+sz+<span class="number">1</span>,a[i])-(b);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=n;j+=lowbit(j))&#123;</span><br><span class="line">insert(root[j],<span class="number">1</span>,sz,a[i],<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">rep(i,<span class="number">1</span>,m)&#123;</span><br><span class="line"><span class="keyword">if</span>(q[i].op)&#123; <span class="comment">//query</span></span><br><span class="line"><span class="keyword">int</span> id=query(q[i].l,q[i].r,q[i].k);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,b[id]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123; <span class="comment">// modify</span></span><br><span class="line"><span class="keyword">int</span> x=q[i].l,now=lower_bound(b+<span class="number">1</span>,b+sz+<span class="number">1</span>,q[i].r)-b;</span><br><span class="line">update(x,now);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸»å¸­æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»„åˆæ•°çš„ä¸‰ç§æ¨¡æ¿</title>
      <link href="2019/05/31/%E7%BB%84%E5%90%88%E6%95%B0%E7%9A%84%E4%B8%89%E7%A7%8D%E6%A8%A1%E6%9D%BF/"/>
      <url>2019/05/31/%E7%BB%84%E5%90%88%E6%95%B0%E7%9A%84%E4%B8%89%E7%A7%8D%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="å¸¸è§„ç»„åˆæ•°"><a class="markdownIt-Anchor" href="#å¸¸è§„ç»„åˆæ•°"></a> å¸¸è§„ç»„åˆæ•°</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>; </span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll C[<span class="number">2333</span>][<span class="number">2333</span>];</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=<span class="number">2000</span>; ++i) &#123;</span><br><span class="line">        C[i][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=i; ++j)</span><br><span class="line">            C[i][j]=(C[i<span class="number">-1</span>][j<span class="number">-1</span>]+C[i<span class="number">-1</span>][j])%MOD;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> a,b,c,d;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c&gt;&gt;d;</span><br><span class="line">    ll t=C[a+b+c+d][a+b+c]*C[a+b+c][a+b]%MOD*C[a+b][a]%MOD;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;t&lt;&lt;<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¢å¡æ–¯ç»„åˆæ•°"><a class="markdownIt-Anchor" href="#å¢å¡æ–¯ç»„åˆæ•°"></a> å¢å¡æ–¯ç»„åˆæ•°</h1><p>å¯¹äºæ¨¡æ•°ä¸æ˜¯å¾ˆå¤§æƒ…å†µ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line">ll n,m,p;</span><br><span class="line">ll fac[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getfac</span><span class="params">(ll p)</span> </span>&#123; <span class="comment">//é¢„å¤„ç†é˜¶å±‚</span></span><br><span class="line">fac[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=p; i++)fac[i]=fac[i<span class="number">-1</span>]*i%p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">power</span><span class="params">(ll a,ll n,ll p)</span> </span>&#123; <span class="comment">//å¿«é€Ÿå¹‚è¿ç®—</span></span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(n) &#123;</span><br><span class="line"><span class="keyword">if</span>(n&amp;<span class="number">1</span>)ans=ans*a%p;</span><br><span class="line">a=a*a%p;</span><br><span class="line">n/=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">lucas</span><span class="params">(ll n,ll m,ll p)</span> </span>&#123;</span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(n&amp;&amp;m) &#123;</span><br><span class="line">ll a=n%p,b=m%p;</span><br><span class="line"><span class="keyword">if</span>(a&lt;b) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">ans=(ans*fac[a]*power(fac[b]*fac[a-b]%p,p<span class="number">-2</span>,p))%p;</span><br><span class="line">n/=p,m/=p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> t;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line"><span class="keyword">while</span>(t--) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;p;</span><br><span class="line">getfac(p);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;lucas(n,m,p)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ç»„åˆæ•°å¿˜è®°ä»å“ªé‡ŒçŸæ¥çš„äº†"><a class="markdownIt-Anchor" href="#ç»„åˆæ•°å¿˜è®°ä»å“ªé‡ŒçŸæ¥çš„äº†"></a> ç»„åˆæ•°ï¼ˆå¿˜è®°ä»å“ªé‡ŒçŸæ¥çš„äº†ï¼‰</h1><p>å¯¹äºnï¼Œmä¸æ˜¯å¾ˆå¤§ä½†æ˜¯æ¨¡æ•°å¾ˆå¤§æƒ…å†µ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt; </span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2555</span>;</span><br><span class="line">ll fac[maxn],inv[maxn];</span><br><span class="line"><span class="function">ll <span class="title">fpow</span><span class="params">(ll x,ll y)</span> </span>&#123;</span><br><span class="line">    ll ans=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(y) &#123;</span><br><span class="line">        <span class="keyword">if</span>(y&amp;<span class="number">1</span>) ans=(ans*x)%mod;</span><br><span class="line">        x=(x*x)%mod;</span><br><span class="line">        y&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">C</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(m&gt;n || n&lt;<span class="number">0</span> || m&lt;<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    ll ans=<span class="number">1</span>;</span><br><span class="line">    ans=(ans*fac[n])%mod;</span><br><span class="line">    ans=(ans*inv[m])%mod;</span><br><span class="line">    ans=(ans*inv[n-m])%mod;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">fac[<span class="number">0</span>]=inv[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++) fac[i]=(<span class="number">1LL</span>*fac[i<span class="number">-1</span>]*i)%mod;</span><br><span class="line">    inv[N]=fpow(fac[N],mod<span class="number">-2</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=N<span class="number">-1</span>;i&gt;=<span class="number">1</span>;i--) inv[i]=(<span class="number">1LL</span>*inv[i+<span class="number">1</span>]*(i+<span class="number">1</span>))%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> a,b,c,d;</span><br><span class="line">init(maxn<span class="number">-1</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;a,&amp;b,&amp;c,&amp;d);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,<span class="number">1LL</span>*C(a+b+c+d,a)%mod*C(b+c+d,b)%mod*C(c+d,c)%mod*C(d,d)%mod);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019ä¸œåŒ—å››çœ B. Balanced Diet</title>
      <link href="2019/05/30/2019%E4%B8%9C%E5%8C%97%E5%9B%9B%E7%9C%81%20B.%20Balanced%20Diet/"/>
      <url>2019/05/30/2019%E4%B8%9C%E5%8C%97%E5%9B%9B%E7%9C%81%20B.%20Balanced%20Diet/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://codeforces.com/gym/102220/problem/B">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„</strong></em>ï¼šæœ‰nå—ç³–ï¼Œmç§ç±»å‹ï¼Œå¹¶ä¸”æ¯ç§ç±»å‹çš„ç³–æœ‰ä¸€ä¸ªé™åˆ¶Liï¼Œåªèƒ½å–&gt;=Liæˆ–è€…0å—ç³–ï¼Œç„¶åç»™å‡ºä¸€ä¸ªåˆ¤å®šçš„æ ‡å‡†S/Cï¼ŒSä¸ºæ‰€å–ç³–çš„ä»·å€¼æ€»å’Œï¼ŒCä¸ºæ‰€å–çš„ç±»å‹ä¸­æ•°é‡æœ€å¤šçš„ã€‚</p><p><em><strong>æ€è·¯ï¼š</strong></em> å¦‚æœCç¡®å®šï¼Œé‚£ä¹ˆå¯¹äºæ¯ç§ç³–ï¼Œå¦‚æœèƒ½å–ï¼Œæˆ‘ä»¬å¿…å®šæ˜¯è´ªå¿ƒå–ä»·å€¼æœ€å¤§çš„ï¼Œæ‰€ä»¥å¯èƒ½å–Cå—ï¼Œæˆ–è€…å°†å…¶å–å®Œï¼ˆæ€»æ•°&lt;=C);å¦‚æœæ¯æ¬¡æšä¸¾Céƒ½å»æš´åŠ›æšä¸¾è´ªå¿ƒçš„è¯è¿™æ ·è‚¯å®šæ˜¯ä¸å¯ä»¥çš„ï¼Œå¼€ä¸€ä¸ªvectoræ•°ç»„fï¼Œf[i]ä»£è¡¨å½“Cä¸ºiæ—¶è¿˜å¯ä»¥å–å¾—ç³–æœï¼Œæ˜¯ç›¸è¾ƒäºf[i-1]å¤šå–çš„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> T,n,m,l[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v[maxn],f[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="keyword">return</span> x&gt;y;&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">rep(i,<span class="number">1</span>,m)<span class="built_in">cin</span>&gt;&gt;l[i];</span><br><span class="line"><span class="keyword">int</span> val,op;</span><br><span class="line">rep(i,<span class="number">1</span>,n)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;val&gt;&gt;op;</span><br><span class="line">v[op].pb(val);</span><br><span class="line">&#125;</span><br><span class="line">rep(i,<span class="number">1</span>,m)&#123;</span><br><span class="line">sort(v[i].begin(),v[i].end(),cmp);</span><br><span class="line">rep(j,<span class="number">0</span>,SZ(v[i])<span class="number">-1</span>)f[max((j+<span class="number">1</span>),l[i])].pb(v[i][j]);</span><br><span class="line">v[i].clear();</span><br><span class="line">&#125;</span><br><span class="line">ll as=<span class="number">0</span>,ac=<span class="number">1</span>,ns=<span class="number">0</span>,nc;</span><br><span class="line">rep(i,<span class="number">1</span>,n)&#123;</span><br><span class="line">nc=i;</span><br><span class="line">rep(j,<span class="number">0</span>,SZ(f[i])<span class="number">-1</span>)ns+=f[i][j];</span><br><span class="line"><span class="keyword">if</span>(ns*ac &gt; nc*as)as=ns,ac=nc;</span><br><span class="line">f[i].clear();</span><br><span class="line">&#125;</span><br><span class="line">ll tp=__gcd(ac,as);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;as/tp&lt;&lt;<span class="string">&quot;/&quot;</span>&lt;&lt;ac/tp&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(HDU) 6534 Chika and Friendly Pairs (è«é˜Ÿ+æ ‘çŠ¶æ•°ç»„)</title>
      <link href="2019/05/27/(HDU)%206534%20Chika%20and%20Friendly%20Pairs/"/>
      <url>2019/05/27/(HDU)%206534%20Chika%20and%20Friendly%20Pairs/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://acm.hdu.edu.cn/showproblem.php?pid=6534">ä¼ é€é—¨</a></h3><h2 id="é¢˜æ„"><a class="markdownIt-Anchor" href="#é¢˜æ„"></a> é¢˜æ„ï¼š</h2><p>ç»™ä½ ä¸€ä¸ªæ•°ç»„ï¼Œå¯¹äºç¬¬iä¸ªæ•°æ¥è¯´ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªä½ç½®jï¼Œä½¿å¾—j&gt;iå¹¶ä¸”a[j]-k&lt;=a[i]&lt;=a[j]+kï¼Œé‚£ä¹ˆè¿™å¯¹æ•°å°±ç§°ä¸ºå¥½çš„ï¼Œæœ‰qä¸ªè¯¢é—®ï¼Œé—®ä½ låˆ°råŒºé—´æœ‰å¤šå°‘å¯¹å¥½çš„æ•°ã€‚</p><h2 id="æ€è·¯"><a class="markdownIt-Anchor" href="#æ€è·¯"></a> æ€è·¯ï¼š</h2><p>è¿™é¢˜å¡å¸¸æ•°å¡çš„å¥½å‰å®³å‘€ï¼Œæ¯”èµ›æ—¶æ˜¯ç”¨ä¸»å¸­æ ‘+è«é˜Ÿå†™çš„ggï¼Œä¸»å¸­æ•°å¸¸æ•°å¤ªå¤§äº†ï¼Œç”¨æ ‘çŠ¶æ•°ç»„å’Œè«é˜Ÿç»´æŠ¤ï¼ŒåŒæ—¶å…ˆæŠŠa[i],a[i]-k,a[i]+kå…ˆå…¨éƒ¨ç¦»æ•£å¥½äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">3e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> sum[maxn&lt;&lt;<span class="number">2</span>],n,m,k;</span><br><span class="line"><span class="keyword">int</span> a[maxn],b[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="comment">//æ ‘çŠ¶æ•°ç»„ </span></span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(p&lt;=<span class="number">3</span>*n+<span class="number">10</span>) sum[p]+=x,p+=p&amp;-p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(p) res+=sum[p],p-=p&amp;-p;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">r_ask</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> ask(r)-ask(l<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è«é˜Ÿ</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> id,l,r;</span><br><span class="line">&#125; qu[maxn];</span><br><span class="line"><span class="keyword">int</span> block,res=<span class="number">0</span>,ans[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x.l/block != y.l/block)<span class="keyword">return</span> x.l&lt;y.l;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> x.r&lt;y.r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> ida[maxn],upa[maxn],doa[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">sc(n),sc(m),sc(k);</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">rep(i,<span class="number">1</span>,n) &#123;</span><br><span class="line">sc(a[i]);</span><br><span class="line">b[++cnt]=a[i],b[++cnt]=a[i]-k,b[++cnt]=a[i]+k;</span><br><span class="line">&#125;</span><br><span class="line">sort(b+<span class="number">1</span>,b+cnt+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> sz=unique(b+<span class="number">1</span>,b+cnt+<span class="number">1</span>)-(b+<span class="number">1</span>);</span><br><span class="line">rep(i,<span class="number">1</span>,n) &#123;</span><br><span class="line">ida[i]=lower_bound(b+<span class="number">1</span>,b+sz+<span class="number">1</span>,a[i])-b;</span><br><span class="line">upa[i]=lower_bound(b+<span class="number">1</span>,b+sz+<span class="number">1</span>,a[i]+k)-b;</span><br><span class="line">doa[i]=lower_bound(b+<span class="number">1</span>,b+sz+<span class="number">1</span>,a[i]-k)-b;</span><br><span class="line">&#125;</span><br><span class="line">rep(i,<span class="number">1</span>,m)SC(qu[i].l,qu[i].r),qu[i].id=i;</span><br><span class="line">block=<span class="built_in">sqrt</span>(n);</span><br><span class="line">sort(qu+<span class="number">1</span>,qu+m+<span class="number">1</span>,cmp);</span><br><span class="line"><span class="keyword">int</span> L=qu[<span class="number">1</span>].l,R=qu[<span class="number">1</span>].l<span class="number">-1</span>;</span><br><span class="line">rep(i,<span class="number">1</span>,m) &#123;</span><br><span class="line"><span class="keyword">while</span>(L&lt;qu[i].l) &#123;</span><br><span class="line">add(ida[L],<span class="number">-1</span>);</span><br><span class="line">res-=r_ask(doa[L],upa[L]);</span><br><span class="line">L++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(L&gt;qu[i].l) &#123;</span><br><span class="line">L--;</span><br><span class="line">res+=r_ask(doa[L],upa[L]);</span><br><span class="line">add(ida[L],<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(R&gt;qu[i].r) &#123;</span><br><span class="line">add(ida[R],<span class="number">-1</span>);</span><br><span class="line">res-=r_ask(doa[R],upa[R]);</span><br><span class="line">R--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(R&lt;qu[i].r) &#123;</span><br><span class="line">R++;</span><br><span class="line">res+=r_ask(doa[R],upa[R]);</span><br><span class="line">add(ida[R],<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">ans[qu[i].id]=res;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">rep(i,<span class="number">1</span>,m)<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> HDU </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘çŠ¶æ•°ç»„ </tag>
            
            <tag> è«é˜Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ±‚æ ‘çš„ç›´å¾„</title>
      <link href="2019/05/20/%E6%A0%91%E7%9A%84%E7%9B%B4%E5%BE%84/"/>
      <url>2019/05/20/%E6%A0%91%E7%9A%84%E7%9B%B4%E5%BE%84/</url>
      
        <content type="html"><![CDATA[<p>æ±‚æ ‘çš„è·¯å¾„å¯ä»¥ä¸¤æ¬¡bfsæˆ–è€…dfsï¼Œæ±‚æ³•å’Œè¯æ˜å¦‚ä¸‹ï¼š</p><p><em><strong>æ±‚æ³•ï¼š</strong></em> ä»ä»»æ„ä¸€ç‚¹uå…ˆåšä¸€æ¬¡bfs/dfsæ‰¾åˆ°æœ€è¿œçš„ä¸€ç‚¹yï¼Œåœ¨ä»yåšä¸€æ¬¡bfs/dfsæ‰¾åˆ°æœ€è¿œçš„è·ç¦»ï¼Œè€Œè¿™ä¸ªè·ç¦»å°±æ˜¯æ ‘çš„ç›´å¾„äº†ã€‚</p><p><em><strong>è¯æ˜ï¼š</strong></em> <a href="https://www.cnblogs.com/a-clown/p/6131346.html">ç›´æ¥å¼•ç”¨çš„è¿™ä½å¤§å“¥çš„äº†ã€‚</a></p><p>å‡è®¾ s-tè¿™æ¡è·¯å¾„ä¸ºæ ‘çš„ç›´å¾„ï¼Œæˆ–è€…ç§°ä¸ºæ ‘ä¸Šçš„æœ€é•¿è·¯<br />ã€€ã€€ç°æœ‰ç»“è®ºï¼Œä»ä»»æ„ä¸€ç‚¹uå‡ºå‘æœåˆ°çš„æœ€è¿œçš„ç‚¹ä¸€å®šæ˜¯sã€tä¸­çš„ä¸€ç‚¹ï¼Œç„¶åå†ä»è¿™ä¸ªæœ€è¿œç‚¹å¼€å§‹æœï¼Œå°±å¯ä»¥æœåˆ°å¦ä¸€ä¸ªæœ€é•¿è·¯çš„ç«¯ç‚¹ï¼Œå³ç”¨ä¸¤éå¹¿æœå°±å¯ä»¥æ‰¾å‡ºæ ‘çš„æœ€é•¿è·¯ï¼Œè¯æ˜ï¼š</p><p>1.è®¾uä¸ºs-tè·¯å¾„ä¸Šçš„ä¸€ç‚¹ï¼Œç»“è®ºæ˜¾ç„¶æˆç«‹ï¼Œå¦åˆ™è®¾æœåˆ°çš„æœ€è¿œç‚¹ä¸ºTåˆ™  dis(u,T) &gt;dis(u,s)   ä¸” dis(u,T)&gt;dis(u,t)  åˆ™æœ€é•¿è·¯ä¸æ˜¯s-täº†ï¼Œä¸å‡è®¾çŸ›ç›¾</p><p>2.è®¾uä¸ä¸ºs-tè·¯å¾„ä¸Šçš„ç‚¹é¦–å…ˆæ˜ç¡®ï¼Œå‡å¦‚uèµ°åˆ°äº†s-tè·¯å¾„ä¸Šçš„ä¸€ç‚¹ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„è·¯å¾„è‚¯å®šéƒ½åœ¨s-tä¸Šäº†ï¼Œè€Œä¸”ç»ˆç‚¹ä¸ºsæˆ–tï¼Œåœ¨1ä¸­å·²ç»è¯æ˜è¿‡äº†æ‰€ä»¥ç°åœ¨åˆæœ‰ä¸¤ç§æƒ…å†µäº†ï¼š<br />1ï¼šuèµ°åˆ°äº†s-tè·¯å¾„ä¸Šçš„æŸç‚¹ï¼Œå‡è®¾ä¸ºXï¼Œæœ€åè‚¯å®šèµ°åˆ°æŸä¸ªç«¯ç‚¹ï¼Œå‡è®¾æ˜¯t ï¼Œåˆ™è·¯å¾„æ€»é•¿åº¦ä¸ºdis(u,X)+dis(X,t)<br />2ï¼šuèµ°åˆ°æœ€è¿œç‚¹çš„è·¯å¾„u-Tä¸s-tæ— äº¤ç‚¹ï¼Œåˆ™dis(u-T) &gt;dis(u,X)+dis(X,t);æ˜¾ç„¶ï¼Œå¦‚æœè¿™ä¸ªå¼å­æˆç«‹ï¼Œåˆ™    dis(u,T)+dis(s,X)+dis(u,X)&gt;dis(s,X)+dis(X,t)=dis(s,t)æœ€é•¿è·¯ä¸æ˜¯s-tçŸ›ç›¾</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æ ‘çš„ç›´å¾„-&gt;ä¸¤æ¬¡bfs*/</span> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> dis[maxn],alen=-inf;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> to,len;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; eg[maxn];</span><br><span class="line"><span class="keyword">int</span> n,x,y,z,id;</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> st)</span></span>&#123;</span><br><span class="line">vis[st]=<span class="number">1</span>,dis[st]=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">q.push(st);</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line"><span class="keyword">int</span> np=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;SZ(eg[np]);++i)&#123;</span><br><span class="line">node tp=eg[np][i];</span><br><span class="line"><span class="keyword">int</span> to=tp.to,len=tp.len;</span><br><span class="line"><span class="keyword">if</span>(!vis[to])&#123;</span><br><span class="line">vis[to]=<span class="number">1</span>;</span><br><span class="line">dis[to]=dis[np]+len;</span><br><span class="line">q.push(to);</span><br><span class="line"><span class="keyword">if</span>(dis[to]&gt;alen)&#123;</span><br><span class="line">alen=dis[to];</span><br><span class="line">id=to;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">ms(dis,<span class="number">0x3f</span>);</span><br><span class="line">rep(i,<span class="number">1</span>,n<span class="number">-1</span>)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line">eg[x].pb(node&#123;y,z&#125;);</span><br><span class="line">eg[y].pb(node&#123;x,z&#125;);</span><br><span class="line">&#125; </span><br><span class="line">bfs(<span class="number">1</span>);</span><br><span class="line">ms(dis,<span class="number">0</span>),ms(vis,<span class="number">0</span>);</span><br><span class="line">bfs(id);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;alen&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœç´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1430 åºåˆ—å–æ•° (åŒºé—´dp)</title>
      <link href="2019/05/19/(Luogu)%20P1430%20%E5%BA%8F%E5%88%97%E5%8F%96%E6%95%B0/"/>
      <url>2019/05/19/(Luogu)%20P1430%20%E5%BA%8F%E5%88%97%E5%8F%96%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="https://www.luogu.org/problemnew/show/P1430">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> ç»™å®šä¸€ä¸ªé•¿ä¸ºnçš„æ•´æ•°åºåˆ—(n&lt;=1000)ï¼Œç”±Aå’ŒBè½®æµå–æ•°ï¼ˆAå…ˆå–ï¼‰ã€‚æ¯ä¸ªäººå¯ä»åºåˆ—çš„å·¦ç«¯æˆ–å³ç«¯å–è‹¥å¹²ä¸ªæ•°ï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰ï¼Œä½†ä¸èƒ½ä¸¤ç«¯éƒ½å–ã€‚æ‰€æœ‰æ•°éƒ½è¢«å–èµ°åï¼Œä¸¤äººåˆ†åˆ«ç»Ÿè®¡æ‰€å–æ•°çš„å’Œä½œä¸ºå„è‡ªçš„å¾—åˆ†ã€‚å‡è®¾Aå’ŒBéƒ½è¶³å¤Ÿèªæ˜ï¼Œéƒ½ä½¿è‡ªå·±å¾—åˆ†å°½é‡é«˜ï¼Œæ±‚Açš„æœ€ç»ˆå¾—åˆ†ã€‚</p><p><em><strong>æ€è·¯ï¼š</strong></em> çœ‹è§†é¢‘è®²çš„è¿™é“é¢˜ï¼Œå–µå•Šï¼ŒæŒ‰ç…§ä»–çš„æ€è·¯å†™äº†å‡ºæ¥ã€‚å–æ•°è‚¯å®šæ˜¯å–ä¸€æ®µè¿ç»­çš„åºåˆ—ï¼Œå‰©ä¸‹ä¸€æ®µè¿ç»­çš„åºåˆ—ã€‚</p><p>é¦–å…ˆå®šä¹‰F[l] [r] : [l,r]åŒºé—´ a-bçš„æœ€å¤§å€¼ï¼ˆaä»£è¡¨aå–å¾—æœ€å¤§å’Œï¼Œbä»£è¡¨bå–å¾—æœ€å¤§å’Œï¼‰ã€‚ä¸ºä½•è¿™æ ·å®šä¹‰ï¼Œè¿™æ ·æˆ‘ä»¬ä¼šå¾—åˆ°ä¸¤ä¸ªæ–¹ç¨‹    a-b=F[1] [n] å’Œ a+b=allsum è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—å‡º a=(F[1] [n]+allsum)/2;</p><p>é¢å¯¹[l,r]åŒºé—´æˆ‘ä»¬æœ‰3ç§é€‰æ‹©ã€‚sum[]ä¸ºå‰ç¼€å’Œæ•°ç»„</p><ul><li><strong>å…¨å–äº†ï¼ŒF[l] [r] = sum[r] - sum[l-1].</strong></li><li><strong>ä»å·¦è¾¹å–ä¸€æ®µ F[l] [r] = sum[lâ€™-1] -sum[l] - F[lâ€™] [r] (è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆæ˜¯å‡æ³•å‘¢ï¼Œå› ä¸ºå‰©ä¸‹æ¥çš„åŒºé—´ [lâ€™][r] bä¹Ÿä¼šé€‰æ‹©æœ€ä¼˜ç­–ç•¥,ä½¿å¾—b-aæœ€å¤§ï¼Œæ‰€ä»¥aå°±åªèƒ½å¾—åˆ° -F[lâ€™] [r] å³ bé€‰æ‹©ä¸‹çš„ a-bçš„è´¡çŒ®äº†ï¼‰</strong></li><li><strong>ä»å³è¾¹å–ä¸€æ®µ F[l] [r] =sum[r] - sum[râ€™] - F[l] [râ€™]</strong></li></ul><p>æ›´æ–°å°±æ˜¯åœ¨ä¸Šé¢ä¸‰ç§æƒ…å†µå–æœ€å¤§å³å¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æå‡ºï¼Œæšä¸¾é•¿åº¦lenï¼Œæšä¸¾èµ·ç‚¹lï¼Œæšä¸¾æ–­ç‚¹k æ˜¯O(n^3)çš„å¤æ‚åº¦ï¼Œæ˜¾ç„¶è¿‡ä¸äº†ã€‚</p><p>è¿™å°±éœ€è¦è€ç‚¹æ‰‹æ®µäº†ã€‚</p><p><strong>æˆ‘ä»¬çœ‹ç¬¬ä¸‰ç§æƒ…å†µä¸‹çš„é€’æ¨å¼ è½¬åŒ– F[l] [r] =sum[r] - ï¼ˆsum[râ€™] + F[l][râ€™]ï¼‰</strong></p><p><strong>æˆ‘ä»¬è®¾P[l][r] = sum[r] + F[l][r], å†è®¾ä¸€ä¸ªMi[l][r] = min{ P[l][x] | l&lt;=x&lt;=r },æˆ‘ä»¬æƒ³è¦F[l][r]å¤§ï¼Œä¸å°±æ˜¯æƒ³è¦P[l][r]æœ€å°å˜›ï¼Œæ‰€ä»¥æˆ‘ä»¬Mi[l][r]çš„è½¬ç§»ä¹Ÿå¾ˆç®€å•ï¼ŒMi[l][r]=min(Mi[l][r-1],sum[r]+F[l][r]); ï¼ˆè¿™é‡ŒPæ•°ç»„æ²¡æœ‰å®é™…ä½œç”¨ï¼Œä¸ºäº†ç®€å•è¯´æ˜ï¼‰ ç¬¬ä¸‰ç§æƒ…å†µçš„è½¬ç§»å…¶å®å°± F[l][r]=max(F[l][r],sum[r]-Mi[l][r-1]);</strong></p><p><strong>åŒç†å¯¹äºç¬¬äºŒä¸ªé€’æ¨å¼ è½¬åŒ– ( sum[lâ€™-1] - F[lâ€™][r] )-sum[l-1]</strong></p><p><strong>è¿™é‡Œæˆ‘ä»¬è®¾T[l][r]=sum[l-1] - F[l][r] ) , ç”¨Mx[l][r] = max{ T[x][r] | l&lt;=x&lt;=r }ç»´æŠ¤ï¼Œæœ€åæˆ‘ä»¬ä¹Ÿå¯ä»¥æ¨å¾—  F[l][r]=max(F[l][r],Mx[l+1][r]-sum[l-1]);</strong></p><p>æœ€åä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> a[maxn],sum[maxn],F[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> Mx[maxn][maxn],Mi[maxn][maxn],T_T,n;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n+<span class="number">2</span>; ++i) &#123;</span><br><span class="line">sum[i]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n+<span class="number">2</span>; ++j) &#123;</span><br><span class="line">Mx[i][j]=-inf,Mi[i][j]=inf;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">sc(T_T);</span><br><span class="line"><span class="keyword">while</span>(T_T--) &#123;</span><br><span class="line">sc(n);</span><br><span class="line">init(n);</span><br><span class="line">rep(i,<span class="number">1</span>,n)sc(a[i]),sum[i]+=sum[i<span class="number">-1</span>]+a[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> len=<span class="number">1</span>; len&lt;=n; ++len) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> l=<span class="number">1</span>; l+len<span class="number">-1</span>&lt;=n; ++l) &#123;</span><br><span class="line"><span class="keyword">int</span> r=l+len<span class="number">-1</span>;</span><br><span class="line">F[l][r]=sum[r]-sum[l<span class="number">-1</span>];</span><br><span class="line">F[l][r]=max(F[l][r],sum[r]-Mi[l][r<span class="number">-1</span>]);</span><br><span class="line">F[l][r]=max(F[l][r],Mx[l+<span class="number">1</span>][r]-sum[l<span class="number">-1</span>]);</span><br><span class="line">Mi[l][r]=min(Mi[l][r<span class="number">-1</span>],sum[r]+F[l][r]);</span><br><span class="line">Mx[l][r]=max(Mx[l+<span class="number">1</span>][r],sum[l<span class="number">-1</span>]-F[l][r]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,(F[<span class="number">1</span>][n]+sum[n])/<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> åŒºé—´dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(HDU) 6191 Query on A Tree (å¯æŒä¹…åŒ–å­—å…¸æ ‘+dfsåº)</title>
      <link href="2019/05/18/(HDU)%206191%20Query%20on%20A%20Tree/"/>
      <url>2019/05/18/(HDU)%206191%20Query%20on%20A%20Tree/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://acm.hdu.edu.cn/showproblem.php?pid=6191">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> ç»™ä½ ä¸€é¢—æ ‘ï¼Œæ¯ä¸ªç‚¹éƒ½æœ‰å–å€¼ï¼Œqæ¬¡æŸ¥è¯¢ï¼Œä¸€ä¸ªuï¼Œä¸€ä¸ªxï¼Œæ±‚ä»¥uä¸ºæ ¹çš„æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸xå¼‚æˆ–çš„æœ€å¤§å€¼ã€‚</p><p><em><strong>æ€è·¯ï¼š</strong></em> é¢˜ç›®ç»™äº†10000msï¼Œæš´åŠ›å•Šï¼Œå¤±è´¥äº†ã€‚è¿™é¢˜éœ€è¦ç”¨å¯æŒä¹…åŒ–å­—å…¸æ ‘ï¼Œå¦‚æœä½ ä¸çŸ¥é“ä½ å¯ä»¥å…ˆåšä¸€ä¸‹<a href="https://blog.csdn.net/TDD_Master/article/details/90318054">è¿™é“é¢˜</a>ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¦‚æœçŸ¥é“ä»¥uä¸ºæ ¹çš„æ ‘çš„èµ·å§‹rootå’Œæœ€årootï¼Œé‚£æˆ‘ä»¬ä¸å°±å¯ä»¥ç›´æ¥queryå˜›ï¼Œè¿™ä¸ªæˆ‘ä»¬åªè¦åœ¨dfsçš„æ—¶å€™ç”¨ä¸ªinæ•°ç»„å’Œoutæ•°ç»„æ¥è®°å½•uçš„åˆå§‹èŠ‚ç‚¹å’Œç»“æŸèŠ‚ç‚¹å°±å¯ä»¥äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,q,fa;</span><br><span class="line"><span class="keyword">int</span> v[maxn],cnt=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; mp[maxn];</span><br><span class="line"><span class="keyword">int</span> root[maxn*<span class="number">35</span>],sum[maxn*<span class="number">35</span>],son[maxn*<span class="number">35</span>][<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> in[maxn],out[maxn],id=<span class="number">0</span>;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">cnt=id=<span class="number">0</span>;</span><br><span class="line">ms(in,<span class="number">0</span>),ms(out,<span class="number">0</span>),ms(root,<span class="number">0</span>);</span><br><span class="line">ms(sum,<span class="number">0</span>),ms(son,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> val,<span class="keyword">int</span> pre)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> x=++cnt,t=x;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">31</span>;i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line">son[x][<span class="number">0</span>]=son[pre][<span class="number">0</span>],son[x][<span class="number">1</span>]=son[pre][<span class="number">1</span>];</span><br><span class="line">sum[x]=sum[pre]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> id=<span class="number">1</span>&amp;(val&gt;&gt;i);</span><br><span class="line">son[x][id]=++cnt;</span><br><span class="line">x=son[x][id],pre=son[pre][id];</span><br><span class="line">&#125;</span><br><span class="line">sum[x]=sum[pre]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> val,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">31</span>;i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line"><span class="keyword">int</span> id=!(<span class="number">1</span>&amp;(val&gt;&gt;i));</span><br><span class="line"><span class="keyword">if</span>(sum[son[r][id]]-sum[son[l][id]]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">ans|=(<span class="number">1</span>&lt;&lt;i);</span><br><span class="line">r=son[r][id],l=son[l][id];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> r=son[r][!id],l=son[l][!id];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> np)</span></span>&#123;</span><br><span class="line">in[np]=++id,root[in[np]]=Insert(v[np],root[in[np]<span class="number">-1</span>]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;SZ(mp[np]);++i)&#123;</span><br><span class="line">dfs(mp[np][i]);</span><br><span class="line">&#125;</span><br><span class="line">out[np]=id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">int</span> u,x;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;q)&#123;</span><br><span class="line">rep(i,<span class="number">1</span>,n)<span class="built_in">cin</span>&gt;&gt;v[i];</span><br><span class="line">rep(i,<span class="number">2</span>,n)<span class="built_in">cin</span>&gt;&gt;fa,mp[fa].pb(i);</span><br><span class="line">dfs(<span class="number">1</span>);</span><br><span class="line">rep(i,<span class="number">1</span>,q)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;u&gt;&gt;x;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;Query(x,root[in[u]<span class="number">-1</span>],root[out[u]])&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; </span><br><span class="line">rep(i,<span class="number">1</span>,n+<span class="number">2</span>)mp[i].clear();</span><br><span class="line">init();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> HDU </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¯æŒä¹…åŒ–å­—å…¸æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(å¯æŒä¹…åŒ–å­—å…¸æ ‘) 51nod 1295 XOR key</title>
      <link href="2019/05/18/51nod%201295%20XOR%20key/"/>
      <url>2019/05/18/51nod%201295%20XOR%20key/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://www.51nod.com/Challenge/Problem.html#!%23problemId=1295">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„ï¼š</strong></em> ç»™å‡ºä¸€ä¸ªé•¿åº¦ä¸ºNçš„æ­£æ•´æ•°æ•°ç»„Aï¼Œå†ç»™å‡ºQä¸ªæŸ¥è¯¢ï¼Œæ¯ä¸ªæŸ¥è¯¢åŒ…æ‹¬3ä¸ªæ•°ï¼ŒL, R, X (L &lt;= R)ã€‚æ±‚A[L] è‡³ A[R] è¿™R - L + 1ä¸ªæ•°ä¸­ï¼Œä¸X è¿›è¡Œå¼‚æˆ–è¿ç®—(Xor)ï¼Œå¾—åˆ°çš„æœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Ÿ</p><p><em><strong>æ€è·¯ï¼š</strong></em> æ‰€æœ‰å¯æŒä¹…åŒ–çš„æ ‘å‹ç»“æ„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ¯æ¬¡åªæ›´æ–°ä¸€æ”¯ï¼Œæ²¿ç”¨ä¸Šä¸€ä¸ªæ ‘çš„ä¸€æ”¯ã€‚å…·ä½“åŸç†<a href="https://blog.csdn.net/TDD_Master/article/details/81164318">å¯ä»¥å…ˆçœ‹ä¸»å¸­æ ‘çš„</a>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*å¯æŒä¹…åŒ–å­—å…¸æ ‘*/</span> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,q,cnt=<span class="number">0</span>,a;</span><br><span class="line"><span class="keyword">int</span> son[maxn*<span class="number">35</span>][<span class="number">2</span>],root[maxn*<span class="number">35</span>],sum[maxn*<span class="number">35</span>];</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> val,<span class="keyword">int</span> pre)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> x=++cnt,t=x;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">31</span>;i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line">son[x][<span class="number">0</span>]=son[pre][<span class="number">0</span>],son[x][<span class="number">1</span>]=son[pre][<span class="number">1</span>];</span><br><span class="line">sum[x]=sum[pre]+<span class="number">1</span>; <span class="comment">//è®°å½•è¿™ä¸ªèŠ‚ç‚¹å‡ºç°çš„æ¬¡æ•°ï¼Œå­˜å‚¨çš„æ˜¯å‰ç¼€å’Œ</span></span><br><span class="line"><span class="keyword">int</span> id=<span class="number">1</span>&amp;(val&gt;&gt;i);</span><br><span class="line">son[x][id]=++cnt; <span class="comment">//å°±æ›´æ–°ä¸€æ”¯</span></span><br><span class="line">x=son[x][id],pre=son[pre][id];</span><br><span class="line">&#125;</span><br><span class="line">sum[x]=sum[pre]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> t;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> val,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">31</span>;i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line"><span class="keyword">int</span> id=!(<span class="number">1</span>&amp;(val&gt;&gt;i)); <span class="comment">//valè¿™ä¸€ä½çš„å</span></span><br><span class="line"><span class="keyword">if</span>(sum[son[r][id]]-sum[son[l][id]]&gt;<span class="number">0</span>)&#123; å¦‚æœ&gt;<span class="number">0</span>,é‚£å°±æˆ–ä¸Š</span><br><span class="line">ans|=(<span class="number">1</span>&lt;&lt;i);</span><br><span class="line">l=son[l][id],r=son[r][id]; <span class="comment">//è¿›å…¥è¿™ä¸ªæèŠ‚</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>l=son[l][!id],r=son[r][!id]; <span class="comment">//ä¸è¡Œå°±åªèƒ½è¿›å…¥å¦ä¸€ä¸ªæèŠ‚</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;q;</span><br><span class="line">rep(i,<span class="number">1</span>,n)<span class="built_in">cin</span>&gt;&gt;a,root[i]=Insert(a,root[i<span class="number">-1</span>]);</span><br><span class="line"><span class="keyword">int</span> x,l,r;</span><br><span class="line">rep(i,<span class="number">1</span>,q)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;l&gt;&gt;r;</span><br><span class="line">l++,r++;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;Query(x,root[l<span class="number">-1</span>],root[r])&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¯æŒä¹…åŒ–å­—å…¸æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P3369 ã€æ¨¡æ¿ã€‘æ™®é€šå¹³è¡¡æ ‘/P3391 ã€æ¨¡æ¿ã€‘æ–‡è‰ºå¹³è¡¡æ ‘ï¼ˆSplayï¼‰</title>
      <link href="2019/05/05/(Luogu)%20P3369%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%99%AE%E9%80%9A%E5%B9%B3%E8%A1%A1%E6%A0%91P3391%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%96%87%E8%89%BA%E5%B9%B3%E8%A1%A1%E6%A0%91/"/>
      <url>2019/05/05/(Luogu)%20P3369%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%99%AE%E9%80%9A%E5%B9%B3%E8%A1%A1%E6%A0%91P3391%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%96%87%E8%89%BA%E5%B9%B3%E8%A1%A1%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h2 id="p3369-æ¨¡æ¿æ™®é€šå¹³è¡¡æ ‘"><a class="markdownIt-Anchor" href="#p3369-æ¨¡æ¿æ™®é€šå¹³è¡¡æ ‘"></a> <a href="https://www.luogu.org/problemnew/show/P3369">P3369 ã€æ¨¡æ¿ã€‘æ™®é€šå¹³è¡¡æ ‘</a></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="comment">/* TDD */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> ch[N][<span class="number">2</span>],val[N],cnt[N],par[N],sz[N];</span><br><span class="line"><span class="comment">//xèŠ‚ç‚¹çš„å·¦å³å„¿å­ï¼›xå­˜å‚¨çš„æƒå€¼ï¼›xå­˜å‚¨çš„é‡å¤æƒå€¼çš„ä¸ªæ•°ï¼›xçš„çˆ¶äº²èŠ‚ç‚¹ï¼›xå­æ ‘ä¸‹å‚¨å­˜çš„æƒå€¼æ•°ï¼ˆåŒ…æ‹¬é‡å¤ï¼‰ </span></span><br><span class="line"><span class="keyword">int</span> root,ncnt;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;sz[x]=sz[ch[x][<span class="number">0</span>]]+sz[ch[x][<span class="number">1</span>]]+cnt[x];&#125; </span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">ws</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> ch[par[x]][<span class="number">1</span>]==x;&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> f=par[x],ff=par[f],k=ws(x),w=ch[x][k^<span class="number">1</span>];</span><br><span class="line">ch[f][k]=w,par[w]=f;</span><br><span class="line">ch[ff][ws(f)]=x,par[x]=ff;</span><br><span class="line">ch[x][k^<span class="number">1</span>]=f,par[f]=x;</span><br><span class="line">pushup(f),pushup(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> goal=<span class="number">0</span>)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(par[x]!=goal)&#123;</span><br><span class="line"><span class="keyword">int</span> f=par[x],ff=par[f];</span><br><span class="line"><span class="keyword">if</span>(ff!=goal)&#123;</span><br><span class="line"><span class="keyword">if</span>(ws(x)==ws(f)) rotate(f);</span><br><span class="line"><span class="keyword">else</span> rotate(x);</span><br><span class="line">&#125;</span><br><span class="line">rotate(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!goal) root=x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cur=root;</span><br><span class="line"><span class="keyword">while</span>(ch[cur][x&gt;val[cur]] &amp;&amp; x!=val[cur])&#123;</span><br><span class="line">cur=ch[cur][x&gt;val[cur]];</span><br><span class="line">&#125;</span><br><span class="line">splay(cur);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cur=root,p=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(cur &amp;&amp; val[cur]!=x)&#123;</span><br><span class="line">p=cur;</span><br><span class="line">cur=ch[cur][x&gt;val[cur]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cur) cnt[cur]++;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">cur=++ncnt;</span><br><span class="line"><span class="keyword">if</span>(p) ch[p][x&gt;val[p]]=cur;</span><br><span class="line">ch[cur][<span class="number">0</span>]=ch[cur][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">par[cur]=p,val[cur]=x;</span><br><span class="line">cnt[cur]=sz[cur]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">splay(cur);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*æŸ¥è¯¢*/</span> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Kth</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123; <span class="comment">//ç¬¬k-1å¤§ </span></span><br><span class="line"><span class="keyword">int</span> cur=root;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(ch[cur][<span class="number">0</span>] &amp;&amp; k&lt;=sz[ch[cur][<span class="number">0</span>]])cur=ch[cur][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(k&gt;sz[ch[cur][<span class="number">0</span>]]+cnt[cur])&#123;</span><br><span class="line">k-=sz[ch[cur][<span class="number">0</span>]]+cnt[cur];</span><br><span class="line">cur=ch[cur][<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rank</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//xçš„rank </span></span><br><span class="line">Find(x);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;sz[ch[root][<span class="number">0</span>]]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Pre</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//xçš„å‰é©± </span></span><br><span class="line">Find(x);</span><br><span class="line"><span class="keyword">if</span>(val[root]&lt;x) <span class="keyword">return</span> root;</span><br><span class="line"><span class="keyword">int</span> cur=ch[root][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">while</span>(ch[cur][<span class="number">1</span>]) cur=ch[cur][<span class="number">1</span>];</span><br><span class="line"><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Back</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//xçš„åç»§ </span></span><br><span class="line">Find(x);</span><br><span class="line"><span class="keyword">if</span>(val[root]&gt;x) <span class="keyword">return</span> root;</span><br><span class="line"><span class="keyword">int</span> cur=ch[root][<span class="number">1</span>];</span><br><span class="line"><span class="keyword">while</span>(ch[cur][<span class="number">0</span>]) cur=ch[cur][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Remove</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//åˆ é™¤x </span></span><br><span class="line"><span class="keyword">int</span> last=Pre(x),beh=Back(x);</span><br><span class="line">splay(last),splay(beh,last);</span><br><span class="line"><span class="keyword">int</span> del=ch[beh][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span>(cnt[del]&gt;<span class="number">1</span>)&#123;</span><br><span class="line">cnt[del]--;</span><br><span class="line">splay(del);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> ch[beh][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,op,x;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">sc(n);</span><br><span class="line">Insert(inf),Insert(-inf);</span><br><span class="line"><span class="keyword">while</span>(n--)&#123;</span><br><span class="line">SC(op,x);</span><br><span class="line"><span class="keyword">if</span>(op==<span class="number">1</span>) Insert(x);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">2</span>) Remove(x);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">3</span>) Rank(x);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">4</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,val[Kth(x+<span class="number">1</span>)]);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(op==<span class="number">5</span>) <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,val[Pre(x)]);</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,val[Back(x)]); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="p3391-æ¨¡æ¿æ–‡è‰ºå¹³è¡¡æ ‘splay"><a class="markdownIt-Anchor" href="#p3391-æ¨¡æ¿æ–‡è‰ºå¹³è¡¡æ ‘splay"></a> <a href="https://www.luogu.org/problemnew/show/P3391">P3391 ã€æ¨¡æ¿ã€‘æ–‡è‰ºå¹³è¡¡æ ‘ï¼ˆSplayï¼‰</a></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="comment">/* TDD */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> ch[N][<span class="number">2</span>],val[N],cnt[N],par[N],sz[N],rev[N];</span><br><span class="line"><span class="comment">//xèŠ‚ç‚¹çš„å·¦å³å„¿å­ï¼›xå­˜å‚¨çš„æƒå€¼ï¼›xå­˜å‚¨çš„é‡å¤æƒå€¼çš„ä¸ªæ•°ï¼›xçš„çˆ¶äº²èŠ‚ç‚¹ï¼›xå­æ ‘ä¸‹å‚¨å­˜çš„æƒå€¼æ•°ï¼ˆåŒ…æ‹¬é‡å¤ï¼‰ </span></span><br><span class="line"><span class="keyword">int</span> root,ncnt;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;sz[x]=sz[ch[x][<span class="number">0</span>]]+sz[ch[x][<span class="number">1</span>]]+cnt[x];&#125; </span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">ws</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> ch[par[x]][<span class="number">1</span>]==x;&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(rev[x])&#123;</span><br><span class="line">swap(ch[x][<span class="number">0</span>],ch[x][<span class="number">1</span>]);</span><br><span class="line">rev[ch[x][<span class="number">0</span>]]^=<span class="number">1</span>;</span><br><span class="line">rev[ch[x][<span class="number">1</span>]]^=<span class="number">1</span>;</span><br><span class="line">rev[x]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> f=par[x],ff=par[f],k=ws(x),w=ch[x][k^<span class="number">1</span>];</span><br><span class="line">ch[f][k]=w,par[w]=f;</span><br><span class="line">ch[ff][ws(f)]=x,par[x]=ff;</span><br><span class="line">ch[x][k^<span class="number">1</span>]=f,par[f]=x;</span><br><span class="line">pushup(f),pushup(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> goal=<span class="number">0</span>)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(par[x]!=goal)&#123;</span><br><span class="line"><span class="keyword">int</span> f=par[x],ff=par[f];</span><br><span class="line"><span class="keyword">if</span>(ff!=goal)&#123;</span><br><span class="line"><span class="keyword">if</span>(ws(x)==ws(f)) rotate(f);</span><br><span class="line"><span class="keyword">else</span> rotate(x);</span><br><span class="line">&#125;</span><br><span class="line">rotate(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!goal) root=x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cur=root,p=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(cur &amp;&amp; val[cur]!=x)&#123;</span><br><span class="line">p=cur;</span><br><span class="line">cur=ch[cur][x&gt;val[cur]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cur) cnt[cur]++;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">cur=++ncnt;</span><br><span class="line"><span class="keyword">if</span>(p) ch[p][x&gt;val[p]]=cur;</span><br><span class="line">ch[cur][<span class="number">0</span>]=ch[cur][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">par[cur]=p,val[cur]=x;</span><br><span class="line">cnt[cur]=sz[cur]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">splay(cur);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cur=root;</span><br><span class="line"><span class="keyword">while</span>(ch[cur][x&gt;val[cur]] &amp;&amp; x!=val[cur])&#123;</span><br><span class="line">cur=ch[cur][x&gt;val[cur]];</span><br><span class="line">&#125;</span><br><span class="line">splay(cur);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*æŸ¥è¯¢*/</span> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rank</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//xçš„rank </span></span><br><span class="line">Find(x);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;sz[ch[root][<span class="number">0</span>]]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Pre</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//xçš„å‰é©± </span></span><br><span class="line">Find(x);</span><br><span class="line"><span class="keyword">if</span>(val[root]&lt;x) <span class="keyword">return</span> root;</span><br><span class="line"><span class="keyword">int</span> cur=ch[root][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">while</span>(ch[cur][<span class="number">1</span>]) cur=ch[cur][<span class="number">1</span>];</span><br><span class="line"><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Back</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//xçš„åç»§ </span></span><br><span class="line">Find(x);</span><br><span class="line"><span class="keyword">if</span>(val[root]&gt;x) <span class="keyword">return</span> root;</span><br><span class="line"><span class="keyword">int</span> cur=ch[root][<span class="number">1</span>];</span><br><span class="line"><span class="keyword">while</span>(ch[cur][<span class="number">0</span>]) cur=ch[cur][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Remove</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//åˆ é™¤x </span></span><br><span class="line"><span class="keyword">int</span> last=Pre(x),beh=Back(x);</span><br><span class="line">splay(last),splay(beh,last);</span><br><span class="line"><span class="keyword">int</span> del=ch[beh][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span>(cnt[del]&gt;<span class="number">1</span>)&#123;</span><br><span class="line">cnt[del]--;</span><br><span class="line">splay(del);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> ch[beh][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Kth</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123; <span class="comment">//ç¬¬k-1å¤§ </span></span><br><span class="line"><span class="keyword">int</span> cur=root;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">pushdown(cur);</span><br><span class="line"><span class="keyword">if</span>(ch[cur][<span class="number">0</span>] &amp;&amp; k&lt;=sz[ch[cur][<span class="number">0</span>]])cur=ch[cur][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(k&gt;sz[ch[cur][<span class="number">0</span>]]+cnt[cur])&#123;</span><br><span class="line">k-=sz[ch[cur][<span class="number">0</span>]]+cnt[cur];</span><br><span class="line">cur=ch[cur][<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reverse</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> x=Kth(l),y=Kth(r+<span class="number">2</span>);</span><br><span class="line">splay(x),splay(y,x);</span><br><span class="line">rev[ch[y][<span class="number">0</span>]]^=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Output</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//ä¸­åºéå†è¾“å‡º </span></span><br><span class="line">pushdown(x);</span><br><span class="line"><span class="keyword">if</span>(ch[x][<span class="number">0</span>]) Output(ch[x][<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">if</span>(val[x]&gt;=<span class="number">1</span> &amp;&amp; val[x]&lt;=n) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,val[x]);</span><br><span class="line"><span class="keyword">if</span>(ch[x][<span class="number">1</span>]) Output(ch[x][<span class="number">1</span>]); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">SC(n,m);</span><br><span class="line">Insert(inf),Insert(-inf);</span><br><span class="line">rep(i,<span class="number">1</span>,n) Insert(i);</span><br><span class="line"><span class="keyword">int</span> x,y,l,r;</span><br><span class="line"><span class="keyword">while</span>(m--)&#123;</span><br><span class="line">SC(x,y);</span><br><span class="line">Reverse(x,y);</span><br><span class="line">&#125;</span><br><span class="line">Output(root);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹³è¡¡æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(POJ) 2182 Lost Cows ï¼ˆè´ªå¿ƒ or æ ‘çŠ¶æ•°ç»„ï¼‰</title>
      <link href="2019/05/05/(POJ)%202182%20Lost%20Cows/"/>
      <url>2019/05/05/(POJ)%202182%20Lost%20Cows/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://poj.org/problem?id=2182">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜æ„</strong></em> ï¼šnå¤´ç‰›ï¼Œæ¯å¤´ç‰›æœ‰[1ï¼Œn]çš„ç‹¬ç«‹çš„ç¼–å·ï¼Œç°åœ¨è¿™äº›ç‰›æ‚ä¹±çš„ç«™åœ¨ä¸€æ’ï¼Œç»™å‡ºåœ¨ç¬¬iå¤´ç‰›ä¹‹å‰ï¼Œå¹¶ä¸”æ¯”ç¬¬iå¤´ç‰›ç¼–å·å°çš„ä¸ªæ•°ï¼Œiå±äº2åˆ°nã€‚æ±‚è§£ç°åœ¨çš„æ¯å¤´ç‰›çš„ç¼–å·</p><p><em><strong>æ€è·¯</strong></em> ï¼šæˆ‘ä»¬ä»åå¾€å‰è€ƒè™‘å³å¯ï¼Œå…¶å®æœ€åä¸€å¤´ç‰›çš„idéƒ½æ˜¯å¯ä»¥ç›´æ¥ç¡®å®šçš„ï¼Œè´ªå¿ƒé€’æ¨(ä¸çŸ¥é“è¯¥ä¸è¯¥ç§°è¿™ä¸ªä¸ºè´ªå¿ƒ)å³å¯ï¼Œç‚¹ç„¶æˆ‘ä»¬ä¹Ÿè®¸å¯ä»¥ç”¨æ ‘çŠ¶æ•°ç»„ï¼Œæˆ‘æ˜¯ç›´æ¥ç”¨çš„åˆ«äººçš„äº†ï¼Œä¹Ÿæ˜¯ä»åå¾€å‰è€ƒè™‘ï¼Œç„¶åäºŒåˆ†å½“å‰ç‰›çš„ç¼–å·ï¼Œé€šè¿‡å‰é¢æ¯”å®ƒå°çš„ç‰›å’Œåé¢æ¯”å®ƒå°çš„ç‰›æ¥åˆ¤æ–­å³å¯ï¼Œæ ‘çŠ¶æ•°ç»„ç»´æŠ¤çš„å°±æ˜¯å½“å‰ç‰›åé¢æ¯”å®ƒå°çš„æ•°å­—ã€‚æœ€ç»ˆè¯¥ç‰›çš„id æ˜¯è¦æ»¡è¶³id-1=k(å‰è¾¹æ¯”ä»–å°çš„æ•°å­—ä¸ªæ•°ï¼Œå·²çŸ¥)+num(åé¢æ¯”å®ƒå°çš„æ•°å­—ï¼Œæ ‘çŠ¶æ•°ç»„ç»´æŠ¤)ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è´ªå¿ƒ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,r[maxn],ans[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(sc(n)!=EOF) &#123;</span><br><span class="line">tt.resize(n+<span class="number">5</span>);</span><br><span class="line">tt[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">rep(i,<span class="number">2</span>,n)sc(r[i]),tt[i]=i;</span><br><span class="line">drep(i,n,<span class="number">1</span>) &#123;</span><br><span class="line">ans[i]=tt[r[i]+<span class="number">1</span>];</span><br><span class="line">tt.erase(tt.begin()+r[i]+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">rep(i,<span class="number">1</span>,n)<span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">tt.clear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ‘çŠ¶æ•°ç»„</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 8005</span></span><br><span class="line"><span class="keyword">int</span> a[MAX],ans[MAX],tree[MAX],n;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> pos)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(pos&gt;<span class="number">0</span>)ans+=tree[pos],pos-=pos&amp;(-pos);</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(pos&lt;=n)tree[pos]+=val,pos+=pos&amp;(-pos);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> left=<span class="number">1</span>,right=n;</span><br><span class="line"><span class="keyword">while</span>(left&lt;right)&#123;</span><br><span class="line"><span class="keyword">int</span> mid=(left+right)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> num=ask(mid);</span><br><span class="line"><span class="keyword">if</span>(mid<span class="number">-1</span>&lt;num+k) left=mid+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> right=mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(sc(n)!=EOF)&#123;</span><br><span class="line">ms(tree,<span class="number">0</span>);</span><br><span class="line">a[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">rep(i,<span class="number">2</span>,n)sc(a[i]);</span><br><span class="line">drep(i,n,<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">int</span> k=solve(a[i]);</span><br><span class="line">add(k,<span class="number">1</span>);</span><br><span class="line">ans[i]=k;</span><br><span class="line">&#125;</span><br><span class="line">rep(i,<span class="number">1</span>,n)<span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> POJ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´ªå¿ƒ </tag>
            
            <tag> æ ‘çŠ¶æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>splayåŸºç¡€æ¨¡æ¿(ç®€å•ä¿®æ”¹å’Œç¿»è½¬)</title>
      <link href="2019/05/05/splay%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF(%E7%AE%80%E5%8D%95%E4%BF%AE%E6%94%B9%E5%92%8C%E7%BF%BB%E8%BD%AC)/"/>
      <url>2019/05/05/splay%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF(%E7%AE%80%E5%8D%95%E4%BF%AE%E6%94%B9%E5%92%8C%E7%BF%BB%E8%BD%AC)/</url>
      
        <content type="html"><![CDATA[<h3 id="åˆå­¦çœ‹çš„è¿™ç¯‡åšå®¢"><a class="markdownIt-Anchor" href="#åˆå­¦çœ‹çš„è¿™ç¯‡åšå®¢"></a> <a href="https://baijiahao.baidu.com/s?id=1613228134219334653&amp;wfr=spider&amp;for=pc">åˆå­¦ï¼Œçœ‹çš„è¿™ç¯‡åšå®¢</a></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="comment">/* TDD */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> ch[N][<span class="number">2</span>],val[N],cnt[N],par[N],sz[N],rev[N];</span><br><span class="line"><span class="comment">//xèŠ‚ç‚¹çš„å·¦å³å„¿å­ï¼›xå­˜å‚¨çš„æƒå€¼ï¼›xå­˜å‚¨çš„é‡å¤æƒå€¼çš„ä¸ªæ•°ï¼›xçš„çˆ¶äº²èŠ‚ç‚¹ï¼›xå­æ ‘ä¸‹å‚¨å­˜çš„æƒå€¼æ•° </span></span><br><span class="line"><span class="comment">//ï¼ˆåŒ…æ‹¬é‡å¤ï¼‰;ç¿»è½¬æ ‡è®° </span></span><br><span class="line"><span class="keyword">int</span> root,ncnt;</span><br><span class="line"><span class="keyword">int</span> n,m; </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;sz[x]=sz[ch[x][<span class="number">0</span>]]+sz[ch[x][<span class="number">1</span>]]+cnt[x];&#125; </span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(rev[x])&#123;</span><br><span class="line">swap(ch[x][<span class="number">0</span>],ch[x][<span class="number">1</span>]);</span><br><span class="line">rev[ch[x][<span class="number">0</span>]]^=<span class="number">1</span>;</span><br><span class="line">rev[ch[x][<span class="number">1</span>]]^=<span class="number">1</span>;</span><br><span class="line">rev[x]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">ws</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="keyword">return</span> ch[par[x]][<span class="number">1</span>]==x;&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> f=par[x],ff=par[f],k=ws(x),w=ch[x][k^<span class="number">1</span>];</span><br><span class="line">ch[f][k]=w,par[w]=f;</span><br><span class="line">ch[ff][ws(f)]=x,par[x]=ff;</span><br><span class="line">ch[x][k^<span class="number">1</span>]=f,par[f]=x;</span><br><span class="line">pushup(f),pushup(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> goal=<span class="number">0</span>)</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(par[x]!=goal)&#123;</span><br><span class="line"><span class="keyword">int</span> f=par[x],ff=par[f];</span><br><span class="line"><span class="keyword">if</span>(ff!=goal)&#123;</span><br><span class="line"><span class="keyword">if</span>(ws(x)==ws(f)) rotate(f);</span><br><span class="line"><span class="keyword">else</span> rotate(x);</span><br><span class="line">&#125;</span><br><span class="line">rotate(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!goal) root=x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//æ‰¾åˆ°xå€¼å¹¶å°†å…¶æ—‹è½¬ä¸ºæ ¹ </span></span><br><span class="line"><span class="keyword">int</span> cur=root;</span><br><span class="line"><span class="keyword">while</span>(ch[cur][x&gt;val[cur]] &amp;&amp; x!=val[cur])&#123;</span><br><span class="line">cur=ch[cur][x&gt;val[cur]];</span><br><span class="line">&#125;</span><br><span class="line">splay(cur);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cur=root,p=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(cur &amp;&amp; val[cur]!=x)&#123;</span><br><span class="line">p=cur;</span><br><span class="line">cur=ch[cur][x&gt;val[cur]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cur) cnt[cur]++;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">cur=++ncnt;</span><br><span class="line"><span class="keyword">if</span>(p) ch[p][x&gt;val[p]]=cur;</span><br><span class="line">ch[cur][<span class="number">0</span>]=ch[cur][<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">par[cur]=p,val[cur]=x;</span><br><span class="line">cnt[cur]=sz[cur]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">splay(cur);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*æŸ¥è¯¢*/</span> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Kth</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123; <span class="comment">//ç¬¬k-1å¤§ (å› ä¸ºä¸€å¼€å§‹æ’å…¥äº†-inf)</span></span><br><span class="line"><span class="keyword">int</span> cur=root;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">pushdown(cur);<span class="comment">//æœ‰åŒºé—´æ“ä½œæ—¶æ‰éœ€pushdown </span></span><br><span class="line"><span class="keyword">if</span>(ch[cur][<span class="number">0</span>] &amp;&amp; k&lt;=sz[ch[cur][<span class="number">0</span>]])cur=ch[cur][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(k&gt;sz[ch[cur][<span class="number">0</span>]]+cnt[cur])&#123;</span><br><span class="line">k-=sz[ch[cur][<span class="number">0</span>]]+cnt[cur];</span><br><span class="line">cur=ch[cur][<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rank</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//xçš„rank </span></span><br><span class="line">Find(x);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;sz[ch[root][<span class="number">0</span>]]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Pre</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//xçš„å‰é©± </span></span><br><span class="line">Find(x);</span><br><span class="line"><span class="keyword">if</span>(val[root]&lt;x) <span class="keyword">return</span> root;</span><br><span class="line"><span class="keyword">int</span> cur=ch[root][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">while</span>(ch[cur][<span class="number">1</span>]) cur=ch[cur][<span class="number">1</span>];</span><br><span class="line"><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Back</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//xçš„åç»§ </span></span><br><span class="line">Find(x);</span><br><span class="line"><span class="keyword">if</span>(val[root]&gt;x) <span class="keyword">return</span> root;</span><br><span class="line"><span class="keyword">int</span> cur=ch[root][<span class="number">1</span>];</span><br><span class="line"><span class="keyword">while</span>(ch[cur][<span class="number">0</span>]) cur=ch[cur][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Remove</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//åˆ é™¤x </span></span><br><span class="line"><span class="keyword">int</span> last=Pre(x),beh=Back(x);</span><br><span class="line">splay(last),splay(beh,last);</span><br><span class="line"><span class="keyword">int</span> del=ch[beh][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span>(cnt[del]&gt;<span class="number">1</span>)&#123;</span><br><span class="line">cnt[del]--;</span><br><span class="line">splay(del);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> ch[beh][<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reverse</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123; <span class="comment">//ç¿»è½¬[l,r]åŒºé—´ </span></span><br><span class="line"><span class="keyword">int</span> x=Kth(l),y=Kth(r+<span class="number">2</span>);</span><br><span class="line">splay(x),splay(y,x);</span><br><span class="line">rev[ch[y][<span class="number">0</span>]]^=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Output</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//ä¸­åºéå†è¾“å‡º </span></span><br><span class="line">pushdown(x);</span><br><span class="line"><span class="keyword">if</span>(ch[x][<span class="number">0</span>]) Output(ch[x][<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">if</span>(val[x]&gt;=<span class="number">1</span> &amp;&amp; val[x]&lt;=n) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,val[x]);</span><br><span class="line"><span class="keyword">if</span>(ch[x][<span class="number">1</span>]) Output(ch[x][<span class="number">1</span>]); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123; <span class="comment">//è¾“å‡º[l,r]</span></span><br><span class="line"><span class="keyword">int</span> x=Kth(l),y=Kth(r+<span class="number">2</span>);</span><br><span class="line">splay(x),splay(y,x);</span><br><span class="line">Output(ch[y][<span class="number">0</span>]);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">Insert(inf),Insert(-inf); <span class="comment">//å…ˆå½¢æˆæ ‘å½¢ </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹³è¡¡æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„çº¿æ®µæ ‘æ˜¯å¨å±(çº¿æ®µæ ‘ä¸“é¢˜)</title>
      <link href="2019/04/27/%E7%BA%BF%E6%AE%B5%E6%A0%91%E4%B8%93%E9%A2%98/"/>
      <url>2019/04/27/%E7%BA%BF%E6%AE%B5%E6%A0%91%E4%B8%93%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸äº†è§£çº¿æ®µæ ‘çš„å¯ä»¥ä»è¿™ä¸ªå…¥é—¨å†™çš„è¶…æ£’"><a class="markdownIt-Anchor" href="#ä¸äº†è§£çº¿æ®µæ ‘çš„å¯ä»¥ä»è¿™ä¸ªå…¥é—¨å†™çš„è¶…æ£’"></a> <a href="https://blog.csdn.net/zearot/article/details/48299459">ä¸äº†è§£çº¿æ®µæ ‘çš„å¯ä»¥ä»è¿™ä¸ªå…¥é—¨ï¼Œå†™çš„è¶…æ£’</a></h1><h1 id=""><a class="markdownIt-Anchor" href="#"></a> </h1><h1 id="çº¿æ®µæ ‘åŸºç¡€æ¨¡æ¿"><a class="markdownIt-Anchor" href="#çº¿æ®µæ ‘åŸºç¡€æ¨¡æ¿"></a> <a href="https://blog.csdn.net/TDD_Master/article/details/84193014">çº¿æ®µæ ‘åŸºç¡€æ¨¡æ¿</a>ï¼šæŸ¥è¯¢åŒºé—´å’Œå’ŒåŒºé—´æœ€å€¼</h1><p>ä¸è¦careæˆ‘ä¸‹é¢æ—¶è€Œæ•°ç»„çº¿æ®µæ ‘æ—¶è€Œç»“æ„ä½“çº¿æ®µæ ‘ã€‚</p><h2 id="ahdu-1166-æ•Œå…µå¸ƒé˜µ"><a class="markdownIt-Anchor" href="#ahdu-1166-æ•Œå…µå¸ƒé˜µ"></a> A.<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1166">hdu 1166 æ•Œå…µå¸ƒé˜µ</a></h2><p><strong>:çº¿æ®µæ ‘æ¿å­é¢˜ï¼Œå•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> Sum[maxn&lt;&lt;<span class="number">2</span>],Add[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> A[maxn],n;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PushUp</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;Sum[rt]=Sum[rt&lt;&lt;<span class="number">1</span>]+Sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line">Sum[rt]=A[l];</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">Build(l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">Build(m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">PushUp(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PushDown</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> ln,<span class="keyword">int</span> rn)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(Add[rt])&#123;</span><br><span class="line">Add[rt&lt;&lt;<span class="number">1</span>]+=Add[rt];</span><br><span class="line">Add[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=Add[rt];</span><br><span class="line">Sum[rt&lt;&lt;<span class="number">1</span>]+=Add[rt]*ln;</span><br><span class="line">Sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=Add[rt]*rn;</span><br><span class="line">Add[rt]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> C,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123; </span><br><span class="line">Sum[rt]+=C;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) Update(L,C,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span>       Update(L,C,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">PushUp(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line"><span class="keyword">return</span> Sum[rt];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">PushDown(rt,m-l+<span class="number">1</span>,r-m); </span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ANS=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) ANS+=Query(L,R,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(R &gt;  m) ANS+=Query(L,R,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"><span class="keyword">return</span> ANS;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> T; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=T;++i)&#123;</span><br><span class="line">ms(Sum,<span class="number">0</span>),ms(Add,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">rep(i,<span class="number">1</span>,n)<span class="built_in">cin</span>&gt;&gt;A[i];</span><br><span class="line">Build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Case &quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;:&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;s)&#123;</span><br><span class="line"><span class="keyword">if</span>(s==<span class="string">&quot;End&quot;</span>)<span class="keyword">break</span>;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line"><span class="keyword">if</span>(s==<span class="string">&quot;Query&quot;</span>)<span class="built_in">cout</span>&lt;&lt;Query(x,y,<span class="number">1</span>,n,<span class="number">1</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(s==<span class="string">&quot;Add&quot;</span>) Update(x,y,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(s==<span class="string">&quot;Sub&quot;</span>) Update(x,-y,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="bhdu-1754-i-hate-it"><a class="markdownIt-Anchor" href="#bhdu-1754-i-hate-it"></a> B.<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1754">hdu 1754 I Hate It</a></h2><p><strong>:æ¿å­å•ç‚¹æ›´æ–°ï¼ŒåŒºé—´æœ€å€¼é—®é¢˜ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line">ll Sum[maxn&lt;&lt;<span class="number">2</span>],Add[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line">ll A[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PushUp</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">Sum[rt]=max(Sum[rt&lt;&lt;<span class="number">1</span>],Sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line">Sum[rt]=A[l];</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">Build(l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">Build(m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">PushUp(rt);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> C,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123; </span><br><span class="line">Sum[rt]=C;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) Update(L,C,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span>       Update(L,C,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">PushUp(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line"><span class="keyword">return</span> Sum[rt];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ANS=-inf;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) ANS=max(ANS,Query(L,R,l,m,rt&lt;&lt;<span class="number">1</span>));</span><br><span class="line"><span class="keyword">if</span>(R &gt;  m) ANS=max(ANS,Query(L,R,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>));</span><br><span class="line"><span class="keyword">return</span> ANS;</span><br><span class="line">&#125; </span><br><span class="line">ll n,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m)&#123;</span><br><span class="line">ms(Add,<span class="number">0</span>),ms(Sum,<span class="number">0</span>);</span><br><span class="line">rep(i,<span class="number">1</span>,n)<span class="built_in">cin</span>&gt;&gt;A[i];</span><br><span class="line">Build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">char</span> x;</span><br><span class="line"><span class="keyword">int</span> y,z;</span><br><span class="line">rep(i,<span class="number">1</span>,m)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line"><span class="keyword">if</span>(x==<span class="string">&#x27;Q&#x27;</span>)<span class="built_in">cout</span>&lt;&lt;Query(y,z,<span class="number">1</span>,n,<span class="number">1</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(x==<span class="string">&#x27;U&#x27;</span>) Update(y,z,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="chdu-1394-minimum-inversion-number"><a class="markdownIt-Anchor" href="#chdu-1394-minimum-inversion-number"></a> C.<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1394">hdu 1394 Minimum Inversion Number</a></h2><p><strong>é¢˜æ„:æœ¬é¢˜å°±æ˜¯æ±‚å¾ªç¯ç§»ä½åé€†åºæ•°çš„æœ€å°å€¼</strong></p><p><strong>æ€è·¯:å…ˆç”¨çº¿æ®µæ ‘æ±‚å‡ºåŸæ¥åºåˆ—çš„é€†åºå¯¹ä¸ªæ•°,çº¿æ®µæ ‘ç»´æŠ¤1<sub>nçš„æ•°å‡ºç°çš„ä¸ªæ•°ï¼Œå°†ç»™çš„åºåˆ—ä»åå¾€å‰æ”¾ï¼Œç„¶åæ¯æ¬¡æŸ¥è¯¢1</sub>a[i]è¿™ä¸ªåŒºé—´å·²ç»å‡ºç°çš„æ•°å­—ä¸ªæ•°ï¼Œå‡ºç°äº†å‡ ä¸ªé‚£å°±æœ‰å‡ ä¸ªé€†åºå¯¹ï¼Œè¯´æ˜æœ¬åº”å‡ºç°åœ¨a[i]å‰é¢çš„æ•°å­—ï¼Œå‡ºç°åœ¨äº†a[i]ä¹‹åã€‚ç„¶åæ¯æ¬¡åŠ ä¸Šï¼Œåœ¨æ›´æ–°è¿™ä¸ªä½ç½®ä¸Šçš„æ•°å­—å‡ºç°æ¬¡æ•°ã€‚ç„¶åå†ä»å¤´åˆ°å°¾å°†é‚£ä¸ªå…ƒç´ æ”¾åˆ°æœ€åï¼Œè¿™æ ·çš„æ”¹å˜é‡æ˜¯-(a[i]-1) å–æ¶ˆå› ä¸ºa[i]æ”¾åœ¨æœ€å‰çš„äº§ç”Ÿçš„é€†åºå¯¹ï¼Œ+(n-a[i])å› ä¸ºa[i]æ”¾åœ¨æœ€åæ–°äº§ç”Ÿçš„é€†åºå¯¹ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5005</span>;</span><br><span class="line"><span class="keyword">int</span> n,b[maxn&lt;&lt;<span class="number">2</span>],a[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line">b[rt]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">b[rt]+=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(l==r) <span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(v&lt;=mid)    add(l,mid,rt&lt;&lt;<span class="number">1</span>,v);</span><br><span class="line"><span class="keyword">else</span>    add(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> ll,<span class="keyword">int</span> rr)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(ll&lt;=l &amp;&amp; r&lt;=rr) <span class="keyword">return</span> b[rt];</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(ll&lt;=mid)     ans+=sum(l,mid,rt&lt;&lt;<span class="number">1</span>,ll,rr);</span><br><span class="line"><span class="keyword">if</span>(rr&gt;mid)    ans+=sum(mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,ll,rr);</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> v;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n) &#123;</span><br><span class="line">build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">++a[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">ans+=sum(<span class="number">1</span>,n,<span class="number">1</span>,a[i],n);</span><br><span class="line">add(<span class="number">1</span>,n,<span class="number">1</span>,a[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mmin=ans;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">ans-=a[i]<span class="number">-1</span>;</span><br><span class="line">ans+=n-a[i];</span><br><span class="line">mmin=min(ans,mmin);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;mmin&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="dhdu-2795-billboard"><a class="markdownIt-Anchor" href="#dhdu-2795-billboard"></a> D.<a href="http://acm.hdu.edu.cn/showproblem.php?pid=2795">hdu 2795 Billboard</a></h2><p><strong>é¢˜æ„ï¼šæœ‰ä¸ªå…¬å‘Šæ¿ï¼Œå¤§å°ä¸ºh*w,è¦è´´nå¼ å…¬å‘Šï¼Œæ¯ä¸ªå…¬å‘Šçš„é•¿åº¦æ˜¯kï¼Œé«˜åº¦å›ºå®šä¸º1ï¼Œå…¬å‘Šæ”¾çš„è¦å°½å¯èƒ½é ä¸Šå¹¶å°½å¯èƒ½é å·¦ï¼Œæ¯ç»™å‡ºä¸€å¼ å…¬å‘Šï¼Œè¦æ±‚è¿™ä¸ªå…¬å‘Šåœ¨æ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹æ”¾åœ¨äº†ç¬¬å‡ å±‚ã€‚</strong></p><p><strong>æ€è·¯ï¼šçº¿æ®µæ ‘ç»´æŠ¤hè¡Œå…¬å‘Šæ¿çš„æœ€é•¿è¿ç»­åŒºé—´ï¼ŒæŸ¥è¯¢çš„æ—¶å€™å°½é‡å¾€å·¦å°±è¡Œäº†ã€‚hå¾ˆå¤§ä½†æ˜¯æœ€å¤§åªè¦æ»¡è¶³nå¼ æµ·æŠ¥å°±è¡Œäº†ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,h,w;</span><br><span class="line">ll Sum[maxn&lt;&lt;<span class="number">2</span>],A[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PushUp</span><span class="params">(<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line">Sum[rt]=max(Sum[rt&lt;&lt;<span class="number">1</span>],Sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line">Sum[rt]=w;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">Build(l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">Build(m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">PushUp(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> C,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line">Sum[rt]+=C;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) Update(L,C,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span>       Update(L,C,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">PushUp(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">Query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> num,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line"><span class="comment">//cout&lt;&lt;l&lt;&lt;&quot; &quot;&lt;&lt;r&lt;&lt;&quot; &quot;&lt;&lt;num&lt;&lt;endl;</span></span><br><span class="line"><span class="keyword">if</span>(L&lt;=l &amp;&amp; r&lt;=R &amp;&amp; r-l==<span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(Sum[rt]&gt;=num)<span class="keyword">return</span> l;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> inf;</span><br><span class="line">&#125;</span><br><span class="line">ll m=(l+r)&gt;&gt;<span class="number">1</span>,ans=inf;</span><br><span class="line"><span class="comment">//cout&lt;&lt;&quot;ls &quot;&lt;&lt;Sum[rt&lt;&lt;1]&lt;&lt;&quot; rs &quot;&lt;&lt;Sum[rt&lt;&lt;1|1]&lt;&lt;endl;</span></span><br><span class="line"><span class="keyword">if</span>(L &lt;= m &amp;&amp; Sum[rt&lt;&lt;<span class="number">1</span>]&gt;=num)ans=min(ans,Query(L,R,num,l,m,rt&lt;&lt;<span class="number">1</span>));</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(R &gt; m &amp;&amp; Sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]&gt;=num)ans=min(ans,Query(L,R,num,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>));</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;h&gt;&gt;w&gt;&gt;n) &#123;</span><br><span class="line">ms(Sum,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(h&gt;n)h=n;</span><br><span class="line">Build(<span class="number">1</span>,h,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> num,cnt;</span><br><span class="line">rep(i,<span class="number">1</span>,n) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;num;</span><br><span class="line"><span class="keyword">if</span>(Sum[<span class="number">1</span>]&lt;num)<span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">cnt=Query(<span class="number">1</span>,h,num,<span class="number">1</span>,h,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(cnt==inf)<span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;cnt&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">Update(cnt,-num,<span class="number">1</span>,h,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h2 id="ehdu-1698-just-a-hook"><a class="markdownIt-Anchor" href="#ehdu-1698-just-a-hook"></a> E.<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1698">hdu 1698 Just a Hook</a></h2><p><strong>é¢˜æ„ï¼šè¿ç»­nä¸ªæ£æ£’ï¼Œç°è¿›è¡Œmæ¬¡æ“ä½œï¼ŒæŠŠa~bçš„æ£æ£’æ¢æˆcæè´¨çš„ï¼Œæ±‚æ€»ä»·å€¼ï¼Œï¼ˆé“œï¼ˆ1åˆå§‹ï¼‰ï¼Œé“¶ï¼ˆ2ï¼‰ï¼Œé‡‘ï¼ˆ3ï¼‰ï¼‰</strong></p><p><strong>æ€è·¯ï¼šçº¿æ®µæ ‘çš„åŒºé—´æ›´æ–°å°±è¡Œäº†ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line">ll sum[maxn&lt;&lt;<span class="number">2</span>],cg[maxn&lt;&lt;<span class="number">2</span>],n;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">sum[rt]=sum[rt&lt;&lt;<span class="number">1</span>]+sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> ln,<span class="keyword">int</span> rn)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(cg[rt])&#123;</span><br><span class="line">cg[rt&lt;&lt;<span class="number">1</span>]=cg[rt];</span><br><span class="line">cg[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=cg[rt];</span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>]=ln*cg[rt];</span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=rn*cg[rt];</span><br><span class="line">cg[rt]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123;</span><br><span class="line">sum[rt]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> C,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l &amp;&amp; r&lt;=R)&#123;</span><br><span class="line">sum[rt]=(ll)C*(r-l+<span class="number">1</span>);</span><br><span class="line">cg[rt]=C;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">pushdown(rt,m-l+<span class="number">1</span>,r-m);</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) update(L,R,C,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(R &gt;  m) update(L,R,C,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>); </span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> T,q,x,y,z;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">rep(i,<span class="number">1</span>,T)&#123;</span><br><span class="line">ms(cg,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;q;</span><br><span class="line"><span class="keyword">while</span>(q--)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line">update(x,y,z,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Case &quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;: The total value of the hook is &quot;</span>&lt;&lt;sum[<span class="number">1</span>]&lt;&lt;<span class="string">&quot;.&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="fpoj-3468-a-simple-problem-with-integers"><a class="markdownIt-Anchor" href="#fpoj-3468-a-simple-problem-with-integers"></a> F.<a href="http://poj.org/problem?id=3468">poj 3468 A Simple Problem with Integers</a></h2><p><strong>:æ¿å­é¢˜åŒºé—´æ›´æ–°ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line">ll Sum[maxn&lt;&lt;<span class="number">2</span>],Add[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line">ll A[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PushUp</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;Sum[rt]=Sum[rt&lt;&lt;<span class="number">1</span>]+Sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line">Sum[rt]=A[l];</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">Build(l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">Build(m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">PushUp(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PushDown</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> ln,<span class="keyword">int</span> rn)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(Add[rt])&#123;</span><br><span class="line">Add[rt&lt;&lt;<span class="number">1</span>]+=Add[rt];</span><br><span class="line">Add[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=Add[rt];</span><br><span class="line">Sum[rt&lt;&lt;<span class="number">1</span>]+=Add[rt]*ln;</span><br><span class="line">Sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=Add[rt]*rn;</span><br><span class="line">Add[rt]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> C,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)&#123; </span><br><span class="line">Sum[rt]+=C;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) Update(L,C,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span>       Update(L,C,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">PushUp(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> C,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line">Sum[rt]+=C*(r-l+<span class="number">1</span>);</span><br><span class="line">Add[rt]+=C;</span><br><span class="line"><span class="keyword">return</span> ; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">PushDown(rt,m-l+<span class="number">1</span>,r-m);</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) Update(L,R,C,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(R &gt;  m) Update(L,R,C,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>); </span><br><span class="line">PushUp(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">Query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line"><span class="keyword">return</span> Sum[rt];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">PushDown(rt,m-l+<span class="number">1</span>,r-m); </span><br><span class="line"></span><br><span class="line">ll ANS=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) ANS+=Query(L,R,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(R &gt;  m) ANS+=Query(L,R,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"><span class="keyword">return</span> ANS;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,q;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;q)&#123;</span><br><span class="line">ms(Add,<span class="number">0</span>),ms(Sum,<span class="number">0</span>);</span><br><span class="line">rep(i,<span class="number">1</span>,n)<span class="built_in">cin</span>&gt;&gt;A[i];</span><br><span class="line">Build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">char</span> tp;</span><br><span class="line"><span class="keyword">int</span> x,y,z;</span><br><span class="line">rep(i,<span class="number">1</span>,q)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="string">&#x27;Q&#x27;</span>)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;Query(x,y,<span class="number">1</span>,n,<span class="number">1</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(tp==<span class="string">&#x27;C&#x27;</span>)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line">Update(x,y,z,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="gpoj-2528-mayors-posters"><a class="markdownIt-Anchor" href="#gpoj-2528-mayors-posters"></a> G.<a href="http://poj.org/problem?id=2528">poj 2528 Mayorâ€™s posters</a></h2><p><strong>é¢˜æ„ï¼šæœ‰ä¸€å—è¶³å¤Ÿé•¿çš„å¢™äº†ç»™ç«é€‰äººè´´æµ·æŠ¥ï¼Œåè´´çš„å¯èƒ½ä¼šæŠŠè¡£é¢è´´çš„ç»™è¦†ç›–æ‰ï¼Œé—®æœ€æœ‰å¤šå°‘ä¸åŒçš„æµ·æŠ¥æ˜¯èƒ½çœ‹åˆ°çš„ã€‚</strong></p><p><strong>æ€è·¯ï¼šé¦–å…ˆæµ·æŠ¥lï¼Œrçš„èŒƒå›´å¾ˆå¤§ï¼Œä½†æ˜¯åªæœ‰10000å¼ æµ·æŠ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆéœ€è¦ç¦»æ•£åŒ–lå’Œrï¼Œçº¿æ®µæ ‘ç»´æŠ¤çš„å°±æ˜¯åŒºé—´æ˜¯å¦è¢«å…¨éƒ¨è¦†ç›–ã€‚</strong></p><p><strong>è´´æµ·æŠ¥çš„é¡ºåºæˆ‘ä»¬ä»åå¾€å‰è´´ï¼Œæ¯æ¬¡queryä¸€ä¸‹è¯¥æµ·æŠ¥çš„lï¼ŒråŒºé—´æ˜¯å¦è¢«å…¨éƒ¨è¦†ç›–ï¼Œå°±å¯çŸ¥æœ€åèƒ½ä¸èƒ½è¢«çœ‹è§äº†ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">bool</span> vis[maxn&lt;&lt;<span class="number">2</span>],cg[maxn&lt;&lt;<span class="number">2</span>],fg=<span class="number">0</span>;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">vis[rt]=vis[rt&lt;&lt;<span class="number">1</span>] &amp;&amp; vis[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> ln,<span class="keyword">int</span> rn)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(cg[rt])&#123;</span><br><span class="line">cg[rt&lt;&lt;<span class="number">1</span>]=cg[rt];</span><br><span class="line">cg[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=cg[rt];</span><br><span class="line">vis[rt&lt;&lt;<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">vis[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">cg[rt]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l &amp;&amp; r&lt;=R)&#123;</span><br><span class="line">vis[rt]=<span class="number">1</span>;</span><br><span class="line">cg[rt]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">pushdown(rt,m-l+<span class="number">1</span>,r-m);</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) update(L,R,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(R &gt;  m) update(L,R,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>); </span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(vis[rt])<span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l &amp;&amp; r&lt;=R &amp;&amp; !vis[rt])&#123;</span><br><span class="line">fg=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">pushdown(rt,m-l+<span class="number">1</span>,r-m);</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) query(L,R,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(fg)<span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">if</span>(R &gt;  m) query(L,R,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> T,n,x,y;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> id,x;</span><br><span class="line">&#125;pp[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a.x&lt;b.x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">recmp</span><span class="params">(node a,node b)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(a.id==b.id)<span class="keyword">return</span> a.x&lt;b.x;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> a.id&gt;b.id;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">sc(T);</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line">sc(n);</span><br><span class="line">ms(vis,<span class="number">0</span>),ms(cg,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>*n;i+=<span class="number">2</span>)&#123;</span><br><span class="line">SC(pp[i].x,pp[i+<span class="number">1</span>].x);</span><br><span class="line">pp[i].id=pp[i+<span class="number">1</span>].id=i;</span><br><span class="line">&#125;</span><br><span class="line">sort(pp,pp+<span class="number">2</span>*n,cmp);</span><br><span class="line"><span class="keyword">int</span> pre=<span class="number">0</span>,cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>*n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(pp[i].x==pre)pp[i].x=cnt;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">pre=pp[i].x;</span><br><span class="line">pp[i].x=++cnt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">sort(pp,pp+<span class="number">2</span>*n,recmp);</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>,le,ri;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>*n;i+=<span class="number">2</span>)&#123;</span><br><span class="line">fg=<span class="number">0</span>;</span><br><span class="line">le=pp[i].x,ri=pp[i+<span class="number">1</span>].x;</span><br><span class="line">query(le,ri,<span class="number">1</span>,<span class="number">2</span>*n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(fg)ans++;</span><br><span class="line">update(le,ri,<span class="number">1</span>,<span class="number">2</span>*n,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="hpoj-3225-help-with-intervals"><a class="markdownIt-Anchor" href="#hpoj-3225-help-with-intervals"></a> H.<a href="http://poj.org/problem?id=3225">poj 3225 Help with Intervals</a></h2><p><strong>é¢˜æ„ï¼šå°±æ˜¯æ ¹æ®é¢˜ç›®ç»™ä½ çš„è¿ç®—æ³•åˆ™ï¼Œå®Œæˆé›†åˆçš„è¿ç®—æœ€åè¾“å‡ºé›†åˆçš„è¿ç®—ã€‚</strong></p><p><strong>æ€è·¯ï¼šè¿™ä¸ªé¢˜æ„Ÿè§‰æœ‰å¾ˆå¤šéš¾ç‚¹ï¼Œé—­åˆåŒºé—´å¯ä»¥+1ï¼Œ-1æ¥å®Œæˆï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°æˆ‘ä»¬æ— æ³•è¡¨ç¤º(1,2)ï¼Œè¿™é‡Œçš„è§£å†³æ–¹æ¡ˆå°±æ˜¯å°†lå’Œréƒ½ä¹˜2ï¼Œå–µå‘€ã€‚åŒºé—´æ“ä½œå¤§å®¶éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¦‚ä¸‹ã€‚</strong></p><p><strong>å¯¹äºåŒºé—´çš„äº¤å¹¶è¡¥é—®é¢˜ï¼Œå¯ä»¥è½¬åŒ–ä¸ºåŒºé—´è¦†ç›–é—®é¢˜ï¼Œè‹¥TåŒºé—´ä¸º[a,b]ã€‚</strong></p><p><strong>U T:[a,b]è¦†ç›–ä¸º1.</strong></p><p><strong>I T:[0,a-1] [b+1,maxn] è¦†ç›–ä¸º0</strong></p><p><strong>D T:[a,b]è¦†ç›–ä¸º0</strong></p><p><strong>C T:[0,a-1] [b+1,maxn] è¦†ç›–ä¸º0,[a,b]å–å</strong></p><p><strong>S T:[a,b]å–å</strong></p><p><strong>è¿˜æœ‰å°±æ˜¯å¼‚æˆ–æ“ä½œäº†ï¼Œå¯¹äºä¸€ä¸ªåŒºé—´å¦‚æœå€¼å…¨éƒ½ä¸€æ ·ï¼Œé‚£æˆ‘ä»¬å°±ç›´æ¥å¼‚æˆ–äº†ï¼Œåä¹‹æˆ‘ä»¬å°±ä¸èƒ½ç”¨ä¸€ä¸ªå€¼å»ä»£è¡¨è¿™ä¸ªåŒºé—´çš„å€¼ï¼Œå³ä¸èƒ½ç›´æ¥å¼‚æˆ–ã€‚è¿˜æœ‰å°±æ˜¯ä¸¤æ¬¡å¼‚æˆ–å°±ç›¸å½“äºæ²¡å¼‚æˆ–ã€‚</strong></p><p><strong>æ‰€ä»¥æˆ‘ä»¬åœ¨çº¿æ®µæ ‘çš„ç»“æ„ä½“é‡Œå®šä¹‰äº†l,r,cov,rev;</strong></p><p><strong>//ä»£è¡¨åŒºé—´ ï¼Œæ˜¯å¦è¢«è¦†ç›– ï¼Œå¼‚æˆ–æ ‡è®°</strong></p><p><strong>//cov 0ï¼šåŒºé—´å…¨æ˜¯0ï¼Œ1ï¼šåŒºé—´å…¨æ˜¯1ï¼Œ-1ï¼šåŒºé—´éƒ½æœ‰</strong></p><p><strong>//rev 0: ä¸éœ€è¦å¼‚æˆ– ï¼Œ1ï¼šéœ€è¦å¼‚æˆ–</strong></p><p><strong>å¯¹äºæˆ‘ä»¬ä¸èƒ½ç›´æ¥å¼‚æˆ–çš„åŒºé—´ï¼Œæˆ‘ä»¬å°±å»å¼‚æˆ–ä»–çš„å¼‚æˆ–æ ‡è®°ï¼Œpushdownçš„è¯å°±æ˜¯å¾€ä¸‹ä¼ é€’äº†ï¼Œå¦‚æœå½“å‰çˆ¶äº²èŠ‚ç‚¹åŒºé—´è¢«è¦†ç›–ï¼Œé‚£å­©å­èŠ‚ç‚¹ä¹Ÿæ˜¯è¢«è¦†ç›–ï¼Œå¹¶ä¸”æŠ¹é™¤å¼‚æˆ–æ ‡è®°ï¼Œå°†è¯¥çˆ¶äº²covå…ˆæ ‡è®°ä¸º-1,å› ä¸ºä¸‹é¢çš„æ“ä½œå¯èƒ½ä¼šæ”¹å˜çˆ¶äº²èŠ‚ç‚¹çš„è¦†ç›–çŠ¶æ€ã€‚queryé‚£å°±æŠŠè¯¥æ˜¯1çš„åœ°æ–¹éƒ½æ ‡è®°åˆ°æ•°ç»„ä¸Šå°±è¡Œäº†ï¼Œæœ€åè¾“å‡ºä¸è¦å¿˜äº†ä¸€å¼€å§‹çš„*2æ“ä½œäº†ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mx=<span class="number">150000</span>;</span><br><span class="line"><span class="keyword">bool</span> la[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> l,r,cov,rev;<span class="comment">//ä»£è¡¨åŒºé—´ ï¼Œæ˜¯å¦è¢«è¦†ç›– ï¼Œå¼‚æˆ–æ ‡è®° </span></span><br><span class="line"><span class="comment">//cov 0ï¼šåŒºé—´å…¨æ˜¯0ï¼Œ1ï¼šåŒºé—´å…¨æ˜¯1ï¼Œ-1ï¼šåŒºé—´éƒ½æœ‰ </span></span><br><span class="line"><span class="comment">//rev 0: ä¸éœ€è¦å¼‚æˆ– ï¼Œ1ï¼šéœ€è¦å¼‚æˆ– </span></span><br><span class="line">&#125;tree[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">tree[rt].l=l,tree[rt].r=r;</span><br><span class="line">tree[rt].cov=tree[rt].rev=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(l==r)<span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(tree[rt].l==tree[rt].r)<span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">if</span>(tree[rt].cov!=<span class="number">-1</span>)&#123;</span><br><span class="line">tree[rt&lt;&lt;<span class="number">1</span>].cov=tree[rt].cov;</span><br><span class="line">tree[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].cov=tree[rt].cov;</span><br><span class="line">tree[rt].cov=<span class="number">-1</span>;</span><br><span class="line">tree[rt].rev=<span class="number">0</span>;</span><br><span class="line">tree[rt&lt;&lt;<span class="number">1</span>].rev=<span class="number">0</span>;</span><br><span class="line">tree[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].rev=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(tree[rt].rev)&#123;</span><br><span class="line"><span class="keyword">if</span>(tree[rt&lt;&lt;<span class="number">1</span>].cov!=<span class="number">-1</span>) tree[rt&lt;&lt;<span class="number">1</span>].cov^=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span>tree[rt&lt;&lt;<span class="number">1</span>].rev^=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(tree[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].cov!=<span class="number">-1</span>)  tree[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].cov^=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span>tree[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].rev^=<span class="number">1</span>;</span><br><span class="line">tree[rt].rev=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line"><span class="comment">//cout&lt;&lt;l&lt;&lt;&quot; &quot;&lt;&lt;r&lt;&lt;&quot; &quot;&lt;&lt;rt&lt;&lt;&quot; &quot;&lt;&lt;id&lt;&lt;endl;</span></span><br><span class="line"><span class="keyword">if</span>(l&gt;r)<span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">if</span>(tree[rt].l&gt;=l &amp;&amp; tree[rt].r&lt;=r)&#123;</span><br><span class="line"><span class="keyword">if</span>(id==<span class="number">0</span> || id==<span class="number">1</span>)&#123;</span><br><span class="line">tree[rt].cov=id;</span><br><span class="line">tree[rt].rev=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(id==<span class="number">2</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(tree[rt].cov!=<span class="number">-1</span>)tree[rt].cov^=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span>tree[rt].rev^=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line">pushdown(rt);</span><br><span class="line"><span class="keyword">int</span> m=(tree[rt].l+tree[rt].r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(r&lt;=m) update(l,r,rt&lt;&lt;<span class="number">1</span>,id);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(l&gt;m) update(l,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,id);</span><br><span class="line"><span class="keyword">else</span> update(l,m,rt&lt;&lt;<span class="number">1</span>,id),update(m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,id);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(tree[rt].cov==<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=tree[rt].l;i&lt;=tree[rt].r;++i)la[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> ; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(tree[rt].cov==<span class="number">0</span> || tree[rt].l==tree[rt].r)<span class="keyword">return</span> ;</span><br><span class="line">pushdown(rt);</span><br><span class="line">query(rt&lt;&lt;<span class="number">1</span>),query(rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> t,x,y;</span><br><span class="line"><span class="keyword">int</span> a,b;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">build(<span class="number">0</span>,mx,<span class="number">1</span>); </span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%c %c%d,%d%c&quot;</span>,&amp;t,&amp;x,&amp;a,&amp;b,&amp;y)!=EOF)&#123;</span><br><span class="line"><span class="keyword">int</span> le=a*<span class="number">2</span>,ri=b*<span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span>(x==<span class="string">&#x27;(&#x27;</span>)le++;</span><br><span class="line"><span class="keyword">if</span>(y==<span class="string">&#x27;)&#x27;</span>)ri--;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(t==<span class="string">&#x27;U&#x27;</span>)update(le,ri,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(t==<span class="string">&#x27;I&#x27;</span>)&#123;</span><br><span class="line">update(<span class="number">0</span>,le<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">update(ri+<span class="number">1</span>,mx,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(t==<span class="string">&#x27;D&#x27;</span>)update(le,ri,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(t==<span class="string">&#x27;C&#x27;</span>)&#123;</span><br><span class="line">update(<span class="number">0</span>,le<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">update(ri+<span class="number">1</span>,maxn,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">update(le,ri,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(t==<span class="string">&#x27;S&#x27;</span>)update(le,ri,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">getchar();</span><br><span class="line">&#125;</span><br><span class="line">query(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> l=<span class="number">0</span>,flag=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;mx;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(la[i] == <span class="number">1</span> &amp;&amp; (i == <span class="number">0</span> || la[i<span class="number">-1</span>] == <span class="number">0</span>)) l = i;</span><br><span class="line"><span class="keyword">if</span>(la[i] == <span class="number">1</span> &amp;&amp; (i == mx<span class="number">-1</span> || la[i+<span class="number">1</span>] == <span class="number">0</span>)) &#123;</span><br><span class="line"><span class="keyword">if</span>(flag == <span class="number">0</span>) flag = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(l%<span class="number">2</span>)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;(&quot;</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;[&quot;</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;l/<span class="number">2</span>&lt;&lt;<span class="string">&quot;,&quot;</span>&lt;&lt;(i+<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span>(i%<span class="number">2</span>)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;)&quot;</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(flag==<span class="number">0</span>) <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;empty set&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ipoj-3667-hotel"><a class="markdownIt-Anchor" href="#ipoj-3667-hotel"></a> I.<a href="http://poj.org/problem?id=3667">poj 3667 Hotel</a></h2><p><strong>é¢˜æ„ï¼šnä¸ªè¿ç»­çš„æˆ¿é—´mä¸ªæ“ä½œã€‚æ“ä½œåˆ†ä¸¤ç§ï¼Œç¬¬ä¸€ç§ä»¥1 xå½¢å¼ç»™å‡ºï¼Œæ‰¾åˆ°æœ€å·¦çš„èƒ½è¿ç»­å®¹ä¸‹xä¸ªäººçš„è¿ç»­æˆ¿é—´ï¼Œå¹¶è¾“å‡ºå·¦ç«¯ç‚¹çš„ç¼–å·ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±è¾“å‡º0.ç¬¬äºŒç§ä»¥2 l xçš„å½¢å¼ç»™å‡ºï¼Œè¡¨ç¤ºä»¥lä¸ºèµ·ç‚¹çš„xä¸ªæˆ¿é—´éƒ½æ¸…ç©ºã€‚</strong></p><p><strong>æ€è·¯ï¼šç”¨çº¿æ®µæ ‘æ¥ç»´æŠ¤åŒºé—´æœ€å¤§è¿ç»­å³å¯ï¼Œä¸€ä¸ªåŒºé—´çš„è¿ç»­å¯èƒ½æ˜¯ä»å·¦å¼€å§‹çš„è¿ç»­ï¼Œä¹Ÿå¯èƒ½æ˜¯ä»å³å¼€å§‹ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸­é—´çš„ã€‚æ‰€ä»¥çº¿æ®µæ ‘éœ€è¦åŒæ—¶ç»´æŠ¤åŒºé—´çš„æœ€å¤§å·¦è¿ç»­ï¼Œæœ€å¤§å³è¿ç»­ï¼Œæœ€å¤§è¿ç»­ã€‚è¿™æ ·çˆ¶èŠ‚ç‚¹çš„æœ€å¤§è¿ç»­æ‰èƒ½ä»ä¸‰ç§å¯èƒ½çš„æœ€å¤§è¿ç»­å¾—å‡ºã€‚æŸ¥è¯¢çš„æ—¶å€™èƒ½å·¦å°±å·¦å°±å¥½äº†ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> sum[maxn&lt;&lt;<span class="number">2</span>],lz[maxn&lt;&lt;<span class="number">2</span>],lc[maxn&lt;&lt;<span class="number">2</span>],rc[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(sum[rt&lt;&lt;<span class="number">1</span>]==(m-l+<span class="number">1</span>) &amp;&amp; sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]==(r-m))&#123;</span><br><span class="line">sum[rt]=lc[rt]=rc[rt]=r-l+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line">sum[rt]=max(sum[rt&lt;&lt;<span class="number">1</span>],sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">lc[rt]=lc[rt&lt;&lt;<span class="number">1</span>],rc[rt]=rc[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line"><span class="keyword">if</span>(sum[rt&lt;&lt;<span class="number">1</span>]==(m-l+<span class="number">1</span>)) lc[rt]+=lc[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];<span class="comment">//å·¦è¿ç»­ å³è¿ç»­</span></span><br><span class="line"><span class="keyword">if</span>(sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]==(r-m))rc[rt]+=rc[rt&lt;&lt;<span class="number">1</span>];</span><br><span class="line">sum[rt]=max(max(sum[rt],rc[rt&lt;&lt;<span class="number">1</span>]+lc[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]),max(lc[rt],rc[rt]));</span><br><span class="line"><span class="comment">//ä¸­é—´è¿ç»­ ï¼Œå·¦è¿ç»­ ï¼Œå³è¿ç»­ </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(lz[rt]==<span class="number">1</span>)&#123; <span class="comment">//1ä¸ºå æ®æ“ä½œ ï¼Œ2ä¸ºæ¸…ç©ºæ“ä½œ </span></span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>]=lc[rt&lt;&lt;<span class="number">1</span>]=rc[rt&lt;&lt;<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=lc[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=rc[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">lz[rt&lt;&lt;<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">lz[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">lz[rt]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(lz[rt]==<span class="number">2</span>)&#123;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>]=lc[rt&lt;&lt;<span class="number">1</span>]=rc[rt&lt;&lt;<span class="number">1</span>]=m-l+<span class="number">1</span>;</span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=lc[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=rc[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=r-m;</span><br><span class="line">lz[rt&lt;&lt;<span class="number">1</span>]=<span class="number">2</span>;</span><br><span class="line">lz[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]=<span class="number">2</span>;</span><br><span class="line">lz[rt]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line">sum[rt]=lc[rt]=rc[rt]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">pushup(rt,l,r);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">bool</span> id)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line"><span class="keyword">if</span>(id==<span class="number">0</span>)&#123; <span class="comment">//å æ® </span></span><br><span class="line">sum[rt]=lc[rt]=rc[rt]=<span class="number">0</span>;</span><br><span class="line">lz[rt]=<span class="number">1</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(id==<span class="number">1</span>)&#123; <span class="comment">//æ¸…ç©º </span></span><br><span class="line">sum[rt]=lc[rt]=rc[rt]=r-l+<span class="number">1</span>;</span><br><span class="line">lz[rt]=<span class="number">2</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">pushdown(rt,l,r);</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) update(L,R,l,m,rt&lt;&lt;<span class="number">1</span>,id);</span><br><span class="line"><span class="keyword">if</span>(R &gt;  m) update(L,R,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,id); </span><br><span class="line">pushup(rt,l,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> num,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)<span class="keyword">return</span> l;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">pushdown(rt,l,r);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> lson=rt&lt;&lt;<span class="number">1</span>,rson=rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(sum[lson]&gt;=num)<span class="keyword">return</span> query(l,m,num,lson);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(rc[lson]+lc[rson]&gt;=num) <span class="keyword">return</span> m-rc[lson]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(sum[rson]&gt;=num) <span class="keyword">return</span> query(m+<span class="number">1</span>,r,num,rson);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">SC(n,m);</span><br><span class="line">build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> x,y,z;</span><br><span class="line">rep(i,<span class="number">1</span>,m)&#123;</span><br><span class="line">sc(x);</span><br><span class="line"><span class="keyword">if</span>(x==<span class="number">1</span>)&#123;</span><br><span class="line">sc(y);</span><br><span class="line"><span class="keyword">if</span>(sum[<span class="number">1</span>]&lt;y)<span class="built_in">cout</span>&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">int</span> tp=query(<span class="number">1</span>,n,y,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(tp==inf)<span class="built_in">cout</span>&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;tp&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">update(tp,tp+y<span class="number">-1</span>,<span class="number">1</span>,n,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(x==<span class="number">2</span>)&#123;</span><br><span class="line">SC(y,z);</span><br><span class="line">update(y,y+z<span class="number">-1</span>,<span class="number">1</span>,n,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure><h1 id="çº¿æ®µæ ‘æ‰«æçº¿"><a class="markdownIt-Anchor" href="#çº¿æ®µæ ‘æ‰«æçº¿"></a> çº¿æ®µæ ‘+æ‰«æçº¿</h1><h3 id="ä¸€ç¯‡è®²çš„å¾ˆä¸é”™çš„åšå®¢"><a class="markdownIt-Anchor" href="#ä¸€ç¯‡è®²çš„å¾ˆä¸é”™çš„åšå®¢"></a> <a href="https://blog.csdn.net/xianpingping/article/details/83032798">ä¸€ç¯‡è®²çš„å¾ˆä¸é”™çš„åšå®¢</a></h3><h2 id="jhdu-1542-atlantis"><a class="markdownIt-Anchor" href="#jhdu-1542-atlantis"></a> J.<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1542">hdu 1542 Atlantis</a></h2><p><strong>é¢˜æ„ï¼šå°±æ˜¯æ±‚çŸ©é˜µçš„é¢ç§¯å¹¶ã€‚</strong></p><p><strong>æ€è·¯ï¼šæˆ‘åœ¨åšè¿™é¢˜æ—¶è¿˜æ²¡æœ‰çœ‹åˆ°ä¸Šé¢é‚£ç¯‡åšå®¢ï¼Œçœ‹çš„å¦ä¸€ç¯‡<a href="https://blog.csdn.net/Merry_hj/article/details/77100290">æˆ³æˆ‘</a>ï¼Œä¹Ÿè®²å¾ˆå¥½ï¼Œä¸è¿‡å°±æ˜¯æ‰«æçš„æ–¹å¼æœ‰ç‚¹ä¸åŒï¼Œå°±æ˜¯å…ˆæŒ‰ç…§å‡ºç°çš„yåæ ‡å°†æ¨ªå‘åˆ†ä¸ºä¸€ä¸ªä¸ªå•å…ƒéƒ¨åˆ†(ä¸å¯å†åˆ†)ï¼Œç„¶åç”±xä»å°åˆ°å¤§ï¼Œç”¨ç«–çº¿æ‰«æã€‚ç»“æ„ä½“ä¸­çš„xå°±æ˜¯ä¸Šä¸€ä¸ªæ¥åˆ°è¿™ä¸ªåŒºé—´çš„xã€‚çº¿æ®µæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹çš„cntï¼Œå¦‚æœcnt=0æ—¶,è¡¨ç¤ºè¯¥èŠ‚ç‚¹æ§åˆ¶çš„èŒƒå›´æ²¡æœ‰è¢«è¦†ç›–,åªè¦cnt!=0(cntä¸å¯èƒ½å°äº0ï¼Œå…¶å®å°±æ˜¯å¤§äº0) å°±è¡¨ç¤ºè¯¥èŠ‚ç‚¹æ§åˆ¶çš„å‡ å—åŒºé—´ä»ç„¶è¢«è¦†ç›–ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">500</span>;</span><br><span class="line"><span class="keyword">double</span> y[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">double</span> low,up,x;</span><br><span class="line"><span class="keyword">int</span> cnt;</span><br><span class="line"><span class="keyword">bool</span> fg;</span><br><span class="line">&#125;tree[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">tdd</span>&#123;</span></span><br><span class="line"><span class="keyword">double</span> x,y_low,y_up;</span><br><span class="line"><span class="keyword">int</span> fg;</span><br><span class="line">&#125;line[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line">tree[rt].cnt=<span class="number">0</span>,tree[rt].x=<span class="number">0</span>,tree[rt].fg=<span class="number">0</span>;</span><br><span class="line">tree[rt].low=y[l],tree[rt].up=y[r];</span><br><span class="line"><span class="comment">//cout&lt;&lt;l&lt;&lt;&quot; &quot;&lt;&lt;r&lt;&lt;&quot; &quot;&lt;&lt;rt&lt;&lt;&quot; lowup &quot;&lt;&lt;tree[rt].low&lt;&lt;&quot; &quot;&lt;&lt;tree[rt].up&lt;&lt;endl;</span></span><br><span class="line"><span class="keyword">if</span>((l+<span class="number">1</span>)==r)&#123;</span><br><span class="line">tree[rt].fg=<span class="number">1</span>; <span class="comment">//æœ€å°åŒºé—´ </span></span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">build(m,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>); </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">query</span><span class="params">(<span class="keyword">double</span> nx,<span class="keyword">double</span> nlow,<span class="keyword">double</span> nup,<span class="keyword">int</span> rt,<span class="keyword">int</span> nfg)</span></span>&#123;</span><br><span class="line"><span class="comment">//cout&lt;&lt;&quot;query &quot;&lt;&lt;tree[rt].low&lt;&lt;&quot; &quot;&lt;&lt;tree[rt].up&lt;&lt;endl;</span></span><br><span class="line"><span class="keyword">if</span>(nlow&gt;=tree[rt].up || nup&lt;=tree[rt].low)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(tree[rt].fg)&#123;</span><br><span class="line"><span class="keyword">double</span> rs=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(tree[rt].cnt&gt;<span class="number">0</span>)&#123;</span><br><span class="line">rs=(nx-tree[rt].x)*(tree[rt].up-tree[rt].low);</span><br><span class="line">tree[rt].cnt+=nfg;</span><br><span class="line">tree[rt].x=nx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">tree[rt].cnt+=nfg;</span><br><span class="line">tree[rt].x=nx;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> rs;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">double</span> ans=<span class="number">0</span>;</span><br><span class="line">ans+=query(nx,nlow,nup,rt&lt;&lt;<span class="number">1</span>,nfg);</span><br><span class="line">ans+=query(nx,nlow,nup,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,nfg);</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(tdd a,tdd b)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a.x&lt;b.x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> count=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n &amp;&amp; n)&#123;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">double</span> x1,y1,x2,y2;</span><br><span class="line">rep(i,<span class="number">1</span>,n)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x1&gt;&gt;y1&gt;&gt;x2&gt;&gt;y2;</span><br><span class="line">y[++cnt]=y1;</span><br><span class="line">line[cnt]=tdd&#123;x1,y1,y2,<span class="number">1</span>&#125;;</span><br><span class="line">y[++cnt]=y2;</span><br><span class="line">line[cnt]=tdd&#123;x2,y1,y2,<span class="number">-1</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line">sort(y+<span class="number">1</span>,y+<span class="number">1</span>+cnt);</span><br><span class="line">sort(line+<span class="number">1</span>,line+<span class="number">1</span>+cnt,cmp);</span><br><span class="line">build(<span class="number">1</span>,cnt,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">double</span> ans=<span class="number">0</span>;</span><br><span class="line">rep(i,<span class="number">1</span>,cnt)&#123;</span><br><span class="line">ans+=query(line[i].x,line[i].y_low,line[i].y_up,<span class="number">1</span>,line[i].fg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Test case #&quot;</span>&lt;&lt;(++count)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Total explored area: %.2lf\n\n&quot;</span>,ans);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="khdu-1828-picture"><a class="markdownIt-Anchor" href="#khdu-1828-picture"></a> K.<a href="http://acm.hdu.edu.cn/showproblem.php?pid=1828">hdu 1828 Picture</a></h2><p><strong>é¢˜æ„ï¼šçŸ©å½¢çš„å‘¨é•¿å¹¶ã€‚</strong></p><p><strong>æ€è·¯ï¼šåªä¼šè ¢å¾—æ‰«ä¸¤éçš„æ–¹æ³•ï¼Œä¸€éç®—æ¨ªå‘çš„é•¿ï¼Œä¸€éç®—çºµå‘çš„é•¿ã€‚å…ˆå°†yåæ ‡æŠ•å½±åˆ°yè½´ï¼Œç„¶åæŒ‰ç…§xä»å°åˆ°å¤§ï¼Œç”¨ç«–çº¿æ‰«æã€‚</strong></p><p><strong>ç¬¬ä¸€æ¡çº¿çš„ç»“æœç›´æ¥åŠ ä¸Šï¼Œä¹‹åç­”æ¡ˆåŠ ä¸Šæ¯æ¬¡tree[1].sumçš„å˜åŒ–å€¼å³å¯ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> x[maxn&lt;&lt;<span class="number">1</span>],y[maxn&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">rec</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> k,l,r,fg;</span><br><span class="line">&#125; a[maxn&lt;&lt;<span class="number">1</span>],b[maxn&lt;&lt;<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(rec a,rec b)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a.k&lt;b.k;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> sum,l,r,cnt;</span><br><span class="line">&#125; tree[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r)tree[rt].sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(tree[rt].cnt&gt;<span class="number">0</span>)tree[rt].sum=tree[rt].r-tree[rt].l;</span><br><span class="line"><span class="keyword">else</span> tree[rt].sum=tree[rt&lt;&lt;<span class="number">1</span>].sum+tree[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> *t)</span> </span>&#123;</span><br><span class="line">tree[rt].cnt=<span class="number">0</span>;</span><br><span class="line">tree[rt].l=t[l],tree[rt].r=t[r];</span><br><span class="line">pushup(rt,l,r);</span><br><span class="line"><span class="keyword">if</span>(l==r || (l+<span class="number">1</span>)==r) <span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(l,m,rt&lt;&lt;<span class="number">1</span>,t);</span><br><span class="line">build(m,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt,<span class="keyword">int</span> fg)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==tree[rt].l &amp;&amp; r==tree[rt].r) &#123; </span><br><span class="line">tree[rt].cnt+=fg;</span><br><span class="line">pushup(rt,l,r);</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(l&gt;=tree[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].l) update(l,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,fg);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(r&lt;=tree[rt&lt;&lt;<span class="number">1</span>].r) update(l,r,rt&lt;&lt;<span class="number">1</span>,fg);</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">update(l,tree[rt&lt;&lt;<span class="number">1</span>].r,rt&lt;&lt;<span class="number">1</span>,fg);</span><br><span class="line">update(tree[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].l,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,fg);</span><br><span class="line">&#125;</span><br><span class="line">pushup(rt,l,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,x1,x2,y1,y2;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(sc(n)!=EOF) &#123;</span><br><span class="line">rep(i,<span class="number">1</span>,n) &#123;</span><br><span class="line">SC(x1,y1),SC(x2,y2);</span><br><span class="line">x[i]=x1,x[i+n]=x2;</span><br><span class="line">y[i]=y1,y[i+n]=y2;</span><br><span class="line">a[i<span class="number">-1</span>]=rec &#123;x1,y1,y2,<span class="number">1</span>&#125;;</span><br><span class="line">a[i+n<span class="number">-1</span>]=rec &#123;x2,y1,y2,<span class="number">-1</span>&#125;;</span><br><span class="line">b[i<span class="number">-1</span>]=rec &#123;y1,x1,x2,<span class="number">1</span>&#125;;</span><br><span class="line">b[i+n<span class="number">-1</span>]=rec &#123;y2,x1,x2,<span class="number">-1</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line">sort(x+<span class="number">1</span>,x+<span class="number">2</span>*n+<span class="number">1</span>);</span><br><span class="line">sort(y+<span class="number">1</span>,y+<span class="number">2</span>*n+<span class="number">1</span>);</span><br><span class="line">sort(a,a+<span class="number">2</span>*n,cmp);</span><br><span class="line">sort(b,b+<span class="number">2</span>*n,cmp);</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>,pre;</span><br><span class="line"><span class="keyword">int</span> leny=unique(y+<span class="number">1</span>,y+<span class="number">2</span>*n+<span class="number">1</span>)-(y+<span class="number">1</span>),lenx=unique(x+<span class="number">1</span>,x+<span class="number">2</span>*n+<span class="number">1</span>)-(x+<span class="number">1</span>);</span><br><span class="line">build(<span class="number">1</span>,leny,<span class="number">1</span>,y);</span><br><span class="line">update(a[<span class="number">0</span>].l,a[<span class="number">0</span>].r,<span class="number">1</span>,a[<span class="number">0</span>].fg);</span><br><span class="line">ans+=tree[<span class="number">1</span>].sum;</span><br><span class="line">pre=tree[<span class="number">1</span>].sum;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;<span class="number">2</span>*n; ++i) &#123;</span><br><span class="line">update(a[i].l,a[i].r,<span class="number">1</span>,a[i].fg);</span><br><span class="line">ans+=<span class="built_in">abs</span>(tree[<span class="number">1</span>].sum-pre);</span><br><span class="line">pre=tree[<span class="number">1</span>].sum;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">build(<span class="number">1</span>,lenx,<span class="number">1</span>,x);</span><br><span class="line">update(b[<span class="number">0</span>].l,b[<span class="number">0</span>].r,<span class="number">1</span>,b[<span class="number">0</span>].fg);</span><br><span class="line">ans+=tree[<span class="number">1</span>].sum;</span><br><span class="line">pre=tree[<span class="number">1</span>].sum;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;<span class="number">2</span>*n; ++i) &#123;</span><br><span class="line">update(b[i].l,b[i].r,<span class="number">1</span>,b[i].fg);</span><br><span class="line">ans+=<span class="built_in">abs</span>(tree[<span class="number">1</span>].sum-pre);</span><br><span class="line">pre=tree[<span class="number">1</span>].sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> ä¸“é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) E. Maximum Subsequence (æŠ˜åŠæœç´¢)</title>
      <link href="2019/04/18/(CodeForces)%20E.%20Maximum%20Subsequence/"/>
      <url>2019/04/18/(CodeForces)%20E.%20Maximum%20Subsequence/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://codeforces.com/contest/888/problem/E">ä¼ é€é—¨</a></h1><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> ä¸€å¼€å§‹å¹¶ä¸çŸ¥é“æŠ˜åŠæœç´¢è¿™ä¸ªç®—æ³•ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¸çŸ¥é“å°†2^35 è¿™ä¹ˆå¤šç§æƒ…å†µå‹ç¼©ï¼Œåœ¨1e9çš„å¤æ‚åº¦è§£å†³å‡ºæ¥ï¼ŒæŠ˜åŠæœç´¢å°±æ˜¯å°†åºåˆ—aåˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«å»è§£å†³æ¯ä¸ªéƒ¨åˆ†çš„å­é›†ï¼Œé‚£ä¹Ÿå°±æœ€å¤š2^18ä¸­æƒ…å†µã€‚ç„¶åå½“æˆ‘ä»¬é€‰ä¸­ä¸€éƒ¨åˆ†çš„ä¸€ä¸ªå­é›†xæ—¶ï¼Œå»ç¬¬äºŒä¸ªéƒ¨åˆ†ä¸­æ‰¾å°äºm-xæœ€å¤§çš„(äºŒåˆ†)ï¼Œè¿™æ ·å°±å®Œç¾è§£å†³äº†ï¼Œå–µå•Šã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1</span>&lt;&lt;<span class="number">18</span>+<span class="number">5</span>;</span><br><span class="line">ll n,m,a[<span class="number">40</span>],ta[maxn],tb[maxn],cnta,cntb;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(ll sum,ll step,<span class="keyword">bool</span> fg)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(fg &amp;&amp; step==n/<span class="number">2</span>+<span class="number">1</span>) &#123;</span><br><span class="line">ta[cnta++]=sum%m;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(!fg &amp;&amp; step==n+<span class="number">1</span>) &#123;</span><br><span class="line">tb[cntb++]=sum%m;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line">dfs(sum+a[step],step+<span class="number">1</span>,fg);</span><br><span class="line">dfs(sum,step+<span class="number">1</span>,fg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">rep(i,<span class="number">1</span>,n)<span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">dfs(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">dfs(<span class="number">0</span>,n/<span class="number">2</span>+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">ll ans=<span class="number">0</span>,tp;</span><br><span class="line">sort(ta,ta+cnta),sort(tb,tb+cntb);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;cnta; ++i) &#123;</span><br><span class="line">tp=m-ta[i];</span><br><span class="line">ll x=lower_bound(tb,tb+cntb,tp)-tb;</span><br><span class="line"><span class="keyword">if</span>(x==<span class="number">0</span>)ans=max(ta[i],ans);</span><br><span class="line"><span class="keyword">else</span> ans=max(ans,ta[i]+tb[x<span class="number">-1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ˜åŠæœç´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) D. Kefa and Dishes (çŠ¶å‹dp)</title>
      <link href="2019/04/12/(CodeForces)%20D.%20Kefa%20and%20Dishes/"/>
      <url>2019/04/12/(CodeForces)%20D.%20Kefa%20and%20Dishes/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://codeforces.com/problemset/problem/580/D">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> æœ‰nä¸ªèœï¼Œæ¯ä¸ªèœåªèƒ½åƒä¸€æ¬¡ï¼Œæœ€å¤šåƒmä¸ªï¼Œæ¯ç›˜èœéƒ½æœ‰ä¸€ä¸ªå¿«ä¹å€¼ï¼Œåƒèœçš„å…ˆåé¡ºåºä¹Ÿä¼šå¢åŠ å¿«ä¹å€¼ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> ä¸€å¼€å§‹å°è¯•ç”¨æœ€å°è´¹ç”¨æœ€å¤§æµï¼Œæœ€åå»ºäº†ä¸€ä¸ªå¾ˆå¤æ‚çš„å›¾ï¼Œå‘ç°å¹¶ä¸æ˜¯å¾ˆå¥½å»ºå‡ºæ¥ï¼Œé‚æ”¾å¼ƒï¼Œåæ¥çœ‹äº†åˆ«äººçš„å†™æ³•çŠ¶å‹dpï¼Œå¤ªèœäº†å•Šã€‚dp[i] [j],iäºŒè¿›åˆ¶ä»£è¡¨ç°åœ¨åƒçš„èœçš„çŠ¶æ€ï¼Œ1ä»£è¡¨åƒäº†ï¼Œ0ä»£è¡¨æ²¡åƒï¼Œjä»£è¡¨æœ€ååƒçš„jï¼Œè¿™æ ·è¾¾åˆ°çš„æœ€é«˜å¿«ä¹å€¼ã€‚</p><p>ç”±å½“å‰çš„dp[s] [j],å¯ä»¥å»æ›´æ–°åé¢çš„çŠ¶æ€ï¼Œåœ¨sä¸­é€‰ä¸€ä¸ªå·²åƒçš„iï¼Œå†åœ¨æ²¡åƒçš„ä¸­é€‰ä¸€ä¸ªjå°è¯•æ›´æ–°ï¼ŒåŠ¨æ€è½¬ç§»æ–¹ç¨‹å°±æ˜¯ ns=s|(1&lt;&lt;j);</p><p>dp[ns] [j]=max(dp[ns] [j],dp[s] [i]+st[j]+add[i] [j]); å½“sä¸­æœ‰mä¸ª1æ—¶å°±å¯ä»¥æ›´æ–°ç­”æ¡ˆäº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,k;</span><br><span class="line"><span class="keyword">int</span> st[<span class="number">20</span>],add[<span class="number">20</span>][<span class="number">20</span>];</span><br><span class="line">ll dp[(<span class="number">1</span>&lt;&lt;<span class="number">18</span>)+<span class="number">5</span>][<span class="number">20</span>]; <span class="comment">//çŠ¶æ€ï¼Œæœ€ååƒçš„æ˜¯jçš„æœ€é«˜å¿«ä¹ </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;k;</span><br><span class="line">rep(i,<span class="number">0</span>,n<span class="number">-1</span>)<span class="built_in">cin</span>&gt;&gt;st[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,x,y,z;i&lt;=k;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line">add[x<span class="number">-1</span>][y<span class="number">-1</span>]=z;</span><br><span class="line">&#125;</span><br><span class="line">rep(i,<span class="number">0</span>,n<span class="number">-1</span>)dp[(<span class="number">1</span>&lt;&lt;i)][i]=st[i];</span><br><span class="line">ll ans=<span class="number">0</span>,tot=(<span class="number">1</span>&lt;&lt;<span class="number">18</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> s=<span class="number">0</span>;s&lt;tot;++s)&#123;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(s&amp;(<span class="number">1</span>&lt;&lt;i))&#123;</span><br><span class="line">cnt++;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;++j)&#123; <span class="comment">//æœªé€‰çš„jæ”¾åœ¨iåé¢åƒ </span></span><br><span class="line"><span class="keyword">if</span>((s&amp;(<span class="number">1</span>&lt;&lt;j))==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">int</span> ns=s|(<span class="number">1</span>&lt;&lt;j);</span><br><span class="line">dp[ns][j]=max(dp[ns][j],dp[s][i]+st[j]+add[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cnt==m)&#123;</span><br><span class="line">rep(j,<span class="number">0</span>,n<span class="number">-1</span>)ans=max(ans,dp[s][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> çŠ¶å‹dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) F. Clique in the Divisibility Graph ï¼ˆdpï¼‰</title>
      <link href="2019/04/12/(CodeForces)%20F.%20Clique%20in%20the%20Divisibility%20Graph/"/>
      <url>2019/04/12/(CodeForces)%20F.%20Clique%20in%20the%20Divisibility%20Graph/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://codeforces.com/problemset/problem/566/F">ä¼ é€é—¨</a></h1><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ç»™å‡ºä¸€ä¸ªæ•°ç»„åºåˆ—ï¼Œè¦æ±‚æœ€é•¿çš„æˆå€å¢é•¿(å€æ•°ä¸éœ€è¦ç›¸åŒ)çš„åºåˆ—ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> é¦–å…ˆè¿™è‚¯å®šæ˜¯ä¸ªdpï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªåºåˆ—å…ˆæ’åºï¼Œå¦‚æœæˆ‘ä»¬è€ƒè™‘a[i],é‚£ä»–å¯ä»¥ä»ä»–çš„å› å­è½¬ç§»è¿‡æ¥ï¼Œä½†æ˜¯è¿™æ ·æ¯ä¸ªéƒ½è¦ç®—ä¸ªå› å­ï¼Œæˆæœ¬å¤ªå¤§ï¼Œæˆ‘ä»¬ä¸å¦‚ä»å½“å‰è¿™ä¸ªa[i]å¾€åæ¨ï¼Œå€æ•°çš„å¢é•¿ï¼ŒçŸ¥é“è¶…è¿‡åºåˆ—çš„æœ€å¤§å€¼ï¼Œè¿™æ ·å°±æ˜¯ä¸€ä¸ªlogçš„å¤æ‚åº¦äº†ï¼Œnum[j]ä»£è¡¨ä»¥jç»“å°¾çš„æ»¡è¶³é¢˜æ„çš„æœ€é•¿é•¿åº¦ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> num[maxn],a[maxn],n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">rep(i,<span class="number">1</span>,n)<span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">sort(a+<span class="number">1</span>,a+<span class="number">1</span>+n);</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">num[a[i]]+=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">2</span>*a[i]; j&lt;=a[n]; j+=a[i])&#123;</span><br><span class="line">num[j]=max(num[j],num[a[i]]);</span><br><span class="line">&#125;</span><br><span class="line">ans=max(ans, num[a[i]]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†è§£è´¨å› å­</title>
      <link href="2019/04/08/%E5%88%86%E8%A7%A3%E8%B4%A8%E5%9B%A0%E5%AD%90/"/>
      <url>2019/04/08/%E5%88%86%E8%A7%A3%E8%B4%A8%E5%9B%A0%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<p>æ±‚ä¸€ä¸ªæ•°åˆ†è§£è´¨å› æ•°ï¼Œè¦ä»æœ€å°çš„è´¨æ•°é™¤èµ·ï¼Œä¸€ç›´é™¤åˆ°ç»“æœä¸ºè´¨æ•°ä¸ºæ­¢ã€‚ç„¶åè¶…è¿‡æ ¹å·nçš„ç´ å› å­æœ€å¤šåªæœ‰ä¸€ä¸ªï¼Œå› ä¸ºä¸¤ä¸ªå°±è¶…è¿‡näº†ã€‚æ‰€ä»¥i*i&lt;=tnå³å¯ï¼Œæœ€ååœ¨çœ‹ä¸€ä¸‹è¿™ä¸ªtnæ˜¯ä¸æ˜¯1ï¼Œä¸æ˜¯çš„è¯ï¼Œé‚£å®ƒä¹Ÿæ˜¯ä¸ªç´ å› å­ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; p;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">resolve</span><span class="params">(ll n)</span></span>&#123;</span><br><span class="line">ll tn=n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i*i&lt;=tn;++i)&#123;</span><br><span class="line"><span class="keyword">while</span>(tn%i==<span class="number">0</span>)&#123;</span><br><span class="line">p.push_back(i);</span><br><span class="line">tn/=i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(tn!=<span class="number">1</span>)p.push_back(tn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">ll n;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n)&#123;</span><br><span class="line">p.clear();</span><br><span class="line">resolve(n);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;ç´ å› å­ä¸ªæ•° &quot;</span>&lt;&lt;p.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;p.size();++i)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;p[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) Round 550 (Div. 3) (å…¨)</title>
      <link href="2019/04/01/(CodeForces)%20Round550/"/>
      <url>2019/04/01/(CodeForces)%20Round550/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://codeforces.com/contest/1144">ä¼ é€é—¨</a></h1><h3 id="a-diverse-strings"><a class="markdownIt-Anchor" href="#a-diverse-strings"></a> A. Diverse Strings</h3><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> å…ˆå¯¹å­—ç¬¦ä¸²æ’åºç„¶ååˆ¤æ–­ä¸€ä¸‹å°±è¡Œäº†ã€‚B. Parity Alternated Deletions</p><p>***è§£é¢˜æ€è·¯ï¼š***å¦‚æœå¥‡æ•°ä¸ªæ•°å’Œå¶æ•°ä¸ªæ•°ç›¸å·®ä¸è¶…è¿‡1ï¼Œé‚£å°±æ˜¯å¯ä»¥å–å®Œçš„ï¼Œåä¹‹æˆ‘ä»¬å»ä¸æ‰çš„ï¼Œé‚£å°±å‰©ä¸‹å°çš„å°±å¥½äº†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">pd</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">sort(s.begin(),s.end());</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;sz(s);++i) <span class="keyword">if</span> (s[i]!=s[i<span class="number">-1</span>]+<span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">rep(i,<span class="number">1</span>,n) &#123;</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;s;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;(pd(s)? <span class="string">&quot;Yes\n&quot;</span> : <span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="b-parity-alternated-deletions"><a class="markdownIt-Anchor" href="#b-parity-alternated-deletions"></a> B. Parity Alternated Deletions</h3><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> å¦‚æœå¥‡æ•°ä¸ªæ•°å’Œå¶æ•°ä¸ªæ•°ç›¸å·®ä¸è¶…è¿‡1ï¼Œé‚£å°±æ˜¯å¯ä»¥å–å®Œçš„ï¼Œåä¹‹æˆ‘ä»¬å»ä¸æ‰çš„ï¼Œé‚£å°±å‰©ä¸‹å°çš„å°±å¥½äº†.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; even,odd;</span><br><span class="line"><span class="keyword">int</span> n,tp;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">rep(i,<span class="number">1</span>,n) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>(tp&amp;<span class="number">1</span>)odd.pb(tp);</span><br><span class="line"><span class="keyword">else</span> even.pb(tp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">abs</span>(sz(odd)-sz(even))&lt;=<span class="number">1</span>)<span class="built_in">cout</span>&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">ll sum=<span class="number">0</span>;</span><br><span class="line">sort(odd.begin(),odd.end());</span><br><span class="line">sort(even.begin(),even.end());</span><br><span class="line"><span class="keyword">if</span>(sz(odd)&gt;sz(even))rep(i,<span class="number">0</span>,sz(odd)-sz(even)<span class="number">-2</span>)sum+=odd[i];</span><br><span class="line"><span class="keyword">else</span>rep(i,<span class="number">0</span>,sz(even)-sz(odd)<span class="number">-2</span>)sum+=even[i];</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;sum&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="c-two-shuffled-sequences"><a class="markdownIt-Anchor" href="#c-two-shuffled-sequences"></a> C. Two Shuffled Sequences</h3><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> ä¸€ä¸ªå…ƒç´ ä¸ªæ•°è¶…è¿‡3ä¸ªé‚£è‚¯å®šä¸èƒ½åˆ†æˆä¸¤ä¸ªæ»¡è¶³æ¡ä»¶çš„åºåˆ—ï¼Œå¦‚æœä¸¤ä¸ªä¸€æ ·çš„å…ƒç´ é‚£å°±æ¯ä¸ªåºåˆ—æ”¾ä¸€ä¸ªï¼Œåä¹‹æ”¾å“ªä¸ªéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæœ€åæ’ä¸ªåºå°±è¡Œäº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d%d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,tp;</span><br><span class="line"><span class="keyword">bool</span> f1,f2;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; num; </span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; de,inde;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">rep(i,<span class="number">1</span>,n)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>(++num[tp]&gt;=<span class="number">3</span>)f1=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(num[tp]==<span class="number">2</span>)f2=<span class="number">1</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span>(f1)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;NO&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(!f2)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;YES&quot;</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;num.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it=num.begin();it!=num.end();++it)<span class="built_in">cout</span>&lt;&lt;it-&gt;fi&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it=num.begin();it!=num.end();++it)&#123;</span><br><span class="line"><span class="keyword">if</span>(it-&gt;se==<span class="number">2</span>)de.pb(it-&gt;fi),inde.pb(it-&gt;fi);</span><br><span class="line"><span class="keyword">else</span>de.pb(it-&gt;fi);</span><br><span class="line">&#125;</span><br><span class="line">sort(de.begin(),de.end());</span><br><span class="line">sort(inde.begin(),inde.end(),greater&lt;<span class="keyword">int</span>&gt;() );</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;YES&quot;</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;de.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">rep(i,<span class="number">0</span>,sz(de)<span class="number">-1</span>)<span class="built_in">cout</span>&lt;&lt;de[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;inde.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">rep(i,<span class="number">0</span>,sz(inde)<span class="number">-1</span>)<span class="built_in">cout</span>&lt;&lt;inde[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="d-equalize-them-all"><a class="markdownIt-Anchor" href="#d-equalize-them-all"></a> D. Equalize Them All</h3><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è®©æ‰€æœ‰çš„æ•°å­—å˜æˆé‚£ä¸ªå‡ºç°é¢‘ç‡æœ€é«˜çš„æ•°æ— ç–‘æ˜¯æ­¥æ•°æœ€å°‘çš„ï¼Œé¢˜å¹²ä¸­çš„é‚£æ­¥æ“ä½œï¼Œå…¶å®å°±æ˜¯ä½¿ä¸¤ä¸ªæ•°å­—ç›¸åŒï¼Œå¤§äº†é‚£å°±å‡å»å·®ï¼Œå°äº†é‚£å°±åŠ ä¸Šå·®ï¼Œæ‰€æœ‰åªè¦ä»å‡ºç°é¢‘ç‡æœ€é«˜çš„é‚£ä¸ªæ•°å­—å¼€å§‹å¾€ä¸¤è¾¹èµ°å°±è¡Œäº†ï¼Œå¤§äº†å°±2æ“ä½œï¼Œå°äº†å°±1æ“ä½œã€‚ï¼ˆä¸éœ€è¦åƒä»£ç è¿˜æ‰¾ä¸ªåŒºé—´ï¼Œå†™çƒ¦äº†ï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,a[maxn],le=<span class="number">1</span>,ri=<span class="number">1</span>,num,id;</span><br><span class="line"><span class="keyword">int</span> co[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> x,i,j;</span><br><span class="line">&#125;ans[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">rep(i,<span class="number">1</span>,n)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">co[a[i]]++;</span><br><span class="line"><span class="keyword">if</span>(co[a[i]]&gt;num)&#123;</span><br><span class="line">num=co[a[i]];</span><br><span class="line">id=a[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[i]==id)&#123;</span><br><span class="line"><span class="keyword">int</span> j;</span><br><span class="line"><span class="keyword">for</span>(j=i;j&lt;=n;++j)<span class="keyword">if</span>(a[j]!=id)<span class="keyword">break</span>;</span><br><span class="line">le=i,ri=j<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=le<span class="number">-1</span>;i&gt;=<span class="number">1</span>;--i)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[i]&gt;id)ans[++cnt]=node&#123;<span class="number">2</span>,i,i+<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(a[i]&lt;id)ans[++cnt]=node&#123;<span class="number">1</span>,i,i+<span class="number">1</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=ri+<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[i]&gt;id) ans[++cnt]=node&#123;<span class="number">2</span>,i,i<span class="number">-1</span>&#125;;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(a[i]&lt;id)ans[++cnt]=node&#123;<span class="number">1</span>,i,i<span class="number">-1</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;cnt&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">rep(i,<span class="number">1</span>,cnt)<span class="built_in">cout</span>&lt;&lt;ans[i].x&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;ans[i].i&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;ans[i].j&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="e-median-string"><a class="markdownIt-Anchor" href="#e-median-string"></a> E. Median String</h3><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> å¦‚æœç»™æˆ‘ä»¬ä¸¤ä¸ªæ•°æ±‚ä»–ä»¬ä¸­é—´çš„é‚£ä¸ªæ•°ï¼Œæˆ‘ä»¬éƒ½ä¼šæ±‚ï¼ŒåŠ èµ·æ¥é™¤2å°±è¡Œäº†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå­—ç¬¦ä¸²çœ‹æˆ26è¿›åˆ¶ä¸å°±è¡Œäº†å˜›ã€‚æ¨¡æ‹Ÿ26è¿›åˆ¶è®¡ç®—ï¼Œæœ€ååœ¨è½¬åŒ–å›å­—ç¬¦ä¸²å°±è¡Œäº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e5</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> n,sum[maxn];</span><br><span class="line"><span class="built_in">string</span> a,b;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; mp;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;a&gt;&gt;b;</span><br><span class="line"><span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">char</span> x=<span class="string">&#x27;a&#x27;</span>;x&lt;=<span class="string">&#x27;z&#x27;</span>;++x)&#123;</span><br><span class="line">mp[x]=i,mp[i]=x,++i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> cur=<span class="number">0</span>,tp,cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=sz(a)<span class="number">-1</span>;i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line">tp=mp[a[i]]+mp[b[i]]+cur;</span><br><span class="line">sum[cnt]=tp%<span class="number">26</span>;</span><br><span class="line">cur=tp/<span class="number">26</span>;</span><br><span class="line">cnt++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cur)sum[cnt]=cur;</span><br><span class="line"><span class="keyword">else</span>cnt--;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=cnt;i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line"><span class="keyword">if</span>(sum[i]&amp;<span class="number">1</span>)sum[i<span class="number">-1</span>]+=<span class="number">26</span>;</span><br><span class="line">sum[i]/=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cnt&gt;n<span class="number">-1</span>)cnt--;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=cnt;i&gt;=<span class="number">0</span>;--i)<span class="built_in">cout</span>&lt;&lt;<span class="keyword">char</span>(mp[sum[i]]);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="f-graph-without-long-directed-paths"><a class="markdownIt-Anchor" href="#f-graph-without-long-directed-paths"></a> F. Graph Without Long Directed Paths</h3><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> åˆ†æé¢˜æ„ï¼Œä¸èƒ½æœ‰&gt;=2çš„è·¯å¾„ï¼Œå…¶å®å°±æ˜¯æ¯ä¸ªç‚¹çš„è¾¹ï¼Œè¦ä¸å°±æ˜¯å…¨éƒ¨æŒ‡å‘å®ƒï¼Œè¦ä¸ç„¶å°±æ˜¯å…¨éƒ¨ä»å®ƒå‡ºå»ã€‚è¿™æ ·å°±ä¸ä¼šæœ‰&gt;=2çš„è·¯å¾„å‡ºç°äº†ã€‚ç„¶åæˆ‘ä»¬ç”¨æœç´¢å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å†™çš„æ¯”è¾ƒå•°å—¦â€¦ä¸§ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e5</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">bool</span> ans[maxn],vis[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> id,x,y;</span><br><span class="line"><span class="keyword">bool</span> fg;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; mp[maxn];</span><br><span class="line"><span class="keyword">bool</span> pd=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> np,<span class="keyword">bool</span> fg)</span></span>&#123; <span class="comment">//å½“å‰ç‚¹ï¼Œfg=0ä»£è¡¨æ‰€æœ‰çš„è¾¹éƒ½æ˜¯å‡ºè¾¹ï¼Œåä¹‹å…¥è¾¹</span></span><br><span class="line">rep(i,<span class="number">0</span>,sz(mp[np])<span class="number">-1</span>)&#123;</span><br><span class="line">edge tp=mp[np][i];</span><br><span class="line"><span class="keyword">if</span>(pd)<span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span>(!vis[tp.id])&#123;</span><br><span class="line">vis[tp.id]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(tp.x==np &amp;&amp; fg==<span class="number">1</span>)ans[tp.id]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(tp.x==np &amp;&amp; fg==<span class="number">0</span>)ans[tp.id]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(tp.x!=np &amp;&amp; fg==<span class="number">1</span>)ans[tp.id]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(tp.x!=np &amp;&amp; fg==<span class="number">0</span>)ans[tp.id]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(tp.x!=np)  solve(tp.x,fg^<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span> solve(tp.y,fg^<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(fg==<span class="number">1</span> &amp;&amp; tp.x==np &amp;&amp; ans[tp.id]==<span class="number">1</span>)&#123;</span><br><span class="line">pd=<span class="number">1</span>;<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(fg==<span class="number">1</span> &amp;&amp; tp.x!=np &amp;&amp; ans[tp.id]==<span class="number">0</span>)&#123;</span><br><span class="line">pd=<span class="number">1</span>;<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(fg==<span class="number">0</span> &amp;&amp; tp.x==np &amp;&amp; ans[tp.id]==<span class="number">0</span>)&#123;</span><br><span class="line">pd=<span class="number">1</span>;<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(fg==<span class="number">0</span> &amp;&amp; tp.x!=np &amp;&amp; ans[tp.id]==<span class="number">1</span>)&#123;</span><br><span class="line">pd=<span class="number">1</span>;<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line">rep(i,<span class="number">1</span>,m)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">mp[x].pb(edge&#123;i,x,y,<span class="number">0</span>&#125;);</span><br><span class="line">mp[y].pb(edge&#123;i,x,y,<span class="number">0</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line">solve(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(pd)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;NO&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;YES&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">rep(i,<span class="number">1</span>,m)<span class="built_in">cout</span>&lt;&lt;ans[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="g-two-merged-sequences"><a class="markdownIt-Anchor" href="#g-two-merged-sequences"></a> G. Two Merged Sequences</h3><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> å¯¹äºä¸€ä¸ªæ•°å¦‚æœå®ƒåªèƒ½æ”¾ä¸¤ä¸ªé˜Ÿåˆ—ä¹‹ä¸€ï¼Œé‚£æˆ‘å°±å°†å…¶æ”¾å…¥ï¼Œå¦‚æœä¸¤ä¸ªéƒ½ä¸èƒ½ï¼Œé‚£è¿™ä¸ªæ•°åˆ—æ„é€ è‚¯å®šå°±å¤±è´¥äº†ã€‚</p><p>å¦‚æœå®ƒä¸¤ä¸ªé˜Ÿåˆ—éƒ½èƒ½æ”¾å…¥å‘¢ï¼Œé‚£æˆ‘ä»¬å°±çœ‹å®ƒçš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä¼šæœ‰ä¸‰ç§æƒ…å†µï¼Œ1.ç›¸åŒï¼Œé‚£å°±æ¯ä¸ªé˜Ÿåˆ—å¡ä¸€ä¸ªã€‚2.ä¸‹ä¸€ä¸ªå…ƒç´ æ¯”å®ƒå¤§ï¼Œé‚£å°±æŠŠä»–æ”¾åˆ°é€’å¢åºåˆ—ã€‚3.ä¸‹ä¸€ä¸ªå…ƒç´ æ¯”å®ƒå°ï¼Œé‚£å°±æŠŠå®ƒæ”¾åˆ°é€’å‡åºåˆ—ã€‚è¿™æ ·è€ƒè™‘å…¶å®å¯¹å½“å‰å…ƒç´ ä¸ä½œé€‰æ‹©äº†ï¼Œå› ä¸ºæˆ‘ä»¬è¿™æ ·æ”¾ï¼Œå®ƒä¸å½±å“ä¸‹ä¸€ä¸ªå…ƒç´ é€‰æ‹©æ‘†æ”¾ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,a[maxn];</span><br><span class="line"><span class="keyword">bool</span> ans[maxn];</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;<span class="keyword">int</span>,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;,greater&lt;<span class="keyword">int</span>&gt; &gt; inde; <span class="comment">//ä¸‹é™</span></span><br><span class="line"><span class="built_in">priority_queue</span>&lt;<span class="keyword">int</span>&gt; de; <span class="comment">//ä¸Šå‡åºåˆ—</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">rep(i,<span class="number">1</span>,n)<span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line"><span class="keyword">if</span>(n==<span class="number">1</span>)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;YES&quot;</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">de.push(-inf),inde.push(inf);</span><br><span class="line"><span class="keyword">int</span> i=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(a[i+<span class="number">1</span>]&gt;a[i])de.push(a[i]),ans[i]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(a[i+<span class="number">1</span>]&lt;a[i])inde.push(a[i]),ans[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> de.push(a[i]),inde.push(a[++i]),ans[i<span class="number">-1</span>]=<span class="number">0</span>,ans[i]=<span class="number">1</span>;</span><br><span class="line">++i;</span><br><span class="line"><span class="keyword">while</span>(i&lt;=n) &#123;</span><br><span class="line"><span class="keyword">if</span>(a[i]&gt;de.top() &amp;&amp; a[i]&lt;inde.top()) &#123;</span><br><span class="line"><span class="keyword">if</span>(a[i+<span class="number">1</span>]&gt;a[i])de.push(a[i]),ans[i]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(a[i+<span class="number">1</span>]&lt;a[i])inde.push(a[i]),ans[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> de.push(a[i]),inde.push(a[++i]),ans[i<span class="number">-1</span>]=<span class="number">0</span>,ans[i]=<span class="number">1</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(a[i]&gt;de.top())de.push(a[i]),ans[i]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(a[i]&lt;inde.top())inde.push(a[i]),ans[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;NO&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">++i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;YES&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">rep(i,<span class="number">1</span>,n)<span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) E. Maximize Mex (åŒˆç‰™åˆ©)</title>
      <link href="2019/03/30/(CodeForce)%20E.%20Maximize%20Mex/"/>
      <url>2019/03/30/(CodeForce)%20E.%20Maximize%20Mex/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://codeforces.com/contest/1139/problem/E">ä¼ é€é—¨</a></h3><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> æ¯ä¸ªäººéƒ½æœ‰ä¸€ä¸ªæ½œåŠ›å€¼å’Œæ‰€å±çš„ä¿±ä¹éƒ¨ï¼Œä½†æ˜¯å‘¢ï¼Œå­¦æ ¡æ¯å¤©è¦ä¸€ä¸ªäººæ»šå‡ºä¿±ä¹éƒ¨ï¼Œç„¶ååœ¨æ‰€æœ‰çš„ä¿±ä¹éƒ¨å„é€‰ä¸€äººï¼Œç»„æˆä¸€ä¸ªåºåˆ—æ±‚mexï¼Œå°±æ˜¯ç»„æˆçš„åºåˆ—ä¸­æ²¡å‡ºç°çš„æœ€å°è‡ªç„¶æ•°ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> æˆ‘ä»¬å¯ä»¥å»ºä¸€ä¸ªæ½œåŠ›å€¼å’Œä¿±ä¹éƒ¨çš„äºŒåˆ†å›¾ï¼Œæˆ‘ä»¬æ½œåŠ›å€¼ä»ä½åˆ°é«˜åŒ¹é…ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ½œåŠ›å€¼æ— æ³•è¢«åŒ¹é…ï¼Œé‚£è¿™æ¬¡æ‰€æ±‚çš„mexä¸å°±æ˜¯å®ƒäº†å˜›ã€‚æ‰€æœ‰æˆ‘ä»¬å¯ä»¥å°†æŸ¥è¯¢çš„åºåˆ—å€’ç€å¤„ç†ï¼Œä»åå¾€å‰é€ä¸ªå¾€é‡Œé¢åŠ äººï¼Œè¿è¾¹ã€‚æ¯æ¬¡è·‘åŒˆç‰™åˆ©å»å°è¯•åŒ¹é…å°±è¡Œäº†ï¼Œä»åå¾€å‰è‚¯å®šæ˜¯ä¸€ä¸ªä¸é™åºåˆ—äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> match[maxn&lt;&lt;<span class="number">2</span>],belone[maxn],po[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn&lt;&lt;<span class="number">2</span>],pd[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; mp[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)mp[x].size();++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[mp[x][i]])&#123;</span><br><span class="line">vis[mp[x][i]]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(match[mp[x][i]]==<span class="number">-1</span> || dfs(match[mp[x][i]]))&#123;</span><br><span class="line">match[mp[x][i]]=x;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,m,k,qu[maxn],ans[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">ms(match,<span class="number">-1</span>); <span class="comment">//æœ‰0ç½®æˆ-1</span></span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)<span class="built_in">cin</span>&gt;&gt;po[i]; <span class="comment">//æ½œåŠ›å€¼</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)<span class="built_in">cin</span>&gt;&gt;belone[i]; <span class="comment">//å±äºå“ªä¸ªä¿±ä¹éƒ¨</span></span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;k;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;++i)<span class="built_in">cin</span>&gt;&gt;qu[i],pd[qu[i]]=<span class="number">1</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123; <span class="comment">//æ²¡æœ‰è¢«è¸¢çš„åŒå­¦å…ˆè¿è¾¹</span></span><br><span class="line"><span class="keyword">if</span>(!pd[i])&#123;</span><br><span class="line">mp[po[i]].pb(belone[i]+m);</span><br><span class="line">mp[belone[i]+m].pb(po[i]); </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=k;i&gt;=<span class="number">1</span>;--i)&#123;</span><br><span class="line"><span class="keyword">for</span>(;j&lt;m;++j)&#123; <span class="comment">//å…ˆè·‘åŒˆç‰™åˆ©</span></span><br><span class="line">ms(vis,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(!dfs(j))<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">ans[i]=j; </span><br><span class="line">mp[po[qu[i]]].pb(belone[qu[i]]+m); <span class="comment">//åŠ äººè¿è¾¹</span></span><br><span class="line">mp[belone[qu[i]]+m].pb(po[qu[i]]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;++i)<span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŒˆç‰™åˆ© </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>heap å †</title>
      <link href="2019/03/29/heap%E5%A0%86/"/>
      <url>2019/03/29/heap%E5%A0%86/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸ç”¨è‡ªå·±å†™å †å•¦æ‡’äººå¿…å¤‡æ¯”å¦‚æˆ‘"><a class="markdownIt-Anchor" href="#ä¸ç”¨è‡ªå·±å†™å †å•¦æ‡’äººå¿…å¤‡æ¯”å¦‚æˆ‘"></a> ä¸ç”¨è‡ªå·±å†™å †å•¦ï¼Œæ‡’äººå¿…å¤‡ï¼Œæ¯”å¦‚æˆ‘ã€‚</h3><p>æ•´ç†äº†æ“ä½œï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="keyword">return</span> x&gt;y;&#125;<span class="comment">//å°å † æˆ–è€…ç”¨ greater&lt;int&gt;()</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">CMP</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="keyword">return</span> x&lt;y;&#125;<span class="comment">//å¤§å † </span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">int</span> a[]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">-199</span>,<span class="number">122</span>,<span class="number">88</span>&#125;;</span><br><span class="line">vector&lt;int&gt; mx(a,a+5),mi(a,a+5);</span><br><span class="line"><span class="comment">//å»ºå † </span></span><br><span class="line">make_heap(mx.begin(),mx.end());<span class="comment">//é»˜è®¤å¤§å †</span></span><br><span class="line">make_heap(mi.begin(),mi.end(),cmp);<span class="comment">//å°å † </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡ºå †é¡¶</span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;mx.front()&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;mi.front()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å…ƒç´  </span></span><br><span class="line">mx.pb(<span class="number">77</span>),push_heap(mx.begin(),mx.end());</span><br><span class="line">mi.pb(<span class="number">77</span>),push_heap(mi.begin(),mi.end(),cmp); <span class="comment">//æ›´æ–°ä¹Ÿè¦cmpå“¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼¹å‡ºå †é¡¶å…ƒç´ </span></span><br><span class="line">pop_heap(mx.begin(),mx.end()),mx.pop_back(); </span><br><span class="line">pop_heap(mi.begin(),mi.end(),cmp),mi.pop_back(); <span class="comment">//ä¹Ÿè¦åŠ  </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿˜æƒ³å¤šå¤šäº†è§£"><a class="markdownIt-Anchor" href="#è¿˜æƒ³å¤šå¤šäº†è§£"></a> <a href="https://blog.csdn.net/zsc2014030403015/article/details/45872737">è¿˜æƒ³å¤šå¤šäº†è§£</a></h3>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) C. Edgy Trees (å¹¶æŸ¥é›†)</title>
      <link href="2019/03/28/(CodeForce)%20C.%20Edgy%20Trees/"/>
      <url>2019/03/28/(CodeForce)%20C.%20Edgy%20Trees/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¼ é€é—¨"><a class="markdownIt-Anchor" href="#ä¼ é€é—¨"></a> <a href="http://codeforces.com/contest/1139/problem/C">ä¼ é€é—¨</a></h3><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ç»™ä½ ä¸€æ£µæ ‘ï¼Œæœ‰é»‘è¾¹å’Œç´«è¾¹ï¼Œä¸€ç§kä¸ªå…ƒç´ çš„é›†åˆï¼Œa1åˆ°a2èµ°æœ€çŸ­è·¯å¾„â€¦åªè¦ç»è¿‡é»‘è¾¹é‚£å°±æ˜¯å¥½çš„ï¼Œé—®æœ‰å¤šå°‘ä¸ªè¿™ç§é›†åˆã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> ä¸è€ƒè™‘ç´«è¾¹é»‘è¾¹ï¼Œå°±kä¸ªå…ƒç´ çš„é›†åˆï¼Œé‚£æœ‰n^kä¸ªã€‚è€ƒè™‘åˆ°å¦‚æœé‚£ä¸ªé›†åˆéƒ½æ˜¯ä¸€ä¸ªå…¨æ˜¯ç´«è¾¹è”é€šå—é‡Œçš„å…ƒç´ ï¼Œé‚£å¦‚ä½•ä¹Ÿæ˜¯ä¸å¯èƒ½èµ°åˆ°é»‘è¾¹çš„ï¼Œæˆ–è€…æ˜¯åªå’Œé»‘è¾¹è¿æ¥çš„ç‚¹ï¼Œè¿™ä¹Ÿç®—æ˜¯ä¸€ä¸ªè”é€šå—ã€‚é‚£åªè¦æŠŠæ€»å…±çš„å‡å»è¿™äº›ä¸åˆæ³•çš„ï¼Œé‚£å°±æ˜¯æ­£ç¡®çš„äº†ã€‚å‡å»æ¯ä¸ªä¸åˆæ³•è”é€šå—çš„ä¸ªæ•°çš„kæ¬¡æ–¹å³å¯(å°±æ˜¯é›†åˆå…ƒç´ å…¨åœ¨è¿™ä¸ªè”é€šå—ä¸­é€‰)ã€‚æ‰€ä»¥åˆå¹¶çš„æ—¶å€™ï¼Œåªå°†ç´«è¾¹çš„ä¸¤æ®µåˆå¹¶å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll mod=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> n,k,fa[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="built_in">map</span>&lt;ll,ll&gt; mp;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(ll n)</span></span>&#123;<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)fa[i]=i;&#125;</span><br><span class="line"><span class="function">ll <span class="title">find</span><span class="params">(ll x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(fa[x]==x)<span class="keyword">return</span> fa[x];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> fa[x]=find(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unite</span><span class="params">(ll x,ll y)</span></span>&#123;</span><br><span class="line">x=find(x),y=find(y);</span><br><span class="line"><span class="keyword">if</span>(x==y)<span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">else</span> fa[x]=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">mpow</span><span class="params">(ll x,ll n)</span></span>&#123;</span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(n)&#123;</span><br><span class="line"><span class="keyword">if</span>(n&amp;<span class="number">1</span>)ans=(ans*x)%mod;</span><br><span class="line">x=(x*x)%mod;</span><br><span class="line">n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;k;</span><br><span class="line">init(n);</span><br><span class="line"><span class="keyword">int</span> x,y,z;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line"><span class="keyword">if</span>(!z)unite(x,y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)mp[find(i)]++;</span><br><span class="line">ll ans=mpow(n,k);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it=mp.begin();it!=mp.end();++it)&#123;</span><br><span class="line">ans=(ans+mod-mpow(it-&gt;se,k))%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹¶æŸ¥é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(POJ) 2566 Bound Found (å°ºå–æ³•)</title>
      <link href="2019/03/27/(POJ)%202566%20Bound%20Found/"/>
      <url>2019/03/27/(POJ)%202566%20Bound%20Found/</url>
      
        <content type="html"><![CDATA[<p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> å°±æ˜¯åœ¨ç»™ä½ çš„æ•°åˆ—ä¸­å–ä¸€æ®µï¼Œä½¿å®ƒå’Œçš„ç»å¯¹å€¼æœ€æ¥è¿‘äºtï¼Œå¹¶è¾“å‡ºä»–çš„å’Œçš„ç»å¯¹å€¼ï¼ŒåŒºé—´lå’Œrã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> ä¸€å¼€å§‹è¯´è¿™æ˜¯ä¸€é“å°ºå–é¢˜ï¼Œæˆ‘æ˜¯ä¸ä¿¡çš„ï¼Œå› ä¸ºæ²¡æœ‰å‘ç°å•è°ƒæ€§ï¼Œé‚£æˆ‘æ€ä¹ˆå°ºå–å‘¢ï¼Œçœ‹äº†åˆ«äººçš„é¢˜è§£ï¼Œæ‰æç„¶å¤§æ‚Ÿï¼Œå±…ç„¶å¯ä»¥å¯¹å‰ç¼€å’Œsumæ’åºï¼Œå½“ç„¶ä¸‹æ ‡idæ˜¯è¦è®°ä½çš„ã€‚ç„¶åè¿™æ—¶å€™çš„sumå°±æœ‰å•è°ƒæ€§äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨sumä¸Šè¿›è¡Œå°ºå–ã€‚lä¸rï¼Œa[r].sum-a[l].sum å°±æ˜¯ a[l].id+1ä¸a[r].idå¯¹åº”çš„åŒºé—´çš„å’Œçš„ç»å¯¹å€¼ï¼ˆå› ä¸ºæ±‚çš„æ˜¯ç»å¯¹å€¼å˜›ï¼Œé‚£å°±å¯ä»¥ç›´æ¥å¤§çš„å‡å°çš„ï¼Œå’Œå°çš„å‡å¤§çš„å–ç»å¯¹å€¼åŒæ•ˆæœï¼‰ï¼Œå¦‚æœa[r].sum-a[l].sum&gt;t, l++,åä¹‹ r++ï¼Œå¹¶ä¸”æ¯æ¬¡å°è¯•æ›´æ–°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">7</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> id,sum;</span><br><span class="line">&#125; a[maxn];</span><br><span class="line"><span class="keyword">int</span> n,k,t;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node x,node y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> x.sum&lt;y.sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">1</span>, al, ar, ans, minn = inf;</span><br><span class="line"><span class="keyword">while</span> (l&lt;=n &amp;&amp; r&lt;=n &amp;&amp; minn!=<span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">int</span> temp=a[r].sum-a[l].sum;<span class="comment">//è¿™é‡Œä¸èƒ½ç”¨ç®—çš„æ—¶å€™ l-1 å› ä¸ºè¿™é‡Œçš„læ˜¯æ’åºåçš„æ•°ç»„ï¼Œå·²ç»æ²¡æœ‰å‰åé€»è¾‘å…³ç³»</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">abs</span>(temp-t) &lt; minn) &#123;</span><br><span class="line">minn=<span class="built_in">abs</span>(temp-t);</span><br><span class="line">ar=a[r].id,al=a[l].id;</span><br><span class="line">ans=temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (temp &gt; t)l++;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (temp &lt; t)r++;</span><br><span class="line"><span class="keyword">else</span><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">if</span> (r == l)r++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(al&gt;ar)swap(al,ar);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;al+<span class="number">1</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;ar&lt;&lt;<span class="built_in">endl</span>; <span class="comment">//æœ€åå†å°†al+1  </span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;k)!=EOF) &#123;</span><br><span class="line"><span class="keyword">if</span>(!n &amp;&amp; !k)<span class="keyword">break</span>;</span><br><span class="line">a[<span class="number">0</span>].sum=<span class="number">0</span>,a[<span class="number">0</span>].id=<span class="number">0</span>; <span class="comment">//è¿™é‡Œ0è¦åŠ è¿›å»ï¼Œå› ä¸ºç®—çš„æ—¶å€™ä¸èƒ½l-1äº† </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i].sum);</span><br><span class="line">a[i].sum+=a[i<span class="number">-1</span>].sum;</span><br><span class="line">a[i].id=i;</span><br><span class="line">&#125;</span><br><span class="line">sort(a,a+<span class="number">1</span>+n,cmp);</span><br><span class="line"><span class="keyword">while</span>(k--) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;t);</span><br><span class="line">solve();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> POJ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°ºå– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç­›é€‰ç´ æ•°</title>
      <link href="2019/03/27/%E7%AD%9B%E9%80%89%E7%B4%A0%E6%95%B0/"/>
      <url>2019/03/27/%E7%AD%9B%E9%80%89%E7%B4%A0%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>ç¬¬ä¸€ç§ï¼šç®€å•å¥½è®°ï¼Œä¸€èˆ¬å¤Ÿç”¨</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">fg[<span class="number">0</span>]=fg[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;maxn;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(!fg[i])&#123;</span><br><span class="line">prime[++cnt]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=i;j*i&lt;maxn;++j)&#123;</span><br><span class="line">fg[i*j]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§ï¼šç¨å¾®éš¾è®°ä¸€ç‚¹ï¼Œä½†æ˜¯æ›´å¿«<a href="https://www.cnblogs.com/A-S-KirigiriKyoko/articles/6034572.html">åŸç†å¯ä»¥å‚è€ƒä¸€ä¸‹è¿™ç¯‡</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">fg[<span class="number">0</span>]=fg[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;maxn;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(!fg[i])prime[++cnt]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=cnt &amp;&amp; i*prime[j]&lt;maxn;++j)&#123;</span><br><span class="line">fg[i*prime[j]]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(i%prime[j]==<span class="number">0</span>)<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2015è“æ¡¥æ¯ å’éª°å­ ï¼ˆåŠ¨æ€è§„åˆ’+çŸ©é˜µå¿«é€Ÿå¹‚ï¼‰</title>
      <link href="2019/03/23/2015%E8%93%9D%E6%A1%A5%E6%9D%AF%20%E5%9E%92%E9%AA%B0%E5%AD%90/"/>
      <url>2019/03/23/2015%E8%93%9D%E6%A1%A5%E6%9D%AF%20%E5%9E%92%E9%AA%B0%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<p><em><strong>è§£é¢˜æ€è·¯</strong></em> ï¼šåŠ¨æ€è½¬ç§»æ–¹ç¨‹ï¼Œå…ˆè€ƒè™‘åº•é¢åº”è¯¥æ˜¯æŒºå¥½æƒ³çš„ï¼Œæ”¾ç¬¬nä¸ªéª°å­ï¼Œå¯ä»¥ç”±n-1ä¸ªéª°å­æ¨å‡ºï¼Œä¸ºäº†æ–¹ä¾¿å°†ä»–çš„å†²çªé¢ï¼Œæ”¹æˆéƒ½æ˜¯æœå‘çš„é‚£ä¸ªé¢ï¼Œæ¯”å¦‚1 2 å†²çªï¼Œé‚£å¯¹åº”çš„ä¸¤ä¸ªéª°å­çš„åº•é¢æ˜¯1ï¼Œ5ï¼›ç¬¬nä¸ªéª°å­åº•é¢æ˜¯1ï¼Œå¯èƒ½ç¬¬n-1éª°å­åº•é¢æ˜¯1~6ï¼Œè¿™æ ·çš„è¯ï¼Œå°±å¯èƒ½æœ‰36ç§è½¬ç§»ï¼Œå½“ç„¶æœ€åè¦ä¹˜ä»¥4*nï¼Œå› ä¸ºæˆ‘ä»¬åªè€ƒè™‘äº†åº•é¢ï¼Œä½†æ˜¯é¢˜ç›®çš„næœ‰1e9ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥forå¾ªç¯ã€‚è¿™é‡Œéœ€è¦çŸ©é˜µå¿«é€Ÿå¹‚ï¼Œ</p><p>An=An-1*X Xæ˜¯ä¸€ä¸ªå…­é˜¶çŸ©é˜µï¼ŒXij=1ä»£è¡¨å¯ä»¥ié¢jé¢è¿™æ ·å ç€æ”¾(å¯¹åº”çš„éƒ½æ˜¯æœä¸‹çš„é‚£ä¸ªé¢)ï¼Œåä¹‹åˆ™ä¸å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,pd[<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">pd[<span class="number">1</span>]=<span class="number">4</span>,pd[<span class="number">4</span>]=<span class="number">1</span>;</span><br><span class="line">pd[<span class="number">2</span>]=<span class="number">5</span>,pd[<span class="number">5</span>]=<span class="number">2</span>;</span><br><span class="line">pd[<span class="number">3</span>]=<span class="number">6</span>,pd[<span class="number">6</span>]=<span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">matrix</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> m[<span class="number">7</span>][<span class="number">7</span>];</span><br><span class="line">matrix()&#123;ms(m,<span class="number">0</span>);&#125;</span><br><span class="line">matrix <span class="keyword">operator</span> *(<span class="keyword">const</span> matrix &amp;tp)<span class="keyword">const</span>&#123;</span><br><span class="line">matrix res;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">6</span>;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">6</span>;++j)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=<span class="number">6</span>;++k)&#123;</span><br><span class="line">res.m[i][j]=(res.m[i][j]+m[i][k]*tp.m[k][j])%mod;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">matrix <span class="title">matpow</span><span class="params">(matrix x,<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">matrix ans;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">6</span>;++i)ans.m[i][i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(n)&#123;</span><br><span class="line"><span class="keyword">if</span>(n&amp;<span class="number">1</span>)ans=ans*x;</span><br><span class="line">x=x*x;</span><br><span class="line">n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">mpow</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(n)&#123;</span><br><span class="line"><span class="keyword">if</span>(n&amp;<span class="number">1</span>)ans=(ans*x)%mod;</span><br><span class="line">x=(x*x)%mod;</span><br><span class="line">n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">init();</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line">matrix a;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">6</span>;++i)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">6</span>;++j)a.m[i][j]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y; </span><br><span class="line">a.m[x][pd[y]]=<span class="number">0</span>;</span><br><span class="line">a.m[y][pd[x]]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">matrix ta=matpow(a,n<span class="number">-1</span>);</span><br><span class="line">ll t=<span class="built_in">pow</span>(<span class="number">4</span>,n);</span><br><span class="line">ll res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">6</span>;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">6</span>;++j)&#123;</span><br><span class="line">res=(res+ta.m[i][j])%mod;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;(t*res)%mod&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œæµä¾‹é¢˜</title>
      <link href="2019/03/01/%E7%BD%91%E7%BB%9C%E6%B5%81%E4%B8%93%E9%A2%98/"/>
      <url>2019/03/01/%E7%BD%91%E7%BB%9C%E6%B5%81%E4%B8%93%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="å¯¹äºç½‘ç»œæµçš„åŸºç¡€çŸ¥è¯†å¯ä»¥æˆ³è¿™é‡Œ"><a class="markdownIt-Anchor" href="#å¯¹äºç½‘ç»œæµçš„åŸºç¡€çŸ¥è¯†å¯ä»¥æˆ³è¿™é‡Œ"></a> å¯¹äºç½‘ç»œæµçš„åŸºç¡€çŸ¥è¯†å¯ä»¥<a href="https://blog.csdn.net/txl199106/article/details/64441994">æˆ³è¿™é‡Œ</a></h3><p>æˆ‘å°±ä¸å¤šbbäº†ï¼Œè®²çš„æ²¡äººå®¶å¥½ï¼Œè¿˜å¯èƒ½è®²é”™( à° àµ à°  )ï¾‰</p><blockquote><h1 id="ä¸€æ¨¡æ¿é¢˜ç›®"><a class="markdownIt-Anchor" href="#ä¸€æ¨¡æ¿é¢˜ç›®"></a> ä¸€,æ¨¡æ¿é¢˜ç›®:</h1></blockquote><h3 id="1p1343-åœ°éœ‡é€ƒç”Ÿ"><a class="markdownIt-Anchor" href="#1p1343-åœ°éœ‡é€ƒç”Ÿ"></a> 1.<a href="https://www.luogu.org/problemnew/show/P1343">P1343 åœ°éœ‡é€ƒç”Ÿ</a></h3><h3 id="2p2740-usaco42è‰åœ°æ’æ°´drainage-ditches"><a class="markdownIt-Anchor" href="#2p2740-usaco42è‰åœ°æ’æ°´drainage-ditches"></a> 2.[P2740 <a href="https://www.luogu.org/problemnew/show/P2740">USACO4.2]è‰åœ°æ’æ°´Drainage Ditches</a></h3><p>*<strong>æ¨¡æ¿é¢˜å°±ä¸è´´ä»£ç äº†*</strong></p><blockquote><h1 id="äºŒåˆè¯†æœ€å°å‰²"><a class="markdownIt-Anchor" href="#äºŒåˆè¯†æœ€å°å‰²"></a> äºŒ,åˆè¯†æœ€å°å‰²ï¼š</h1></blockquote><p>å¦‚æœä½ å¯¹æœ€å°å‰²äº†è§£çš„ä»…ä»…åªæ˜¯ä¸€ä¸ªæ¦‚å¿µ(æœ€å°å‰²=æœ€å¤§æµ)ï¼Œé‚£ä½ å¯ä»¥çœ‹ä¸€ä¸‹ä»¥ä¸‹å‡ å¼ å›¾å¸®ä½ æ›´åŠ äº†è§£ä¸€ä¸‹ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20190301103108637.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RERF9NYXN0ZXI=,size_16,color_FFFFFF,t_70" alt="" /></p><p><img src="https://img-blog.csdnimg.cn/20190301103119600.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RERF9NYXN0ZXI=,size_16,color_FFFFFF,t_70" alt="" /></p><p>å‡ å¼ å›¾äº†è§£ç½‘ç»œæµçš„å‰²æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿â€¦:æ‰€è°“ç½‘ç»œæµçš„å‰²å°±æ˜¯å°†ç‚¹åˆ’åˆ†ä¸ºè¿åˆ°Sä¸è¿åˆ°Tçš„ä¸¤ä¸ªç‚¹é›†åˆâ€¦å‰²å°±æ˜¯è¿™ä¸¤ä¸ªç‚¹é›†ç›¸è¿çš„è¾¹â€¦ä½†æ³¨æ„â€¦å‰²çš„å®¹é‡åªè®°ä»Sç‚¹é›†åˆ°Tç‚¹é›†çš„â€¦Tç‚¹é›†åˆ°Sç‚¹é›†çš„ä¸ç®—â€¦æ‰€ä»¥å‰²çš„å®¹é‡ç­‰äºè¿™ä»Sç‚¹é›†åˆ°Tç‚¹é›†æ‰€æœ‰è¾¹çš„å®¹é‡ä¹‹å’Œâ€¦è€Œç½‘ç»œæµçš„æœ€å°å‰²å°±æ˜¯è¿™äº›å‰²ä¸­å®¹é‡æœ€å°çš„â€¦</p><h3 id="1p4001-icpc-beijing-2006ç‹¼æŠ“å…”å­"><a class="markdownIt-Anchor" href="#1p4001-icpc-beijing-2006ç‹¼æŠ“å…”å­"></a> 1.[P4001 <a href="https://www.luogu.org/problemnew/show/P4001">ICPC-Beijing 2006]ç‹¼æŠ“å…”å­</a></h3><p><strong>æ€è·¯</strong>ï¼šè£¸é¢˜ æœ€å°å‰²ã€‚vectorå­˜è¾¹dinicå¯èƒ½è¿‡ä¸äº†ï¼Œä¸æ˜¯Tæœ€åä¸€ä¸ªç‚¹å°±æ˜¯MLEï¼Œå¦‚æœæœ‰ç”¨vectorå†™çš„å¯ä»¥äº¤æµä¸€ä¸‹Îµ(â”¬â”¬ï¹â”¬â”¬)3(ä¸€å®šæ˜¯è¯„æµ‹æœºçš„é—®é¢˜)</p><h3 id="2p1345-usaco54å¥¶ç‰›çš„ç”µä¿¡telecowmunication"><a class="markdownIt-Anchor" href="#2p1345-usaco54å¥¶ç‰›çš„ç”µä¿¡telecowmunication"></a> 2.[P1345 <a href="https://www.luogu.org/problemnew/show/P1345">USACO5.4]å¥¶ç‰›çš„ç”µä¿¡Telecowmunication</a></h3><p><strong>æ€è·¯</strong>ï¼šåˆæ­¥è®¤è¯†æ‹†ç‚¹ï¼Œå°†æ±‚æœ€å°å‰²ç‚¹å˜æˆæ±‚æœ€å°å‰²ã€‚å°†ä¸€ä¸ªç‚¹æ‹†æˆå‡ºç‚¹å’Œå…¥ç‚¹ï¼Œç„¶åä¸¤ç‚¹ä¹‹é—´è¿è¾¹çš„æƒå€¼æ˜¯1ï¼Œè¿™æ ·è·‘æœ€å°å‰²ï¼Œä»–å‰²çš„æ˜¯è¿™æ¡è¾¹å®é™…æ˜¯è¿™ä¸ªç‚¹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data) memset(_data,0,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to, cap, rev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; eg[maxn];</span><br><span class="line"><span class="keyword">int</span> dep[maxn], arc[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[f].pb(edge &#123;t,w,(<span class="keyword">int</span>)eg[t].size()&#125;);</span><br><span class="line">eg[t].pb(edge &#123;f,<span class="number">0</span>,(<span class="keyword">int</span>)eg[f].size()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dep, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dep));</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">q.push(s);</span><br><span class="line">dep[s]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">v=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[e.to]==<span class="number">-1</span>) &#123;</span><br><span class="line">dep[e.to]=dep[v]+<span class="number">1</span>;</span><br><span class="line">q.push(e.to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> f)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (v==t) <span class="keyword">return</span> f;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=arc[v]; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[v]+<span class="number">1</span>==dep[e.to]) &#123;</span><br><span class="line">d=dfs(e.to,t,min(f, e.cap));</span><br><span class="line"><span class="keyword">if</span> (d&gt;<span class="number">0</span>) &#123;</span><br><span class="line">e.cap -= d;</span><br><span class="line">eg[e.to][e.rev].cap+=d;</span><br><span class="line"><span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">bfs(s);</span><br><span class="line"><span class="keyword">if</span> (dep[t]==<span class="number">-1</span>)<span class="keyword">return</span> flow;</span><br><span class="line"><span class="built_in">memset</span>(arc,<span class="number">0</span>,<span class="keyword">sizeof</span>(arc));</span><br><span class="line"><span class="keyword">while</span> ((d=dfs(s,t,inf))&gt;<span class="number">0</span>) &#123;</span><br><span class="line">flow+=d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,m,c1,c2;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;c1&gt;&gt;c2;<span class="comment">//é™¤äº†èµ·å§‹ç‚¹å¤–ï¼Œå…¨éƒ¨æ‹†ç‚¹</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(i!=c1 &amp;&amp; i!=c2)add(i,i+n,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a,b;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123; </span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line"><span class="keyword">if</span>(a!=c1 &amp;&amp; a!=c2)add(a+n,b,inf);</span><br><span class="line"><span class="keyword">else</span>add(a,b,inf);</span><br><span class="line"><span class="keyword">if</span>(b!=c1 &amp;&amp; b!=c2)add(b+n,a,inf);</span><br><span class="line"><span class="keyword">else</span>add(b,a,inf);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dinic(c1,c2)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure><h3 id="3p1361-å°mçš„ä½œç‰©-æœ€å¤§æµæœ€å°å‰²"><a class="markdownIt-Anchor" href="#3p1361-å°mçš„ä½œç‰©-æœ€å¤§æµæœ€å°å‰²"></a> 3.<a href="https://www.luogu.org/problemnew/show/P1361">P1361 å°Mçš„ä½œç‰© (æœ€å¤§æµæœ€å°å‰²)</a></h3><p><strong>æ€è·¯</strong>ï¼šæœ€å°å‰²å°±æ˜¯èŠ±æœ€å°‘çš„åŠ›æ°”ä½¿å¾—æ‰€æœ‰çš„ç‚¹åˆ†æˆä¸¤ä¸ªé›†åˆï¼Œæˆ‘ä»¬å°†Aåœ°çœ‹å‡ºæºç‚¹sï¼ŒBåœ°çœ‹æˆæ±‡ç‚¹tï¼Œæ¯ä¸ªæ¤ç‰©éƒ½å¯èƒ½å‘æŸä¸€å—åœ°åšå‡ºè´¡çŒ®ï¼Œå³Aåœ°å‘1æœ‰ä¸€æ¡è¾¹ï¼Œ1å‘Bæœ‰ä¸€æ¡è¾¹ã€‚è¦é€‰å‡ºä¸€æ¡è¾¹ä½œä¸ºå‰²è¾¹éš”æ–­ã€‚è¿˜æœ‰å°±æ˜¯ç»„åˆçš„æƒ…å†µäº†ï¼Œæ–°å¼€ä¸€ä¸ªç‚¹ï¼Œsç‚¹æŒ‡å‘æ–°ç‚¹ä¸ºAè´¡çŒ®ï¼Œæ–°ç‚¹æŒ‡å‘ä»–é›†åˆçš„ç‚¹æƒå€¼éƒ½ä¸ºinf(ä½¿å…¶ä¸å¯èƒ½æˆä¸ºå‰²è¾¹)ï¼ŒBåŒç†ï¼Œç­”æ¡ˆå°±æ˜¯æ”¶ç›Šæ€»å’Œ-æœ€å°å‰²(å‰²æ‰çš„å°±æ˜¯ä¸è¦çš„æ”¶ç›Š)ï¼Œå…·ä½“å»ºå›¾æ–¹å¼è§å›¾ã€‚</p><p><img src="https://img-blog.csdnimg.cn/20190301104119783.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RERF9NYXN0ZXI=,size_16,color_FFFFFF,t_70" alt="" /></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to, cap, rev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; eg[maxn];</span><br><span class="line"><span class="keyword">int</span> dep[maxn], arc[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[f].pb(edge &#123;t,w,(<span class="keyword">int</span>)eg[t].size()&#125;);</span><br><span class="line">eg[t].pb(edge &#123;f,<span class="number">0</span>,(<span class="keyword">int</span>)eg[f].size()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dep, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dep));</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">q.push(s);</span><br><span class="line">dep[s]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">v=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[e.to]==<span class="number">-1</span>) &#123;</span><br><span class="line">dep[e.to]=dep[v]+<span class="number">1</span>;</span><br><span class="line">q.push(e.to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> f)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (v==t) <span class="keyword">return</span> f;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=arc[v]; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[v]+<span class="number">1</span>==dep[e.to]) &#123;</span><br><span class="line">d=dfs(e.to,t,min(f, e.cap));</span><br><span class="line"><span class="keyword">if</span> (d&gt;<span class="number">0</span>) &#123;</span><br><span class="line">e.cap -= d;</span><br><span class="line">eg[e.to][e.rev].cap+=d;</span><br><span class="line"><span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">bfs(s);</span><br><span class="line"><span class="keyword">if</span> (dep[t]==<span class="number">-1</span>)<span class="keyword">return</span> flow;</span><br><span class="line"><span class="built_in">memset</span>(arc,<span class="number">0</span>,<span class="keyword">sizeof</span>(arc));</span><br><span class="line"><span class="keyword">while</span> ((d=dfs(s,t,inf))&gt;<span class="number">0</span>) &#123;</span><br><span class="line">flow+=d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,m,k; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">int</span> tp,s=n+<span class="number">1</span>,t=n+<span class="number">2</span>,a,b,cnt=n+<span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)<span class="built_in">cin</span>&gt;&gt;tp,add(s,i,tp),sum+=tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)<span class="built_in">cin</span>&gt;&gt;tp,add(i,t,tp),sum+=tp;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;m;</span><br><span class="line"><span class="keyword">while</span>(m--)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;k&gt;&gt;a&gt;&gt;b;</span><br><span class="line">sum+=a+b;</span><br><span class="line"><span class="keyword">int</span> pa=++cnt,pb=++cnt;</span><br><span class="line">add(s,pa,a),add(pb,t,b);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line">add(pa,tp,inf);</span><br><span class="line">add(tp,pb,inf);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;sum-dinic(s,t)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><blockquote><h1 id="ä¸‰æ‹†ç‚¹è£‚ç‚¹"><a class="markdownIt-Anchor" href="#ä¸‰æ‹†ç‚¹è£‚ç‚¹"></a> ä¸‰,æ‹†ç‚¹è£‚ç‚¹</h1></blockquote><h3 id="1p1231-æ•™è¾…çš„ç»„æˆ"><a class="markdownIt-Anchor" href="#1p1231-æ•™è¾…çš„ç»„æˆ"></a> 1.<a href="https://www.luogu.org/problemnew/show/P1231">P1231 æ•™è¾…çš„ç»„æˆ</a></h3><p><strong>æ€è·¯</strong>ï¼šè¦ä¿è¯1æœ¬ä¹¦åªå’Œä¸€æœ¬æ•™æå’Œä¸€æœ¬ç­”æ¡ˆé…å¯¹ï¼Œå³é€šè¿‡ä¸€æœ¬ä¹¦çš„æµé‡ä¸º1ï¼Œæ•…å°†ä¹¦æœ¬æ‹†æˆä¸¤ä¸ªç‚¹ã€‚ä¹¦çš„å·¦è¾¹æ”¾ç»ƒä¹ å†Œï¼Œå³è¾¹æ”¾ç­”æ¡ˆ(åç€æ”¾ä¹Ÿæ— æ‰€è°“),æºç‚¹ï¼Œæ±‡ç‚¹æä¸€æå°±è¡Œäº†ã€‚å»ºå›¾è¯¦è§æ´›è°·ç¬¬ä¸€ç¯‡é¢˜è§£å›¾ç‰‡ï¼Œæˆ‘çš„ç¼–å·å’Œå›¾ä¸ä¸€æ ·ã€‚</p><p><img src="https://img-blog.csdnimg.cn/img_convert/cdd8dfe71977bcb7e4f93573b71d37b4.png" alt="" /></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data) memset(_data,0,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to, cap, rev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; eg[maxn];</span><br><span class="line"><span class="keyword">int</span> dep[maxn], arc[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[f].pb(&#123;t,w,(<span class="keyword">int</span>)eg[t].size()&#125;);</span><br><span class="line">eg[t].pb(&#123;f,<span class="number">0</span>,(<span class="keyword">int</span>)eg[f].size()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dep, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dep));</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">q.push(s);</span><br><span class="line">dep[s]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">v=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[e.to]==<span class="number">-1</span>) &#123;</span><br><span class="line">dep[e.to]=dep[v]+<span class="number">1</span>;</span><br><span class="line">q.push(e.to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> f)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (v==t) <span class="keyword">return</span> f;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=arc[v]; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[v]+<span class="number">1</span>==dep[e.to]) &#123;</span><br><span class="line">d=dfs(e.to,t,min(f, e.cap));</span><br><span class="line"><span class="keyword">if</span> (d&gt;<span class="number">0</span>) &#123;</span><br><span class="line">e.cap -= d;</span><br><span class="line">eg[e.to][e.rev].cap+=d;</span><br><span class="line"><span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">bfs(s);</span><br><span class="line"><span class="keyword">if</span> (dep[t]==<span class="number">-1</span>)<span class="keyword">return</span> flow;</span><br><span class="line"><span class="built_in">memset</span>(arc,<span class="number">0</span>,<span class="keyword">sizeof</span>(arc));</span><br><span class="line"><span class="keyword">while</span> ((d=dfs(s,t,inf))&gt;<span class="number">0</span>) &#123;</span><br><span class="line">flow+=d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n1,n2,n3;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; mp[maxn]; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n1&gt;&gt;n2&gt;&gt;n3;</span><br><span class="line"><span class="keyword">int</span> tot=n1+n2+n3;</span><br><span class="line"><span class="keyword">int</span> s=<span class="number">0</span>,t=tot*<span class="number">10</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n1;++i)add(i,i+n1,<span class="number">1</span>); <span class="comment">//å¯¹ä¹¦æ‹†ç‚¹ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=n1*<span class="number">2</span>+<span class="number">1</span>;i&lt;=n1*<span class="number">2</span>+n2;++i)add(s,i,<span class="number">1</span>); <span class="comment">//ç»ƒä¹ å†Œ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=n1*<span class="number">2</span>+n2+<span class="number">1</span>;i&lt;=n1*<span class="number">2</span>+n2+n3;++i)add(i,t,<span class="number">1</span>); <span class="comment">//ç­”æ¡ˆ </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a,b,m;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">add(b+n1*<span class="number">2</span>,a,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">add(a+n1,b+n1*<span class="number">2</span>+n2,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dinic(s,t)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2p1402-é…’åº—ä¹‹ç‹"><a class="markdownIt-Anchor" href="#2p1402-é…’åº—ä¹‹ç‹"></a> 2.<a href="https://www.luogu.org/problemnew/show/P1402">P1402 é…’åº—ä¹‹ç‹</a></h3><p><strong>æ€è·¯</strong>ï¼šä¸ä¸Šé¢˜ç›¸åŒã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data) memset(_data,0,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to, cap, rev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; eg[maxn];</span><br><span class="line"><span class="keyword">int</span> dep[maxn], arc[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[f].pb(edge &#123;t,w,(<span class="keyword">int</span>)eg[t].size()&#125;);</span><br><span class="line">eg[t].pb(edge &#123;f,<span class="number">0</span>,(<span class="keyword">int</span>)eg[f].size()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dep, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dep));</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">q.push(s);</span><br><span class="line">dep[s]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">v=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[e.to]==<span class="number">-1</span>) &#123;</span><br><span class="line">dep[e.to]=dep[v]+<span class="number">1</span>;</span><br><span class="line">q.push(e.to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> f)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (v==t) <span class="keyword">return</span> f;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=arc[v]; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[v]+<span class="number">1</span>==dep[e.to]) &#123;</span><br><span class="line">d=dfs(e.to,t,min(f, e.cap));</span><br><span class="line"><span class="keyword">if</span> (d&gt;<span class="number">0</span>) &#123;</span><br><span class="line">e.cap -= d;</span><br><span class="line">eg[e.to][e.rev].cap+=d;</span><br><span class="line"><span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">bfs(s);</span><br><span class="line"><span class="keyword">if</span> (dep[t]==<span class="number">-1</span>)<span class="keyword">return</span> flow;</span><br><span class="line"><span class="built_in">memset</span>(arc,<span class="number">0</span>,<span class="keyword">sizeof</span>(arc));</span><br><span class="line"><span class="keyword">while</span> ((d=dfs(s,t,inf))&gt;<span class="number">0</span>) &#123;</span><br><span class="line">flow+=d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,p,q;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;p&gt;&gt;q;</span><br><span class="line"><span class="keyword">int</span> s=<span class="number">0</span>,t=(n+p+q)*<span class="number">6</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)add(i,i+n,<span class="number">1</span>); <span class="comment">//äºº </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>+n*<span class="number">2</span>;i&lt;=n*<span class="number">2</span>+p;++i)add(s,i,<span class="number">1</span>);<span class="comment">//æˆ¿ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>+n*<span class="number">2</span>+p;i&lt;=q+n*<span class="number">2</span>+p;++i)add(i,t,<span class="number">1</span>); <span class="comment">//èœ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tp; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=p;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="number">1</span>)add(j+n*<span class="number">2</span>,i,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=q;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="number">1</span>)add(i+n,j+n*<span class="number">2</span>+p,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dinic(s,t)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3p2472-scoi2007èœ¥èœ´ç•¥éš¾"><a class="markdownIt-Anchor" href="#3p2472-scoi2007èœ¥èœ´ç•¥éš¾"></a> 3.[P2472 <a href="https://www.luogu.org/problemnew/show/P2472">SCOI2007]èœ¥èœ´</a>ï¼ˆç•¥éš¾ï¼‰</h3><p><strong>æ€è·¯</strong>ï¼šå¼€å§‹æ­£å„¿å·´é‡‘çš„å»ºæ¨¡äº†ï¼Œä»»ä½•æ—¶åˆ»ä¸èƒ½æœ‰ä¸¤åªèœ¥èœ´åœ¨åŒä¸€ä¸ªçŸ³æŸ±ä¸Šï¼Œè¿™å¥è¯æ˜¯å¥å±è¯ã€‚ç”¨æµçš„æ–¹å¼å»æ€è€ƒï¼Œå¦‚æœæˆ‘ä»¬è·³è¿‡å»çš„çŸ³æŸ±æœ‰èœ¥èœ´ï¼Œå¦‚æœèƒ½å¾€å¤–è·³ï¼Œé‚£å¯ä»¥è®©ä»–å…ˆæµå‡ºå»ï¼Œåä¹‹ï¼Œä¸€èµ·æµä¸å»å›åˆ°åŸæ¥ä½ç½®æˆ–è€…æ¢æ–¹å‘è·³ï¼Œå°†æ¯ä¸ªç‚¹æ‹†æˆä¸¤ä¸ªç‚¹ï¼Œä»–ä»¬ä¹‹é—´çš„æƒå€¼å°±æ˜¯ï¼ŒçŸ³å¤´çš„é«˜åº¦hï¼Œå› ä¸ºè·¯è¿‡hä¸ªä¹‹åï¼ŒçŸ³å¤´çš„é«˜åº¦å°±ä¼šå˜æˆ0ï¼Œä»è€Œä¸èƒ½å†æœ‰èœ¥èœ´é€šè¿‡äº†ã€‚åœ¨èƒ½è·³å‡ºçŸ©é˜µçš„çŸ³å¤´ï¼Œéƒ½ç»™ä»–ä»¬çš„å‡ºç‚¹è¿ä¸€æ¡è¾¹åˆ°tï¼Œæƒå€¼ä¸ºinfï¼Œè€Œåœ¨èƒ½äº’é€šçš„ç‚¹ä¹Ÿè¿ä¸€æ¡infçš„è¾¹ï¼Œåœ¨æœ‰èœ¥èœ´çš„åœ°æ–¹ï¼Œä»sè¿ä¸€æ¡æƒå€¼ä¸º1çš„è¾¹ï¼Œç„¶åè·‘æœ€å¤§æµå°±è¡Œäº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data) memset(_data,0,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to, cap, rev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; eg[maxn];</span><br><span class="line"><span class="keyword">int</span> dep[maxn], arc[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[f].pb(edge &#123;t,w,(<span class="keyword">int</span>)eg[t].size()&#125;);</span><br><span class="line">eg[t].pb(edge &#123;f,<span class="number">0</span>,(<span class="keyword">int</span>)eg[f].size()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dep, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dep));</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">q.push(s);</span><br><span class="line">dep[s]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">v=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[e.to]==<span class="number">-1</span>) &#123;</span><br><span class="line">dep[e.to]=dep[v]+<span class="number">1</span>;</span><br><span class="line">q.push(e.to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> f)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (v==t) <span class="keyword">return</span> f;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=arc[v]; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[v]+<span class="number">1</span>==dep[e.to]) &#123;</span><br><span class="line">d=dfs(e.to,t,min(f, e.cap));</span><br><span class="line"><span class="keyword">if</span> (d&gt;<span class="number">0</span>) &#123;</span><br><span class="line">e.cap -= d;</span><br><span class="line">eg[e.to][e.rev].cap+=d;</span><br><span class="line"><span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">bfs(s);</span><br><span class="line"><span class="keyword">if</span> (dep[t]==<span class="number">-1</span>)<span class="keyword">return</span> flow;</span><br><span class="line"><span class="built_in">memset</span>(arc,<span class="number">0</span>,<span class="keyword">sizeof</span>(arc));</span><br><span class="line"><span class="keyword">while</span> ((d=dfs(s,t,inf))&gt;<span class="number">0</span>) &#123;</span><br><span class="line">flow+=d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> r,c,d;</span><br><span class="line"><span class="keyword">int</span> mp[<span class="number">25</span>][<span class="number">25</span>];</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">gid</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> (x<span class="number">-1</span>)*c+y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">double</span> <span class="title">js</span><span class="params">(<span class="keyword">double</span> x1,<span class="keyword">double</span> y1,<span class="keyword">double</span> x2,<span class="keyword">double</span> y2)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span>(<span class="keyword">double</span>)<span class="built_in">sqrt</span>((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">double</span> len[<span class="number">25</span>][<span class="number">25</span>][<span class="number">25</span>][<span class="number">25</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;r&gt;&gt;c&gt;&gt;d;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=r;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=c;++j)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=r;++k)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=c;++t)&#123;</span><br><span class="line">len[i][j][k][t]=js(i,j,k,t);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> s=<span class="number">0</span>,t=r*c*<span class="number">10</span>; </span><br><span class="line"><span class="keyword">char</span> tp;</span><br><span class="line"><span class="keyword">int</span> num;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=r;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=c;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line">num=tp-<span class="string">&#x27;0&#x27;</span>; <span class="comment">//é¢˜ç›®æ²¡è¯´ä¸è¶…è¿‡10ï¼Œä½†æ•°æ®æ˜¯ä¸è¶…è¿‡10çš„</span></span><br><span class="line">add(gid(i,j),gid(i,j)+r*c,num); <span class="comment">//æ‹†ç‚¹ï¼Œå®¹é‡ä¸ºé«˜åº¦ </span></span><br><span class="line"><span class="keyword">if</span>(i+d&gt;r || i-d&lt;<span class="number">1</span> || j+d&gt;c || j-d&lt;<span class="number">1</span> )&#123;</span><br><span class="line">add(gid(i,j)+r*c,t,inf); <span class="comment">//å¯ä»¥è·³å‡ºå»ï¼Œå‘æ±‡ç‚¹è¿è¾¹ </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> up=max(<span class="number">1</span>,i-d),low=min(i+d,r),le=max(j-d,<span class="number">1</span>),ri=min(c,j+d);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=up;k&lt;=low;++k)&#123; <span class="comment">//å‘å¯èƒ½è·³å‡ºçš„ç‚¹è¿è¾¹ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> t=le;t&lt;=ri;++t)&#123;</span><br><span class="line"><span class="keyword">if</span>(len[i][j][k][t]&lt;=d)add(gid(i,j)+r*c,gid(k,t),inf);</span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=r;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=c;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="string">&#x27;L&#x27;</span>)add(s,gid(i,j),<span class="number">1</span>),sum++;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;sum-dinic(s,t)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4p2944-usaco09maråœ°éœ‡æŸå¤±2earthquake-damage-2"><a class="markdownIt-Anchor" href="#4p2944-usaco09maråœ°éœ‡æŸå¤±2earthquake-damage-2"></a> 4.[P2944 <a href="https://www.luogu.org/problemnew/show/P2944">USACO09MAR]åœ°éœ‡æŸå¤±2Earthquake Damage 2</a></h3><p><strong>æ€è·¯</strong>ï¼šé—®é¢˜è½¬åŒ–å»ºæ¨¡ï¼Œæ‹†ç‚¹å˜æˆæ±‚æœ€å°å‰²ã€‚é¢˜ç›®å°±æ˜¯è¯´æœ‰äº›æ‘åº„ä¸èƒ½åˆ°ç‰›æ£šï¼Œè€Œæœ‰äº›èƒ½åˆ°ï¼Œé‚£ä¸å°±æ˜¯å°†é›†åˆåˆ†æˆä¸¤ä¸ªéƒ¨åˆ†å˜›ï¼Œå°±æ˜¯æˆ‘ä»¬æœ€å°‘ç ´åå‡ ä¸ªæ‘åº„ä½¿å¾—å·²çŸ¥æ¡ä»¶æ»¡è¶³ï¼Œå°±æ˜¯æ‹†ç‚¹ï¼Œæ±‚æœ€å°å‰²ï¼ˆå°±æ˜¯æ±‚æœ€å°å‰²ç‚¹p1345ï¼‰ã€‚å¯¹äºå·²ç»ç¡®å®šæ²¡åä½†ä¸èƒ½åˆ°è¾¾ç‰›æ£šçš„ç‚¹ï¼Œæˆ‘ä»¬ç»™ä»–çš„ä¸¤ç‚¹ä¹‹é—´è¿infï¼Œå¹¶ä¸”å°†å®ƒçš„å‡ºç‚¹è¿infåˆ°tï¼Œå› ä¸ºä»–å¿…ä¸èƒ½åˆ°ç‰›æ£šs(è¿™ç‚¹éœ€æ³¨æ„)ï¼Œèµ·ç‚¹å’Œæ±‡ç‚¹ä¹Ÿæ˜¯ç¡®å®šçš„ç‚¹ï¼Œä¸èƒ½è¢«å‰²ã€‚è€Œå¯¹äºä¸ç¡®å®šçš„ç‚¹å°±ç»™ä»–çš„ä¸¤ç‚¹ä¹‹é—´è¿1.æœ€åè·‘ä¸ªæœ€å°å‰²ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data) memset(_data,0,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to, cap, rev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; eg[maxn];</span><br><span class="line"><span class="keyword">int</span> dep[maxn], arc[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[f].pb(edge &#123;t,w,(<span class="keyword">int</span>)eg[t].size()&#125;);</span><br><span class="line">eg[t].pb(edge &#123;f,<span class="number">0</span>,(<span class="keyword">int</span>)eg[f].size()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dep, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dep));</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">q.push(s);</span><br><span class="line">dep[s]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">v=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[e.to]==<span class="number">-1</span>) &#123;</span><br><span class="line">dep[e.to]=dep[v]+<span class="number">1</span>;</span><br><span class="line">q.push(e.to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> f)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (v==t) <span class="keyword">return</span> f;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=arc[v]; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[v]+<span class="number">1</span>==dep[e.to]) &#123;</span><br><span class="line">d=dfs(e.to,t,min(f, e.cap));</span><br><span class="line"><span class="keyword">if</span> (d&gt;<span class="number">0</span>) &#123;</span><br><span class="line">e.cap -= d;</span><br><span class="line">eg[e.to][e.rev].cap+=d;</span><br><span class="line"><span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">bfs(s);</span><br><span class="line"><span class="keyword">if</span> (dep[t]==<span class="number">-1</span>)<span class="keyword">return</span> flow;</span><br><span class="line"><span class="built_in">memset</span>(arc,<span class="number">0</span>,<span class="keyword">sizeof</span>(arc));</span><br><span class="line"><span class="keyword">while</span> ((d=dfs(s,t,inf))&gt;<span class="number">0</span>) &#123;</span><br><span class="line">flow+=d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> p,c,n;</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;p&gt;&gt;c&gt;&gt;n;</span><br><span class="line"><span class="keyword">int</span> s=<span class="number">1</span>,t=p*<span class="number">10</span>,a,b;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=c;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">add(a+p,b,inf),add(b+p,a,inf); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a;</span><br><span class="line">add(a,a+p,inf),vis[a]=<span class="number">1</span>;</span><br><span class="line">add(a+p,t,inf);</span><br><span class="line">&#125;</span><br><span class="line">add(s,s+p,inf),add(s+p,s,inf);</span><br><span class="line">add(t,t+p,inf),add(t+p,t,inf);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=p;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[i])add(i,i+p,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dinic(s,t)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure><h3 id="5p2764-æœ€å°è·¯å¾„è¦†ç›–é—®é¢˜æœ€å°è·¯å¾„è¦†ç›–åŸå›¾çš„ç»“ç‚¹æ•°-æ–°å›¾çš„æœ€å¤§åŒ¹é…æ•°"><a class="markdownIt-Anchor" href="#5p2764-æœ€å°è·¯å¾„è¦†ç›–é—®é¢˜æœ€å°è·¯å¾„è¦†ç›–åŸå›¾çš„ç»“ç‚¹æ•°-æ–°å›¾çš„æœ€å¤§åŒ¹é…æ•°"></a> 5.<a href="https://www.luogu.org/problemnew/show/P2764">P2764 æœ€å°è·¯å¾„è¦†ç›–é—®é¢˜</a>ï¼ˆæœ€å°è·¯å¾„è¦†ç›–=åŸå›¾çš„ç»“ç‚¹æ•°-æ–°å›¾çš„æœ€å¤§åŒ¹é…æ•°ï¼‰</h3><p><strong>æ€è·¯</strong>ï¼šæˆ‘ä»¬å¯ä»¥å…ˆè®¤ä¸ºæ¯ä¸ªç‚¹éƒ½æ˜¯ä¸€ä¸ªè·¯å¾„ï¼Œæˆ‘ä»¬æ¯æ¬¡å°†ä¸¤æ¡è·¯å¾„åˆå¹¶å°±ä¼šå°‘ä¸€æ¡è·¯å¾„ï¼Œå½“ç„¶åˆå‘æ— ç¯å›¾ï¼Œç‚¹åªèƒ½åœ¨ä¸€æ¡è·¯å¾„ä¸­å‡ºç°ï¼Œæ‰€ä»¥ç»è¿‡æ¯ä¸ªç‚¹çš„æµé‡åªèƒ½ä¸º1ã€‚å°†æ¯ä¸ªç‚¹æ‹†ç‚¹ä¸ºå‡ºç‚¹å’Œå…¥ç‚¹ï¼Œsåˆ°æ¯ä¸ªå‡ºç‚¹çš„å€¼ä¸º1ï¼Œå…¥ç‚¹åˆ°tçš„å€¼ä¸º1ï¼Œä¿è¯æ¯ä¸ªç‚¹ç»è¿‡çš„æµé‡ä¸º1ï¼Œç„¶åå†ç»™èƒ½åˆ°çš„ç‚¹ï¼Œè¿ä¸€ä¸‹å‡ºç‚¹åˆ°å…¥ç‚¹(å°±æ˜¯ä¸ªäºŒåˆ†å›¾ï¼Œå‡ºç‚¹åœ¨å·¦ï¼Œå…¥ç‚¹åœ¨å³)ï¼Œè¿™æ ·æ¯ä¸ªç‚¹éƒ½åªèƒ½é€‰ä¸€ä¸ªæ–¹å‘æµå‡ºï¼Œä¹Ÿåªèƒ½é€‰ä¸€ä¸ªæ–¹å‘æµå…¥ã€‚æˆ‘ä»¬æ¯æ¬¡åœ¨äºŒåˆ†å›¾é‡Œæ‰¾ä¸€æ¡åŒ¹é…è¾¹å°±ç›¸å½“äºæŠŠä¸¤æ¡è·¯å¾„åˆæˆäº†ä¸€æ¡è·¯å¾„ï¼Œä¹Ÿå°±ç›¸å½“äºè·¯å¾„æ•°å‡å°‘äº†1ã€‚æ‰€ä»¥æ‰¾åˆ°äº†å‡ æ¡åŒ¹é…è¾¹ï¼Œè·¯å¾„æ•°å°±å‡å°‘äº†å¤šå°‘ã€‚æ‰€ä»¥æœ‰æœ€å°è·¯å¾„è¦†ç›–=åŸå›¾çš„ç»“ç‚¹æ•°-æ–°å›¾çš„æœ€å¤§åŒ¹é…æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªå®šç†ï¼Œä¸ç†è§£ä½†è¦è®°ä½ã€‚è¾“å‡ºè·¯å¾„çš„è¯ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“å¤´å¤´ï¼Œç„¶åè®°å½•ä¸‹ä¸€ä¸ªã€‚è¿˜æœ‰å°±æ˜¯è¿™é¢˜å‰å‘æ˜Ÿï¼Œæ¯”vectorå¿«10å€ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸¤ç§ä»£ç </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data) memset(_data,0,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> nxt[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m,s,t;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; head;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to, cap, rev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; eg[maxn];</span><br><span class="line"><span class="keyword">int</span> dep[maxn], arc[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[f].pb(edge &#123;t,w,(<span class="keyword">int</span>)eg[t].size()&#125;);</span><br><span class="line">eg[t].pb(edge &#123;f,<span class="number">0</span>,(<span class="keyword">int</span>)eg[f].size()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dep, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dep));</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt;q;</span><br><span class="line">q.push(s);</span><br><span class="line">dep[s]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> v;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">v=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[e.to]==<span class="number">-1</span>) &#123;</span><br><span class="line">dep[e.to]=dep[v]+<span class="number">1</span>;</span><br><span class="line">q.push(e.to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> f)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (v==t) &#123;</span><br><span class="line"><span class="keyword">return</span> f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=arc[v]; i&lt;(<span class="keyword">int</span>)eg[v].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=eg[v][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dep[v]+<span class="number">1</span>==dep[e.to]) &#123;</span><br><span class="line">d=dfs(e.to,t,min(f, e.cap));</span><br><span class="line"><span class="keyword">if</span> (d&gt;<span class="number">0</span>) &#123;</span><br><span class="line">nxt[v]=e.to; <span class="comment">//å­˜ä¸€ä¸‹å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ª</span></span><br><span class="line"><span class="keyword">if</span>(v!=s)vis[e.to-n]=<span class="number">1</span>; <span class="comment">//ä¸æ˜¯å¤´èŠ‚ç‚¹ï¼Œç½®ä¸º1</span></span><br><span class="line"></span><br><span class="line">e.cap-=d;</span><br><span class="line">eg[e.to][e.rev].cap+=d;</span><br><span class="line"><span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">bfs(s);</span><br><span class="line"><span class="keyword">if</span> (dep[t]==<span class="number">-1</span>)<span class="keyword">return</span> flow;</span><br><span class="line"><span class="built_in">memset</span>(arc,<span class="number">0</span>,<span class="keyword">sizeof</span>(arc));</span><br><span class="line"><span class="keyword">while</span> ((d=dfs(s,t,inf))&gt;<span class="number">0</span>) &#123;</span><br><span class="line">flow+=d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">s=<span class="number">0</span>,t=n*<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">add(s,i,<span class="number">1</span>),add(i+n,t,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">add(x,y+n,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> ans=n-dinic(s,t);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[i]) &#123; <span class="comment">//æ˜¯å¤´èŠ‚ç‚¹ï¼Œå°±ä¸€ç›´è¾“å‡ºåˆ°å°¾</span></span><br><span class="line"><span class="keyword">int</span> now=i;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;now&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">while</span>(nxt[now] &amp;&amp; nxt[now]!=t)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;nxt[now]-n&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">now=nxt[now]-n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rg register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> dep[maxn],hd[maxn],cur[maxn],cnt=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,s,t;</span><br><span class="line"><span class="keyword">bool</span> vis[maxn]; </span><br><span class="line"><span class="keyword">int</span> nxt[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to,nxt,c;</span><br><span class="line">&#125; eg[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[++cnt]=edge&#123;t,hd[f],w&#125;,hd[f]=cnt;</span><br><span class="line">eg[++cnt]=edge&#123;f,hd[t],<span class="number">0</span>&#125;,hd[t]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=s;i&lt;=t;++i)dep[i]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())q.pop();</span><br><span class="line">q.push(s),dep[s]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> now,to;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">now=q.front(),q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=hd[now]; i; i=eg[i].nxt) &#123;</span><br><span class="line">to=eg[i].to;</span><br><span class="line"><span class="keyword">if</span>(!dep[to] &amp;&amp; eg[i].c&gt;<span class="number">0</span>) &#123;</span><br><span class="line">dep[to]=dep[now]+<span class="number">1</span>;</span><br><span class="line">q.push(to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> dep[t];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> flow)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(v==t)<span class="keyword">return</span> flow;</span><br><span class="line"><span class="keyword">int</span> to,tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=cur[v]; i; i=eg[i].nxt)&#123;</span><br><span class="line">to=eg[i].to;</span><br><span class="line"><span class="keyword">if</span>(eg[i].c&gt;<span class="number">0</span> &amp;&amp; dep[to]==dep[v]+<span class="number">1</span>)&#123;</span><br><span class="line">tp=dfs(to,t,min(flow,eg[i].c));</span><br><span class="line"><span class="keyword">if</span>(tp&gt;<span class="number">0</span>)&#123;</span><br><span class="line">nxt[v]=to;</span><br><span class="line"><span class="keyword">if</span>(v!=s)vis[to-n]=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">eg[i].c-=tp,eg[i^<span class="number">1</span>].c+=tp;</span><br><span class="line"><span class="keyword">return</span> tp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(bfs(s,t))&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=s;i&lt;=t;++i)cur[i]=hd[i];  </span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">int</span> tp=dfs(s,t,inf))flow+=tp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">s=<span class="number">0</span>,t=n*<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">add(s,i,<span class="number">1</span>),add(i+n,t,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">add(x,y+n,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> ans=n-dinic(s,t);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[i]) &#123;</span><br><span class="line"><span class="keyword">int</span> now=i;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;now&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">while</span>(nxt[now] &amp;&amp; nxt[now]!=t)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;nxt[now]-n&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">now=nxt[now]-n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6p2765-é­”æœ¯çƒé—®é¢˜"><a class="markdownIt-Anchor" href="#6p2765-é­”æœ¯çƒé—®é¢˜"></a> 6.<a href="https://www.luogu.org/problemnew/show/P2765">P2765 é­”æœ¯çƒé—®é¢˜</a></h3><p><strong>æ€è·¯</strong>ï¼šæ­¤é¢˜å°±æ˜¯ä¸Šé¢˜çš„å˜ç§ã€‚å°±æ˜¯ä¸€å †æ•°ï¼Œç„¶åä»–ä»¬æœ‰çš„æ•°ä¹‹é—´æœ‰å¹³æ–¹çš„å…³ç³»(æœ‰è¾¹)ï¼Œç„¶åä½ ç”¨æœ€å°è·¯å¾„è¦†ç›–ï¼Œè·¯å¾„å°±æ˜¯æŸ±å­ï¼ŒçŸ¥é“æœ€å°è·¯å¾„è¦†ç›–=åŸå›¾çš„ç»“ç‚¹æ•°-æ–°å›¾çš„æœ€å¤§åŒ¹é…æ•°ï¼Œè¿™ä¸ªæˆ‘ä»¬æ˜¯çŸ¥é“çš„ã€‚ç‚¹æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªçš„åŠ ï¼Œæ¯æ¬¡åŠ éƒ½ç»™ä»–çš„å…¥ç‚¹å’Œtè¿æƒå€¼ä¸º1çš„è¾¹ï¼Œså’Œå‡ºç‚¹è¿è¾¹ã€‚ç„¶ååœ¨ç»™å¯ä»¥å’Œä»–ç»„æˆå¹³æ–¹æ•°çš„ç‚¹ä¹‹é—´è¿ä¸€æ¡æƒå€¼ä¸º1çš„è¾¹ï¼Œè·‘æœ€å¤§æµï¼Œå¾—åˆ°æœ€å°è·¯å¾„æ•°å¦‚æœå¤§äºæŸ±å­æ•°ï¼Œé‚£å°±ç›´æ¥åœäº†ï¼Œè€Œä¸”æˆ‘ä»¬çŸ¥é“æœ€å¤§çš„æ•°æ˜¯æ¯”ç°åœ¨è¿™ä¸ªæ•°å°1.å†ç”¨ä¸Šé¢çš„æ–¹æ³•è¾“å‡ºè·¯å¾„ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rg register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> dep[maxn],hd[maxn],cur[maxn],cnt=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> num,p=<span class="number">10000</span>,nxt[maxn];</span><br><span class="line"><span class="keyword">bool</span> pd[maxn],vis[maxn];</span><br><span class="line"><span class="keyword">int</span> s,t;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to,nxt,c;</span><br><span class="line">&#125; eg[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[++cnt]= &#123;t,hd[f],w&#125;,hd[f]=cnt;</span><br><span class="line">eg[++cnt]= &#123;f,hd[t],<span class="number">0</span>&#125;,hd[t]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=s; i&lt;=t; ++i)dep[i]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())q.pop();</span><br><span class="line">q.push(s),dep[s]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> now,to;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">now=q.front(),q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=hd[now]; i; i=eg[i].nxt) &#123;</span><br><span class="line">to=eg[i].to;</span><br><span class="line"><span class="keyword">if</span>(!dep[to] &amp;&amp; eg[i].c&gt;<span class="number">0</span>) &#123;</span><br><span class="line">dep[to]=dep[now]+<span class="number">1</span>;</span><br><span class="line">q.push(to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> dep[t];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> flow)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(v==t)<span class="keyword">return</span> flow;</span><br><span class="line"><span class="keyword">int</span> to,tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=cur[v]; i; i=eg[i].nxt) &#123;</span><br><span class="line">to=eg[i].to;</span><br><span class="line"><span class="keyword">if</span>(eg[i].c&gt;<span class="number">0</span> &amp;&amp; dep[to]==dep[v]+<span class="number">1</span>) &#123;</span><br><span class="line">tp=dfs(to,t,min(flow,eg[i].c));</span><br><span class="line"><span class="keyword">if</span>(tp&gt;<span class="number">0</span>) &#123;</span><br><span class="line">nxt[v]=to;</span><br><span class="line"><span class="keyword">if</span>(v!=s)vis[to-p]=<span class="number">1</span>;</span><br><span class="line">eg[i].c-=tp,eg[i^<span class="number">1</span>].c+=tp;</span><br><span class="line"><span class="keyword">return</span> tp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>; ; ++i) &#123;</span><br><span class="line">add(s,i,<span class="number">1</span>),add(i+p,t,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;i; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(pd[i+j])add(j,i+p,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(bfs(s,t)) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=s; i&lt;=t; ++i)cur[i]=hd[i];</span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">int</span> tp=dfs(s,t,inf))flow+=tp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i-flow&gt;num)<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;i; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[j]) &#123;</span><br><span class="line"><span class="keyword">int</span> now=j;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;now&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">while</span>(nxt[now] &amp;&amp; nxt[now]!=t) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;nxt[now]-p&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">now=nxt[now]-p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;num;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i*i&lt;maxn; ++i)pd[i*i]=<span class="number">1</span>;</span><br><span class="line">s=<span class="number">0</span>,t=<span class="number">100000</span>;</span><br><span class="line">dinic(s,t);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><h1 id="å››äºŒåˆ†å›¾åŒ¹é…åŒˆç‰™åˆ©ç½‘ç»œæµ"><a class="markdownIt-Anchor" href="#å››äºŒåˆ†å›¾åŒ¹é…åŒˆç‰™åˆ©ç½‘ç»œæµ"></a> å››,äºŒåˆ†å›¾åŒ¹é…(åŒˆç‰™åˆ©/ç½‘ç»œæµ)</h1></blockquote><h3 id="äº†è§£åŒˆç‰™åˆ©"><a class="markdownIt-Anchor" href="#äº†è§£åŒˆç‰™åˆ©"></a> <a href="https://blog.csdn.net/Arabic1666/article/details/79824390">äº†è§£åŒˆç‰™åˆ©</a>æœ‰è¶£æ˜“æ‡‚</h3><p>äºŒåˆ†å›¾æœ€å¤§åŒ¹é… å˜ç§:(åŒ¹é…æ•°é‡)</p><ol><li>æœ€å°é¡¶ç‚¹è¦†ç›– = æœ€å¤§åŒ¹é…æ•°<br />åœ¨äºŒåˆ†å›¾ä¸­æ±‚æœ€å°‘çš„ç‚¹ï¼Œè®©æ¯æ¡è¾¹éƒ½è‡³å°‘å’Œå…¶ä¸­çš„ä¸€ä¸ªç‚¹å…³è”ï¼Œè¿™å°±æ˜¯ï¼šâ€œäºŒåˆ†å›¾çš„æœ€å°é¡¶ç‚¹è¦†ç›–â€<br />äºŒåˆ†å›¾çš„æœ€å°é¡¶ç‚¹è¦†ç›–æ•°=æœ€å¤§åŒ¹é…æ•°</li><li>æœ€å°è·¯å¾„è¦†ç›– = èŠ‚ç‚¹æ•°ï¼ˆnï¼‰- æœ€å¤§åŒ¹é…æ•°ï¼ˆmï¼‰<br />ç”¨å°½é‡å°‘çš„ä¸ç›¸äº¤ç®€å•è·¯å¾„è¦†ç›–æœ‰å‘æ— ç¯å›¾(DAG)çš„æ‰€æœ‰é¡¶ç‚¹ï¼Œè¿™å°±æ˜¯DAGå›¾çš„æœ€å°è·¯å¾„è¦†ç›–é—®é¢˜<br />DAGå›¾çš„æœ€å°è·¯å¾„è¦†ç›–æ•° = èŠ‚ç‚¹æ•°ï¼ˆnï¼‰- æœ€å¤§åŒ¹é…æ•°ï¼ˆmï¼‰</li><li>äºŒåˆ†å›¾æœ€å¤§ç‹¬ç«‹é›† = èŠ‚ç‚¹æ•°ï¼ˆnï¼‰- æœ€å¤§åŒ¹é…æ•°ï¼ˆmï¼‰<br />ä»æ— å‘å›¾ä¸­çš„é¡¶ç‚¹ä¸­é€‰å‡ºkä¸ªå¹¶ä¸”kä¸ªé¡¶ç‚¹ä¹‹é—´äº’ä¸ç›¸é‚»ï¼Œæœ€å¤§çš„kå°±æ˜¯æœ€å¤§ç‹¬ç«‹é›†<br />äºŒåˆ†å›¾çš„æœ€å¤§ç‹¬ç«‹é›†æ•° = èŠ‚ç‚¹æ•°ï¼ˆnï¼‰- æœ€å¤§åŒ¹é…æ•°ï¼ˆmï¼‰</li></ol><h3 id="1p2756-é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆé—®é¢˜"><a class="markdownIt-Anchor" href="#1p2756-é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆé—®é¢˜"></a> 1.<a href="https://www.luogu.org/problemnew/show/P2756">P2756 é£è¡Œå‘˜é…å¯¹æ–¹æ¡ˆé—®é¢˜</a></h3><p><strong>æ€è·¯</strong>ï¼šäºŒåˆ†å›¾åŒ¹é…è£¸é¢˜ã€‚ä¹Ÿå¯ä»¥ç½‘ç»œæµæä¸€ä¸‹ï¼Œå·®ä¸å¤šçš„é€Ÿåº¦ï¼Œä½†æ˜æ˜¾åŒˆç‰™åˆ©æ›´åŠ å¥½å†™ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŒˆç‰™åˆ©</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">3e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">bool</span> mp[maxn][maxn],vis[maxn];</span><br><span class="line"><span class="keyword">int</span> match[maxn];</span><br><span class="line"><span class="keyword">int</span> k,m,n;</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(mp[x][i] &amp;&amp; !vis[i])&#123;</span><br><span class="line">vis[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(match[i]==<span class="number">0</span> || dfs(match[i],n))&#123;</span><br><span class="line">match[i]=x;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> m,<span class="keyword">int</span> n)</span></span>&#123; </span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line">ms(vis,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(dfs(i,n))ans++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">ms(match,<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;m&gt;&gt;n;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y &amp;&amp; (x!=<span class="number">-1</span> &amp;&amp; y!=<span class="number">-1</span>))&#123;</span><br><span class="line">mp[x][y-m]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;solve(m,n)&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(match[i])<span class="built_in">cout</span>&lt;&lt;match[i]&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;i+m&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">//ç½‘ç»œæµ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rg register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> dep[maxn],hd[maxn],cur[maxn],cnt=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> match[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m,s,t;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to,nxt,c;</span><br><span class="line">&#125; eg[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[++cnt]=edge&#123;t,hd[f],w&#125;,hd[f]=cnt;</span><br><span class="line">eg[++cnt]=edge&#123;f,hd[t],<span class="number">0</span>&#125;,hd[t]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=s;i&lt;=t;++i)dep[i]=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">while</span>(!q.empty())q.pop();</span><br><span class="line">q.push(s),dep[s]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> now,to;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">now=q.front(),q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=hd[now]; i; i=eg[i].nxt) &#123;</span><br><span class="line">to=eg[i].to;</span><br><span class="line"><span class="keyword">if</span>(!dep[to] &amp;&amp; eg[i].c&gt;<span class="number">0</span>) &#123;</span><br><span class="line">dep[to]=dep[now]+<span class="number">1</span>;</span><br><span class="line">q.push(to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> dep[t];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> flow)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(v==t)<span class="keyword">return</span> flow;</span><br><span class="line"><span class="keyword">int</span> to,tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=cur[v]; i; i=eg[i].nxt)&#123;</span><br><span class="line">to=eg[i].to;</span><br><span class="line"><span class="keyword">if</span>(eg[i].c&gt;<span class="number">0</span> &amp;&amp; dep[to]==dep[v]+<span class="number">1</span>)&#123;</span><br><span class="line">tp=dfs(to,t,min(flow,eg[i].c));</span><br><span class="line"><span class="keyword">if</span>(tp&gt;<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(v!=s &amp;&amp; to!=t)match[v]=to;</span><br><span class="line">eg[i].c-=tp,eg[i^<span class="number">1</span>].c+=tp;</span><br><span class="line"><span class="keyword">return</span> tp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(bfs(s,t))&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=s;i&lt;=t;++i)cur[i]=hd[i]; </span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">int</span> tp=dfs(s,t,inf))flow+=tp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;m&gt;&gt;n;</span><br><span class="line">s=<span class="number">0</span>,t=m+n+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)add(s,i,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=m+<span class="number">1</span>;i&lt;=n+m;++i)add(i,t,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y &amp;&amp; (x!=<span class="number">-1</span> &amp;&amp; y!=<span class="number">-1</span>))&#123;</span><br><span class="line">add(x,y,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dinic(s,t)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(match[i])<span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;match[i]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2p2055-zjoi2009å‡æœŸçš„å®¿èˆ"><a class="markdownIt-Anchor" href="#2p2055-zjoi2009å‡æœŸçš„å®¿èˆ"></a> 2.[P2055 <a href="https://www.luogu.org/problemnew/show/P2055">ZJOI2009]å‡æœŸçš„å®¿èˆ</a></h3><p><strong>æ€è·¯</strong>ï¼šè®²ä¸¤ç§å»ºæ¨¡æ–¹å¼å§ã€‚</p><p><em><strong>ç½‘ç»œæµå»ºæ¨¡</strong></em> ï¼šå¯¹äºæ¯ä¸ªç‚¹æ‹†ç‚¹(ä¹Ÿå¯ä»¥è®¤ä¸ºä¸€è¾¹æ˜¯äººï¼Œä¸€è¾¹æ˜¯åºŠ)ï¼Œå¯¹äºåœ¨æ ¡ç”Ÿï¼Œä»ä»–ä»¬çš„åºŠè¿ä¸€æ¡æƒå€¼ä¸º1çš„è¾¹åˆ°æ±‡ç‚¹tï¼Œè€Œå¯¹äºä¸å›å®¶çš„åœ¨æ ¡ç”Ÿæˆ–è€…éæ ¡ç”Ÿ(è¿™äº›éƒ½æ˜¯æƒ³è¦ä½å­¦æ ¡çš„äºº)ï¼Œä»æºç‚¹è¿ä¸€æ¡æƒå€¼ä¸º1çš„è¾¹åˆ°ä»–ä»¬ï¼ŒåŒæ—¶ä¸å›å®¶çš„åœ¨æ ¡ç”Ÿå½“ç„¶ä¹Ÿå¯ä»¥ç¡è‡ªå·±åºŠäº†ï¼Œè¿ä¸€æ¡åˆ°è‡ªå·±çš„åºŠã€‚ç„¶åå°±æ˜¯è®¤è¯†çš„å…³ç³»ï¼Œiè®¤è¯†jå°±å¯ä»¥ä»iè¿ä¸€æ¡åˆ°jçš„åºŠçš„è¾¹ã€‚<br /><em><strong>åŒˆç‰™åˆ©å»ºæ¨¡</strong></em> ï¼šä¸å›å®¶è€Œä¸”æ˜¯åœ¨æ ¡ç”Ÿï¼Œmp[i][i]=1ï¼Œå¯ä»¥å’Œè‡ªå·±çš„åºŠåŒ¹é…ã€‚å¯¹äºæœ‰å…³ç³»çš„ï¼Œä¸å›å®¶çš„åœ¨æ ¡ç”Ÿæˆ–è€…ä¸æ˜¯åœ¨æ ¡ç”Ÿï¼Œå¹¶ä¸”å¯¹æ–¹æ˜¯åœ¨æ ¡ç”Ÿï¼Œå»ºç«‹mp[i][j]=1,æ­¤äºŒåˆ†å›¾è¦ä¿è¯å·¦è¾¹çš„äººéƒ½éœ€è¦åºŠä½ï¼Œè€Œå³è¾¹çš„éƒ½æœ‰åºŠæ‰èƒ½åŒ¹é…ï¼Œå¦åˆ™å»ºç«‹çš„è¾¹å°±æ˜¯æ— æ•ˆçš„(ä¸è¦åºŠçš„ä½ ç»™ä»–è¿è¾¹å‡ºæ¥ï¼Œå¯èƒ½å°±ä¼šå¤šåˆ†é…ï¼Œå¯¹äºæ²¡æœ‰åºŠçš„ï¼Œä½ è¿è¿‡æ¥ä¹Ÿå¯èƒ½å¤šåŒ¹é…)ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç½‘ç»œæµ</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rg register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> dep[maxn],hd[maxn],cur[maxn],cnt=<span class="number">1</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to,nxt,c;</span><br><span class="line">&#125; eg[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">eg[++cnt]=edge&#123;t,hd[f],w&#125;,hd[f]=cnt;</span><br><span class="line">eg[++cnt]=edge&#123;f,hd[t],<span class="number">0</span>&#125;,hd[t]=cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=s;i&lt;=t;++i)dep[i]=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">while</span>(!q.empty())q.pop();</span><br><span class="line">q.push(s),dep[s]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> now,to;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">now=q.front(),q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=hd[now]; i; i=eg[i].nxt) &#123;</span><br><span class="line">to=eg[i].to;</span><br><span class="line"><span class="keyword">if</span>(!dep[to] &amp;&amp; eg[i].c&gt;<span class="number">0</span>) &#123;</span><br><span class="line">dep[to]=dep[now]+<span class="number">1</span>;</span><br><span class="line">q.push(to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> dep[t];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> t,<span class="keyword">int</span> flow)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(v==t)<span class="keyword">return</span> flow;</span><br><span class="line"><span class="keyword">int</span> to,tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> &amp;i=cur[v]; i; i=eg[i].nxt)&#123;</span><br><span class="line">to=eg[i].to;</span><br><span class="line"><span class="keyword">if</span>(eg[i].c&gt;<span class="number">0</span> &amp;&amp; dep[to]==dep[v]+<span class="number">1</span>)&#123;</span><br><span class="line">tp=dfs(to,t,min(flow,eg[i].c));</span><br><span class="line"><span class="keyword">if</span>(tp&gt;<span class="number">0</span>)&#123;</span><br><span class="line">eg[i].c-=tp,eg[i^<span class="number">1</span>].c+=tp;</span><br><span class="line"><span class="keyword">return</span> tp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">dinic</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> flow=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(bfs(s,t))&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=s;i&lt;=t;++i)cur[i]=hd[i];  </span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">int</span> tp=dfs(s,t,inf))flow+=tp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> flow;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,m,s,t,T;</span><br><span class="line"><span class="keyword">int</span> sch[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line"><span class="keyword">int</span> tp;</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n; </span><br><span class="line">s=<span class="number">0</span>,t=n*<span class="number">2</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> num=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123; <span class="comment">//åœ¨æ ¡ç”Ÿ </span></span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;sch[i];</span><br><span class="line"><span class="keyword">if</span>(sch[i]==<span class="number">1</span>)add(i+n,t,<span class="number">1</span>); </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123; <span class="comment">//å›å®¶ </span></span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>((tp==<span class="number">0</span> &amp;&amp; sch[i]==<span class="number">1</span>) || (sch[i]==<span class="number">0</span>))add(s,i,<span class="number">1</span>),num++;</span><br><span class="line"><span class="comment">//ä¸å›å®¶è€Œä¸”æ˜¯åœ¨æ ¡ç”Ÿ æˆ–è€… ä¸æ˜¯åœ¨æ ¡ç”Ÿ</span></span><br><span class="line"><span class="keyword">if</span>(tp==<span class="number">0</span> &amp;&amp; sch[i]==<span class="number">1</span>)add(i,i+n,<span class="number">1</span>);</span><br><span class="line"><span class="comment">//ä¸å›å®¶çš„åœ¨æ ¡ç”Ÿå½“ç„¶ä¹Ÿå¯ä»¥ç¡è‡ªå·±åºŠäº†</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="number">1</span> &amp;&amp; i!=j)add(i,j+n,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> res=dinic(s,t);</span><br><span class="line"><span class="keyword">if</span>(res&gt;=num)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;^_^&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;T_T&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">cnt=<span class="number">1</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=s;i&lt;=t;++i)hd[i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">//åŒˆç‰™åˆ©</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">3e2</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">bool</span> mp[maxn][maxn],vis[maxn];</span><br><span class="line"><span class="keyword">int</span> match[maxn];</span><br><span class="line"><span class="keyword">int</span> n,sch[maxn],back[maxn];</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(mp[x][i] &amp;&amp; !vis[i])&#123;</span><br><span class="line">vis[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(match[i]==<span class="number">0</span> || dfs(match[i],n))&#123;</span><br><span class="line">match[i]=x;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> m,<span class="keyword">int</span> n)</span></span>&#123; </span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line">ms(vis,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(dfs(i,n))ans++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line"><span class="keyword">int</span> tp; </span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">int</span> tot=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)<span class="built_in">cin</span>&gt;&gt;sch[i];<span class="comment">//åœ¨æ ¡ç”Ÿ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;<span class="comment">//å›å®¶ </span></span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;back[i];</span><br><span class="line"><span class="keyword">if</span>(back[i]==<span class="number">0</span> &amp;&amp; sch[i]==<span class="number">1</span>)mp[i][i]=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//ä¸å›å®¶è€Œä¸”æ˜¯åœ¨æ ¡ç”Ÿ</span></span><br><span class="line"><span class="keyword">if</span>((back[i]==<span class="number">0</span> &amp;&amp; sch[i]==<span class="number">1</span>) || sch[i]==<span class="number">0</span>)tot++; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="number">1</span> &amp;&amp; i!=j)&#123;</span><br><span class="line"><span class="keyword">if</span>(((sch[i]==<span class="number">1</span> &amp;&amp; back[i]==<span class="number">0</span>) || sch[i]==<span class="number">0</span>) &amp;&amp; sch[j]==<span class="number">1</span>)mp[i][j]=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//ä¸å›å®¶è€Œä¸”æ˜¯åœ¨æ ¡ç”Ÿæˆ–è€…ä¸æ˜¯åœ¨æ ¡ç”Ÿï¼Œå¹¶ä¸”å¯¹æ–¹æ˜¯åœ¨æ ¡ç”Ÿ </span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">int</span> num=solve(n,n);</span><br><span class="line"><span class="keyword">if</span>(num&gt;=tot) <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;^_^&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;T_T&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">ms(back,<span class="number">0</span>),ms(sch,<span class="number">0</span>),ms(mp,<span class="number">0</span>),ms(vis,<span class="number">0</span>),ms(match,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><blockquote><h1 id="äº”æœ€å°è´¹ç”¨æœ€å¤§æµdijkstraç¨ å¯†å›¾spfaç¨€ç–å›¾"><a class="markdownIt-Anchor" href="#äº”æœ€å°è´¹ç”¨æœ€å¤§æµdijkstraç¨ å¯†å›¾spfaç¨€ç–å›¾"></a> äº”,æœ€å°è´¹ç”¨æœ€å¤§æµï¼ˆDijkstraç¨ å¯†å›¾/Spfaç¨€ç–å›¾ï¼‰</h1></blockquote><h3 id="1p4016-è´Ÿè½½å¹³è¡¡é—®é¢˜"><a class="markdownIt-Anchor" href="#1p4016-è´Ÿè½½å¹³è¡¡é—®é¢˜"></a> 1.<a href="https://www.luogu.org/problemnew/show/P4016">P4016 è´Ÿè½½å¹³è¡¡é—®é¢˜</a></h3><p><strong>æ€è·¯</strong>ï¼šæœ€åéƒ½æ˜¯ä¸€æ ·çš„æ•°é‡ï¼Œé‚£å…ˆå°†æ¯ä¸€ä¸ªä»“åº“çš„æ•°é‡å…ˆå‡å»å¹³å‡æ•°ï¼Œçœ‹çœ‹è¦å¾€å¤–æ¬å‡ºå»å¤šå°‘ä¸ªï¼Œæ¬è¿›æ¥å¤šå°‘ä¸ªï¼Œæºç‚¹så‘æ¯ä¸ªæ˜¯æ­£å€¼(å‡è®¾ç°ä»“åº“ä¸ºv)çš„ä»“åº“è¿ä¸€æ¡æƒå€¼ä¸ºvçš„è¾¹ï¼Œè¯´æ˜è¦ä»ä»–è¿™æ€»å…±è¦æµå‡ºvçš„æµé‡ï¼Œå†å¯¹æ¯ä¸ªæ˜¯è´Ÿå€¼çš„ä»“åº“(å‡è®¾ç°ä»“åº“ä¸º-u)ï¼Œè¿ä¸€æ¡å€¼ä¸ºuçš„è¾¹åˆ°tï¼Œå®ƒå·®uçš„æµé‡æ‰€ä»¥æµå‡ºuçš„æµé‡åˆ°tï¼Œè¯´æ˜å®ƒå¾—åˆ°äº†uçš„æµé‡ã€‚å†å¯¹ç›¸é‚»çš„ç‚¹è¿æƒå€¼ä¸ºinfçš„è¾¹ã€‚å•ä½æµé‡çš„è´¹ç”¨ä¸º1.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//spfa</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to,cap,cost,rev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; eg[maxn];</span><br><span class="line"><span class="keyword">int</span> dis[maxn],pre[maxn],preid[maxn];</span><br><span class="line"><span class="keyword">bool</span> inq[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m,s,t;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=t; ++i)pre[i]=preid[i]=inq[i]=<span class="number">0</span>,eg[i].clear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w,<span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">eg[f].pb(edge &#123;t,w,c,(<span class="keyword">int</span>)eg[t].size()&#125;);</span><br><span class="line">eg[t].pb(edge &#123;f,<span class="number">0</span>,-c,(<span class="keyword">int</span>)eg[f].size()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> st)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=t; ++i)dis[i]=inf;</span><br><span class="line">dis[st]=<span class="number">0</span>,inq[st]=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">q.push(st);</span><br><span class="line"><span class="keyword">int</span> u;</span><br><span class="line">edge e;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">u=q.front(),q.pop();</span><br><span class="line">inq[u]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)eg[u].size(); ++i) &#123;</span><br><span class="line">e=eg[u][i];</span><br><span class="line"><span class="keyword">if</span>(e.cap&gt;<span class="number">0</span> &amp;&amp; dis[e.to]&gt;dis[u]+e.cost) &#123;</span><br><span class="line">dis[e.to]=dis[u]+e.cost, pre[e.to]=u, preid[e.to]=i;</span><br><span class="line"><span class="keyword">if</span>(!inq[e.to]) &#123;</span><br><span class="line">q.push(e.to);</span><br><span class="line">inq[e.to]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> flow=<span class="number">0</span>,cost=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">costflow</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> d;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">spfa(s);</span><br><span class="line"><span class="keyword">if</span>(dis[t]==inf)<span class="keyword">break</span>;</span><br><span class="line">d=inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> v=t; v!=s; v=pre[v]) &#123;</span><br><span class="line">d=min(d,eg[pre[v]][preid[v]].cap);</span><br><span class="line">&#125;</span><br><span class="line">flow+=d,cost+=d*dis[t];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> v=t; v!=s; v=pre[v]) &#123;</span><br><span class="line">eg[pre[v]][preid[v]].cap-=d;</span><br><span class="line">eg[v][eg[pre[v]][preid[v]].rev].cap+=d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>,ave;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)<span class="built_in">cin</span>&gt;&gt;a[i],sum+=a[i];</span><br><span class="line">ave=sum/n;</span><br><span class="line">s=<span class="number">0</span>,t=n+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">a[i]-=ave;</span><br><span class="line"><span class="keyword">if</span>(a[i]&gt;<span class="number">0</span>)add(s,i,a[i],<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(a[i]&lt;<span class="number">0</span>)add(i,t,-a[i],<span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">1</span>)add(i,i+<span class="number">1</span>,inf,<span class="number">1</span>),add(i,n,inf,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span><span class="keyword">if</span>(i==n)add(i,i<span class="number">-1</span>,inf,<span class="number">1</span>),add(i,<span class="number">1</span>,inf,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span>add(i,i+<span class="number">1</span>,inf,<span class="number">1</span>),add(i,i<span class="number">-1</span>,inf,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">costflow(s,t);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;cost&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">//Dijkstra</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to, cap, cost, rev;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; G[maxn];</span><br><span class="line"><span class="keyword">int</span> dis[maxn],pre[maxn], prid[maxn],h[maxn];</span><br><span class="line"><span class="keyword">int</span> n,s,t;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=t; ++i)pre[i]=prid[i]=h[i]=<span class="number">0</span>,G[i].clear();</span><br><span class="line">&#125; <span class="comment">//æš‚é»˜è®¤tåæ ‡æœ€å¤§</span></span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> f,<span class="keyword">int</span> t,<span class="keyword">int</span> w,<span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">G[f].pb(edge &#123;t,w,c,(<span class="keyword">int</span>)G[t].size()&#125;);</span><br><span class="line">G[t].pb(edge &#123;f,<span class="number">0</span>,-c,(<span class="keyword">int</span>)G[f].size()<span class="number">-1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">bool</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> st)</span> </span>&#123;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">pdis</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> p,val;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> pdis &amp;pd) <span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> val&gt;pd.val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=t; ++i)dis[i]=inf;</span><br><span class="line">dis[st]=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;pdis&gt; q;</span><br><span class="line">q.push(&#123;st,dis[st]&#125;);</span><br><span class="line"><span class="keyword">int</span> now;</span><br><span class="line"><span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">now=q.top().p,q.pop();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)G[now].size(); ++i) &#123;</span><br><span class="line">edge &amp;e=G[now][i];</span><br><span class="line"><span class="keyword">if</span> (e.cap&gt;<span class="number">0</span> &amp;&amp; dis[e.to]&gt;dis[now]+e.cost+h[now]-h[e.to]) &#123;</span><br><span class="line">dis[e.to]=dis[now]+e.cost+h[now]-h[e.to];</span><br><span class="line">pre[e.to]=now,prid[e.to]=i;</span><br><span class="line">q.push(&#123;e.to,dis[e.to]&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> dis[t]!=inf;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> flow=<span class="number">0</span>,cost=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">costflow</span><span class="params">(<span class="keyword">int</span> s,<span class="keyword">int</span> t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span> (dijkstra(s)) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=t; ++i)h[i]+=dis[i];</span><br><span class="line"><span class="keyword">int</span> d=inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> v=t; v!=s; v=pre[v])d=min(d,G[pre[v]][prid[v]].cap);</span><br><span class="line">flow+=d,cost+=d*h[t];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> v=t; v!=s; v=pre[v]) &#123;</span><br><span class="line">G[pre[v]][prid[v]].cap-=d;</span><br><span class="line">G[v][G[pre[v]][prid[v]].rev].cap+=d;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>,ave;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i)<span class="built_in">cin</span>&gt;&gt;a[i],sum+=a[i];</span><br><span class="line">ave=sum/n;</span><br><span class="line">s=<span class="number">0</span>,t=n+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">a[i]-=ave;</span><br><span class="line"><span class="keyword">if</span>(a[i]&gt;<span class="number">0</span>)add(s,i,a[i],<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(a[i]&lt;<span class="number">0</span>)add(i,t,-a[i],<span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">1</span>)add(i,i+<span class="number">1</span>,inf,<span class="number">1</span>),add(i,n,inf,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span><span class="keyword">if</span>(i==n)add(i,i<span class="number">-1</span>,inf,<span class="number">1</span>),add(i,<span class="number">1</span>,inf,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span>add(i,i+<span class="number">1</span>,inf,<span class="number">1</span>),add(i,i<span class="number">-1</span>,inf,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">costflow(s,t);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;cost&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> ä¸“é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œæµ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) Codeforces Round 541 (Div. 2) A,B,C,D,F</title>
      <link href="2019/02/25/(CodeForce)%20Codeforces%20Round541/"/>
      <url>2019/02/25/(CodeForce)%20Codeforces%20Round541/</url>
      
        <content type="html"><![CDATA[<p><a href="http://codeforces.com/contest/1131">ä¼ é€é—¨</a></p><h3 id="a-sea-battle"><a class="markdownIt-Anchor" href="#a-sea-battle"></a> A. Sea Battle</h3><p>ï¼šå›´æˆçš„ä¸è§„åˆ™å›¾åƒçš„å‘¨é•¿(å°±æ˜¯çŸ©å½¢çš„å‘¨é•¿)ï¼Œåœ¨åŠ å››ä¸ªè§’é‡å¤çš„éƒ¨åˆ†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line">ll w1,h1,w2,h2;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;w1&gt;&gt;h1&gt;&gt;w2&gt;&gt;h2;</span><br><span class="line">ll sum=(h1+h2)*<span class="number">2</span>+(max(w1,w2))*<span class="number">2</span>+<span class="number">4</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;sum&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="b-draw"><a class="markdownIt-Anchor" href="#b-draw"></a> B. Draw!</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e4</span>+<span class="number">50</span>;</span><br><span class="line">ll a[maxn],b[maxn],le,ri;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">ll ans=<span class="number">0</span>,tdd=<span class="number">-1</span>;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i]&gt;&gt;b[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">le=max(a[i<span class="number">-1</span>],b[i<span class="number">-1</span>]);</span><br><span class="line">ri=min(a[i],b[i]);</span><br><span class="line"><span class="keyword">if</span>(ri&gt;=le) ans+=ri-max(le<span class="number">-1</span>,tdd),tdd=max(le,ri);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h3 id="c-birthday"><a class="markdownIt-Anchor" href="#c-birthday"></a> C. Birthday</h3><p>ï¼šåªè¦åºåˆ—é«˜åº¦(å¤§å°)æ˜¯ä¸€ä¸ªå±±å­—å½¢å°±è¡Œäº†ï¼Œæ‰€ä»¥æ’ä¸ªåºï¼Œæ“ä½œä¸€ä¸‹å°±è¡Œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1005</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> a[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i)<span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">sort(a,a+n);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=n<span class="number">-1</span>; i&gt;=<span class="number">0</span>; --i) &#123;</span><br><span class="line"><span class="keyword">if</span>(i&amp;<span class="number">1</span>)ans.insert(ans.begin(),a[i]);</span><br><span class="line"><span class="keyword">else</span>ans.insert(ans.end(),a[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)ans.size(); ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="d-gourmet-choice"><a class="markdownIt-Anchor" href="#d-gourmet-choice"></a> D. Gourmet choice</h3><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ç¬¬ä¸€å¤©nä¸ªèœï¼Œç¬¬äºŒå¤©mä¸ªèœï¼Œä¸€ä¸ªn*mçš„çŸ©é˜µä»£è¡¨ä»–ä»¬ä¹‹é—´çš„ä¼˜åŠ£å…³ç³»ï¼Œæ ¹æ®è¿™ä¸ªçŸ©é˜µç”¨æ•°å­—æ¥ç»™æ¯ä¸€ä¸ªèœå“æ‰“åˆ†ï¼Œä½¿å¾—æœ€å¤§çš„æ•°å­—æœ€å°ã€‚æ¯”å¦‚ Aij æ˜¯&gt; è¯´æ˜ç¬¬ä¸€å¤©çš„ ièœ æ¯”ç¬¬äºŒå¤©çš„ jèœå¥½ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> æ ¹æ®é¢˜ç›®çš„æè¿°ï¼Œä¸¤é“èœä¹‹é—´çš„ä¼˜åŠ£æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è¿ä¸€æ¡æƒå€¼ä¸º1çš„å•å‘è¾¹ï¼Œè€Œå“ªäº›æ²¡æœ‰æŒ‡å‘ä»–çš„ç‚¹ï¼Œé‚£å°±æ˜¯æœ€å°çš„æ•°ä¸º1ã€‚ä»å…¥åº¦ä¸º0çš„ç‚¹å¼€å§‹ï¼Œä¸€æ­¥æ­¥å¾€é‡Œé¢èµ°ï¼Œæˆ‘ä»¬è‡ªç„¶å¯ä»¥æƒ³åˆ°æ‹“æ‰‘æ’åºï¼Œä½†è¿™é¢˜ç›®è¿˜æœ‰ = ï¼Œè¯´æ˜ä¸¤ä¸ªèœçš„ä¼˜åŠ£ç¨‹åº¦ç›¸åŒ é‚£ä¹ˆè€ƒè™‘åˆ°ï¼Œå¦‚æœä¸¤ä¸ªèœä¼˜åŠ£ç¨‹åº¦ç›¸åŒï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥å°†ä»–ä»¬è®¤ä¸ºæ˜¯ä¸€ä¸ªç‚¹(æ”¾åˆ°ä¸€ä¸ªé›†åˆä¸­)ï¼Œä»–ä»¬æ»¡è¶³çš„æ¡ä»¶æ˜¯å…±é€šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå¹¶æŸ¥é›†å»ç»´æŠ¤ï¼Œæˆ‘ä»¬æŠŠä¸€ä¸ªé›†åˆé‡Œçš„ç‚¹éƒ½ç”¨ä¸€ä¸ªç‚¹æ¥ä»£æ›¿ï¼Œç„¶åæ‹“æ‰‘å°±è¡Œäº†ï¼Œæœ‰ç¯è¯´æ˜å°±çŸ›ç›¾ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> fa[maxn],rk[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; eg[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;maxn; ++i) &#123;</span><br><span class="line">fa[i]=i,rk[i]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x==fa[x])<span class="keyword">return</span> fa[x];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> fa[x]=find(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unite</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">x=find(x),y=find(y);</span><br><span class="line"><span class="keyword">if</span>(x!=y) &#123;</span><br><span class="line"><span class="keyword">if</span>(rk[x]&gt;rk[y])fa[y]=x;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(rk[x]==rk[y])rk[y]++;</span><br><span class="line">fa[x]=y;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> in[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; num;</span><br><span class="line"><span class="keyword">int</span> ans[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123; <span class="comment">//æ‹“æ‰‘æ’åº</span></span><br><span class="line"><span class="keyword">int</span> tp,sz=num.size(),cnt=sz;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;sz; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;(<span class="keyword">int</span>)eg[num[i]].size(); ++j) &#123;</span><br><span class="line">tp=eg[num[i]][j];</span><br><span class="line">in[tp]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;sz; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!in[num[i]])q.push(num[i]),ans[num[i]]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> to;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">tp=q.front(),q.pop();</span><br><span class="line">cnt--;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)eg[tp].size(); ++i) &#123;</span><br><span class="line">to=eg[tp][i];</span><br><span class="line">in[to]--;</span><br><span class="line">ans[to]=max(ans[to],ans[tp]+<span class="number">1</span>); <span class="comment">//æ›´æ–°ans</span></span><br><span class="line"><span class="keyword">if</span>(!in[to]) &#123;</span><br><span class="line">q.push(to);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cnt)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;No&quot;</span>&lt;&lt;<span class="built_in">endl</span>; <span class="comment">//è¯´æ˜æœ‰ç¯ï¼ŒçŸ›ç›¾</span></span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Yes&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans[find(i)]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans[find(i+n)]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">init();</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">char</span> tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=m; ++j) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="string">&#x27;&gt;&#x27;</span>)eg[j+n].push_back(i);</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="string">&#x27;&lt;&#x27;</span>)eg[i].push_back(j+n);</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="string">&#x27;=&#x27;</span>)unite(i,j+n);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m+n; ++i) &#123; <span class="comment">//è¿™ä¸€æ­¥å°±æ˜¯ç”¨ç‚¹æ¥ä»£è¡¨é›†åˆï¼Œè¿™é‡Œæ„Ÿè§‰å†™ç¹çäº†</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;(<span class="keyword">int</span>)eg[i].size(); ++j) &#123; <span class="comment">//å°†æŒ‡å‡ºå»çš„è¾¹éƒ½æŒ‡å‘é›†åˆçš„çˆ¶äº²</span></span><br><span class="line"><span class="keyword">int</span> p=eg[i][j];</span><br><span class="line"><span class="keyword">if</span>(find(p)!=p)eg[i][j]=find(p);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(find(i)!=i) &#123; <span class="comment">//ç”¨çˆ¶äº²ä»£è¡¨è¿™ä¸ªé›†åˆ</span></span><br><span class="line">eg[find(i)].insert(eg[find(i)].end(),eg[i].begin(),eg[i].end());</span><br><span class="line">&#125; <span class="keyword">else</span>num.push_back(i); <span class="comment">//ç°åœ¨çš„ç‚¹æ”¾åˆ°numæ•°ç»„ä¸­</span></span><br><span class="line">&#125;</span><br><span class="line">solve();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h3 id="f-asya-and-kittens"><a class="markdownIt-Anchor" href="#f-asya-and-kittens"></a> F. Asya And Kittens</h3><p>ï¼šè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¹¶æŸ¥é›†çš„é¢˜ç›®ï¼Œæˆ‘ä»¬åªéœ€å°†æ¯æ¬¡åˆå¹¶çš„ä¸œè¥¿ç»´æŠ¤ä¸€ä¸‹ï¼Œè¿™é¢˜å°±è¿åˆƒè€Œè§£äº†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">155000</span>;</span><br><span class="line"><span class="keyword">int</span> fa[maxn],rk[maxn]; <span class="comment">//è¿™é‡Œçš„rkæ˜¯ ä»¥iä¸ºçˆ¶äº²ä¸ºé›†åˆçš„å…ƒç´ </span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(fa[x]==x)<span class="keyword">return</span> fa[x];</span><br><span class="line"><span class="keyword">else</span><span class="keyword">return</span> fa[x]=find(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unity</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">x=find(x),y=find(y);</span><br><span class="line"><span class="keyword">if</span>(x==y) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span>(rk[x]&lt;rk[y]) swap(x,y);</span><br><span class="line">fa[y]=x,rk[x]+=rk[y];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=rk[y]<span class="number">-1</span>; ++i) &#123; <span class="comment">//æ¯æ¬¡åˆå¹¶æˆ‘ä»¬æŠŠé›†åˆçš„å…ƒç´ ä¹Ÿå¹¶ä¸€ä¸‹</span></span><br><span class="line">G[x].push_back(G[y][i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i)</span><br><span class="line">fa[i]=i,G[i].push_back(i),rk[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n<span class="number">-1</span>; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">unity(x,y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> st=find(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n<span class="number">-2</span>; ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;G[st][i]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;G[st][n<span class="number">-1</span>]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1993 å°Kçš„å†œåœº (å·®åˆ†çº¦æŸ)</title>
      <link href="2019/02/24/(Luogu)%20P1993%20%E5%B0%8FK%E7%9A%84%E5%86%9C%E5%9C%BA/"/>
      <url>2019/02/24/(Luogu)%20P1993%20%E5%B0%8FK%E7%9A%84%E5%86%9C%E5%9C%BA/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1993">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è¿™æ˜¯ä¸€é“å·®åˆ†çº¦æŸçš„è£¸é¢˜ï¼Œæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦å·®åˆ†çº¦æŸï¼Œï¼ˆ<a href="https://blog.csdn.net/whereisherofrom/article/details/78922648">è¯¦ç»†è§£è¯´æˆ³æˆ‘</a>ï¼‰ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†ä¸ç­‰å¼ ä¸ spfaé‡Œçš„æ¾å¼›æ“ä½œè”ç³»èµ·æ¥ï¼Œç»™äºˆä»–æ„ä¹‰ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨å›¾çš„æ–¹å¼æ¥è§£å†³ä»–äº†ï¼Œè§‚å¯Ÿç­‰å¼ a-b&lt;=k ,è¿™ä¸ªå¼å­å¯ä»¥å˜æˆ a&lt;=b+k è¿™ä¸ªå¼å­æ˜¯ä¸å¾ˆåƒ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spfaé‡Œçš„æ¾å¼›æ“ä½œ</span><br><span class="line"><span class="keyword">if</span>(d[v] &lt; d[u] + w(u,v) ) &#123;</span><br><span class="line">        d[v] = d[u] + w(u, v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥å°†açœ‹æˆd[v], bçœ‹æˆd[u], é‚£ä¹ˆkå°±æ˜¯uåˆ°vè¿™æ¡è¾¹ä¸Šçš„æƒå€¼äº†ï¼Œç„¶åå°±å¯ä»¥å»ºå›¾ã€‚</p><p>è€Œè¿™ä¸ªé¢˜ç›®ï¼Œä»–ç»™çš„è‡³å¤šå’Œè‡³å°‘å°±æ˜¯è¿™æ ·çš„ä¸ç­‰å¼ï¼ˆéƒ½åŒ–ç®€æˆå°äºç­‰äºï¼‰ï¼Œè€Œç­‰äºï¼Œé‚£å°±å»ºä¸¤æ¡æƒå€¼ä¸º0çš„è¾¹ï¼Œç„¶åå¯ä»¥è¿˜æ˜¯ä¸å¯ä»¥å‘¢ï¼Œé‚£å°±åˆ¤æ–­æœ‰æ²¡æœ‰ç¯ï¼Œæœ‰ç¯é‚£å°±çŸ›ç›¾äº†ã€‚æ·±æœåˆ¤æ–­ç¯æ¯”å®½æœå¿«å¾ˆå¤šã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to,w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; eg[maxn];</span><br><span class="line"><span class="keyword">int</span> dist[maxn],vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> st)</span> </span>&#123;</span><br><span class="line">vis[st]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> to,w;</span><br><span class="line">node tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)eg[st].size(); ++i) &#123;</span><br><span class="line">tp=eg[st][i];</span><br><span class="line">to=tp.to,w=tp.w;</span><br><span class="line"><span class="keyword">if</span>(dist[to]&gt;dist[st]+w) &#123;</span><br><span class="line">dist[to]=dist[st]+w;</span><br><span class="line"><span class="keyword">if</span>(vis[to] || spfa(to))<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">vis[st]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> x,a,b,c;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x;</span><br><span class="line"><span class="keyword">if</span>(x==<span class="number">1</span>) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br><span class="line">eg[a].push_back(node &#123;b,-c&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(x==<span class="number">2</span>) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br><span class="line">eg[b].push_back(node &#123;a,c&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(x==<span class="number">3</span>) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">eg[a].push_back(node &#123;b,<span class="number">0</span>&#125;);</span><br><span class="line">eg[b].push_back(node &#123;a,<span class="number">0</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(spfa(i))&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;No&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Yes&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·®åˆ†çº¦æŸ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P2024 [NOI2001]é£Ÿç‰©é“¾ (å¹¶æŸ¥é›†)</title>
      <link href="2019/02/19/(Luogu)%20P2024%20%5BNOI2001%5D%E9%A3%9F%E7%89%A9%E9%93%BE/"/>
      <url>2019/02/19/(Luogu)%20P2024%20%5BNOI2001%5D%E9%A3%9F%E7%89%A9%E9%93%BE/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P2024">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> å°†å¹¶æŸ¥é›†åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ† åˆ†åˆ«æ˜¯åŒç±»ï¼ŒçŒç‰© ï¼Œå¤©æ•Œï¼Œå–x(xå±äº1~n)ä¸¾ä¸ªæ —å­ï¼Œä¸xä¸€å—çš„ä¸ºxçš„åŒç±»ï¼Œä¸x+nä¸ºä¸€å—çš„ä¸ºxçš„çŒç‰©ï¼Œä¸x+2*nä¸ºä¸€å—çš„ä¸ºxçš„å¤©æ•Œã€‚æˆ‘ä»¬åªéœ€è¦åŒæ—¶ç»´æŠ¤è¿™ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå¹¶ç”¨æ¥åˆ¤æ–­å‡è¯å³å¯ã€‚ç”±äºåªæœ‰Aï¼ŒBï¼ŒCä¸‰ç§åŠ¨ç‰©ï¼Œé‚£ä¹ˆAçŒç‰©çš„çŒç‰©å°±æ˜¯Açš„å¤©æ•Œè¿™éœ€è¦æ³¨æ„ç»´æŠ¤ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> fa[maxn*<span class="number">3</span>],rk[maxn*<span class="number">3</span>]; <span class="comment">//ä¸€éƒ¨åˆ†ä»£è¡¨åŒç±»ï¼Œ äºŒçŒç‰© ï¼Œä¸‰å¤©æ•Œ </span></span><br><span class="line"><span class="keyword">int</span> n,k,ans=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;maxn*<span class="number">3</span>;++i)</span><br><span class="line">fa[i]=i,rk[i]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x==fa[x])<span class="keyword">return</span> fa[x];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> fa[x]=find(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ck</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">x=find(x),y=find(y);</span><br><span class="line"><span class="keyword">if</span>(x==y)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unite</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">x=find(x),y=find(y);</span><br><span class="line"><span class="keyword">if</span>(rk[x]&lt;rk[y])fa[x]=y;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(rk[x]==rk[y])rk[x]++;</span><br><span class="line">fa[y]=x;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">init();</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;k;</span><br><span class="line"><span class="keyword">int</span> x,y,z;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;z&gt;&gt;x&gt;&gt;y;</span><br><span class="line"><span class="keyword">if</span>(x&gt;n || y&gt;n)&#123;</span><br><span class="line">ans++;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(z==<span class="number">1</span>)&#123; <span class="comment">//åŒç±» </span></span><br><span class="line"><span class="keyword">if</span>(find(x+n)==find(y) || find(x+<span class="number">2</span>*n)==find(y) )&#123;</span><br><span class="line">                <span class="comment">//yæ˜¯xçš„çŒç‰© æˆ–è€… yæ˜¯xçš„å¤©æ•Œ å³ä¸ºå‡è¯</span></span><br><span class="line">ans++;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125; </span><br><span class="line">unite(x,y),unite(x+n,y+n),unite(x+<span class="number">2</span>*n,y+<span class="number">2</span>*n);</span><br><span class="line">            <span class="comment">//xçš„åŒç±»ä¹Ÿæ˜¯yçš„åŒç±»åˆå¹¶ï¼ŒçŒç‰©å’Œå¤©æ•ŒåŒç†</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(z==<span class="number">2</span>)&#123; <span class="comment">//xåƒy </span></span><br><span class="line"><span class="keyword">if</span>(find(x)==find(y) || find(x)==find(y+n))&#123;</span><br><span class="line">                <span class="comment">//xä¸yæ˜¯åŒç±» æˆ–è€… yçš„çŒç‰©æœ‰x</span></span><br><span class="line">ans++;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">unite(x+n,y),unite(x,y+<span class="number">2</span>*n),unite(x+<span class="number">2</span>*n,y+n);</span><br><span class="line">            <span class="comment">//xçš„çŒç‰©ä¸yæ˜¯åŒç±» xçš„åŒç±»æ˜¯yçš„å¤©æ•Œ xçš„å¤©æ•Œæ˜¯yçš„çŒç‰© </span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹¶æŸ¥é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€è§„åˆ’â€”â€”æ‚¬çº¿æ³• ï¼ˆP1169 æ£‹ç›˜åˆ¶ä½œ p4147 ç‰èŸ¾å®« p2701 å·¨å¤§çš„ç‰›æ£š p1387 æœ€å¤§æ­£æ–¹å½¢ï¼‰</title>
      <link href="2019/02/18/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%82%AC%E7%BA%BF%E6%B3%95/"/>
      <url>2019/02/18/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%82%AC%E7%BA%BF%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/solution/P1169">å­¦ä¹ äºluogu p1169 ç¬¬ä¸€ç¯‡é¢˜è§£</a></p><h2 id="æ‚¬çº¿æ³•"><a class="markdownIt-Anchor" href="#æ‚¬çº¿æ³•"></a> æ‚¬çº¿æ³•</h2><h3 id="ç”¨é€”"><a class="markdownIt-Anchor" href="#ç”¨é€”"></a> ç”¨é€”:</h3><p>â€‹    è§£å†³ç»™å®šçŸ©é˜µä¸­æ»¡è¶³å„ç§æ¡ä»¶çš„æœ€å¤§å­çŸ©é˜µ</p><h3 id="åšæ³•"><a class="markdownIt-Anchor" href="#åšæ³•"></a> åšæ³•:</h3><p>ç”¨ä¸€æ¡çº¿(æ¨ªç«–è²Œä¼¼éƒ½è¡Œ)å·¦å³ç§»åŠ¨ç›´åˆ°ä¸æ»¡è¶³çº¦æŸæ¡ä»¶æˆ–è€…åˆ°è¾¾è¾¹ç•Œ</p><h3 id="å®šä¹‰æ•°ç»„"><a class="markdownIt-Anchor" href="#å®šä¹‰æ•°ç»„"></a> å®šä¹‰æ•°ç»„:</h3><p><strong>le[i] [j]</strong>: ä»£è¡¨ä»(i,j)èƒ½åˆ°è¾¾çš„<strong>æœ€å·¦ä½ç½®</strong></p><p><strong>ri[i] [j]</strong>: ä»£è¡¨ä»(i,j)èƒ½åˆ°è¾¾çš„<strong>æœ€å³ä½ç½®</strong></p><p><strong>up[i] [j]</strong>: ä»£è¡¨ä»(i,j)å‘ä¸Šæ‰©å±•<strong>æœ€é•¿é•¿åº¦</strong>.</p><p>é¢„å¤„ç†ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;mp[i][j];</span><br><span class="line">up[i][j]=<span class="number">1</span>;  <span class="comment">//å‘ä¸Šçš„å®½åº¦ä¸º1</span></span><br><span class="line">ri[i][j]=le[i][j]=j; <span class="comment">//åˆ°è¾¾çš„æœ€å·¦æœ€å³éƒ½æ˜¯æœ¬èº«</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é€’æ¨å…¬å¼"><a class="markdownIt-Anchor" href="#é€’æ¨å…¬å¼"></a> é€’æ¨å…¬å¼ï¼š</h3><p>å…ˆå¤„ç†leå’Œriæ•°ç»„ï¼š(ä»¥p1169ä¸¾ä¾‹ï¼Œæ¡ä»¶ä¸ºç›¸é‚»çš„ä¸ç›¸åŒ)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=m;++j)&#123;<span class="comment">//å¤„ç†å·¦è¾¹ç•Œle </span></span><br><span class="line"><span class="keyword">if</span>(mp[i][j]!=mp[i][j<span class="number">-1</span>])le[i][j]=le[i][j<span class="number">-1</span>];</span><br><span class="line">        <span class="comment">//å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œé‚£le[i][j]å°±å¯ä»¥å¾€å·¦æŒªä¸€æŒª ç­‰äºle[i][j-1]</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=m<span class="number">-1</span>;j&gt;=<span class="number">1</span>;--j)&#123;<span class="comment">//å¤„ç†å³è¾¹ç•Œri</span></span><br><span class="line"><span class="keyword">if</span>(mp[i][j]!=mp[i][j+<span class="number">1</span>])ri[i][j]=ri[i][j+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤„ç†upæ•°ç»„çš„åŒæ—¶ï¼Œå†ä¸€æ¬¡å¤„ç†leå’Œriæ•°ç»„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&gt;<span class="number">1</span> &amp;&amp; mp[i][j]!=mp[i<span class="number">-1</span>][j])&#123; <span class="comment">//å‘ä¸Šæ»¡è¶³æ¡ä»¶</span></span><br><span class="line">le[i][j]=max(le[i][j],le[i<span class="number">-1</span>][j]); <span class="comment">//leä»£è¡¨ä»è¯¥åæ ‡ç‚¹ åšåº¦/å®½åº¦ ä¸ºup[i][j]çš„æœ€å¤§å·¦è¾¹ç•Œ</span></span><br><span class="line">ri[i][j]=min(ri[i][j],ri[i<span class="number">-1</span>][j]); <span class="comment">//åŒç†</span></span><br><span class="line">up[i][j]=up[i<span class="number">-1</span>][j]+<span class="number">1</span>; <span class="comment">//å‘ä¸Šçš„å®½åº¦åœ¨up[i-1][j]çš„åŸºç¡€ä¸Š+1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a=ri[i][j]-le[i][j]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> b=min(a,up[i][j]);</span><br><span class="line">res1=max(res1,b*b);</span><br><span class="line">res2=max(res2,a*up[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¾‹é¢˜"><a class="markdownIt-Anchor" href="#ä¾‹é¢˜"></a> ä¾‹é¢˜ï¼š</h1><p><strong>[P1169 <a href="https://www.luogu.org/problemnew/show/P1169">ZJOI2007]æ£‹ç›˜åˆ¶ä½œ</a></strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2005</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,mp[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> ri[maxn][maxn],le[maxn][maxn],up[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;mp[i][j];</span><br><span class="line">up[i][j]=<span class="number">1</span>;</span><br><span class="line">ri[i][j]=le[i][j]=j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=m;++j)&#123;<span class="comment">//å¤„ç†å·¦è¾¹ç•Œle </span></span><br><span class="line"><span class="keyword">if</span>(mp[i][j]!=mp[i][j<span class="number">-1</span>])le[i][j]=le[i][j<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=m<span class="number">-1</span>;j&gt;=<span class="number">1</span>;--j)&#123;<span class="comment">//å¤„ç†å³è¾¹ç•Œri</span></span><br><span class="line"><span class="keyword">if</span>(mp[i][j]!=mp[i][j+<span class="number">1</span>])ri[i][j]=ri[i][j+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> res1=-inf,res2=-inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&gt;<span class="number">1</span> &amp;&amp; mp[i][j]!=mp[i<span class="number">-1</span>][j])&#123;</span><br><span class="line">le[i][j]=max(le[i][j],le[i<span class="number">-1</span>][j]);</span><br><span class="line">ri[i][j]=min(ri[i][j],ri[i<span class="number">-1</span>][j]);</span><br><span class="line">up[i][j]=up[i<span class="number">-1</span>][j]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a=ri[i][j]-le[i][j]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> b=min(a,up[i][j]);</span><br><span class="line">res1=max(res1,b*b);</span><br><span class="line">res2=max(res2,a*up[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res1&lt;&lt;<span class="built_in">endl</span>&lt;&lt;res2&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure><p><strong><a href="https://www.luogu.org/problemnew/show/P4147">P4147 ç‰èŸ¾å®«</a></strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> le[maxn][maxn],ri[maxn][maxn],up[maxn][maxn],ans=-inf;</span><br><span class="line"><span class="keyword">char</span> mp[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">char</span> tt;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;mp[i][j];</span><br><span class="line"><span class="keyword">if</span>(mp[i][j]==<span class="string">&#x27;F&#x27;</span>)le[i][j]=ri[i][j]=j,up[i][j]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(mp[i][j<span class="number">-1</span>]==<span class="string">&#x27;F&#x27;</span> &amp;&amp; mp[i][j]==<span class="string">&#x27;F&#x27;</span>)&#123;</span><br><span class="line">le[i][j]=le[i][j<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=m<span class="number">-1</span>;j&gt;=<span class="number">1</span>;--j)&#123;</span><br><span class="line"><span class="keyword">if</span>(mp[i][j+<span class="number">1</span>]==<span class="string">&#x27;F&#x27;</span> &amp;&amp; mp[i][j]==<span class="string">&#x27;F&#x27;</span>)&#123;</span><br><span class="line">ri[i][j]=ri[i][j+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&gt;<span class="number">1</span> &amp;&amp; mp[i<span class="number">-1</span>][j]==<span class="string">&#x27;F&#x27;</span> &amp;&amp; mp[i][j]==<span class="string">&#x27;F&#x27;</span>)&#123;</span><br><span class="line">le[i][j]=max(le[i][j],le[i<span class="number">-1</span>][j]);</span><br><span class="line">ri[i][j]=min(ri[i][j],ri[i<span class="number">-1</span>][j]);</span><br><span class="line">up[i][j]=up[i<span class="number">-1</span>][j]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(mp[i][j]==<span class="string">&#x27;F&#x27;</span>)&#123;</span><br><span class="line"><span class="keyword">int</span> a=ri[i][j]-le[i][j]+<span class="number">1</span>;</span><br><span class="line">ans=max(ans,a*up[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans*<span class="number">3</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p><strong>[P2701 <a href="https://www.luogu.org/problemnew/show/P2701">USACO5.3]å·¨å¤§çš„ç‰›æ£šBig Barn</a></strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,T,ans=-inf;</span><br><span class="line"><span class="keyword">int</span> mp[maxn][maxn],ri[maxn][maxn],le[maxn][maxn],up[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;T;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=T;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">mp[x][y]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(!mp[i][j])le[i][j]=ri[i][j]=j,up[i][j]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=n;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(!mp[i][j] &amp;&amp; !mp[i][j<span class="number">-1</span>])le[i][j]=le[i][j<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=n<span class="number">-1</span>;j&gt;=<span class="number">1</span>;--j)&#123;</span><br><span class="line"><span class="keyword">if</span>(!mp[i][j] &amp;&amp; !mp[i][j+<span class="number">1</span>])ri[i][j]=ri[i][j+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&gt;<span class="number">1</span> &amp;&amp; !mp[i][j] &amp;&amp; !mp[i<span class="number">-1</span>][j])&#123;</span><br><span class="line">le[i][j]=max(le[i][j],le[i<span class="number">-1</span>][j]);</span><br><span class="line">ri[i][j]=min(ri[i][j],ri[i<span class="number">-1</span>][j]);</span><br><span class="line">up[i][j]=up[i<span class="number">-1</span>][j]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!mp[i][j])&#123;</span><br><span class="line"><span class="keyword">int</span> a=ri[i][j]-le[i][j]+<span class="number">1</span>;</span><br><span class="line">a=min(a,up[i][j]);</span><br><span class="line">ans=max(ans,a);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure><p><strong><a href="https://www.luogu.org/problemnew/show/P1387">P1387 æœ€å¤§æ­£æ–¹å½¢</a></strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,ans=-inf;</span><br><span class="line"><span class="keyword">int</span> mp[maxn][maxn],ri[maxn][maxn],le[maxn][maxn],up[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;mp[i][j];</span><br><span class="line"><span class="keyword">if</span>(mp[i][j])le[i][j]=ri[i][j]=j,up[i][j]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(mp[i][j] &amp;&amp; mp[i][j<span class="number">-1</span>])le[i][j]=le[i][j<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=n<span class="number">-1</span>;j&gt;=<span class="number">1</span>;--j)&#123;</span><br><span class="line"><span class="keyword">if</span>(mp[i][j] &amp;&amp; mp[i][j+<span class="number">1</span>])ri[i][j]=ri[i][j+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(i&gt;<span class="number">1</span> &amp;&amp; mp[i][j] &amp;&amp; mp[i<span class="number">-1</span>][j])&#123;</span><br><span class="line">le[i][j]=max(le[i][j],le[i<span class="number">-1</span>][j]);</span><br><span class="line">ri[i][j]=min(ri[i][j],ri[i<span class="number">-1</span>][j]);</span><br><span class="line">up[i][j]=up[i<span class="number">-1</span>][j]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(mp[i][j])&#123;</span><br><span class="line"><span class="keyword">int</span> a=ri[i][j]-le[i][j]+<span class="number">1</span>;</span><br><span class="line">a=min(a,up[i][j]);</span><br><span class="line">ans=max(ans,a);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tarjan æ±‚å¼ºè¿é€šåˆ†é‡ / å‰²ç‚¹</title>
      <link href="2019/02/13/Tarjan%20%E6%B1%82%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F%E5%89%B2%E7%82%B9/"/>
      <url>2019/02/13/Tarjan%20%E6%B1%82%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F%E5%89%B2%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<h1 id="è§†é¢‘è®²è§£æˆ³æˆ‘"><a class="markdownIt-Anchor" href="#è§†é¢‘è®²è§£æˆ³æˆ‘"></a> <a href="https://www.bilibili.com/video/av41752079/?p=1">è§†é¢‘è®²è§£æˆ³æˆ‘</a></h1><p><strong>tarjan æ±‚å¼ºè¿é€šåˆ†é‡ åŸºç¡€æ¨¡æ¿ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; mp[maxn];</span><br><span class="line"><span class="keyword">int</span> dfn[maxn],low[maxn];</span><br><span class="line"><span class="keyword">bool</span> ins[maxn];</span><br><span class="line"><span class="keyword">int</span> tim,cnt;</span><br><span class="line"><span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line"><span class="keyword">int</span> color[maxn],colornum[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tarjan</span><span class="params">(<span class="keyword">int</span> u)</span></span>&#123;</span><br><span class="line">++tim;</span><br><span class="line">dfn[u]=low[u]=tim;</span><br><span class="line">s.push(u);</span><br><span class="line">ins[u]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> tp:mp[u])&#123;</span><br><span class="line"><span class="keyword">if</span>(dfn[tp]==<span class="number">0</span>)&#123;</span><br><span class="line">tarjan(tp);</span><br><span class="line">low[u]=min(low[u],low[tp]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(ins[tp]==<span class="literal">true</span>)&#123;</span><br><span class="line">low[u]=min(low[u],dfn[tp]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(low[u]==dfn[u])&#123;</span><br><span class="line">cnt++;</span><br><span class="line"><span class="keyword">while</span>(s.top()!=u)&#123;</span><br><span class="line"><span class="keyword">int</span> tp=s.top();</span><br><span class="line">s.pop();</span><br><span class="line">color[tp]=cnt;</span><br><span class="line">colornum[cnt]++;</span><br><span class="line">ins[tp]=<span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">s.pop();</span><br><span class="line">color[u]=cnt;</span><br><span class="line">colornum[cnt]++;</span><br><span class="line">ins[u]=<span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">mp[x].push_back(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(dfn[i]==<span class="number">0</span>)&#123;</span><br><span class="line">tarjan(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>tarjan æ±‚å‰²ç‚¹ åŸºç¡€æ¨¡æ¿ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; mp[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> low[maxn];</span><br><span class="line"><span class="keyword">int</span> dfn[maxn];</span><br><span class="line"><span class="keyword">int</span> tim;</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tarjan</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> fa)</span></span>&#123;</span><br><span class="line">++tim;</span><br><span class="line">low[u]=dfn[u]=tim;</span><br><span class="line"><span class="keyword">int</span> child=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> v:mp[u])&#123;</span><br><span class="line"><span class="keyword">if</span>(dfn[v]==<span class="number">0</span>)&#123;</span><br><span class="line">child++;</span><br><span class="line">tarjan(v,fa);</span><br><span class="line">low[u]=min(low[u],low[v]);</span><br><span class="line"><span class="keyword">if</span>(u!=fa &amp;&amp; low[v]&gt;=dfn[u])&#123;</span><br><span class="line">ans.insert(u);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">low[u]=min(low[u],dfn[v]);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span>(child&gt;=<span class="number">2</span> &amp;&amp; u==fa)ans.insert(fa);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">mp[x].push_back(y);</span><br><span class="line">mp[y].push_back(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(dfn[i]==<span class="number">0</span>)tarjan(i,i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i:ans)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tarjan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) C. Trailing Loves (or L&#39;oeufs?)</title>
      <link href="2019/02/11/(CodeForces)%20C.%20Trailing%20Loves%20(or%20L&#39;oeufs)/"/>
      <url>2019/02/11/(CodeForces)%20C.%20Trailing%20Loves%20(or%20L&#39;oeufs)/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘é¢˜è§£æˆ³æˆ‘"><a class="markdownIt-Anchor" href="#è§†é¢‘é¢˜è§£æˆ³æˆ‘"></a> <a href="https://www.bilibili.com/video/av43216980">è§†é¢‘é¢˜è§£æˆ³æˆ‘</a></h3><p><a href="http://codeforces.com/contest/1114/problem/C">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> æ±‚nï¼åœ¨bè¿›åˆ¶ä¸‹æœ«å°¾æœ‰å¤šå°‘ä¸ª0.</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> nï¼å¯ä»¥åŒ–æˆ  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>âˆ—</mo><msup><mi>b</mi><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">x*b^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span> ,kå°±ä»£è¡¨äº†æœ«å°¾0çš„ä¸ªæ•°ï¼Œxä¸æ˜¯bçš„å€æ•°ï¼Œå³ä»–çš„æœ«å°¾ä¸æ˜¯0ï¼Œæ¯ä¹˜ä¸€ä¸ªbç›¸å½“äºå·¦ç§»ä¸€ä½å¤šä¸€ä¸ª0ï¼ˆå°±åƒ2è¿›åˆ¶é‚£æ ·ï¼Œéƒ½æ˜¯ä¸€æ ·çš„)ã€‚æ‰€ä»¥å°±æ˜¯æ±‚nï¼æ€»æœ‰å¤šå°‘ä¸ªbï¼Œæ±‚å‡ºbçš„è´¨å› å­ï¼Œæ±‚å‡ºæ‰€æœ‰è´¨å› å­åœ¨nï¼ä¸­çš„ <strong>ä¸ªæ•°/æ¯ä¸€ç»„bæ‰€éœ€è¿™ä¸ªè´¨å› å­ä¸ªæ•°</strong> æœ€å°‘çš„é‚£ä¸ª( è´¨å› å­ä¼šé‡å¤ï¼Œç»„æˆä¸€ä¸ªbå¯èƒ½éœ€è¦å¤šä¸ªç›¸åŒçš„t )ï¼Œé‚£å°±æ˜¯æœ«å°¾0çš„ä¸ªæ•°ï¼Œä¾‹å¦‚ 12çš„è´¨å› å­æ˜¯2 2 3ï¼Œé‚£ nï¼ä¸­ <strong>2çš„ä¸ªæ•°/2</strong> ä¸ºres1, <strong>3çš„ä¸ªæ•°</strong> ä¸ºres2ï¼Œé‚£æœ«å°¾0çš„ä¸ªæ•°å°±æ˜¯min(res1,res2); é‚£ä¸ªçš„æ•°é‡å°‘å°±å†³å®šäº†12å‡ºç°çš„æ¬¡æ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line">ll n,b,res=<span class="number">1e18</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(ll x,ll num)</span></span>&#123;  <span class="comment">//æ¯ä¸ªè´¨å› å­  æ‹¥æœ‰çš„æ•°é‡</span></span><br><span class="line">ll tp=<span class="number">1</span>,ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(tp&lt;=n/x)&#123; <span class="comment">//ä¸èƒ½ç”¨tp*xä¼šçˆ†ç²¾åº¦ï¼Œæœ‰å¤šå°‘ä¸ªxï¼Œå°±æ˜¯å…ˆçœ‹æœ‰å¤šå°‘ä¸ªxï¼Œå†x^2,x^3,ç›´åˆ°&gt;n</span></span><br><span class="line">tp*=x;</span><br><span class="line">ans+=n/tp;</span><br><span class="line">&#125;</span><br><span class="line">res=min(res,ans/num);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;b;</span><br><span class="line">ll t=b;</span><br><span class="line"><span class="keyword">for</span>(ll i=<span class="number">2</span>;i*i&lt;=t;++i)&#123; <span class="comment">//åˆ†è§£è´¨å› å­</span></span><br><span class="line"><span class="keyword">if</span>(t%i==<span class="number">0</span>)&#123;</span><br><span class="line">ll num=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(t%i==<span class="number">0</span>)&#123;</span><br><span class="line">t/=i;</span><br><span class="line">num++;</span><br><span class="line">&#125;</span><br><span class="line">solve(i,num); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(t&gt;<span class="number">1</span>)solve(t,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) D. Flood Fill</title>
      <link href="2019/02/11/(CodeForces)%20D.%20Flood%20Fill/"/>
      <url>2019/02/11/(CodeForces)%20D.%20Flood%20Fill/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘é¢˜è§£æˆ³æˆ‘"><a class="markdownIt-Anchor" href="#è§†é¢‘é¢˜è§£æˆ³æˆ‘"></a> <a href="https://www.bilibili.com/video/av43216980">è§†é¢‘é¢˜è§£æˆ³æˆ‘</a></h3><p><a href="http://codeforces.com/contest/1114/problem/D">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> é€‰æ‹©ä¸€ä¸ªåˆå§‹ç‚¹ï¼ŒåŒè‰²çš„ä¸ºä¸€ä¸ªå—ï¼Œæ¯ä¸€æ¬¡å¯ä»¥å°†åŒ…å«èµ·å§‹ç‚¹å—çš„å·¦æˆ–å³çš„é‚£ä¸ªæ–¹å—å˜è‰²ï¼Œé—®æœ€å°‘æ“ä½œæ¬¡æ•°ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> å¯¹æ•°æ®å·²ç»å­˜åœ¨çš„åŒè‰²å—ï¼Œç•™ä¸€ä¸ªå°±å¥½äº†ï¼Œä¸å½±å“ç»“æœã€‚è€ƒè™‘è‹¥æ˜¯1 2 3 4ï¼Œéƒ½æ˜¯ä¸åŒè‰²çš„ï¼Œé‚£è¦æ“ä½œsize-1æ¬¡3æ¬¡ï¼›è‹¥æœ‰1 2 1è¿™ç§ç±»ä¼¼å›æ–‡çš„ï¼Œé‚£å°±æ“ä½œä¸€æ¬¡å°±è¡Œäº†ï¼Œæ‰€æœ‰æˆ‘ä»¬æ±‚å‡ºåºåˆ—ä¸­æœ€é•¿çš„å›æ–‡å­åºåˆ—é•¿åº¦/2 ï¼Œé‚£å°±æ˜¯æˆ‘ä»¬å¯ä»¥èŠ‚çœçš„æ“ä½œæ¬¡æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŸåºåˆ—å€’åºå†å’ŒåŸåºåˆ—æ±‚ä¸€ä¸ªæœ€é•¿å…¬å…±å­åºåˆ—å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; fir;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sec;</span><br><span class="line"><span class="keyword">int</span> dp[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line"><span class="keyword">int</span> tp;</span><br><span class="line"><span class="keyword">while</span> (n--) &#123;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; tp;</span><br><span class="line"><span class="keyword">if</span> (fir.empty() || fir.back() != tp)</span><br><span class="line">fir.push_back(tp);</span><br><span class="line">&#125;</span><br><span class="line">sec = fir;</span><br><span class="line">reverse(sec.begin(), sec.end());</span><br><span class="line">fir.insert(fir.begin(), <span class="number">0</span>);  <span class="comment">//ä¸ºæ–¹ä¾¿å¤šæ’å…¥äº†ä¸ª0</span></span><br><span class="line">sec.insert(sec.begin(), <span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; (<span class="keyword">int</span>)fir.size(); ++i) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; (<span class="keyword">int</span>)sec.size(); ++j) &#123;</span><br><span class="line">dp[i][j] = max(dp[i<span class="number">-1</span>][j], dp[i][j<span class="number">-1</span>]);</span><br><span class="line"><span class="keyword">if</span> (fir[i] == sec[j])</span><br><span class="line">dp[i][j] = max(dp[i][j], dp[i<span class="number">-1</span>][j<span class="number">-1</span>]+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">//æ‰€ä»¥è¿™é‡Œæ˜¯size-2</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; sec.size()<span class="number">-2</span>-dp[fir.size()<span class="number">-1</span>][sec.size()<span class="number">-1</span>]/<span class="number">2</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) ç‰›å®¢å¯’å‡ç®—æ³•åŸºç¡€é›†è®­è¥4 E Applese æ¶‚é¢œè‰² (è´¹é©¬å°å®šç†)</title>
      <link href="2019/01/31/(Nowcoder)%20%E7%89%9B%E5%AE%A2%E5%AF%92%E5%81%87%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E9%9B%86%E8%AE%AD%E8%90%A54%20E%20Applese%20%E6%B6%82%E9%A2%9C%E8%89%B2/"/>
      <url>2019/01/31/(Nowcoder)%20%E7%89%9B%E5%AE%A2%E5%AF%92%E5%81%87%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E9%9B%86%E8%AE%AD%E8%90%A54%20E%20Applese%20%E6%B6%82%E9%A2%9C%E8%89%B2/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘è®²è§£æˆ³è¿™"><a class="markdownIt-Anchor" href="#è§†é¢‘è®²è§£æˆ³è¿™"></a> <a href="https://www.bilibili.com/video/av42137189/?p=4">è§†é¢‘è®²è§£æˆ³è¿™</a></h3><p><a href="https://ac.nowcoder.com/acm/contest/330/E">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯</strong></em> ï¼šå¾ˆå®¹æ˜“åˆ†æå‡ºæ¯è¡Œåªæœ‰ä¸¤ç§æ¶‚æ³•ï¼Œæ¯è¡Œåˆäº’ä¸å½±å“ï¼Œæ‰€ä»¥å°±æ˜¯æ±‚2^n % p,ä½†æ˜¯è¿™é‡Œçš„nï¼Œméå¸¸çš„å¤§ï¼Œä¸èƒ½ç›´æ¥æ±‚ï¼Œè¿™å°±éœ€è¦è´¹é©¬å°å®šç†äº†ï¼Œæ±‚a^n%p, å½“aä¸päº’ç´ æ—¶ï¼Œa^(p-1) = 1 (%pæƒ…å†µä¸‹) ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦çŸ¥é“n%(p-1)ä¸ºå¤šå°‘ï¼Œæ±‚ä¸ª2çš„å–æ¨¡å¿«é€Ÿå¹‚å°±è¡Œäº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="built_in">string</span> s1,s2;</span><br><span class="line"><span class="function">ll <span class="title">mpow</span><span class="params">(ll x,ll n)</span></span>&#123;</span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(n)&#123;</span><br><span class="line"><span class="keyword">if</span>(n&amp;<span class="number">1</span>)ans=(ans*x)%mod;</span><br><span class="line">x=(x*x)%mod;</span><br><span class="line">n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;s1&gt;&gt;s2;</span><br><span class="line">ll n=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s1.size();++i)&#123;</span><br><span class="line">n=(n*<span class="number">10</span>+s1[i]-<span class="string">&#x27;0&#x27;</span>)%(mod<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;mpow(<span class="number">2</span>,n)%mod&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(HDU) 1247 Hat&#39;s Words (å­—å…¸æ ‘)</title>
      <link href="2019/01/29/(HDU)%201247%20Hat&#39;s%20Words/"/>
      <url>2019/01/29/(HDU)%201247%20Hat&#39;s%20Words/</url>
      
        <content type="html"><![CDATA[<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1247">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ç»™ä½ å­—ç¬¦ä¸²ï¼Œè¾“å‡ºå…¶ä¸­èƒ½ç”±å…¶ä»–ä¸¤ä¸ªå­—ç¬¦ä¸²ç»„åˆè€Œæˆçš„å­—ç¬¦ä¸²ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> å»ºç«‹ä¸¤é¢—å­—å…¸æ ‘ï¼Œä¸€é¢—æ­£åºï¼Œä¸€é¢—ååºï¼Œå¼€ä¸€ä¸ªvisæ•°ç»„ï¼Œfindçš„æ—¶å€™æ­£åºfindä¸€ä¸‹ï¼Œå¦‚æœå­—ç¬¦ä¸²çš„ç¬¬iä½æœ‰å…¶ä»–å­—ç¬¦ä¸²flagæ ‡è®°ï¼Œå°±vis[i]<ins>,ååºfindçš„æ—¶å€™ï¼ŒåŒæ ·ä¸è¿‡æ˜¯vis[len-i-2]</ins>ï¼Œæ ‡è®°æ­£åºçš„ä½ç½®-1ï¼Œæœ€åä»0~len-1ï¼Œæœä¸€éï¼Œçœ‹æœ‰æ²¡æœ‰ä½ç½®vis[i]&gt;=2,æœ‰çš„è¯å°±è¯´æ˜è¯¥å­—ç¬¦ä¸²å¯ä»¥è¢«å…¶ä»–ä¸¤ä¸ªå­—ç¬¦ä¸²ç»„åˆè€Œæˆã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> tree1[maxn][<span class="number">30</span>],tree2[maxn][<span class="number">30</span>];</span><br><span class="line"><span class="comment">//ä¸€æ­£åºï¼Œä¸€ååº </span></span><br><span class="line"><span class="keyword">bool</span> flag1[maxn],flag2[maxn];</span><br><span class="line"><span class="keyword">int</span> vis[maxn];</span><br><span class="line"><span class="keyword">int</span> tot1=<span class="number">0</span>,tot2=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add1</span><span class="params">(<span class="keyword">char</span> *s)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=<span class="number">0</span>,id,len=<span class="built_in">strlen</span>(s);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!tree1[root][id])tree1[root][id]=++tot1;</span><br><span class="line">root=tree1[root][id];</span><br><span class="line">&#125;</span><br><span class="line">flag1[root]=<span class="literal">true</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add2</span><span class="params">(<span class="keyword">char</span> *s)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=<span class="number">0</span>,id,len=<span class="built_in">strlen</span>(s);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!tree2[root][id])tree2[root][id]=++tot2;</span><br><span class="line">root=tree2[root][id];</span><br><span class="line">&#125;</span><br><span class="line">flag2[root]=<span class="literal">true</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">find1</span><span class="params">(<span class="keyword">char</span> *s)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=<span class="number">0</span>,id,len=<span class="built_in">strlen</span>(s);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">root=tree1[root][id];</span><br><span class="line"><span class="keyword">if</span>(flag1[root])vis[i]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">find2</span><span class="params">(<span class="keyword">char</span> *s)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=<span class="number">0</span>,id,len=<span class="built_in">strlen</span>(s);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i)&#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">root=tree2[root][id];</span><br><span class="line"><span class="keyword">if</span>(flag2[root])vis[len-i<span class="number">-2</span>]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> a[<span class="number">50005</span>][<span class="number">100</span>];</span><br><span class="line"><span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; ans; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,a[cnt++])!=EOF)&#123;</span><br><span class="line">add1(a[cnt<span class="number">-1</span>]);</span><br><span class="line">strrev(a[cnt<span class="number">-1</span>]);</span><br><span class="line">add2(a[cnt<span class="number">-1</span>]);</span><br><span class="line">strrev(a[cnt<span class="number">-1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;cnt;++i)&#123;</span><br><span class="line"><span class="keyword">int</span> len=<span class="built_in">strlen</span>(a[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;len;++j)vis[j]=<span class="number">0</span>;</span><br><span class="line">find1(a[i]);</span><br><span class="line">strrev(a[i]);</span><br><span class="line">find2(a[i]);</span><br><span class="line">strrev(a[i]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;len;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(vis[j]&gt;=<span class="number">2</span>)&#123;</span><br><span class="line"><span class="built_in">string</span> tp=a[i];</span><br><span class="line">ans.insert(tp);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it=ans.begin();it!=ans.end();++it)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;*it&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> HDU </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­—å…¸æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(POJ) 1816 Wild Words (å­—å…¸æ ‘+æœç´¢)</title>
      <link href="2019/01/29/(POJ)%201816%20Wild%20Words/"/>
      <url>2019/01/29/(POJ)%201816%20Wild%20Words/</url>
      
        <content type="html"><![CDATA[<p><a href="http://poj.org/problem?id=1816">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ç»™ä½ nä¸ªæ¨¡æ¿å­—ç¬¦ä¸²å’Œmä¸ªå¾…åŒ¹é…å­—ç¬¦ä¸²ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²ä¸­æœ‰â€˜?â€™å¯ä»¥åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œâ€˜*â€™å¯ä»¥åŒ¹é…0ä¸ª1ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ä¸²ã€‚é—®å¾…åŒ¹é…å­—ç¬¦ä¸²å¯ä»¥å’Œå“ªäº›æ¨¡æ¿å­—ç¬¦ä¸²ç›¸åŒ¹é…ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> æˆ‘ä»¬å¯ä»¥å°†â€˜*â€™å’Œâ€˜?â€™åˆ†åˆ«æ”¾åœ¨26å’Œ27ä¸¤ä¸ªä½ç½®ï¼Œå­˜å‚¨å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œå°†æ¯ä¸ªå­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹è¿”å›å­˜å‚¨èµ·æ¥ï¼Œfindä¸åœ¨å’ŒåŸæ¥ä¸€æ ·ï¼Œè€Œæ˜¯ä¸€ä¸ªæœç´¢ï¼Œå½“æœç´¢çš„ä½ç½®==lenï¼Œè€Œä¸”å½“ä¸”èŠ‚ç‚¹ä¸ºå­—ç¬¦ä¸²çš„å°¾èŠ‚ç‚¹(flagæ ‡è®°)ï¼Œé‚£æŠŠvisç½®æˆtrueã€‚ç„¶åå¯¹äºâ€˜ *â€™ï¼Œâ€˜?â€™ï¼Œå’Œå­—ç¬¦åˆ†åˆ«æœç´ ä¸‹å»ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> tree[maxn][<span class="number">30</span>],tot=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">bool</span> flag[maxn],vis[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m,p[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">char</span> *s)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=<span class="number">0</span>,id,len=<span class="built_in">strlen</span>(s);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(s[i]==<span class="string">&#x27;*&#x27;</span>)id=<span class="number">26</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(s[i]==<span class="string">&#x27;?&#x27;</span>)id=<span class="number">27</span>;</span><br><span class="line"><span class="keyword">else</span> id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!tree[root][id])tree[root][id]=++tot;</span><br><span class="line">root=tree[root][id];</span><br><span class="line">&#125;</span><br><span class="line">flag[root]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">find</span><span class="params">(<span class="keyword">char</span> *s,<span class="keyword">int</span> nroot,<span class="keyword">int</span> pos)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=nroot,id,len=<span class="built_in">strlen</span>(s);</span><br><span class="line"><span class="keyword">if</span>(pos&gt;len)<span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span>(pos==len &amp;&amp; flag[root]) &#123;</span><br><span class="line">vis[root]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(tree[root][<span class="number">26</span>]) &#123; <span class="comment">//æœ‰*</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=pos; j&lt;=len; ++j) &#123;</span><br><span class="line">find(s,tree[root][<span class="number">26</span>],j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(tree[root][<span class="number">27</span>]) &#123; <span class="comment">//æœ‰ï¼Ÿ</span></span><br><span class="line">find(s,tree[root][<span class="number">27</span>],pos+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">id=s[pos]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(s[pos]&gt;=<span class="string">&#x27;a&#x27;</span>&amp;&amp;s[pos]&lt;=<span class="string">&#x27;z&#x27;</span>&amp;&amp;tree[root][id]) &#123;</span><br><span class="line">find(s,tree[root][id],pos+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> tp[<span class="number">50</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,tp);</span><br><span class="line">p[i]=add(tp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(m--) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,tp);</span><br><span class="line">find(tp,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">bool</span> flag=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(vis[p[i]]) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">flag=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!flag)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Not match&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i)vis[p[i]]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> POJ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœç´¢ </tag>
            
            <tag> å­—å…¸æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(POJ) 2513 Colored Sticks (å­—å…¸æ ‘/map+å¹¶æŸ¥é›†+æ¬§æ‹‰è·¯å¾„)</title>
      <link href="2019/01/29/(POJ)%202513%20Colored%20Sticks/"/>
      <url>2019/01/29/(POJ)%202513%20Colored%20Sticks/</url>
      
        <content type="html"><![CDATA[<p><a href="http://poj.org/problem?id=2513">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ç»™ä½ ä¸¤æ®µæœ‰é¢œè‰²çš„æœ¨æ£’ï¼Œåªæœ‰ç›¸åŒçš„é¢œè‰²æ‰èƒ½è¿æ¥èµ·æ¥ï¼Œé—®ä½ æœ€åç»™ä½ çš„æœ¨æ£’æœ€åèƒ½ä¸èƒ½æ‹¼æˆä¸€æ ¹é•¿æœ¨æ£’ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è¿™é‡Œå­—å…¸æ ‘åªæ˜¯è¿”å›äº†ä¸åŒé¢œè‰²çš„ç¼–å·ï¼Œç”¨map&lt;string,int&gt;ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥è®°å½•æ¯ä¸ªé¢œè‰²çš„åº¦ï¼Œä¸€ä¸ªæœ¨æ£’çš„ä¸¤ä¸ªé¢œè‰²å¯ä»¥ç›¸è¿ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ç”¨å¹¶æŸ¥é›†å°†ä¸åŒçš„é¢œè‰²å¹¶èµ·æ¥ï¼Œæœ€åå¦‚æœï¼Œæœ‰é¢œè‰²çš„ç¥–å…ˆå’Œå…¶ä»–ä¸ä¸€æ ·ï¼Œé‚£è‚¯å®šä¸èƒ½è¿èµ·æ¥ï¼Œåä¹‹é‚£å°±è¦åˆ¤æ–­æ¬§æ‹‰è·¯å¾„ äº†ï¼Œå¦‚æœå¥‡æ•°åº¦çš„ç‚¹ä¸º0æˆ–è€…2ï¼Œé‚£è¿™ä¸ªå›¾å°±å¯ä»¥ä¸€ç¬”èµ°å®Œï¼Œå³å¯ä»¥è¿æ¥æˆä¸€æ ¹æœ¨æ£’ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> tree[maxn][<span class="number">30</span>],sum[maxn];</span><br><span class="line"><span class="keyword">int</span> vis[maxn],num[maxn];</span><br><span class="line"><span class="keyword">int</span> tot=<span class="number">0</span>,cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn],r[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">char</span> *s)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> root=<span class="number">0</span>,id,len=<span class="built_in">strlen</span>(s);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;len; ++i) &#123;</span><br><span class="line">id=s[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!tree[root][id])tree[root][id]=++tot;</span><br><span class="line">root=tree[root][id];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!vis[root])vis[root]=++cnt;</span><br><span class="line"><span class="keyword">return</span> vis[root];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;maxn; ++i) &#123;</span><br><span class="line">f[i]=i;</span><br><span class="line">r[i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x=f[x])<span class="keyword">return</span> f[x];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> f[x]=find(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unite</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">x=find(x);</span><br><span class="line">y=find(y);</span><br><span class="line"><span class="keyword">if</span>(x==y)<span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">if</span>(r[x]&lt;r[y])f[x]=y;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">f[y]=x;</span><br><span class="line"><span class="keyword">if</span>(r[x]==r[y])r[y]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> s1[<span class="number">20</span>],s2[<span class="number">20</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> tp1,tp2;</span><br><span class="line">init();</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%s%s&quot;</span>,s1,s2)!=EOF) &#123;</span><br><span class="line">tp1=add(s1);</span><br><span class="line">tp2=add(s2);</span><br><span class="line">num[tp1]++;</span><br><span class="line">num[tp2]++;</span><br><span class="line">unite(tp1,tp2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> flag=find(<span class="number">1</span>),tt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=cnt; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(num[i]%<span class="number">2</span>)tt++;</span><br><span class="line"><span class="keyword">if</span>(find(i)!=flag) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Impossible&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(tt==<span class="number">0</span>||tt==<span class="number">2</span>)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Possible&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Impossible&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> POJ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹¶æŸ¥é›† </tag>
            
            <tag> å­—å…¸æ ‘ </tag>
            
            <tag> æ¬§æ‹‰è·¯å¾„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>stringstreamåˆ‡å‰²å­—ç¬¦ä¸²</title>
      <link href="2019/01/27/stringstream%E5%88%87%E5%89%B2%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>2019/01/27/stringstream%E5%88%87%E5%89%B2%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<p>stringstream æ˜¯å°†å­—ç¬¦ä¸²å˜æˆå­—ç¬¦ä¸²è¿­ä»£å™¨ä¸€æ ·ï¼Œå°†å­—ç¬¦ä¸²æµåœ¨ä¾æ¬¡æ‹¿å‡ºï¼Œå®ƒä¸ä¼šå°†ç©ºæ ¼ä½œä¸ºæµã€‚è¿™æ ·å°±å®ç°äº†å­—ç¬¦ä¸²çš„ç©ºæ ¼åˆ‡å‰²ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sstream&gt; //å¤´æ–‡ä»¶</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">string</span> str=<span class="string">&quot;nice to meet you&quot;</span>;</span><br><span class="line"><span class="function"><span class="built_in">stringstream</span> <span class="title">stream</span><span class="params">(str)</span></span>;</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"><span class="keyword">while</span>(stream&gt;&gt;s)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;s&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">nice</span><br><span class="line">to</span><br><span class="line">meet</span><br><span class="line">you</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) E1,E2. Array and Segments (Easy / Hard version) (çº¿æ®µæ ‘||å·®åˆ†)</title>
      <link href="2019/01/25/(CodeForces)%20E1,E2Array%20and%20Segments/"/>
      <url>2019/01/25/(CodeForces)%20E1,E2Array%20and%20Segments/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"><a class="markdownIt-Anchor" href="#è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"></a> <a href="https://www.bilibili.com/video/av41646140">è§†é¢‘è®²è§£æˆ³è¿™é‡Œ</a>ï¼ˆæ„Ÿè§‰æˆ‘è®²çš„è¿˜æ²¡è¿™å†™çš„æ¸…æ¥šï¼‰</h3><p><a href="http://codeforces.com/contest/1108">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> nä¸ªæ•°ï¼Œå¯é€‰çš„mæ¬¡æ“ä½œï¼Œä¸€æ¬¡æ“ä½œåŒºé—´[l,r],ä½¿å¾—åŒºé—´ä¸­çš„æ•°å…¨éƒ½å‡1ï¼Œé—®ä½ é€‰é‚£å‡ ä¸ªæ“ä½œå¯ä»¥ä½¿å¾—è¯¥æ•°ç»„çš„æœ€å¤§å€¼-æœ€å°å€¼æœ€å¤§ã€‚E1ï¼ŒE2çš„åŒºåˆ«å°±æ˜¯ä¸€ä¸ªæ•°æ®å¤§ä¸€ä¸ªæ•°æ®å°ã€‚</p><ol><li><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> ä¸€å¼€å§‹æ˜¯æ²¡æœ‰å¤´ç»ªçš„ï¼Œè¿™æ˜¯è®©ä½ é€‰æ“ä½œè€Œä¸æ˜¯è®©ä½ æ“ä½œï¼Œä½†æ˜¯è¿˜æ˜¯å¾ˆå®¹æ˜“è”æƒ³åˆ°å·®åˆ†å’Œçº¿æ®µæ ‘æ“ä½œçš„ã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¸€é¡¿æ“ä½œä¹‹åæ•°ç»„ä¸­å¿…ç„¶ä¼šå‡ºç°æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå› ä¸ºæ“ä½œéƒ½æ˜¯-1ï¼Œé‚£æ¯ä¸ªæ•°è¢«æ“ä½œåéƒ½æœ‰å¯èƒ½å˜æˆæœ€å°å€¼ï¼Œå¯¹äºE1çš„æ•°æ®æˆ‘ä»¬å®Œå…¨å¯ä»¥æšä¸¾æ¯ä¸€ä¸ªæ•°ä¸ºå¯èƒ½çš„æœ€å°å€¼ï¼Œåªè¦æ“ä½œåŒºé—´åŒ…å«è¿™ä¸ªæ•°ï¼Œæˆ‘ä»¬å°±æ“åšï¼Œæœ€åæ‰«ä¸€éæ•°ç»„æ±‚çš„æœ€å€¼ç›¸å‡ã€‚è¿™ä¸ºä»€ä¹ˆæ˜¯å¯¹çš„å‘¢ï¼Œå› ä¸ºå¦‚æœæœ€å¤§å€¼åœ¨ä»–çš„æ“ä½œåŒºé—´ï¼Œé‚£å°±ä¸€åŒå‡ä¸€ä¸å½±å“ç»“æœï¼Œä¸åœ¨é‚£å°±æ˜¯æå¥½çš„ã€‚</li></ol><p>E1éå¸¸æš´åŠ›çš„ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">305</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> l,r,id;</span><br><span class="line">&#125; t[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m,a[maxn],b[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> mx=-inf,mi=inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">mx=max(mx,a[i]);</span><br><span class="line">mi=min(mi,a[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;t[i].l&gt;&gt;t[i].r;</span><br><span class="line">t[i].id=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v;</span><br><span class="line"><span class="keyword">int</span> ans=mx-mi;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">tp.clear();</span><br><span class="line"><span class="built_in">memcpy</span>(b,a,<span class="keyword">sizeof</span>(a));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=m; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(t[j].l&lt;=i&amp;&amp;t[j].r&gt;=i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=t[j].l; k&lt;=t[j].r; ++k) &#123;</span><br><span class="line">b[k]--;</span><br><span class="line">&#125;</span><br><span class="line">tp.push_back(t[j].id);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">mx=-inf,mi=inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">mx=max(mx,b[i]);</span><br><span class="line">mi=min(mi,b[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(mx-mi&gt;ans) &#123;</span><br><span class="line">v=tp;</span><br><span class="line">ans=mx-mi;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;v.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;v.size(); ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;v[i]&lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> E2æ•°æ®nç›´æ¥å˜æˆäº†1e5ä½†æ˜¯mè¿˜æ˜¯300ï¼Œç›´æ¥è€ƒè™‘ï¼Œçº¿æ®µæ ‘çš„å¤æ‚åº¦æ˜¯n*mlogn,è€Œå·®åˆ†æ˜¯n^2,å¤æ‚åº¦éƒ½ä¸å®¹ä¹è§‚ï¼Œæˆ‘ä»¬ä»”ç»†è€ƒè™‘ä¸€ä¸‹ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªæ“ä½œåŒºé—´æ¯”å¦‚ 1~ 15æ—¶ï¼Œæˆ‘ä»¬è€ƒè™‘1ä¸ºæœ€ä½æ—¶ï¼Œæ“ä½œç»“æŸåï¼Œç›¸å½“äº1~15éƒ½è€ƒè™‘è¿‡äº†ï¼Œä½†æˆ‘ä»¬è¿˜åœ¨ä¸è¾è¾›åŠ³çš„æšä¸¾ï¼Œåšäº†å¤šå°‘æ— ç”¨åŠŸã€‚</li></ol><p><img src="https://img-blog.csdnimg.cn/2019012512231212.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RERF9NYXN0ZXI=,size_16,color_FFFFFF,t_70" alt="img" /></p><p>æœ€å¥½çš„åº”è¯¥æ˜¯è€ƒè™‘1ï¼Œ2ï¼Œ3åŒºé—´æœ€ç®€çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¦¨ç›´æ¥å°†l1,l2,r1,r2(åŒºé—´å¤šäº†å†å»ä¸ªé‡)åŠ å…¥æ•°ç»„ï¼Œè€ƒè™‘è¿™å‡ ä¸ªè¾¹ç•Œï¼Œè€ƒè™‘l1æ—¶ï¼Œè§£å†³äº†1ï¼Œ3åŒºé—´ï¼Œl2æ—¶è§£å†³äº†2åŒºé—´ï¼Œè™½ç„¶è¿™æ ·è¿˜æ˜¯ä¼šæœ‰å¤šè€ƒè™‘çš„ï¼Œä½†æ˜¯å·²ç»å¤§å¤§å‡å°‘ï¼Œè€Œä¸”å‡å°‘äº†è®¨è®ºï¼Œä½•ä¹ä¸ä¸ºã€‚</p><p>çº¿æ®µæ ‘ç‰ˆä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">ll mx;</span><br><span class="line">ll mi;</span><br><span class="line">&#125; s[maxn&lt;&lt;<span class="number">2</span>],pres[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line">ll add[maxn&lt;&lt;<span class="number">2</span>],preadd[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line">ll a[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m,le[maxn],ri[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line">s[rt].mx=max(s[rt&lt;&lt;<span class="number">1</span>].mx,s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx);</span><br><span class="line">s[rt].mi=min(s[rt&lt;&lt;<span class="number">1</span>].mi,s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mi);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line">s[rt].mx=a[l];</span><br><span class="line">s[rt].mi=a[l];</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(rt&lt;&lt;<span class="number">1</span>,l,mid);</span><br><span class="line">build(rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid+<span class="number">1</span>,r);</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> ln,<span class="keyword">int</span> rn)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(add[rt]) &#123;</span><br><span class="line">add[rt&lt;&lt;<span class="number">1</span>]+=add[rt],add[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=add[rt];</span><br><span class="line">s[rt&lt;&lt;<span class="number">1</span>].mx+=add[rt],s[rt&lt;&lt;<span class="number">1</span>].mi+=add[rt];</span><br><span class="line">s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx+=add[rt],s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mi+=add[rt];</span><br><span class="line">add[rt]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> C,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l&amp;&amp;R&gt;=r) &#123;</span><br><span class="line">s[rt].mx+=C,s[rt].mi+=C;</span><br><span class="line">add[rt]+=C;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">pushdown(rt,mid-l+<span class="number">1</span>,r-mid);</span><br><span class="line"><span class="keyword">if</span>(L&lt;=mid) &#123;</span><br><span class="line">update(L,R,C,l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(R&gt;mid) &#123;</span><br><span class="line">update(L,R,C,mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">ll tmx=-inf,tmi=inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,a+i);</span><br><span class="line">tmx=max(tmx,a[i]);</span><br><span class="line">tmi=min(tmi,a[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tt;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,le+i,ri+i);</span><br><span class="line">tt.push_back(le[i]);</span><br><span class="line">tt.push_back(ri[i]);</span><br><span class="line">&#125;</span><br><span class="line">sort(tt.begin(),tt.end());</span><br><span class="line">tt.erase(unique(tt.begin(),tt.end()),tt.end());</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans=tmx-tmi;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v,tp;</span><br><span class="line">build(<span class="number">1</span>,<span class="number">1</span>,n);</span><br><span class="line"><span class="built_in">memcpy</span>(pres,s,<span class="keyword">sizeof</span>(s)),<span class="built_in">memcpy</span>(preadd,add,<span class="keyword">sizeof</span>(add));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)tt.size(); ++i) &#123;</span><br><span class="line">tp.clear();</span><br><span class="line"><span class="built_in">memcpy</span>(s,pres,<span class="keyword">sizeof</span>(pres)),<span class="built_in">memcpy</span>(add,preadd,<span class="keyword">sizeof</span>(preadd));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=m; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(le[j]&lt;=tt[i] &amp;&amp; ri[j]&gt;=tt[i]) &#123;</span><br><span class="line">update(le[j],ri[j],<span class="number">-1</span>,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">tp.push_back(j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(s[<span class="number">1</span>].mx-s[<span class="number">1</span>].mi&gt;ans) &#123;</span><br><span class="line">ans=s[<span class="number">1</span>].mx-s[<span class="number">1</span>].mi;</span><br><span class="line">v=tp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;v.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;v.size(); ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;v[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å·®åˆ†ç‰ˆä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,le[maxn],ri[maxn],a[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> mx=-inf,mi=inf,l,r;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">mx=max(mx,a[i]);</span><br><span class="line">mi=min(mi,a[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> res=mx-mi;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v,tp,ans;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;le[i]&gt;&gt;ri[i];</span><br><span class="line">v.push_back(le[i]),v.push_back(ri[i]);</span><br><span class="line">&#125;</span><br><span class="line">sort(v.begin(),v.end());</span><br><span class="line">v.erase(unique(v.begin(),v.end()),v.end());</span><br><span class="line"><span class="keyword">int</span> sum[maxn];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)v.size(); ++i) &#123;</span><br><span class="line">tp.clear();</span><br><span class="line"><span class="built_in">memset</span>(sum,<span class="number">0</span>,<span class="keyword">sizeof</span>(sum));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=m; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(le[j]&lt;=v[i]&amp;&amp;ri[j]&gt;=v[i])&#123;</span><br><span class="line">tp.push_back(j);</span><br><span class="line">sum[le[j]]--;</span><br><span class="line">sum[ri[j]+<span class="number">1</span>]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">mx=-inf,mi=inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">sum[i]+=sum[i<span class="number">-1</span>];</span><br><span class="line">mx=max(mx,sum[i]+a[i]);</span><br><span class="line">mi=min(mi,sum[i]+a[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(mx-mi&gt;res)&#123;</span><br><span class="line">res=mx-mi;</span><br><span class="line">ans=tp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;(<span class="keyword">int</span>)ans.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)ans.size();++i)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶éƒ½èƒ½è¿‡ï¼Œä½†æ˜¯å·®åˆ†çš„æ•ˆç‡æ¯”çº¿æ®µæ ‘é«˜çš„ä¸æ˜¯ä¸€ç‚¹åŠç‚¹(å¯èƒ½çº¿æ®µæ ‘å†™çš„çƒ‚ï¼Œè¿˜æœ‰è¿™é‡ŒmemcpyèŠ±çš„æ—¶é—´å¤š)</p><p>çº¿æ®µæ ‘ï¼š<img src="https://img-blog.csdnimg.cn/20190125123056134.png" alt="img2" /></p><p>å·®åˆ†ï¼š</p><p><img src="https://img-blog.csdnimg.cn/2019012512310482.png" alt="img" /></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> å·®åˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) F. MST Unification (æœ€å°ç”Ÿæˆæ ‘)</title>
      <link href="2019/01/25/(CodeForces)%20F.%20MST%20Unification/"/>
      <url>2019/01/25/(CodeForces)%20F.%20MST%20Unification/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"><a class="markdownIt-Anchor" href="#è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"></a> <a href="https://www.bilibili.com/video/av41646140">è§†é¢‘è®²è§£æˆ³è¿™é‡Œ</a></h3><p><a href="http://codeforces.com/contest/1108/problem/F">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ç»™ä½ ä¸€ä¸ªå›¾ï¼Œä½ å¯ä»¥ä½¿å¾—ä¸€äº›è¾¹æƒå€¼å˜å¤§ï¼ˆä¸€æ¬¡æ“ä½œ+1ï¼‰ï¼Œä½¿å¾—æœ€å°ç”Ÿæˆæ ‘å”¯ä¸€ä¸”å€¼ä¸å˜çš„æœ€å°‘æ“ä½œæ¬¡æ•°ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> kruscalç®—æ³•çš„æ€æƒ³æ˜¯æ¯æ¬¡éƒ½é€‰æƒå€¼æœ€å°çš„è¾¹ä¸”è¾¹çš„ä¸¤å¤´ä¸åœ¨ä¸€ä¸ªé›†åˆã€‚æœ€å°ç”Ÿæˆæ ‘çš„å€¼å·²ç»ç¡®å®šï¼Œä¸å”¯ä¸€çš„æƒ…å†µæˆ‘ä»¬å¯ä»¥è€ƒè™‘åˆ°æœ‰å‡ æ¡æƒå€¼ç›¸åŒçš„è¾¹ï¼Œä»ä¸­é€‰ä¸€æ¡æˆ–è€…å‡ æ¡èµ·åˆ°çš„æ•ˆæœæ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»ä¸­é€‰å®šäº†å‡ æ¡ä¹‹åï¼Œåé¢èµ·ç›¸åŒä½œç”¨çš„æˆ‘ä»¬éƒ½é€ä¸€æ“ä½œæ•°++ï¼Œ(ä¸ºå•¥æ“çºµä¸€æ¬¡å°±è¡Œäº†ï¼Œå› ä¸ºèµ·ç›¸åŒä½œç”¨ï¼Œé‚£å¿…ç„¶é€‰æƒå€¼å°çš„ï¼Œæ‰€ä»¥è¿™äº›è¾¹å°±æ²¡å•¥ç”¨äº†ï¼Œåé¢é€‰ä¸­çš„è¾¹ä½œç”¨å¿…ä¸å‰é¢ä¸åŒ)ä»£ç å¦‚ä¸‹ï¼Œä¹Ÿå¾ˆå¥½æ‡‚ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn],r[maxn],n,m;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> fr,to,cost;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> node &amp;x)<span class="keyword">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> cost&lt;x.cost;</span><br><span class="line">&#125; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; G;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n+<span class="number">1</span>;++i)f[i]=i,r[i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x==f[x])<span class="keyword">return</span> f[x];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> f[x]=find(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unite</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">x=find(x),y=find(y);</span><br><span class="line"><span class="keyword">if</span>(x==y)<span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span>(r[x]&lt;r[y])f[x]=y;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">f[y]=x;</span><br><span class="line"><span class="keyword">if</span>(r[x]==r[y])r[y]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">same</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> find(x)==find(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kruscal</span><span class="params">()</span></span>&#123;</span><br><span class="line">sort(G.begin(),G.end());</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)G.size();)&#123;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; tp;</span><br><span class="line"><span class="keyword">int</span> j;</span><br><span class="line"><span class="keyword">for</span>(j=i;j&lt;(<span class="keyword">int</span>)G.size()&amp;&amp;G[j].cost==G[i].cost;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(!same(G[j].fr,G[j].to))tp.push_back(G[j]);</span><br><span class="line">&#125;</span><br><span class="line">i=j;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;(<span class="keyword">int</span>)tp.size();++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(!same(tp[j].fr,tp[j].to))unite(tp[j].fr,tp[j].to);</span><br><span class="line"><span class="keyword">else</span>ans++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">init(n);</span><br><span class="line"><span class="keyword">int</span> x,y,z;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line">G.push_back(node&#123;x,y,z&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;kruscal()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœ€å°ç”Ÿæˆæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å€å¢ || ST-RMQ æ±‚LCA</title>
      <link href="2019/01/24/%E5%80%8D%E5%A2%9EST-RMQ%E6%B1%82LCA/"/>
      <url>2019/01/24/%E5%80%8D%E5%A2%9EST-RMQ%E6%B1%82LCA/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"><a class="markdownIt-Anchor" href="#è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"></a> <a href="https://www.bilibili.com/video/av41067872">è§†é¢‘è®²è§£æˆ³è¿™é‡Œ</a>(bjèšèšè®²çš„éå¸¸å¥½ï¼Œä¸€å¬å°±æ‡‚)</h3><p>ç”±luoguä¸€é“æ¨¡æ¿é¢˜è®²èµ· <a href="https://www.luogu.org/problemnew/show/P3379">ä¼ é€é—¨</a> (éƒ½9102å¹´ï¼Œè¿™é¢˜è¿˜å¡è¾“å…¥è¾“å‡ºï¼Œè¦å¸æ°§æ‰èƒ½è¿‡)</p><p><em><strong>LCAï¼š</strong></em> æ±‚ä¸¤ä¸ªç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</p><p><em><strong>å€å¢æ±‚LCAï¼š</strong></em></p><p>æœ‰å¾ˆå¤šåšå®¢å›¾æ–‡å¹¶èŒ‚è®²çš„éå¸¸æ¸…æ¥šï¼Œå€å¢LCAçš„ä¸»è¦æ€æƒ³å°±æ˜¯ï¼Œå…ˆå°†uï¼Œv(ä¿è¯uçš„æ·±åº¦æ›´æ·±)ä¸¤ç‚¹è°ƒæ•´åˆ°åŒä¸€æ°´å¹³çº¿</p><p>æƒ…å†µä¸€ï¼šu==vï¼Œé‚£å°±è¯´æ˜æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯uï¼Œè¿™ç§æƒ…å†µè¯´æ˜u,våœ¨åŒä¸€è¾¹ï¼Œç¥–å…ˆè‡ªç„¶æ˜¯æ·±åº¦è¾ƒæµ…çš„é‚£ä¸€ä¸ª</p><p>æƒ…å†µè€Œï¼šuï¼Œvæ¯æ¬¡å¾€ä¸Šè·³2çš„jæ¬¡æ–¹(jä»å°åˆ°å¤§)ï¼Œå¦‚æœäºŒè€…æ‰€è·³åˆ°çš„ç‚¹ç›¸åŒï¼Œé‚£å°±ä¸è·³ï¼Œåä¹‹åˆ™è·³ï¼Œæœ€åå°±è½åœ¨äº†æœ€è¿‘å…¬å…±ç¥–å…ˆçš„ä¸‹ä¸€ä¸ªä½ç½®</p><p>ä»£ç ç»“åˆè§†é¢‘çœ‹èµ·æ¥æ›´é¦™å™¢ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxbit=<span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,s;</span><br><span class="line"><span class="keyword">int</span> dep[maxn],fa[maxn][maxbit],lg[maxn];</span><br><span class="line"><span class="comment">//è®°å½•æ¯ä¸ªç‚¹çš„æ·±åº¦ï¼›fa[i][j],iç‚¹å¾€ä¸Šè·³2^Jçš„çˆ¶äº²èŠ‚ç‚¹ï¼›é¢„å¤„ç†log2ï¼Œå‘ä¸‹å–æ•´</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> np,<span class="keyword">int</span> fat)</span></span>&#123; <span class="comment">//å½“å‰èŠ‚ç‚¹ï¼Œçˆ¶äº²èŠ‚ç‚¹</span></span><br><span class="line">dep[np]=dep[fat]+<span class="number">1</span>;</span><br><span class="line">fa[np][<span class="number">0</span>]=fat;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=lg[dep[np]]+<span class="number">1</span>;++j)&#123;</span><br><span class="line">fa[np][j]=fa[fa[np][j<span class="number">-1</span>]][j<span class="number">-1</span>]; </span><br><span class="line"><span class="comment">//npå¾€ä¸Šè·³2^jçš„èŠ‚ç‚¹ç›¸å½“äºå…ˆå¾€ä¸Šè·³åˆ°2^(j-1)èŠ‚ç‚¹å¤„å†å¾€ä¸Šè·³2^(j-1)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)G[np].size();++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(G[np][i]!=fat)&#123;</span><br><span class="line">dfs(G[np][i],np);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[u]&lt;dep[v])swap(u,v);</span><br><span class="line"><span class="keyword">while</span>(dep[u]!=dep[v])&#123; <span class="comment">//è°ƒæ•´å¹³è¡¡</span></span><br><span class="line">u=fa[u][lg[dep[u]-dep[v]]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(u==v)<span class="keyword">return</span> u; <span class="comment">//æƒ…å†µä¸€</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=lg[dep[u]];i&gt;=<span class="number">0</span>;--i)&#123; <span class="comment">//æƒ…å†µäºŒ</span></span><br><span class="line"><span class="keyword">if</span>(fa[u][i]!=fa[v][i])&#123;</span><br><span class="line">u=fa[u][i];</span><br><span class="line">v=fa[v][i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> fa[u][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;s);</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line">lg[<span class="number">0</span>]=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;maxn;++i)&#123;</span><br><span class="line">lg[i]=lg[i&gt;&gt;<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">G[x].push_back(y);</span><br><span class="line">G[y].push_back(x); </span><br><span class="line">&#125;</span><br><span class="line">dfs(s,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,lca(x,y));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çº¯å‡€ç‰ˆï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxbit=<span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,s;</span><br><span class="line"><span class="keyword">int</span> dep[maxn],fa[maxn][maxbit],lg[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> np,<span class="keyword">int</span> fat)</span></span>&#123;</span><br><span class="line">dep[np]=dep[fat]+<span class="number">1</span>;</span><br><span class="line">fa[np][<span class="number">0</span>]=fat;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=lg[dep[np]]+<span class="number">1</span>;++j)&#123;</span><br><span class="line">fa[np][j]=fa[fa[np][j<span class="number">-1</span>]][j<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)G[np].size();++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(G[np][i]!=fat)&#123;</span><br><span class="line">dfs(G[np][i],np);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(dep[u]&lt;dep[v])swap(u,v);</span><br><span class="line"><span class="keyword">while</span>(dep[u]!=dep[v])&#123;</span><br><span class="line">u=fa[u][lg[dep[u]-dep[v]]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(u==v)<span class="keyword">return</span> u;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=lg[dep[u]];i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line"><span class="keyword">if</span>(fa[u][i]!=fa[v][i])&#123;</span><br><span class="line">u=fa[u][i];</span><br><span class="line">v=fa[v][i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> fa[u][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;s);</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line">lg[<span class="number">0</span>]=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;maxn;++i)&#123;</span><br><span class="line">lg[i]=lg[i&gt;&gt;<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">G[x].push_back(y);</span><br><span class="line">G[y].push_back(x); </span><br><span class="line">&#125;</span><br><span class="line">dfs(s,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,lca(x,y));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>ST-RMQ æ±‚LCAï¼š</strong></em></p><p>å…ˆæ±‚ä¸€ä¸ªdfsåºåˆ—ï¼Œé‚£æ±‚uï¼Œvçš„lcaå°±æ˜¯uï¼Œvåœ¨dfsåºä¸­æœ€æ—©å‡ºç°çš„ä½ç½®ä¹‹é—´æ·±åº¦æœ€å°çš„é‚£ä¸€ä¸ªï¼Œst[i][j]ä»£è¡¨i~i+2^jåŒºé—´ä¸­æ·±åº¦æœ€å°åœ¨dfsåºä¸­çš„ä¸‹è¡¨ã€‚</p><p>ä»£ç ç»“åˆè§†é¢‘çœ‹èµ·æ¥æ›´é¦™å™¢ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxbit=<span class="number">20</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="keyword">int</span> order[maxn&lt;&lt;<span class="number">2</span>],depth[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="comment">//æ·±æœåºåˆ—    //æ·±åº¦ </span></span><br><span class="line"><span class="keyword">int</span> lg[maxn&lt;&lt;<span class="number">2</span>],st[maxn&lt;&lt;<span class="number">2</span>][maxbit];</span><br><span class="line"><span class="comment">//é¢„å¤„ç†log   //st[i][j]ä»£è¡¨i~i+2^jåŒºé—´ä¸­æ·±åº¦æœ€å°ç¼–å· </span></span><br><span class="line"><span class="keyword">int</span> first_place[maxn];<span class="comment">//dfsåºä¸­iæœ€æ—©å‡ºç°çš„ä¸‹æ ‡ </span></span><br><span class="line"><span class="keyword">int</span> n,m,s,cnt=<span class="number">0</span>; </span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch=getchar();</span><br><span class="line"><span class="keyword">int</span> x=<span class="number">0</span>,f=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>((ch&gt;<span class="string">&#x27;9&#x27;</span>||ch&lt;<span class="string">&#x27;0&#x27;</span>)&amp;&amp;ch!=<span class="string">&#x27;-&#x27;</span>)&#123;</span><br><span class="line">ch=getchar();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(ch==<span class="string">&#x27;-&#x27;</span>)&#123;</span><br><span class="line">f=<span class="number">-1</span>;</span><br><span class="line">ch=getchar();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(<span class="string">&#x27;0&#x27;</span>&lt;=ch&amp;&amp;ch&lt;=<span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">x=x*<span class="number">10</span>+ch-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">ch=getchar();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> x*f;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> np,<span class="keyword">int</span> dep)</span></span>&#123;</span><br><span class="line">++cnt;</span><br><span class="line">first_place[np]=cnt;</span><br><span class="line">order[cnt]=np;</span><br><span class="line">depth[cnt]=dep+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)G[np].size();++i)&#123;</span><br><span class="line"><span class="keyword">int</span> to=G[np][i];</span><br><span class="line"><span class="keyword">if</span>(first_place[to]==<span class="number">0</span>)&#123;</span><br><span class="line">dfs(to,dep+<span class="number">1</span>);</span><br><span class="line">++cnt;</span><br><span class="line">order[cnt]=np;</span><br><span class="line">depth[cnt]=dep+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">STinit</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;++i)&#123;</span><br><span class="line">st[i][<span class="number">0</span>]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> a,b;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=lg[cnt];++j)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>&lt;=cnt;++i)&#123;</span><br><span class="line">a=st[i][j<span class="number">-1</span>];</span><br><span class="line">b=st[i+(<span class="number">1</span>&lt;&lt;(j<span class="number">-1</span>))][j<span class="number">-1</span>];</span><br><span class="line"><span class="keyword">if</span>(depth[a]&lt;depth[b])</span><br><span class="line">st[i][j]=a;</span><br><span class="line"><span class="keyword">else</span>st[i][j]=b;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">n=read(),m=read(),s=read();</span><br><span class="line">lg[<span class="number">0</span>]=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;maxn*<span class="number">2</span>;++i)lg[i]=lg[i&gt;&gt;<span class="number">1</span>]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;++i)&#123;</span><br><span class="line">x=read(),y=read();</span><br><span class="line">G[x].push_back(y);</span><br><span class="line">G[y].push_back(x);</span><br><span class="line">&#125;</span><br><span class="line">dfs(s,<span class="number">0</span>);</span><br><span class="line">STinit();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line">x=read(),y=read();</span><br><span class="line">x=first_place[x];</span><br><span class="line">y=first_place[y];</span><br><span class="line"><span class="keyword">if</span>(x&gt;y)swap(x,y);</span><br><span class="line"><span class="keyword">int</span> k=lg[y-x];</span><br><span class="line"><span class="keyword">int</span> a=st[x][k],b=st[y-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k];</span><br><span class="line"><span class="keyword">if</span>(depth[a]&lt;depth[b])</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,order[a]);</span><br><span class="line"><span class="keyword">else</span><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,order[b]);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lca </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ±‚åŒºé—´å†…èƒ½è¢«næ•´é™¤%n==0ï¼Œ%n==1,%n==2....çš„ä¸ªæ•°</title>
      <link href="2019/01/23/%E5%8C%BA%E9%97%B4%E5%86%85%E8%83%BD%E8%A2%ABn%E6%95%B4%E9%99%A4%E4%B8%AA%E6%95%B0/"/>
      <url>2019/01/23/%E5%8C%BA%E9%97%B4%E5%86%85%E8%83%BD%E8%A2%ABn%E6%95%B4%E9%99%A4%E4%B8%AA%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>ä»¥nä¸º3ä¸¾ä¾‹ï¼Œå¦‚æœæ±‚åŒºé—´[l , r]ä¸­mod3==0çš„ä¸ªæ•°ï¼Œé‚£å°±æ˜¯r/3-(l-1)/3,(å°±æ˜¯0~ rä¸­3çš„å€æ•°å‡å»0~(l-1) 3çš„å€æ•°ï¼‰</p><p>é‚£%3 == 1çš„ä¸ªæ•°æ€ä¹ˆæ±‚å‘¢ï¼Œæˆ‘ä»¬ä¸å¦¨å¯ä»¥å°†[l , r]åŒºé—´ä¸­çš„æ‰€æœ‰æ•°éƒ½åŠ ä¸Š2ï¼Œé‚£æˆ‘ä»¬æ‰€æ±‚çš„%3== 1 çš„ä¸ªæ•°ï¼Œå°±æ˜¯åœ¨[l+2 , r+2]åŒºé—´æ±‚%3==0çš„ä¸ªæ•°ï¼Œ é‚£å°±æ˜¯(r+2)/3-(l+1)/3</p><p>åŒç†%3== 2çš„ä¸ªæ•°ï¼Œå°±æ˜¯[l+1,r+1]ä¸­%3== 0çš„ä¸ªæ•°ï¼Œ(r+1)/3-l/3ã€‚æ‰€ä»¥æ±‚%n== måœ¨åŒºé—´é‡Œçš„åªéœ€è½¬åŒ–æˆæ±‚%n==0å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> l,r;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;l&gt;&gt;r)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;%3==0 :&quot;</span>&lt;&lt;r/<span class="number">3</span>-(l<span class="number">-1</span>)/<span class="number">3</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;%3==1 :&quot;</span>&lt;&lt;(r+<span class="number">2</span>)/<span class="number">3</span>-(l+<span class="number">1</span>)/<span class="number">3</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;%3==2 :&quot;</span>&lt;&lt;(r+<span class="number">1</span>)/<span class="number">3</span>-(l)/<span class="number">3</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) C.Ayoub and Lost Array (çº¿æ€§dp)</title>
      <link href="2019/01/21/(CodeForces)%20C.Ayoub%20and%20Lost%20Array/"/>
      <url>2019/01/21/(CodeForces)%20C.Ayoub%20and%20Lost%20Array/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"><a class="markdownIt-Anchor" href="#è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"></a> <a href="https://www.bilibili.com/video/av41282261">è§†é¢‘è®²è§£æˆ³è¿™é‡Œ</a></h3><p><a href="http://codeforces.com/contest/1105/problem/C">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ä¸€ä¸ªæ•°ç»„çš„å¤§å°ä¸ºnï¼Œæ¯ä¸ªå…ƒç´ çš„çš„å–å€¼èŒƒå›´æ˜¯[l,r];ç„¶åæ•°ç»„ä¸­æ‰€æœ‰æ•°çš„å’Œèƒ½è¢«3æ•´é™¤ï¼Œæ±‚è¿™æ ·æ•°ç»„çš„ä¸ªæ•°ï¼Œç»“æœmod 1e9+7.</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è¿™é¢˜ä¸€çœ‹æœ‰ä¸¤ç§æƒ³æ³•ï¼Œä¸€æ˜¯çº¿æ€§dpï¼ŒäºŒæ˜¯ç»„åˆæ•°ï¼Œæœ€åè¿˜æ˜¯ç”¨çº¿æ€§dpè§£å†³äº†è¿™é“é¢˜ï¼Œdpçš„æ€è·¯ä¹ŸæŒºç®€å•çš„dp[i][j]ä»£è¡¨æ•°ç»„é‡Œæœ‰iä¸ªæ•°ï¼Œå’Œæ¨¡3ä¸ºjçš„ä¸ªæ•°ï¼Œæˆ‘ä»¬å¯ä»¥äº‹å…ˆå°†[l,r]åŒºé—´ä¸­mod3ä¸º0ï¼Œ1ï¼Œ2çš„æ•°ç®—å‡ºæ¥ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll mod=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e5</span>+<span class="number">50</span>;</span><br><span class="line">ll cnt[<span class="number">5</span>];</span><br><span class="line">ll dp[maxn][<span class="number">3</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">int</span> n,l,r;</span><br><span class="line">ll sum=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;l&gt;&gt;r;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++)</span><br><span class="line">cnt[i]+=r/<span class="number">3</span>;</span><br><span class="line"><span class="keyword">if</span>(r%<span class="number">3</span>==<span class="number">1</span>) cnt[<span class="number">1</span>]++;</span><br><span class="line"><span class="keyword">if</span>(r%<span class="number">3</span>==<span class="number">2</span>) cnt[<span class="number">1</span>]++,cnt[<span class="number">2</span>]++;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++)</span><br><span class="line">cnt[i]-=(l<span class="number">-1</span>)/<span class="number">3</span>;</span><br><span class="line"><span class="keyword">if</span>((l<span class="number">-1</span>)%<span class="number">3</span>==<span class="number">1</span>) cnt[<span class="number">1</span>]--;</span><br><span class="line"><span class="keyword">if</span>((l<span class="number">-1</span>)%<span class="number">3</span>==<span class="number">2</span>) cnt[<span class="number">1</span>]--,cnt[<span class="number">2</span>]--;</span><br><span class="line"></span><br><span class="line">dp[<span class="number">1</span>][<span class="number">0</span>]=cnt[<span class="number">3</span>],dp[<span class="number">1</span>][<span class="number">1</span>]=cnt[<span class="number">1</span>],dp[<span class="number">1</span>][<span class="number">2</span>]=cnt[<span class="number">2</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)  &#123;</span><br><span class="line">dp[i][<span class="number">0</span>]=(dp[i<span class="number">-1</span>][<span class="number">0</span>]*cnt[<span class="number">3</span>]+dp[i<span class="number">-1</span>][<span class="number">1</span>]*cnt[<span class="number">2</span>]+dp[i<span class="number">-1</span>][<span class="number">2</span>]*cnt[<span class="number">1</span>])%mod;</span><br><span class="line"> dp[i][<span class="number">1</span>]=(dp[i<span class="number">-1</span>][<span class="number">0</span>]*cnt[<span class="number">1</span>]+dp[i<span class="number">-1</span>][<span class="number">1</span>]*cnt[<span class="number">3</span>]+dp[i<span class="number">-1</span>][<span class="number">2</span>]*cnt[<span class="number">2</span>])%mod;</span><br><span class="line">dp[i][<span class="number">2</span>]=(dp[i<span class="number">-1</span>][<span class="number">0</span>]*cnt[<span class="number">2</span>]+dp[i<span class="number">-1</span>][<span class="number">1</span>]*cnt[<span class="number">1</span>]+dp[i<span class="number">-1</span>][<span class="number">2</span>]*cnt[<span class="number">3</span>])%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[n][<span class="number">0</span>]%mod&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) D. Kilani and the Game (æœç´¢)</title>
      <link href="2019/01/21/(CodeForces)%20D.%20Kilani%20and%20the%20Game/"/>
      <url>2019/01/21/(CodeForces)%20D.%20Kilani%20and%20the%20Game/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"><a class="markdownIt-Anchor" href="#è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"></a> <a href="https://www.bilibili.com/video/av41282261">è§†é¢‘è®²è§£æˆ³è¿™é‡Œ</a></h3><p><a href="http://codeforces.com/contest/1105/problem/D">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ä¸€ä¸ªn*mçš„å›¾ï¼Œæœ‰ç©ºæ ¼å­â€™.â€™,ä¹Ÿæœ‰éšœç¢ç‰©â€™#â€™,ä¹Ÿæœ‰å„ä¸ªç©å®¶çš„åŸå ¡ï¼Œç¼–å·å¯¹åº”ç€ç©å®¶çš„ç¼–å·1ï¼Œ2ï¼Œ3â€¦;æ¯ä¸ªç©å®¶è½®æµå¼€å§‹ï¼Œæœ‰ä»–åŸå ¡çš„åœ°æ–¹å°±å¯ä»¥å‘ä¸Šä¸‹å·¦å³æ‰©æ•£ï¼Œè€Œä¸”åˆ†åˆ«æœ‰ä¸€ä¸ªæ‰©æ•£çš„é€Ÿåº¦siï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡å¯ä»¥å¾€å¤–æ‰©æ•£siå±‚ï¼Œå½“æ‰€æœ‰ç©å®¶éƒ½ä¸èƒ½åŠ¨æ—¶ï¼Œé—®å„ä¸ªç©å®¶æ‰€æœ‰çš„åŸå ¡æ•°ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> æ€è·¯è¿˜æ˜¯å¾ˆæ¸…æ™°çš„ï¼Œå°±æ˜¯æ¯ä¸€è½®å¯¹æ¯ä¸€ä¸ªç©å®¶å®½æœä¸€æ¬¡ï¼Œæ¯ä¸ªç©å®¶å®½æœsiå±‚ï¼Œå¾€å¤–å®½æœä¸€å±‚å°±æ˜¯å°†ç°åœ¨é˜Ÿåˆ—é‡Œçš„å…ƒç´ æ¸…ç©ºä¸€æ¬¡ã€‚é¢˜ç›®è¿˜æœ‰ä¸€ä¸ªå‘ç‚¹å°±æ˜¯å®ƒçš„siæœ‰1e9çš„èŒƒå›´ï¼Œå¯¹äºè¿™ç§ç”¨max(m,n)ä»£æ›¿å°±è¡Œäº†ï¼Œä¸ç„¶ä¼šTã€‚å…¶ä»–ç»†èŠ‚å‰ªææ‰£æ‰£å°±è¡Œäº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,p,mp[maxn][maxn],sp[<span class="number">15</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> x;</span><br><span class="line"><span class="keyword">int</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">queue</span>&lt;node&gt; q[<span class="number">15</span>];</span><br><span class="line"><span class="keyword">int</span> allnum=<span class="number">0</span>; <span class="comment">//è®°å½•å·²ç»è¢«å é¢†çš„æ ¼å­</span></span><br><span class="line"><span class="keyword">int</span> ans[<span class="number">15</span>];</span><br><span class="line"><span class="keyword">int</span> dx[]= &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dy[]= &#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pbfs</span><span class="params">(<span class="keyword">int</span> np)</span> </span>&#123; <span class="comment">//æ¯ä¸ªç©å®¶çš„å®½æœ</span></span><br><span class="line"><span class="keyword">int</span> prenum=allnum;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=sp[np]; ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> msize=q[np].size();</span><br><span class="line">prenum=allnum;</span><br><span class="line"><span class="keyword">while</span>(msize) &#123;</span><br><span class="line">msize--;</span><br><span class="line">node nt=q[np].front();</span><br><span class="line">q[np].pop();</span><br><span class="line"><span class="keyword">int</span> nx=nt.x,ny=nt.y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> tx=nx+dx[i],ty=ny+dy[i];</span><br><span class="line"><span class="keyword">if</span>(tx&gt;=<span class="number">1</span>&amp;&amp;tx&lt;=n&amp;&amp;ty&gt;=<span class="number">1</span>&amp;&amp;ty&lt;=m&amp;&amp;mp[tx][ty]==<span class="number">0</span>) &#123;</span><br><span class="line">allnum++;</span><br><span class="line">mp[tx][ty]=np;</span><br><span class="line">q[np].push(node &#123;tx,ty&#125;);</span><br><span class="line">ans[np]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(prenum==allnum)<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123; <span class="comment">//æ§åˆ¶æ¸¸æˆçš„è½®æ•°</span></span><br><span class="line"><span class="keyword">if</span>(allnum==n*m)<span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">int</span> prenum=allnum;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=p; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(ans[i])pbfs(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(allnum==prenum)<span class="keyword">return</span>;</span><br><span class="line">bfs();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;p;</span><br><span class="line"><span class="keyword">int</span> ms=max(n,m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=p; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;sp[i];</span><br><span class="line">sp[i]=min(sp[i],ms);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">char</span> tp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=m; ++j) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="string">&#x27;.&#x27;</span>)&#123;</span><br><span class="line">mp[i][j]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="string">&#x27;#&#x27;</span>) &#123;</span><br><span class="line">mp[i][j]=<span class="number">-1</span>;</span><br><span class="line">allnum++;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> t=tp-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">mp[i][j]=t;</span><br><span class="line">q[t].push(node &#123;i,j&#125;);</span><br><span class="line">allnum++;</span><br><span class="line">ans[t]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">bfs();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=p; ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœç´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1439 ã€æ¨¡æ¿ã€‘æœ€é•¿å…¬å…±å­åºåˆ—</title>
      <link href="2019/01/21/(Luogu)%20P1439%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E5%BA%8F%E5%88%97/"/>
      <url>2019/01/21/(Luogu)%20P1439%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E5%BA%8F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1439">ä¼ é€é—¨</a></p><p>è¿™é¢˜æ€ä¹ˆèƒ½å«æ¨¡æ¿å‘¢ï¼Œåˆ†æ˜æ˜¯ä¸ªå˜ç§é¢˜</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> dpå‘€ï¼Œè¿™ä¸æ˜¯è‚¯å®šdpå˜›ï¼Œdp[i] [j]æŒ‡çš„æ˜¯aä¸²åˆ°ç¬¬iä¸ªå­—ç¬¦ï¼Œbä¸²åˆ°ç¬¬jä¸ªå­—ç¬¦çš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œçœ‹ä¸€çœ¼æ•°æ®ï¼Œè¿˜è¦æŠŠäºŒç»´ä¼˜åŒ–æˆä¸€ç»´ã€‚ä»£ç å¦‚ä¸‹:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxn];</span><br><span class="line"><span class="keyword">int</span> a[maxn],b[maxn],n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;b[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[i]==b[j])dp[j]=max(dp[j],dp[j<span class="number">-1</span>]+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span>dp[j]=max(dp[j],max(dp[j],dp[j<span class="number">-1</span>]));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[n]&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>50åˆ†ï¼Tçš„é£èµ·(nä¹Ÿå¤ªå¤§äº†å‘€)ï¼Œé‚£è¿™é¢˜è¿˜èƒ½æ€ä¹ˆè§£å•Šï¼Œä¸€æ—¶ä¹‹é—´æ¯«æ— å¤´ç»ªã€‚å¯èƒ½è¿™é¢˜æ˜¯åœ¨å‘Šè¯‰æˆ‘ä»¬ä¸èƒ½å›ºå®šæ€ç»´å§ï¼›</p><p>*<strong>æ­£è§£*</strong>ï¼šæ±‚æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼Œè¿™åˆæ˜¯å¦‚ä½•è”ç³»ä¸Šçš„å‘¢ï¼Œç”±äºé¢˜æ„è¯´æ˜¯1-nçš„æ’åˆ—(ä¹Ÿæ˜¯ä¸€å¼€å§‹æ²¡æœ‰æ³¨æ„åˆ°çš„),æ‰€ä»¥å¯ä»¥ä¸€ä¸€æ˜ å°„ï¼Œæˆ‘ä»¬åªè¦æŠŠç¬¬ä¸€ä¸ªåºåˆ—æ˜ å°„æˆ1ï¼Œ2ï¼Œ3â€¦n,é‚£åœ¨ç¬¬äºŒä¸ªåºåˆ—çš„æ˜ å°„é‡Œæ±‚ä¸€ä¸ªæœ€é•¿ä¸Šå‡å­åºåˆ—å°±è¡Œäº†ã€‚å°±æ‹¿é¢˜ç›®ç»™çš„ä¾‹å­ä¸¾ä¸ªæ —å­ï¼š</p><p>3 2 1 4 5 æˆ‘ä»¬å°†è¿™ä¸ªåºåˆ—æ˜ å°„æˆ1~nï¼›é‚£å°±æ˜¯ 3-&gt;1, 2-&gt;2, 1-&gt;3, 4-&gt;4, 5-&gt;5<br />è¯¥åºåˆ—å°±å˜æˆäº† (1) (2) (3) (4) (5)<br />1 2 3 4 5 è¿™ä¸ªåºåˆ—æ ¹æ®æ˜ å°„è§„åˆ™åŒæ ·ï¼Œå˜æˆäº†(3) (2) (1) (4) (5)</p><p>ç”±äºæ˜ å°„è§„åˆ™ç›¸åŒï¼Œåªéœ€è¦åœ¨ç¬¬äºŒä¸ªåºåˆ—ä¸­æ±‚æœ€é•¿ä¸Šå‡åºåˆ— (1) (4) (5) å¯¹åº”å¾—åŸæ•°å°±æ˜¯ 3ï¼Œ4ï¼Œ5è¿™ä¸€æ­¥è½¬åŒ–è¿˜æ˜¯éå¸¸å·§å¦™çš„ã€‚</p><p>è¿™æ ·å˜æˆäº†æ±‚æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼Œå¤æ‚åº¦ä¸ºO(nlogn);</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,be[maxn],la[maxn],tp,len=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line">be[tp]=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tp;</span><br><span class="line"><span class="keyword">if</span>(be[tp]&gt;la[len])&#123;</span><br><span class="line">la[++len]=be[tp];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">int</span> k=lower_bound(la+<span class="number">1</span>,la+len+<span class="number">1</span>,be[tp])-la;</span><br><span class="line">la[k]=be[tp];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;len&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) ç‰›å®¢ç»ƒä¹ èµ›18 E å‡ºé¢˜äººçš„æ•°ç»„ï¼ˆæ•°å­¦ï¼‰</title>
      <link href="2019/01/19/(Nowcoder)%20%E7%89%9B%E5%AE%A2%E7%BB%83%E4%B9%A0%E8%B5%9B18%20E%20%E5%87%BA%E9%A2%98%E4%BA%BA%E7%9A%84%E6%95%B0%E7%BB%84/"/>
      <url>2019/01/19/(Nowcoder)%20%E7%89%9B%E5%AE%A2%E7%BB%83%E4%B9%A0%E8%B5%9B18%20E%20%E5%87%BA%E9%A2%98%E4%BA%BA%E7%9A%84%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ"><a class="markdownIt-Anchor" href="#è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ"></a> <a href="https://www.bilibili.com/video/av41139100">è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ</a></h3><p><s>å°±æ˜¯è°ƒäº†ä¸€æ‰‹bug ä¸§</s></p><p><a href="https://ac.nowcoder.com/acm/contest/358/E">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> ç›´æ¥å•ä¸ªè€ƒè™‘ç»™ç­”æ¡ˆçš„è´¡çŒ®ï¼Œç®€å•çš„å°†å¤§çš„æ”¾å‰ï¼Œç›´æ¥å½’å¹¶æ˜¯ä¸å¯¹çš„ï¼Œ(æ¯”å¦‚Aæ•°ç»„1ï¼Œ2222ï¼Œ2222ï¼Œ2222ï¼›Bæ•°ç»„2ï¼Œ2ï¼Œ2ï¼Œ2)ï¼Œè¿™ä¸ªé¢˜ç›®é‡æ–°è€ƒè™‘æ˜¯å¹³å‡å€¼çš„å½±å“ï¼Œç›´æ¥æˆ³è§†é¢‘å§ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line">ll a[maxn],b[maxn],n,m;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">ll s;</span><br><span class="line">ll num;</span><br><span class="line">&#125; ta[maxn],tb[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">pd</span><span class="params">(node a,node b)</span> </span>&#123; <span class="comment">//aæ¯”bçš„å¹³å‡å€¼å¤§è¿”å›true</span></span><br><span class="line"><span class="keyword">return</span> a.s*b.num &gt; a.num*b.s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> nn=<span class="number">0</span>,mm=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">ta[++nn]=node &#123;a[i],<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">while</span>(nn&gt;<span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(pd(ta[nn],ta[nn<span class="number">-1</span>])) &#123;</span><br><span class="line">ta[nn<span class="number">-1</span>].num+=ta[nn].num,ta[nn<span class="number">-1</span>].s+=ta[nn].s;</span><br><span class="line">nn--;</span><br><span class="line">&#125; <span class="keyword">else</span><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;b[i];</span><br><span class="line">tb[++mm]=node &#123;b[i],<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">while</span>(mm&gt;<span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(pd(tb[mm],tb[mm<span class="number">-1</span>])) &#123;</span><br><span class="line">tb[mm<span class="number">-1</span>].num+=tb[mm].num,tb[mm<span class="number">-1</span>].s+=tb[mm].s;</span><br><span class="line">mm--;</span><br><span class="line">&#125; <span class="keyword">else</span><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ll i=<span class="number">1</span>,j=<span class="number">1</span>,cnt=<span class="number">1</span>,xa=<span class="number">1</span>,xb=<span class="number">1</span>,ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(i&lt;=nn &amp;&amp; j&lt;=mm) &#123;</span><br><span class="line"><span class="keyword">if</span>(pd(ta[i],tb[j])) &#123; <span class="comment">//açš„å‡å€¼å¤§</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>; k&lt;=ta[i].num; ++k) &#123;</span><br><span class="line">ans+=a[xa++]*(cnt++);</span><br><span class="line">&#125;</span><br><span class="line">i++;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>; k&lt;=tb[j].num; ++k) &#123;</span><br><span class="line">ans+=b[xb++]*(cnt++);</span><br><span class="line">&#125;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(i&lt;=nn) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>; k&lt;=ta[i].num; ++k) &#123;</span><br><span class="line">ans+=a[xa++]*(cnt++);</span><br><span class="line">&#125;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(j&lt;=mm) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>; k&lt;=tb[j].num; ++k) &#123;</span><br><span class="line">ans+=b[xb++]*(cnt++);</span><br><span class="line">&#125;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P2258 å­çŸ©é˜µ (æœç´¢+åŠ¨æ€è§„åˆ’)</title>
      <link href="2019/01/18/(Luogu)%20P2258%20%E5%AD%90%E7%9F%A9%E9%98%B5/"/>
      <url>2019/01/18/(Luogu)%20P2258%20%E5%AD%90%E7%9F%A9%E9%98%B5/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"><a class="markdownIt-Anchor" href="#è§†é¢‘è®²è§£æˆ³è¿™é‡Œ"></a> <a href="https://www.bilibili.com/video/av40748087?from=search&amp;seid=18207415671102946520">è§†é¢‘è®²è§£æˆ³è¿™é‡Œ</a> ï¼ˆbjèšèšè®²çš„å¯å¥½äº†ï¼‰</h3><p><a href="https://www.luogu.org/problemnew/show/P2258">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è¿™é¢˜ä¸€çœ‹å’Œæœ€å¤§å­çŸ©é˜µå¾ˆç±»ä¼¼ã€‚ä½†æ˜¯è¦æ¯”é‚£é¢˜æ›´åŠ çš„å¤æ‚ï¼Œè€ƒè™‘æ—¶æœ‰è¯¸å¤šç»†èŠ‚ã€‚æ€è·¯å°±æ˜¯å…ˆæŠŠè¡Œç¡®å®šä¸‹æ¥ï¼Œè¿™é‡Œç”¨ä¸€ä¸ªæœç´¢ï¼Œç„¶åå†å»è€ƒè™‘åˆ—ï¼Œè€ƒè™‘åˆ—çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é¢„å¤„ç†æˆ‘ä»¬æ‰€é€‰è¡Œ çš„ç«–ç›´çš„åˆ†å€¼ï¼ˆå³é¢˜ç›®å®šä¹‰çš„ç›¸é‚»å…ƒç´ å·®çš„ç»å¯¹å€¼ï¼‰å’Œæ¨ªç½®çš„åˆ†å€¼ã€‚éœ€è¦ä¸¤ä¸ªæ•°ç»„ï¼Œæ¨ªç½® line[i] [j]ä»£è¡¨ ç¬¬iåˆ—å’Œç¬¬jåˆ—æ¨ªå‘çš„ä¹‹å·®çš„ç»å¯¹å€¼ä¹‹å’Œï¼›ç«–ç›´col[i],ä»£è¡¨ç¬¬iåˆ—ç«–ç›´ä¹‹å·®çš„ç»å¯¹å€¼ä¹‹å’Œã€‚é¢„å¤„ç†ç»“æŸä¹‹åï¼Œå°±æ˜¯ä¸€ä¸ªdpäº†ã€‚ dp[i] [j] è¡¨ç¤ºå…±é€‰æ‹©äº†jåˆ—ï¼Œæœ€åä¸€åˆ—æ˜¯iåˆ—çš„æœ€å°å€¼</p><p>é€’æ¨å¼å°±æ˜¯ï¼š dp[i][j]=min(dp[i] [j],dp[k] [j-1]+col[i]+line[k] [i]); ä¸‘é™‹çš„ä»£ç å¦‚ä¸‹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,s,c,ans=inf;</span><br><span class="line"><span class="keyword">int</span> a[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> num=<span class="number">0</span>,choose[maxn];</span><br><span class="line"><span class="keyword">int</span> dp[maxn][maxn]; <span class="comment">//dp[i][j] é€‰æ‹©äº†jåˆ—ï¼Œæœ€åä¸€åˆ—æ˜¯iåˆ—çš„æœ€å°å€¼ </span></span><br><span class="line"><span class="keyword">int</span> line[maxn][maxn],col[maxn];</span><br><span class="line"><span class="comment">//  è¡Œ               åˆ— </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//é¢„å¤„ç†ç«–ç›´çš„åˆ— </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)&#123; </span><br><span class="line">col[j]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=s;++i)&#123;</span><br><span class="line">col[j]+=<span class="built_in">abs</span>(a[choose[i]][j]-a[choose[i<span class="number">-1</span>]][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é¢„å¤„ç†è¡Œ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;i;++j)&#123;</span><br><span class="line">line[j][i]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=s;++k)&#123;</span><br><span class="line">line[j][i]+=<span class="built_in">abs</span>(a[choose[k]][i]-a[choose[k]][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">memset</span>(dp,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123; <span class="comment">//å†è¡Œç¡®å®šçš„æƒ…å†µä¸‹ è€ƒè™‘åˆ— </span></span><br><span class="line">init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line">dp[i][<span class="number">1</span>]=col[i];</span><br><span class="line"><span class="keyword">if</span>(c==<span class="number">1</span>)&#123;</span><br><span class="line">ans=min(ans,dp[i][<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=c;++j)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=j;i&lt;=m &amp;&amp; m-i+j&gt;=c;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=j<span class="number">-1</span>;k&lt;i;++k)&#123;</span><br><span class="line">dp[i][j]=min(dp[i][j],dp[k][j<span class="number">-1</span>]+col[i]+line[k][i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(j==c)</span><br><span class="line">ans=min(ans,dp[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> step)</span></span>&#123; <span class="comment">//æœç´¢æ‰€æœ‰è¡Œçš„ç»„åˆ </span></span><br><span class="line"><span class="keyword">if</span>(num==s)&#123;</span><br><span class="line">solve();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=step;num+n-i+<span class="number">1</span>&gt;=s;++i)&#123;</span><br><span class="line">num++;</span><br><span class="line">choose[num]=i;</span><br><span class="line">dfs(i+<span class="number">1</span>);</span><br><span class="line">num--;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;s&gt;&gt;c;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">dfs(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> æœç´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1463 [POI2002][HAOI2007]åç´ æ•° (æ‰“è¡¨ || æœç´¢)</title>
      <link href="2019/01/17/(Luogu)%20P1463%20%5BPOI2002%5D%5BHAOI2007%5D%E5%8F%8D%E7%B4%A0%E6%95%B0/"/>
      <url>2019/01/17/(Luogu)%20P1463%20%5BPOI2002%5D%5BHAOI2007%5D%E5%8F%8D%E7%B4%A0%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1463">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è¿™é¢˜ä¸€çœ‹æ•°æ®å°±ä¸å¯èƒ½æš´åŠ›çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å…ˆæ‰“ä¸ªè¡¨è¯•ä¸€ä¸‹ï¼Œå‘ç°é¢˜ç›®æ‰€æ±‚çš„åè´¨æ•°åˆ†å¸ƒéå¸¸çš„ç¨€ç–ã€‚æ‰€ä»¥è§£æ³•ä¸€å°±æ˜¯æ‰“è¡¨ï¼Œæ‰“è¡¨æœ‰3ç§æ–¹æ³•ï¼š</p><p><strong>è§£æ³•ä¸€ï¼š</strong></p><ol><li><p>ç›´æ¥æš´åŠ›æšä¸¾å› å­(è¿™ç§åº”è¯¥æ²¡ä»€ä¹ˆäººå»åšå§ï¼Œå¤ªæ…¢äº†)</p></li><li><p>æšä¸¾åˆ°sqrt(i),ä½†æ˜¯å¯¹äºè¿™ä¹ˆå¤§çš„æ•°æ®æ˜¾ç„¶è¿˜æ˜¯å¤ªæ…¢äº†ã€‚</p></li><li><p>ä¸€ä¸ªæ€§è´¨ï¼Œçº¦æ•°ä¸ªæ•°å®šç†ï¼šä¸€ä¸ªæ­£æ•´æ•°nï¼Œå¯ä»¥åˆ†è§£æˆ <img src="https://latex.codecogs.com/gif.latex?p1%5E%7Bk1%7D*p2%5E%7Bk2%7D*p3%5E%7Bk3%7D*...pn%5E%7Bkn%7D" alt="img" /> (p1,p2â€¦pnä¸ºç´ æ•°)é‚£è¿™ä¸ªæ•°çš„çº¦æ•°ä¸ªæ•°ä¸º</p></li></ol><p>(k1+1)*(k2+1)â€¦(kn+1),è¿™ä¸ªä¸éš¾ç†è§£ï¼Œè€ƒè™‘p1^k1 å®ƒçš„çº¦æ•°æœ‰ p1^0 ~ p1^k1 å…±(k1+1)ä¸ªï¼Œä¸€ç›´åˆ°pn<sup>knæœ‰(kn+1)ä¸ªçº¦æ•°ï¼Œæ ¹æ®ä¹˜æ³•åŸç†é‚£nçš„çº¦æ•°ä¸ªæ•°å°±æ˜¯(k1+1)*(k2+1)â€¦(kn+1)ï¼Œå› ä¸ºæ¯ä¸ªå•ç‹¬çš„éƒ¨åˆ†å…ƒç´ (å¦‚p1</sup>2)éƒ½æ˜¯nçš„çº¦æ•°ï¼Œè€Œä¸”ç”±äºæ˜¯ç´ æ•°çš„æ¬¡æ–¹ç›¸ä¹˜èµ·æ¥å”¯ä¸€ä¸é‡å¤ï¼Œé‚£æ­é…èµ·æ¥ä¹Ÿæ˜¯nçš„çº¦æ•°ã€‚</p><p>è€ƒè™‘åˆ°é¢˜æ„åè´¨æ•°å°±æ˜¯çº¦æ•°ç›¸åŒçš„æƒ…å†µä¸‹æ•°æœ€å°çš„é‚£ä¸€ä¸ªï¼Œé‚£å°±æ˜¯(k1+1)*(k2+1)â€¦(kn+1)å®šï¼Œé‚£æˆ‘æƒ³è¦è¿™ä¸ªæ•°å°ï¼Œé‚£è‚¯å®šæ˜¯æŠŠå¤§çš„kç»™å°çš„pã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºk1ï¼Œk2â€¦knä¸€å®šæ˜¯ä¸é€’å¢çš„ã€‚å½“k1ï¼Œk2â€¦knéƒ½å–1æ—¶ï¼Œå‰åä¸ªç´ æ•°ç›¸ä¹˜å·²ç»å¤§äº2e9äº†ï¼Œæ‰€ä»¥è€ƒè™‘å‰åä¸ªç´ æ•°å°±è¡Œäº†ã€‚</p><p>å…ˆçœ‹æ‰“è¡¨çš„ä»£ç ï¼Œåªè¦è¡¨æ‰“å‡ºæ¥äº†ï¼Œé‚£å°±éå¸¸ç®€å•æ˜äº†äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰“è¡¨</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e9</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> prime[<span class="number">10</span>]=&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">23</span>,<span class="number">29</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">int</span> count=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=maxn<span class="number">-5</span>;++i)&#123;</span><br><span class="line"><span class="keyword">int</span> tp=i,num=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">10</span>;++j)&#123;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(tp%prime[j]==<span class="number">0</span>)&#123;</span><br><span class="line">tp/=prime[j];</span><br><span class="line">cnt++;</span><br><span class="line">&#125;</span><br><span class="line">num=num*(cnt+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="number">1</span>)<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(num&gt;count)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;,&quot;</span>;</span><br><span class="line">count=num;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">68</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">12</span>, <span class="number">24</span>, <span class="number">36</span>, <span class="number">48</span>, <span class="number">60</span>, <span class="number">120</span>, <span class="number">180</span>,</span><br><span class="line"> <span class="number">240</span>, <span class="number">360</span>, <span class="number">720</span>, <span class="number">840</span>, <span class="number">1260</span>, <span class="number">1680</span>, <span class="number">2520</span>, <span class="number">5040</span>, <span class="number">7560</span>, <span class="number">10080</span>, </span><br><span class="line"> <span class="number">15120</span>, <span class="number">20160</span>, <span class="number">25200</span>, <span class="number">27720</span>, <span class="number">45360</span>, <span class="number">50400</span>, <span class="number">55440</span>, <span class="number">83160</span>, <span class="number">110880</span>, </span><br><span class="line"> <span class="number">166320</span>, <span class="number">221760</span>, <span class="number">277200</span>, <span class="number">332640</span>, <span class="number">498960</span>, <span class="number">554400</span>, <span class="number">665280</span>, <span class="number">720720</span>, </span><br><span class="line"> <span class="number">1081080</span>, <span class="number">1441440</span>, <span class="number">2162160</span>, <span class="number">2882880</span>, <span class="number">3603600</span>, <span class="number">4324320</span>, <span class="number">6486480</span>, </span><br><span class="line"> <span class="number">7207200</span>, <span class="number">8648640</span>, <span class="number">10810800</span>, <span class="number">14414400</span>, <span class="number">17297280</span>, <span class="number">21621600</span>, <span class="number">32432400</span>, </span><br><span class="line"> <span class="number">36756720</span>, <span class="number">43243200</span>, <span class="number">61261200</span>, <span class="number">73513440</span>, <span class="number">110270160</span>, <span class="number">122522400</span>, </span><br><span class="line"> <span class="number">147026880</span>, <span class="number">183783600</span>, <span class="number">245044800</span>, <span class="number">294053760</span>, <span class="number">367567200</span>, <span class="number">551350800</span>, </span><br><span class="line"> <span class="number">698377680</span>, <span class="number">735134400</span>, <span class="number">1102701600</span>, <span class="number">1396755360</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">67</span>;i&gt;=<span class="number">0</span>;--i)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[i]&lt;=n)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;a[i]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è§£æ³•äºŒï¼š</strong></p><p>æœç´¢ä¹Ÿæ˜¯ç”¨çš„çº¦æ•°å®šç†ï¼Œç„¶ååˆ©ç”¨k1ï¼Œk2â€¦knä¸€å®šæ˜¯ä¸é€’å¢çš„è¿™ä¸€æ¡ä»¶ï¼Œæšä¸¾å„ä¸ªè´¨æ•°çš„æŒ‡æ•°ï¼Œè¿˜æ˜¯å¾ˆå¥½æ‡‚çš„ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf=<span class="number">0x7f7f7f7f</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll prime[<span class="number">15</span>]=&#123;<span class="number">0</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">23</span>,<span class="number">29</span>&#125;; </span><br><span class="line">ll num[<span class="number">15</span>];</span><br><span class="line">ll ans,n,apnum;</span><br><span class="line"><span class="comment">//ansè¡¨ç¤ºç­”æ¡ˆï¼Œapnumè¡¨ç¤ºç­”æ¡ˆçš„çº¦æ•°ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(ll step,ll pnum,ll state)</span></span>&#123;<span class="comment">//ç¬¬å‡ ä¸ªè´¨æ•°ï¼Œç°åœ¨çš„çº¦æ•°ä¸ªæ•°ï¼Œç°åœ¨çš„å€¼ </span></span><br><span class="line"><span class="keyword">if</span>(step&gt;=<span class="number">12</span>)<span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span>(pnum&gt;apnum || (pnum==apnum&amp;&amp;state&lt;ans))&#123;</span><br><span class="line">ans=state,apnum=pnum;</span><br><span class="line">&#125;</span><br><span class="line">num[step]=<span class="number">0</span>; <span class="comment">//æ¯ä¸€è½®éƒ½è¦ä»0å¼€å§‹ </span></span><br><span class="line"><span class="keyword">while</span>(state*prime[step]&lt;=n &amp;&amp; num[step]+<span class="number">1</span>&lt;=num[step<span class="number">-1</span>])&#123;</span><br><span class="line">num[step]++;</span><br><span class="line">state*=prime[step];</span><br><span class="line">dfs(step+<span class="number">1</span>,pnum*(num[step]+<span class="number">1</span>),state);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">num[<span class="number">0</span>]=inf;</span><br><span class="line">dfs(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>); </span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœç´¢ </tag>
            
            <tag> æ‰“è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1052 è¿‡æ²³ (çŠ¶å‹dp)</title>
      <link href="2019/01/16/(Luogu)%20P1052%20%E8%BF%87%E6%B2%B3/"/>
      <url>2019/01/16/(Luogu)%20P1052%20%E8%BF%87%E6%B2%B3/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1052">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯</strong></em> ï¼šè¿™é¢˜çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹è¿˜æ˜¯å¾ˆå¥½æƒ³çš„ï¼Œdp[i]ä»£è¡¨è·³åˆ°ç¬¬iç‚¹è¸©åˆ°çš„æœ€å°‘çŸ³å¤´ï¼Œdp[i]=dp[i-j]+stone[i],jä½è·ç¦»ï¼Œå³è·³jä¸ªè·ç¦»åˆ°iç‚¹ï¼Œstone[i]è¡¨ç¤ºè¿™é‡Œæ˜¯å¦æœ‰çŸ³å­ã€‚ä½†æ˜¯è¿™é‡Œléå¸¸å¤§ï¼Œåªæ˜¯å¾ªç¯ä¹Ÿä¼šè¶…æ—¶ï¼Œæ‰€ä»¥éœ€è¦çŠ¶æ€å‹ç¼©ã€‚è¿™é‡Œå‹ç¼©çš„æ–¹æ³•æœ‰90ç¼©ï¼Œ72ç¼©ï¼ˆ<a href="https://www.luogu.org/problemnew/solution/P1052">æˆ³æˆ‘</a>ï¼‰è¿˜æœ‰2520ç¼©ï¼Œè¿™é‡Œæˆ‘å†™çš„æ˜¯2520ç¼©ï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œ2520æ˜¯1~10çš„æœ€å°å…¬å€æ•°ï¼Œå°±æ˜¯ä»iç‚¹å‡ºå‘ï¼Œæ¯ä¸ªç‚¹éƒ½å¯ä»¥åˆ°è¾¾è·ç¦»+2520å¤„ï¼Œä¹‹ååˆä¼šå‡ºç°é‡å¤çš„æƒ…å†µï¼Œæ‰€ä»¥åªè¦å¯¹2520å–ä½™å°±è¡Œäº†ï¼Œæœ€å¤§ä¹Ÿå°±æ˜¯2520*100ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">2520</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxn];</span><br><span class="line"><span class="keyword">int</span> stone[maxn],a[maxn];</span><br><span class="line"><span class="keyword">int</span> l,s,t,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;l&gt;&gt;s&gt;&gt;t&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">&#125;</span><br><span class="line">sort(a+<span class="number">1</span>,a+m+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[i]-a[i<span class="number">-1</span>]&gt;mod)&#123; <span class="comment">//è·ç¦»å¤§äº†</span></span><br><span class="line">k+=(a[i]-a[i<span class="number">-1</span>])-(a[i]-a[i<span class="number">-1</span>])%mod;</span><br><span class="line">&#125;</span><br><span class="line">stone[a[i]-k]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">memset</span>(dp,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">dp[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=mod*m;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=t;j&gt;=s;--j)&#123;</span><br><span class="line"><span class="keyword">if</span>(i-j&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">dp[i]=min(dp[i-j]+stone[i],dp[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dp[mod*m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> çŠ¶å‹dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForce) F. Ivan and Burgers(çº¿æ€§åŸº+ç¦»çº¿)</title>
      <link href="2019/01/15/(CodeForce)%20F.%20Ivan%20and%20Burgers/"/>
      <url>2019/01/15/(CodeForce)%20F.%20Ivan%20and%20Burgers/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ"><a class="markdownIt-Anchor" href="#è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ"></a> <a href="https://www.bilibili.com/video/av40713052">è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ</a></h3><p><a href="https://blog.csdn.net/TDD_Master/article/details/86489939">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„</strong></em> ï¼šæœ‰nä¸ªæ±‰å ¡åº—ï¼Œæ¯ä¸ªåº—é‡Œæœ€è´µçš„æ±‰å ¡æ˜¯ciå…ƒï¼Œqæ¬¡è¯¢é—®ï¼Œä»låˆ°rï¼Œæ‰€èƒ½èŠ±è´¹çš„æœ€å¤šé’±æ•°ï¼ˆç»“æŸä¸å¼€å§‹æ—¶çš„é‡‘é¢å·®ï¼‰ï¼Œä½†æ˜¯èŠ±é’±ä¸æ˜¯ç›´æ¥çš„åŠ å‡ï¼Œè§„åˆ™æ˜¯æ‰‹é‡Œæœ‰då…ƒï¼Œè¦èŠ±è´¹cå…ƒï¼Œé‚£æ”¯ä»˜åªåï¼Œä»–è¿˜æœ‰d^cå…ƒã€‚å¼€å§‹æ˜¯ä»–æœ‰éå¸¸å¤šä¸ª1ï¼ˆrichï¼‰ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯</strong></em> ï¼šå…¶å®è¿™ä¸ªé¢˜ç¨å¾®æ€è€ƒä¸€ä¸‹å°±å¯ä»¥è½¬åŒ–æˆæ±‚ï¼ˆl,rï¼‰åŒºé—´çš„æœ€å¤§å¼‚æˆ–å€¼ï¼Œè¿™ä¸ªå€¼å’Œä»–åˆå§‹çš„é’±å¼‚æˆ–ï¼Œå·®å€¼å°±æ˜¯è¿™ä¸ªæ•°ã€‚ç„¶ååˆè¦å¤šæ¬¡æŸ¥è¯¢ï¼Œæ—¶é—´å¤æ‚åº¦å¦‚ä½•é™ä¸‹æ¥å‘¢ï¼Œå°±éœ€è¦ç”¨åˆ°çº¿æ€§åŸºçš„çŸ¥è¯†äº†ï¼ˆ<a href="https://www.cnblogs.com/vb4896/p/6149022.html">ä¸æ‡‚æˆ³æˆ‘</a>ï¼‰ä¸»è¦æ˜¯ç”¨åˆ°äº†ä¸€ä¸ªå…³é”®çš„æ€§è´¨ï¼Œaå’Œbå¼‚æˆ–çš„å€¼åŸŸå’Œå°†aï¼Œbä¹‹ä¸€æ›¿æ¢æˆa^bï¼ˆaå¼‚æˆ–bï¼‰çš„å€¼åŸŸæ˜¯ä¸€æ ·çš„ã€‚</p><p>æ¥ä¸‹ç¦»çº¿æ“ä½œï¼Œä»å°åˆ°å¤§ä¾æ­¤å¤„ç†ç¬¬iä¸ªæ±‰å ¡åº—ï¼Œè§£å†³å³è¾¹ç•Œä¸ºiçš„æŸ¥è¯¢ã€‚æ‰€ä»¥ç”¨çº¿æ€§åŸºçš„æ—¶å€™å°±è¦å¤šåŠ ä¸€å¥</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(f[j].b&lt;tmp.b)&#123; <span class="comment">//bçš„å€¼æ˜¯å‡ºç°çš„ä½ç½®i</span></span><br><span class="line">swap(f[j],tmp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ ä½¿å¾—äºŒè¿›åˆ¶ç¬¬jä½ä¸º1çš„æ•° å‡ºç°çš„ä½ç½®æœ€å¤§</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(f[j].b&gt;=tp.a)&#123;</span><br><span class="line">ans[tp.b]=max(ans[tp.b],ans[tp.b]^f[j].a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·åœ¨åˆ¤æ–­åŒºé—´æ—¶ï¼Œåªè¦æŸ¥è¯¢çš„å·¦è¾¹ç•Œlæ˜¯ å°äº ä½¿å¾—ç¬¬jä½ä¸º1çš„æ•°çš„ä½ç½®ï¼ˆå¥½ç»•å£ï¼‰é‚£å°±è¯´æ˜è¿™ä¸ªæ•°å¯ä»¥è¢«è€ƒè™‘ï¼Œå°±tryä¸€ä¸‹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> tt=<span class="number">20</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> a;</span><br><span class="line"><span class="keyword">int</span> b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> n,c[maxn],ans[maxn],q,l,r;</span><br><span class="line">node f[tt];</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; que[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;c[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;q;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;l&gt;&gt;r;</span><br><span class="line">que[r].push_back(node&#123;l,i&#125;); <span class="comment">//è®°å½•å·¦è¾¹ç•Œå’Œç¬¬å‡ ç»„è¯¢é—® </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//f[i].aè¡¨ç¤ºå¯ä»¥ä½¿å¾—iä½å˜æˆ1çš„æ•°ï¼Œf[i].bè¡¨ç¤ºæ»¡è¶³æ¡ä»¶çš„åæ ‡æœ€å¤§çš„ç‚¹</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">node tmp=node&#123;c[i],i&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=tt<span class="number">-1</span>;j&gt;=<span class="number">0</span>;--j)&#123; <span class="comment">//æ¯ä¸€ä¸ªçš„æ¯ä¸€ä½å–å‡º ï¼Œä»é«˜ä½åˆ°ä½ä½</span></span><br><span class="line"><span class="keyword">if</span>(tmp.a&gt;&gt;j&amp;<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(f[j].a==<span class="number">0</span>)&#123;</span><br><span class="line">f[j]=tmp;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(f[j].b&lt;tmp.b)&#123; <span class="comment">//è¯¥ä½ç½®å·²ç»ä¸ºæœ‰æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°ä¹Ÿå¯ä»¥ä½¿å¾—ä¸º 1</span></span><br><span class="line">swap(f[j],tmp);</span><br><span class="line">&#125;</span><br><span class="line">tmp.a^=f[j].a;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;(<span class="keyword">int</span>)que[i].size();++k)&#123; <span class="comment">//å¤„ç†æ‰ä»¥iä¸ºå³è¾¹ç•Œçš„æŸ¥è¯¢</span></span><br><span class="line">node tp=que[i][k];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=tt<span class="number">-1</span>;j&gt;=<span class="number">0</span>;j--)&#123;</span><br><span class="line"><span class="keyword">if</span>(f[j].b&gt;=tp.a)&#123;</span><br><span class="line">ans[tp.b]=max(ans[tp.b],ans[tp.b]^f[j].a);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;++i)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ€§åŸº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForce) E. Andrew and Taxi(äºŒåˆ†+æ‹“æ‰‘)</title>
      <link href="2019/01/14/(CodeForce)%20E.%20Andrew%20and%20Taxi/"/>
      <url>2019/01/14/(CodeForce)%20E.%20Andrew%20and%20Taxi/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ"><a class="markdownIt-Anchor" href="#è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ"></a> <a href="https://www.bilibili.com/video/av40713052">è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ</a></h3><p><a href="http://codeforces.com/contest/1100/problem/E">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ä¸€ä¸ªæœ‰å‘å›¾ï¼Œç»™ä½ mæ¡æœ‰å‘è¾¹ï¼Œæ¯æ¡è¾¹éƒ½æœ‰æƒå€¼ï¼ˆå³ä¿®æ”¹è¿™æ¡è¾¹æ–¹å‘æ‰€è¦ä»˜å‡ºçš„ä»£ä»·ï¼‰ï¼Œå¦‚æœç¡®å®šä¸€ä¸ªä»£ä»·v,åˆ™æƒå€¼å°äºç­‰äºvvçš„è¾¹éƒ½å¯ä»¥è¢«ä¿®æ”¹ã€‚æ±‚ä½¿å¾—å›¾å˜å¾—æ²¡æœ‰ç¯æ‰€éœ€è¦çš„æœ€å°vï¼Œæ”¹å˜è¾¹çš„ä¸ªæ•°ï¼Œå’Œä¸€ç§æ–¹æ¡ˆã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> ä¸€å¼€å§‹æœ‰å¾€äºŒåˆ†è¿™æ–¹é¢è€ƒè™‘ï¼Œä½†æ˜¯å´ä¸çŸ¥å¦‚ä½•äºŒåˆ†ï¼Œè¿™ä¸ªé¢˜äºŒåˆ†çš„æ˜¯æœ€å°ä»£ä»·ï¼Œé‚£åˆ¤æ–­æ¡ä»¶æ˜¯ä»€ä¹ˆå‘¢ï¼Œå°äºç­‰äºä»£ä»·vçš„è¾¹ç›¸å½“äºæ— å‘è¾¹ï¼Œæˆ‘ä»¬å¯ä»¥éšæ„æ§åˆ¶å…¶æ–¹å‘ï¼Œä½†æ˜¯å¤§äºvçš„é‚£ä¸€éƒ¨åˆ†æˆ‘ä»¬æ— æ³•æŒæ§ï¼Œæœ‰ç¯é‚£å°±æ˜¯æ— æ³•æ”¹å˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹“æ‰‘æ’åºåªå»è€ƒè™‘é‚£äº›å¤§äºvçš„è¾¹ï¼Œå¦‚æœæœ€åè¿˜æœ‰ç‚¹çš„å…¥åº¦ä¸ä¸º0ï¼Œé‚£å°±æ˜¯è¯´æ˜æœ‰ç¯ï¼ŒäºŒåˆ†çš„ä»£ä»·å¤ªä½äº†ï¼Œl=mid+1ï¼Œåä¹‹r=mid-1ã€‚æœ€åå¦‚ä½•è¾“å‡ºæ–¹æ¡ˆå‘¢ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªtopæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„ä»£è¡¨åœ¨æ‹“æ‰‘åºåˆ—é‡Œçš„å…ˆåé¡ºåºï¼Œè¶Šåè¾“å‡ºçš„è¶Šå¤§ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªåºåˆ—å»åˆ¤æ–­é‚£äº›è¾¹åº”è¯¥è¢«ç¿»è½¬ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œè¾¹edgeï¼Œedgeçš„èµ·ç‚¹sæŒ‡å‘edgeçš„ç»ˆç‚¹e,è€Œä¸”æ»¡è¶³edgeçš„æƒå€¼wå°äºvã€‚ä½†æ˜¯åœ¨æ‹“æ‰‘åºåˆ—é‡Œï¼Œtop[s]&gt;top[e],(æˆ‘ä»¬å¯ä»¥çŸ¥é“ç”±s-&gt;eçš„è¾¹ï¼Œåœ¨æ‹“æ‰‘é‡Œè‚¯å®šsåœ¨eä¹‹å‰çš„)ï¼Œé‚£è¿™æ¡è¾¹çš„é¡ºåºå°±è¦è¢«æˆ‘ä»¬äº¤æ¢é¡ºåºã€‚è¿™ä¸ªé¢˜ä¹Ÿç®—åŸºæœ¬è§£å†³äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,in[maxn],top[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ee[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> s,e,w;</span><br><span class="line">&#125;ed[maxn];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">pd</span><span class="params">(<span class="keyword">int</span> mid)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</span><br><span class="line">ee[i].clear();</span><br><span class="line"><span class="built_in">memset</span>(in,<span class="number">0</span>,<span class="keyword">sizeof</span>(in));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(ed[i].w&gt;mid)&#123;</span><br><span class="line">ee[ed[i].s].push_back(ed[i].e);</span><br><span class="line">in[ed[i].e]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(!in[i])&#123;</span><br><span class="line">q.push(i);</span><br><span class="line">top[i]=++cnt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line"><span class="keyword">int</span> u=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)ee[u].size();++i)&#123;</span><br><span class="line"><span class="keyword">int</span> t=ee[u][i];</span><br><span class="line">--in[t];</span><br><span class="line"><span class="keyword">if</span>(!in[t])q.push(t),top[t]=++cnt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(in[i])<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;ed[i].s&gt;&gt;ed[i].e&gt;&gt;ed[i].w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> l=<span class="number">0</span>,r=inf,res;</span><br><span class="line"><span class="keyword">while</span>(l&lt;=r)&#123;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(pd(mid))r=mid<span class="number">-1</span>,res=mid;</span><br><span class="line"><span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">pd(res); <span class="comment">//æŠ±ä½topåºåˆ—æ˜¯ç”±resè·‘å‡º </span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(ed[i].w&lt;=res &amp;&amp; top[ed[i].s] &gt; top[ed[i].e])&#123;</span><br><span class="line">ans.push_back(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;(<span class="keyword">int</span>)ans.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)ans.size();++i)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å­¦ä¹ äºhttps://blog.csdn.net/j2_o2/article/details/86469472</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒåˆ† </tag>
            
            <tag> æ‹“æ‰‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces) Round 532 (Div. 2) A,B,C,D,E,F</title>
      <link href="2019/01/14/(CodeForces)%20Round532/"/>
      <url>2019/01/14/(CodeForces)%20Round532/</url>
      
        <content type="html"><![CDATA[<h3 id="è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ"><a class="markdownIt-Anchor" href="#è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ"></a> <a href="https://www.bilibili.com/video/av40713052">è§†é¢‘é¢˜è§£æˆ³è¿™é‡Œ</a></h3><h3 id="a-roman-and-browser"><a class="markdownIt-Anchor" href="#a-roman-and-browser"></a> A. Roman and Browser</h3><p><a href="http://codeforces.com/contest/1100/problem/A">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> æš´åŠ›æšä¸¾å°±å¯ä»¥å‡ºç­”æ¡ˆã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> n,k,xx=<span class="number">0</span>,yy=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">1000</span>]; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;k;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line"><span class="keyword">if</span>(a[i]==<span class="number">-1</span>)&#123;</span><br><span class="line">xx++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">yy++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">int</span> b[<span class="number">1000</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;++i)&#123;</span><br><span class="line"><span class="keyword">int</span> tx=xx,ty=yy;</span><br><span class="line"><span class="built_in">memcpy</span>(b,a,<span class="number">1000</span>*<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=n;j+=k)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[j]==<span class="number">1</span>)&#123;</span><br><span class="line">ty--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">tx--;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ans=max(ans,<span class="built_in">abs</span>(tx-ty));</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="b-build-a-contest"><a class="markdownIt-Anchor" href="#b-build-a-contest"></a> B. Build a Contest</h3><p><a href="http://codeforces.com/contest/1100/problem/B">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„æ¨¡æ‹Ÿé¢˜ï¼Œåªè¦ä¸€ç›´è®°å½•ç°åœ¨ä¸åŒæ•°çš„ä¸ªæ•°ï¼Œå’Œä¸åŒç§ç±»çš„æ•°å‡ºç°çš„æ¬¡æ•°ï¼Œå°±å¯ä»¥äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> a[maxn];</span><br><span class="line"><span class="keyword">int</span> num[maxn];</span><br><span class="line"><span class="keyword">int</span> difnum;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> difnum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(num[a[i]]==<span class="number">0</span>)&#123;</span><br><span class="line">difnum++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">num[a[i]]++;</span><br><span class="line"><span class="keyword">if</span>(difnum==n)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line">num[j]--;</span><br><span class="line"><span class="keyword">if</span>(num[j]==<span class="number">0</span>)&#123;</span><br><span class="line">difnum--;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="c-nn-and-the-optical-illusion"><a class="markdownIt-Anchor" href="#c-nn-and-the-optical-illusion"></a> C. NN and the Optical Illusion</h3><p><a href="http://codeforces.com/contest/1100/problem/C">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯:</strong></em>   ä¸€é“éå¸¸ç®€å•çš„å‡ ä½•é¢˜ï¼Œè‡ªå·±ç”»ä¸ªå›¾ç”¨ä¸ªä½™å¼¦å®šç†å»ºç«‹ä¸ªç­‰å¼å°±å¯ä»¥æ±‚å‡ºã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi=<span class="built_in">acos</span>(<span class="number">-1</span>);</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">double</span> n,r;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;r;</span><br><span class="line"><span class="keyword">double</span> res=r*(<span class="built_in">sin</span>(pi/n))/(<span class="number">1</span>-<span class="built_in">sin</span>(pi/n));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%.7lf\n&quot;</span>,res);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="d-dasha-and-chess"><a class="markdownIt-Anchor" href="#d-dasha-and-chess"></a> D. Dasha and Chess</h3><p><a href="http://codeforces.com/contest/1100/problem/D">ä¼ é€é—¨</a></p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è¿™æ˜¯ä¸€é“äº¤äº’é¢˜ï¼Œè€Œä¸”é¢˜å¹²ç›¸å½“çš„é•¿ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> dx[] = &#123;<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dy[] = &#123;<span class="number">-1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> nums[maxn];</span><br><span class="line"><span class="keyword">int</span> G[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> xx[maxn];</span><br><span class="line"><span class="keyword">int</span> yy[maxn];</span><br><span class="line"><span class="keyword">int</span> nx, ny;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get_location</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (x &lt; nx &amp;&amp; y &lt; ny) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &lt; nx &amp;&amp; y &gt; ny) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (x &gt; nx &amp;&amp; y &gt; ny) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; nx &gt;&gt; ny;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">666</span>; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; xx[i] &gt;&gt; yy[i];</span><br><span class="line">G[xx[i]][yy[i]] = <span class="number">1</span>;</span><br><span class="line">nums[get_location(xx[i], yy[i])]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> tmpsum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> tmp = nums[i] + nums[(i+<span class="number">1</span>)%<span class="number">4</span>] + nums[(i+<span class="number">3</span>)%<span class="number">4</span>];</span><br><span class="line"><span class="keyword">if</span> (tmp &gt; tmpsum) &#123;</span><br><span class="line">tmpsum = tmp;</span><br><span class="line">flag = i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">2000</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> tx = nx + dx[flag];</span><br><span class="line"><span class="keyword">int</span> ty = ny + dy[flag];</span><br><span class="line"><span class="keyword">if</span> (tx &lt; <span class="number">1</span> || tx &gt; <span class="number">999</span>)</span><br><span class="line">tx = nx;</span><br><span class="line"><span class="keyword">if</span> (ty &lt; <span class="number">1</span> || ty &gt; <span class="number">999</span>)</span><br><span class="line">ty = ny;</span><br><span class="line"><span class="keyword">if</span> (G[tx][ty] == <span class="number">1</span>)</span><br><span class="line">ty = ny;</span><br><span class="line">nx = tx;</span><br><span class="line">ny = ty;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; nx &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; ny &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>.flush();</span><br><span class="line"><span class="keyword">int</span> k, cx, cy;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; k &gt;&gt; cx &gt;&gt; cy;</span><br><span class="line"><span class="keyword">if</span> (k &lt;= <span class="number">0</span>)</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">G[xx[k]][yy[k]] = <span class="number">0</span>;</span><br><span class="line">G[cx][cy] = <span class="number">1</span>;</span><br><span class="line">xx[k] = cx;</span><br><span class="line">yy[k] = cy;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="e-andrew-and-taxi"><a class="markdownIt-Anchor" href="#e-andrew-and-taxi"></a> E. Andrew and Taxi</h3><p>è¿™é¢˜æ‰“cfæ—¶æ²¡æœ‰åšå‡ºæ¥ï¼Œèµ›åæ‰çŸ¥é“è¿™æ˜¯ä¸€é“äºŒåˆ†+æ‹“æ‰‘ï¼Œå•ç‹¬å†™ä¸€ä¸‹ã€‚</p><p><a href="https://blog.csdn.net/TDD_Master/article/details/86480160">ä¼ é€</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,in[maxn],top[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ee[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> s,e,w;</span><br><span class="line">&#125;ed[maxn];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">pd</span><span class="params">(<span class="keyword">int</span> mid)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)</span><br><span class="line">ee[i].clear();</span><br><span class="line"><span class="built_in">memset</span>(in,<span class="number">0</span>,<span class="keyword">sizeof</span>(in));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(ed[i].w&gt;mid)&#123;</span><br><span class="line">ee[ed[i].s].push_back(ed[i].e);</span><br><span class="line">in[ed[i].e]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(!in[i])&#123;</span><br><span class="line">q.push(i);</span><br><span class="line">top[i]=++cnt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line"><span class="keyword">int</span> u=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)ee[u].size();++i)&#123;</span><br><span class="line"><span class="keyword">int</span> t=ee[u][i];</span><br><span class="line">--in[t];</span><br><span class="line"><span class="keyword">if</span>(!in[t])q.push(t),top[t]=++cnt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(in[i])<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;ed[i].s&gt;&gt;ed[i].e&gt;&gt;ed[i].w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> l=<span class="number">0</span>,r=inf,res;</span><br><span class="line"><span class="keyword">while</span>(l&lt;=r)&#123;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(pd(mid))r=mid<span class="number">-1</span>,res=mid;</span><br><span class="line"><span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">pd(res); <span class="comment">//æŠ±ä½topåºåˆ—æ˜¯ç”±resè·‘å‡º </span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(ed[i].w&lt;=res &amp;&amp; top[ed[i].s] &gt; top[ed[i].e])&#123;</span><br><span class="line">ans.push_back(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;(<span class="keyword">int</span>)ans.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)ans.size();++i)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h3 id="f-ivan-and-burgers"><a class="markdownIt-Anchor" href="#f-ivan-and-burgers"></a> F. Ivan and Burgers</h3><p><a href="https://blog.csdn.net/TDD_Master/article/details/86489939">ä¼ é€</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> tt=<span class="number">20</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> a;</span><br><span class="line"><span class="keyword">int</span> b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> n,c[maxn],ans[maxn],q,l,r;</span><br><span class="line">node f[tt];</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; que[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;c[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;q;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;l&gt;&gt;r;</span><br><span class="line">que[r].push_back(node&#123;l,i&#125;); <span class="comment">//è®°å½•å·¦è¾¹ç•Œå’Œç¬¬å‡ ç»„è¯¢é—® </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//f[i].aè¡¨ç¤ºå¯ä»¥ä½¿å¾—iä½å˜æˆ1çš„æ•°ï¼Œf[i].bè¡¨ç¤ºæ»¡è¶³æ¡ä»¶çš„åæ ‡æœ€å¤§çš„ç‚¹</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line">node tmp=node&#123;c[i],i&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=tt<span class="number">-1</span>;j&gt;=<span class="number">0</span>;--j)&#123; <span class="comment">//æ¯ä¸€ä¸ªçš„æ¯ä¸€ä½å–å‡º ï¼Œä»é«˜ä½åˆ°ä½ä½</span></span><br><span class="line"><span class="keyword">if</span>(tmp.a&gt;&gt;j&amp;<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(f[j].a==<span class="number">0</span>)&#123;</span><br><span class="line">f[j]=tmp;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(f[j].b&lt;tmp.b)&#123; <span class="comment">//è¯¥ä½ç½®å·²ç»ä¸ºæœ‰æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°ä¹Ÿå¯ä»¥ä½¿å¾—ä¸º 1</span></span><br><span class="line">swap(f[j],tmp);</span><br><span class="line">&#125;</span><br><span class="line">tmp.a^=f[j].a;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;(<span class="keyword">int</span>)que[i].size();++k)&#123; <span class="comment">//å¤„ç†æ‰ä»¥iä¸ºå³è¾¹ç•Œçš„æŸ¥è¯¢</span></span><br><span class="line">node tp=que[i][k];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=tt<span class="number">-1</span>;j&gt;=<span class="number">0</span>;j--)&#123;</span><br><span class="line"><span class="keyword">if</span>(f[j].b&gt;=tp.a)&#123;</span><br><span class="line">ans[tp.b]=max(ans[tp.b],ans[tp.b]^f[j].a);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;++i)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>(POJ) 3279 Fliptile</title>
      <link href="2018/12/29/(POJ)%203279%20Fliptile/"/>
      <url>2018/12/29/(POJ)%203279%20Fliptile/</url>
      
        <content type="html"><![CDATA[<p><a href="http://poj.org/problem?id=3279">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> æœ‰ä¸€ä¸ªm*nçš„æ ¼å­ï¼Œæ ¼å­ä¸€é¢æ˜¯ç™½è‰²çš„ï¼Œä¸€é¢æ˜¯é»‘è‰²çš„ã€‚ç°åœ¨éœ€è¦å°†æ‰€æœ‰çš„æ ¼å­éƒ½ç¿»æˆç™½è‰²çš„ï¼Œä½†æ˜¯ç”±äºç‰›è¹„å­å¾ˆå¤§ï¼Œæ‰€ä»¥ä»–æ¯æ¬¡ç¿»ä¸€ä¸ªéƒ½ä¼šå½±å“åˆ°ä¸Šä¸‹å·¦å³å››ä¸ªï¼Œç°åœ¨è®©ä½ æ±‚å‡ºæœ€å°‘çš„ç¿»è½¬æ¬¡æ•°ï¼Œè¾“å‡ºç¿»è½¬çŸ©é˜µã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è¿™ä¸ªé¢˜è™½ç„¶æ•°æ®å¾ˆå°ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ç®€å•çš„è€ƒè™‘æ¯ä¸ªæ ¼å­çš„ç¿»è½¬æƒ…å†µï¼Œé‚£ä¼šæœ‰2^mnç§æƒ…å†µï¼Œç›´æ¥passï¼ŒåŒä¸€ä¸ªæ ¼å­å½“ç„¶æ˜¯åªèƒ½ç¿»è½¬ä¸€æ¬¡ï¼Œç¿»å¤šæ¬¡è¿™æ˜¯å¤šä½™çš„ã€‚ç”±äºç¬¬ä¸€è¡Œçš„æ ¼å­å¯ä»¥è¢«ä¸‹ä¸€è¡Œæˆ–è€…å·¦å³å½±å“ï¼Œé‚£æˆ‘ä»¬ä¸å¦‚æšä¸¾ç¬¬ä¸€è¡Œçš„æ‰€æœ‰ç¿»è½¬æƒ…å†µï¼Œé‚£ç¬¬äºŒè¡Œçš„ç¿»è½¬æƒ…å†µå°±å¯ä»¥æ ¹æ®ç¬¬ä¸€è¡Œæ¥äº†ï¼Œå› ä¸ºèƒ½ä¿®æ”¹ç¬¬ä¸€è¡Œçš„åªæœ‰ç¬¬äºŒè¡Œ äº†ï¼Œå¦‚æœç¬¬äºŒè¡Œä¸å»ä¿®æ”¹ç¬¬ä¸€è¡Œé»‘è‰²æ ¼å­ï¼Œé‚£ä»»åŠ¡æ˜¯ä¸å¯èƒ½å®Œæˆçš„ï¼Œè¿™æ˜¾è€Œæ˜“è§ï¼Œè¿™æ ·æˆ‘ä»¬ä¸€è¡Œä¸€è¡Œçš„è€ƒè™‘ä¸‹å»ï¼Œæœ€åå†åˆ¤æ–­ä¸€ä¸‹æœ€åä¸€è¡Œæ˜¯å¦å…¨ç™½å°±è¡Œäº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 20</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></span><br><span class="line"><span class="keyword">int</span> n,m,a[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> temp[maxn][maxn],ans[maxn][maxn];</span><br><span class="line"><span class="comment">// ä¸´æ—¶çŸ©é˜µ ç»“æœçŸ©é˜µ</span></span><br><span class="line"><span class="keyword">int</span> dx[<span class="number">5</span>]= &#123;<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dy[<span class="number">5</span>]= &#123;<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">pd</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> s=a[x][y],i;<span class="comment">//æ ¼å­æœ¬èº«çš„çŠ¶æ€åœ¨åŠ ä¸Š5ä¸ªåœ°æ–¹ç¿»è½¬çš„çŠ¶æ€ï¼Œ%2å°±å¯çŸ¥ç°åœ¨çŠ¶æ€</span></span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">5</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> nx=x+dx[i],ny=y+dy[i];</span><br><span class="line"><span class="keyword">if</span>(nx&gt;=<span class="number">0</span> &amp;&amp; nx&lt;m &amp;&amp; ny&gt;=<span class="number">0</span> &amp;&amp; ny&lt;n)</span><br><span class="line">s+=temp[nx][ny];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(s%<span class="number">2</span>==<span class="number">0</span>)<span class="keyword">return</span> <span class="number">1</span>;<span class="comment">//ç™½è‰²çŠ¶æ€</span></span><br><span class="line"><span class="keyword">else</span><span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//é»‘è‰²çŠ¶æ€</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;m; ++i) &#123;<span class="comment">//ä»ç¬¬äºŒè¡Œå¼€å§‹</span></span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>; j&lt;n; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(!pd(i<span class="number">-1</span>,j)) &#123;</span><br><span class="line">temp[i][j]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æœ€åä¸€è¡Œæ˜¯å¦å…¨éƒ¨ç™½è‰²ï¼›</span></span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!pd(m<span class="number">-1</span>,i)) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> tnum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;m; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>; j&lt;n; ++j) &#123;</span><br><span class="line">tnum+=temp[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> tnum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;m,&amp;n)!=EOF) &#123;</span><br><span class="line"><span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;m; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>; j&lt;n; ++j) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> res=inf;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">1</span>&lt;&lt;n; ++i) &#123; <span class="comment">//äºŒè¿›åˆ¶æšä¸¾ç¬¬ä¸€è¡Œçš„æ“ä½œ</span></span><br><span class="line"><span class="built_in">memset</span>(temp,<span class="number">0</span>,<span class="keyword">sizeof</span>(temp));</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>; j&lt;n; ++j) &#123;</span><br><span class="line">temp[<span class="number">0</span>][n-j<span class="number">-1</span>]=i&gt;&gt;j&amp;<span class="number">1</span>; <span class="comment">//å°†æ“ä½œé€ä¸€å–å‡ºæ”¾è¿›æ•°ç»„</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> num=solve();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(num&gt;=<span class="number">0</span>&amp;&amp;res&gt;num) &#123;</span><br><span class="line">res=num;</span><br><span class="line"><span class="built_in">memcpy</span>(ans,temp,<span class="keyword">sizeof</span>(temp));</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(res==inf)<span class="built_in">printf</span>(<span class="string">&quot;IMPOSSIBLE\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;m; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>; j&lt;n; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(j&lt;n<span class="number">-1</span>)<span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,ans[i][j]);</span><br><span class="line"><span class="keyword">else</span><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> POJ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æšä¸¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(POJ) 3276 Face The Right Way(æ¨¡æ‹Ÿ+å°ºå–)</title>
      <link href="2018/12/27/(POJ)%203276%20Face%20The%20Right%20Way/"/>
      <url>2018/12/27/(POJ)%203276%20Face%20The%20Right%20Way/</url>
      
        <content type="html"><![CDATA[<p><a href="http://poj.org/problem?id=3276">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em>  Nå¤´ç‰›æ’æˆäº†ä¸€åˆ—ï¼Œä½†æœ‰çš„æœå‰æœ‰çš„æœåï¼Œç°åœ¨å†œå¤«ä¹°äº†ä¸€å°æœºå™¨ï¼Œä½†æ˜¯è¿™å°æœºå™¨è´­ä¹°æ—¶å¿…é¡»è¦è®¾ç½®ä¸€ä¸ªå›ºå®šçš„Kï¼Œæ¯æ¬¡æ“ä½œéƒ½ä¼šä½¿Kå¤´è¿ç»­çš„ç‰›è½¬å‘ï¼Œæ±‚å‡ºè®©æ‰€æœ‰çš„ç‰›èƒ½æœå‘å‰çš„æœ€å°‘æ¬¡æ•°Må’Œå¯¹åº”çš„Kã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> æ˜¾ç„¶å¯¹åŒä¸€ä¸ªåŒºé—´ç¿»è½¬ä¸€æ¬¡å°±è¡Œäº†ï¼Œç¿»è½¬å¤šæ¬¡éƒ½æ˜¯å¤šä½™çš„ã€‚æˆ‘ä»¬éœ€è¦ä»æœ€å·¦è¾¹çš„ç‰›å¼€å§‹ç¿»è½¬ï¼Œå› ä¸ºå®ƒåªå±äºä¸€ä¸ªåŒºé—´ï¼Œå¦‚æœå®ƒæœåï¼Œé‚£å°±ä¸å¾—ä¸ç¿»è½¬ã€‚æ‰€ä»¥è¿™ä¸ªé¢˜æˆ‘ä»¬å¯ä»¥å»æšä¸¾é•¿åº¦kå»è§£å†³ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æœ´ç´ çš„æ±‚è§£ï¼Œæšä¸¾æ¯ä¸€ä¸ªkï¼Œåœ¨æšä¸¾åŒºé—´çš„èµ·ç‚¹å’Œç¿»è½¬åŒºé—´çš„kå¤´ç‰›ï¼Œé‚£è¿™æ€»çš„å¤æ‚åº¦æ—¶O(n^3)æ˜¾ç„¶æ˜¯ä¸è¡Œçš„ã€‚åŒºé—´ç¿»è½¬è¿™é‡Œæ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œå› ä¸ºå¤´ç‰›çš„æƒ…å†µæ˜¯ä¼šæ”¶åˆ°å‰k-1çš„å½±å“çš„ã€‚</p><p>s[i]:æ ‡è®°æ˜¯å¦è¢«ç¿»è½¬ï¼Œ1å°±æ˜¯è¢«ç¿»è½¬ï¼Œ0å°±æ˜¯æ²¡æœ‰è¢«ç¿»è½¬</p><p>æˆ‘ä»¬è€ƒè™‘ç¬¬iå¤´ç‰›æ—¶å¦‚æœ$$\sum_{j=i-k+1}^{i-1}s[j]$$ä¸ºå¥‡æ•°ï¼Œé‚£ç¬¬iå¤´ç‰›å°±æ˜¯è¢«ç¿»è½¬äº†ï¼Œåœ¨ç»“åˆå¤„çŠ¶æ€(1æœåï¼Œ0æœå‰)å°±å¯ä»¥çŸ¥é“è¿™é‡Œæ˜¯å¦è¦è¢«ç¿»è½¬ä½†æ˜¯æ¯ä¸€æ¬¡å»è®¡ç®—è¿™æ ·æ˜¾ç„¶ä¸è¡Œï¼Œå¹¶æ²¡æœ‰ä¼˜åŒ–ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥çŸ¥é“ç¬¬i+1å¤´ç‰›æ—¶çš„çŠ¶æ€æ˜¯å¯ä»¥ä»iå¾—æ¥çš„ã€‚</p>\sum_{j=(i+1)-k+1}^{i}s[j]=\sum_{j=i-k+1}^{i-1}s[j]+s[i]-s[i-k+1]$$æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸€ä¸ªsumå°±å¯ä»¥å»æ›´æ–°çŠ¶æ€äº†.<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 5005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 0x3f3f3f3f</span></span><br><span class="line"><span class="keyword">int</span> n,state[maxn],s[maxn];</span><br><span class="line"><span class="comment">//stateè®°å½•çŠ¶æ€ï¼Œ1ä¸ºæœåï¼Œ0ä¸ºæœå‰ ,sæ ‡è®°æ˜¯å¦è¢«ç¿»è½¬ </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pd</span><span class="params">(<span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(s,<span class="number">0</span>,<span class="keyword">sizeof</span>(s));</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>,sum=<span class="number">0</span>,i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i+k&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>((state[i]+sum)%<span class="number">2</span>!=<span class="number">0</span>)&#123;<span class="comment">//æœå </span></span><br><span class="line">res++;</span><br><span class="line">s[i]=<span class="number">1</span>; </span><br><span class="line">&#125;</span><br><span class="line">sum+=s[i];</span><br><span class="line"><span class="keyword">if</span>(i-k+<span class="number">1</span>&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">sum-=s[i-k+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(i=n-k+<span class="number">1</span>;i&lt;n;++i)&#123;<span class="comment">//æšä¸¾æœ€åä¸èƒ½è¢«ç¿»è½¬çš„é‚£ä¸€æ®µ </span></span><br><span class="line"><span class="keyword">if</span>((state[i]+sum)%<span class="number">2</span>!=<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i-k+<span class="number">1</span>&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">sum-=s[i-k+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> resm=n,resk=<span class="number">1</span>,i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;++i)&#123;<span class="comment">//æšä¸¾kçš„é•¿åº¦ </span></span><br><span class="line"><span class="keyword">int</span> tp=pd(i);</span><br><span class="line"><span class="keyword">if</span>(tp&gt;=<span class="number">0</span>&amp;&amp;tp&lt;resm)&#123;</span><br><span class="line">resm=tp;</span><br><span class="line">resk=i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>,resk,resm);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">char</span> tp;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">getchar();</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;tp);</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="string">&#x27;B&#x27;</span>) </span><br><span class="line">state[i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(tp==<span class="string">&#x27;F&#x27;</span>) </span><br><span class="line">state[i]=<span class="number">0</span>;</span><br><span class="line">getchar();</span><br><span class="line">&#125;</span><br><span class="line">solve();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> POJ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¨¡æ‹Ÿ </tag>
            
            <tag> å°ºå– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1080 å›½ç‹æ¸¸æˆ (è´ªå¿ƒ)</title>
      <link href="2018/12/23/(Luogu)%20P1080%20%E5%9B%BD%E7%8E%8B%E6%B8%B8%E6%88%8F/"/>
      <url>2018/12/23/(Luogu)%20P1080%20%E5%9B%BD%E7%8E%8B%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1080">ä¼ é€é—¨</a></p><p>***è§£é¢˜æ€è·¯ï¼š***ä¸€å¼€å§‹å•çº¯çš„ç›´æ¥æŒ‰ç…§å·¦æ‰‹å‡åºæˆ–è€…å³æ‰‹é™åºï¼Œè¿™ç§æƒ³æ³•å¿…ç„¶æ˜¯ä¸å‡†ç¡®çš„ï¼Œä½†æ˜¯èƒ½å¾—30åˆ†ï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä½•åˆ¤æ–­å“ªäº›å¤§è‡£åº”è¯¥è¢«æ’åœ¨å‰é¢å‘¢ï¼Œç°åœ¨æˆ‘ä»¬ä¸å¦‚ç›´æ¥ä»æ‰€æœ‰çš„å¤§è‡£ç§å…ˆé€‰å‡ºä¸¤ä½æ¥åˆ¤æ–­ã€‚</p><table><thead><tr><th>å±æ€§</th><th>å·¦æ‰‹</th><th>å³æ‰‹</th></tr></thead><tbody><tr><td>çš‡ä¸Š</td><td>X1</td><td>Y1</td></tr><tr><td>å¤§è‡£ç”²</td><td>X2</td><td>Y2</td></tr><tr><td>å¤§è‡£ä¹™</td><td>X3</td><td>Y3</td></tr></tbody></table><p>å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£ç­”æ¡ˆå°±æ˜¯æœ‰ä¸¤ç§æ’åºæ–¹å¼max(X1/Y2,X1<em>X2/Y3),max(X1/Y3,X1</em>X3/Y2) å–ä¸ªæœ€å°å€¼å³ä¸ºç­”æ¡ˆã€‚</p><p>k1=X1/Y2,k2=X1*X2/Y3</p><p>k3=X1/Y3,k4=X1<em>X3/Y2, é¦–å…ˆå¯ä»¥å¾ˆå®¹æ˜“çš„åˆ¤æ–­å‡º  k4&gt;k1, k2&gt;k3çš„ï¼›ç°åœ¨å‡è®¾ç¬¬ä¸€ç§æ’åºæ–¹å¼æ›´å¥½ï¼Œå³æœ€å¤§å€¼æœ€å°ï¼Œé‚£å°±åªéœ€è¦k2&lt;k4å°±è¡Œäº†ï¼Œé‚£ç¬¬ä¸€ç§æ’åºçš„ä¸¤ä¸ªéƒ½æ¯”ç¬¬äºŒç§å°äº†ã€‚åŒ–ç®€ä¸€ä¸‹å°±æ˜¯X2</em>Y2&lt;X3*Y3ï¼›</p><p>ä½†æ˜¯æœ‰åºå·¦å³ç›¸ä¹˜ä¹˜å‡ºæ¥çš„æ•°éå¸¸å¤§ï¼Œç”¨unsigned long long ä¹Ÿåªæœ‰60åˆ†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">ull a,b,c;</span><br><span class="line">&#125; t[<span class="number">1010</span>];</span><br><span class="line">ull s,ans;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a.c&lt;b.c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;t[i].a&gt;&gt;t[i].b,t[i].c=t[i].a*t[i].b;</span><br><span class="line">&#125;</span><br><span class="line">sort(t+<span class="number">1</span>,t+<span class="number">1</span>+n,cmp);</span><br><span class="line">s=t[<span class="number">0</span>].a;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line">ans=max(ans,s/t[i].b),s*=t[i].a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é«˜ç²¾åº¦ä¸æƒ³å†™äº†ï¼Œå’•å’•å’•ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1005</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Nodes</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> l, r;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Nodes &amp;rhs) <span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> l * r &lt; rhs.l * rhs.r;</span><br><span class="line">&#125;</span><br><span class="line">&#125; s[maxn];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> L, R;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">INT</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">10005</span>], len;</span><br><span class="line">INT() &#123;</span><br><span class="line"><span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span> a);</span><br><span class="line">len = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x == <span class="number">0</span>) len = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">while</span>(x) &#123;</span><br><span class="line">a[len++] = x % <span class="number">10</span>;</span><br><span class="line">x /= <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> INT &amp;rhs) <span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(len != rhs.len) <span class="keyword">return</span> len &lt; rhs.len;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line"><span class="keyword">if</span>(a[i] &lt; rhs.a[i]) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(a[i] &gt; rhs.a[i]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">INT <span class="keyword">operator</span> * (<span class="keyword">const</span> <span class="keyword">int</span> &amp;rhs) <span class="keyword">const</span> &#123;</span><br><span class="line">INT ret;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) ret.a[i] = a[i] * rhs;</span><br><span class="line"><span class="keyword">int</span> llen;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len || ret.a[i]; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(ret.a[i] / <span class="number">10</span>) &#123;</span><br><span class="line">ret.a[i + <span class="number">1</span>] += ret.a[i] / <span class="number">10</span>;</span><br><span class="line">ret.a[i] %= <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">llen = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(ret.a[llen] == <span class="number">0</span>) ret.len = llen;</span><br><span class="line"><span class="keyword">else</span> ret.len = llen + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line">INT <span class="keyword">operator</span> / (<span class="keyword">const</span> <span class="keyword">int</span> &amp;x) <span class="keyword">const</span> &#123;</span><br><span class="line">INT ret;</span><br><span class="line">ret.len = len;</span><br><span class="line"><span class="keyword">int</span> rest = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">rest = rest * <span class="number">10</span> + a[i];</span><br><span class="line">ret.a[i] = rest / x;</span><br><span class="line">rest %= x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(ret.len &gt; <span class="number">1</span> &amp;&amp; ret.a[ret.len - <span class="number">1</span>] == <span class="number">0</span>) ret.len--;</span><br><span class="line"><span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, a[i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;L, &amp;R);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;s[i].l, &amp;s[i].r);</span><br><span class="line"><span class="built_in">std</span>::sort(s + <span class="number">1</span>, s + n + <span class="number">1</span>);</span><br><span class="line">INT temp;</span><br><span class="line">temp.init(L);</span><br><span class="line">INT ans;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">ans = <span class="built_in">std</span>::max(ans, temp / s[i].r);</span><br><span class="line">temp = temp * s[i].l;</span><br><span class="line">&#125;</span><br><span class="line">ans.print();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1582 å€’æ°´ (ç®€å•æ•°å­¦)</title>
      <link href="2018/12/23/(Luogu)%20P1582%20%E5%80%92%E6%B0%B4/"/>
      <url>2018/12/23/(Luogu)%20P1582%20%E5%80%92%E6%B0%B4/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1582">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®æè¿°ï¼š</strong></em> ä¸€å¤©ï¼ŒCCä¹°äº†Nä¸ªå®¹é‡å¯ä»¥è®¤ä¸ºæ˜¯æ— é™å¤§çš„ç“¶å­ï¼Œå¼€å§‹æ—¶æ¯ä¸ªç“¶å­é‡Œæœ‰1å‡æ°´ã€‚æ¥ç€~~CCå‘ç°ç“¶å­å®åœ¨å¤ªå¤šäº†ï¼Œäºæ˜¯ä»–å†³å®šä¿ç•™ä¸è¶…è¿‡Kä¸ªç“¶å­ã€‚æ¯æ¬¡ä»–é€‰æ‹©ä¸¤ä¸ªå½“å‰å«æ°´é‡ç›¸åŒçš„ç“¶å­ï¼ŒæŠŠä¸€ä¸ªç“¶å­çš„æ°´å…¨éƒ¨å€’è¿›å¦ä¸€ä¸ªé‡Œï¼Œç„¶åæŠŠç©ºç“¶ä¸¢å¼ƒã€‚(ä¸èƒ½ä¸¢å¼ƒæœ‰æ°´çš„ç“¶å­)æ˜¾ç„¶åœ¨æŸäº›æƒ…å†µä¸‹CCæ— æ³•è¾¾åˆ°ç›®æ ‡ï¼Œæ¯”å¦‚N=3,K=1ã€‚æ­¤æ—¶CCä¼šé‡æ–°ä¹°ä¸€äº›æ–°çš„ç“¶å­(æ–°ç“¶å­å®¹é‡æ— é™ï¼Œå¼€å§‹æ—¶æœ‰1å‡æ°´)ï¼Œä»¥åˆ°è¾¾ç›®æ ‡ã€‚ç°åœ¨CCæƒ³çŸ¥é“ï¼Œæœ€å°‘éœ€è¦ä¹°å¤šå°‘æ–°ç“¶å­æ‰èƒ½è¾¾åˆ°ç›®æ ‡å‘¢ï¼Ÿ</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> æˆ‘ä»¬å¯ä»¥ä»é¢˜ä¸­å¾—åˆ°ï¼Œå®ƒåˆå¹¶çš„æ–¹å¼æ˜¯å–ä¸¤ä¸ªæ°´é‡ç›¸åŒçš„åˆå¹¶ï¼Œæ‰€ä»¥æ˜“çŸ¥æœ€åçš„æ‰€å‰©ç“¶å­é‡Œçš„æ°´åº”è¯¥éƒ½æ˜¯2çš„æ¬¡æ–¹ï¼Œè€Œä¸”ç“¶å­ä¸ªæ•°å°äºç­‰äºkã€‚ä»¥13ä¸¾ä¾‹å­ï¼Œä»–æ˜¯ç”±2çš„å“ªäº›æ¬¡æ–¹ç»„å­˜å‘¢ï¼Œç”¨äºŒè¿›åˆ¶å°±å¯ä»¥å¾ˆå®¹æ˜“çœ‹å‡ºæ¥ï¼Œ1101ï¼Œæ˜¯ç”±2<sup>3,2</sup>2,2<sup>0ç»„æˆï¼Œæ•°é‡ä¸º3ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŠ ä¸ª2</sup>0,å°±æ˜¯ä½¿å¾—1101å˜æˆ10000ï¼ŒäºŒè¿›åˆ¶æœ‰å‡ ä¸ª1ï¼Œå°±ä»£è¡¨éœ€è¦å‡ ä¸ªç“¶å­ï¼Œçœ‹å‡ºè¿™ä¸€ç‚¹ä¹‹åï¼Œå°±éœ€è¦ç”¨åˆ°lowbitäº†ï¼ˆå°±æ˜¯æ ‘çŠ¶æ•°ç»„é‡Œé‚£ä¸ªï¼Œå–ä¸€ä¸ªæ•°æœ€å°çš„é‚£ä¸ª1ï¼‰ï¼Œæˆ‘ä»¬ä¸åœçš„åœ¨åŸnä¸ŠåŠ lowbit(n)ï¼Œç›´åˆ°nä¸­1çš„ä¸ªæ•°&lt;=kã€‚</p><p>æ³¨ï¼šä¸ºä»€ä¹ˆè¦ä»åå¾€å‰åŠ å‘¢ï¼Ÿ å¦‚11101ï¼Œç°åœ¨k=2ï¼Œä½ å¯ä»¥é€‰æ‹©åŠ 2^2, å˜æˆ100001ï¼Œä½†è¿™æ ·æ˜¯æ²¡æœ‰åŠ 2<sup>0,2</sup>1æ›´ä¼˜çš„ï¼Œå› ä¸ºæ±‚çš„æ˜¯æœ€å°‘éœ€è¦åŠ å‡ ä¸ªç“¶å­ï¼Œæ‰€æœ‰å› è¯¥ä»åå¾€å‰è€ƒè™‘ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,k,ans=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span> tp)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(tp)&#123;</span><br><span class="line">sum++;</span><br><span class="line">tp&amp;=(tp<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;k;</span><br><span class="line"><span class="keyword">while</span>(count(n)&gt;k)&#123;</span><br><span class="line">ans+=n&amp;-n,n+=n&amp;-n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€å¼€å§‹æ±‚äºŒè¿›åˆ¶1çš„ä¸ªæ•°æ˜¯ç›´æ¥æš´åŠ›çš„ï¼Œå¾ˆé—æ†¾Täº†ä¸€ä¸ªç‚¹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span> tp)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(tp)&#123;</span><br><span class="line"><span class="keyword">if</span>(tp&amp;<span class="number">1</span>)sum++;</span><br><span class="line">tp&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ACä»£ç çš„è®¡æ•°æ–¹æ³•å¯ä»¥å‚è€ƒ <a href="https://blog.csdn.net/u013243347/article/details/52220551">æˆ³æˆ‘</a></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1967 è´§è½¦è¿è¾“ï¼ˆkruscal + lcaï¼‰</title>
      <link href="2018/12/20/(Luogu)%20P1967%20%E8%B4%A7%E8%BD%A6%E8%BF%90%E8%BE%93/"/>
      <url>2018/12/20/(Luogu)%20P1967%20%E8%B4%A7%E8%BD%A6%E8%BF%90%E8%BE%93/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1967">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> åŸå¸‚ä¸åŸå¸‚ä¹‹é—´æœ‰é“è·¯ç›¸è¿ï¼Œå¹¶ä¸”é“è·¯æœ‰ç€é™é‡ï¼Œqæ¬¡æŸ¥è¯¢é—®ï¼Œä»xåˆ°yè½¦çš„æœ€å¤§è½½é‡é‡ï¼Œä¸èƒ½åˆ°è¾¾å°±è¾“å‡º-1.</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è¿™é“é¢˜æœ‰å¾ˆå¤šç§è§£æ³•ï¼Œä½†è¿™é“é¢˜æ”¾åœ¨äº†å€å¢é‡Œï¼Œè‡ªç„¶è€Œç„¶æƒ³ç€ç”¨å€å¢çš„æ–¹æ³•å»åšï¼Œå¯¹äºæ‰åˆæ­¥äº†è§£è¿™ä¸ªç®—æ³•çš„æˆ‘æ¥è¯´ï¼Œè¿˜æ˜¯æœ‰ç‚¹å›°éš¾çš„ã€‚å…¶å®å¦‚æœåŸå¸‚ä¸åŸå¸‚ä¹‹é—´æœ‰å¤šæ¡è·¯å¾„å¯ä»¥æŠµè¾¾ï¼Œé‚£åªè¦ä¿ç•™é‚£æ¡è½½é‡æœ€å¤§çš„é‚£æ¡è·¯å¾„å°±è¡Œäº†ã€‚æ‰€ä»¥æˆ‘ä»¬è‡ªç„¶è€Œç„¶å¯ä»¥åœ¨å®ƒç»™çš„å›¾ä¸Šè·‘kruscalï¼Œè·‘å‡ºä¸€é¢—æœ€å¤§ç”Ÿæˆæ ‘ã€‚ç„¶ååœ¨è¿™é¢—æ ‘ä¸Šæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨lcaæ–¹æ³•äº†ï¼Œè¿™æ˜¯ç”¨æ¥å¯»æ‰¾æœ€è¿‘å…¬å…±ç¥–å…ˆçš„ï¼Œæ”¾åˆ°è¿™é‡Œæ°æ°å¥½ã€‚å¦‚æœæœ‰æœ€è¿‘çš„å…¬å…±ç¥–å…ˆé‚£è¿™ä¸¤ä¸ªåŸå¸‚å°±æ˜¯ç›¸é€šçš„ï¼Œåä¹‹æ— æ³•åˆ°è¾¾ã€‚ä½†è¦æ±‚æœ€å¤§è½½é‡é‡ï¼Œé‚£å°±è¿˜éœ€è¦ä¸€ä¸ªæ•°ç»„w[maxn][21],w[i][j],ä»£è¡¨ièŠ‚ç‚¹åˆ°içš„ç¬¬2^jä¸ªçˆ¶äº²èŠ‚ç‚¹ä¹‹é—´çš„æœ€å°è½½é‡é‡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> fa[maxn],lg[maxn],dep[maxn],n,m;</span><br><span class="line"><span class="keyword">int</span> we[maxn][<span class="number">21</span>],f[maxn][<span class="number">21</span>];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> s;</span><br><span class="line"><span class="keyword">int</span> e;</span><br><span class="line"><span class="keyword">int</span> w;</span><br><span class="line">&#125; ee[<span class="number">50005</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to;</span><br><span class="line"><span class="keyword">int</span> cost;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; G[<span class="number">10005</span>];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(edge x,edge y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> x.w&gt;y.w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(fa[x]==x) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">return</span> fa[x] = find(fa[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmb</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">x=find(x),y=find(y);</span><br><span class="line"><span class="keyword">if</span>(x==y) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">fa[x] = y;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">kruscal</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n+<span class="number">1</span>; ++i)fa[i]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m; ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> s=ee[i].s,e=ee[i].e,w=ee[i].w;</span><br><span class="line"><span class="keyword">if</span>(cmb(s,e)) &#123;</span><br><span class="line">G[s].push_back(node &#123;e,w&#125;);</span><br><span class="line">G[e].push_back(node &#123;s,w&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now,<span class="keyword">int</span> last)</span> </span>&#123;</span><br><span class="line">dep[now]=dep[last]+<span class="number">1</span>;</span><br><span class="line">vis[now]=<span class="literal">true</span>;</span><br><span class="line">f[now][<span class="number">0</span>]=last;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; (<span class="number">1</span>&lt;&lt;i)&lt;=dep[now]; ++i) &#123;</span><br><span class="line">we[now][i]=min(we[now][i<span class="number">-1</span>],we[f[now][i<span class="number">-1</span>]][i<span class="number">-1</span>]);</span><br><span class="line">f[now][i]=f[f[now][i<span class="number">-1</span>]][i<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)G[now].size(); ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(G[now][i].to!=last) &#123;</span><br><span class="line">we[G[now][i].to][<span class="number">0</span>]=G[now][i].cost;</span><br><span class="line">dfs(G[now][i].to,now);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(find(x)!=find(y)) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dep[x]&gt;dep[y])swap(x,y);</span><br><span class="line"><span class="keyword">int</span> ans=inf;</span><br><span class="line"><span class="keyword">while</span>(dep[x]!=dep[y]) &#123;</span><br><span class="line"><span class="keyword">int</span> len=dep[y]-dep[x];</span><br><span class="line">ans=min(ans,we[y][lg[len]<span class="number">-1</span>]);</span><br><span class="line">y=f[y][lg[len]<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(x==y)<span class="keyword">return</span> ans;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=lg[dep[x]]<span class="number">-1</span>; i&gt;=<span class="number">0</span>; --i) &#123;</span><br><span class="line"><span class="keyword">if</span>(f[x][i]!=f[y][i]) &#123;</span><br><span class="line">ans=min(ans,min(we[x][i],we[y][i]));</span><br><span class="line">x=f[x][i];</span><br><span class="line">y=f[y][i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ans=min(ans,min(we[x][<span class="number">0</span>],we[y][<span class="number">0</span>]));</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">int</span> x,y,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;x,&amp;y,&amp;w);</span><br><span class="line">ee[i]=edge &#123;x,y,w&#125;;</span><br><span class="line">&#125;</span><br><span class="line">sort(ee,ee+m,cmp);</span><br><span class="line">kruscal();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">lg[i]=lg[i<span class="number">-1</span>]+(<span class="number">1</span>&lt;&lt;lg[i<span class="number">-1</span>]==i);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[i]) &#123;</span><br><span class="line">dfs(i,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> t;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;t);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=t; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,lca(x,y));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lca </tag>
            
            <tag> æœ€çŸ­è·¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(CodeForces)Round408(Div.2) A,B,C,D</title>
      <link href="2018/12/10/(CodeForces)%20Round%20408(Div.2)%20A,B,C,D/"/>
      <url>2018/12/10/(CodeForces)%20Round%20408(Div.2)%20A,B,C,D/</url>
      
        <content type="html"><![CDATA[<p><a href="http://codeforces.com/contest/796">ä¼ é€é—¨</a></p><h1 id="a-buying-a-house"><a class="markdownIt-Anchor" href="#a-buying-a-house"></a> A. Buying A House</h1><p>æš´åŠ›ä¸€ä¸‹å°±è¡Œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf=<span class="number">-0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> a[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m,k;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;k;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> res=INF;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=m+<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[i]!=<span class="number">0</span>&amp;&amp;a[i]&lt;=k)&#123;</span><br><span class="line">res=min(res,(i-m)*<span class="number">10</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=m<span class="number">-1</span>;i&gt;=<span class="number">1</span>;--i)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[i]!=<span class="number">0</span>&amp;&amp;a[i]&lt;=k)&#123;</span><br><span class="line">res=min(res,(m-i)*<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="b-find-the-bone"><a class="markdownIt-Anchor" href="#b-find-the-bone"></a> B. Find The Bone</h1><p>æ¨¡æ‹Ÿé¢˜ï¼Œæœ¬é¢˜ç”¨cinæœ‰TLEçš„é£é™©ï¼Œè·‘äº†1996msï¼Œè€Œç”¨scanfåªè·‘äº†300ms+,æ€•äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf=<span class="number">-0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">bool</span> h[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m,k,xx;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;m,&amp;k);</span><br><span class="line"><span class="built_in">memset</span>(h,<span class="literal">false</span>,<span class="keyword">sizeof</span>(h));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;xx);</span><br><span class="line">h[xx]=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">bool</span> ff=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(h[<span class="number">1</span>])ff=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line"><span class="keyword">if</span>(ff)<span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>(x!=res&amp;&amp;y==res) &#123;</span><br><span class="line">res=x;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(y!=res&amp;&amp;x==res) &#123;</span><br><span class="line">res=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(h[res]) &#123;</span><br><span class="line">ff=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="c-bank-hacking"><a class="markdownIt-Anchor" href="#c-bank-hacking"></a> C. Bank Hacking</h1><p><a href="http://codeforces.com/problemset/problem/796/C">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ä¸€ä¸ªè”é€šç½‘ç»œï¼Œæ¯ä¸ªç‚¹éƒ½æœ‰æƒå€¼ï¼Œç ´åä¸€ä¸ªç‚¹ï¼Œéœ€è¦æœ‰&gt;=æ”¹ç‚¹æƒå€¼çš„å¼ºåº¦ï¼Œç ´åä¸€ä¸ªç‚¹ä¹‹åï¼Œå®ƒä¼šç»™ä»–èŒƒå›´ä¸º2çš„ç‚¹éƒ½+1ã€‚é—®æœ€å°éœ€è¦çš„å¼ºåº¦å¤§å°ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> è¿™é“é¢˜æˆ‘ä»¬å¯ä»¥è´ªå¿ƒçš„æ¥æƒ³ï¼Œå¦‚æœæœ€å¤§çš„ç‚¹maxå”¯ä¸€ï¼Œæˆ‘ä»¬è‚¯å®šè¦å…ˆç ´åæœ€å¤§çš„é‚£ä¸ªç‚¹maxï¼Œå¦‚æœå…ˆå»ç ´åæ¯”è¾ƒå°çš„ç‚¹ï¼Œæœ€åç ´åæœ€å¤§ç‚¹çš„å¼ºåº¦ä¼šå˜å¤§ï¼Œæˆ‘ä»¬éœ€è¦çš„å¼ºåº¦åè€Œä¼šå˜å¾—æ›´é«˜ã€‚ä½†æ˜¯å¦‚æœæœ€å¤§çš„ç‚¹ä¸å”¯ä¸€ï¼Œé‚£å°±å†éœ€è¦è€ƒè™‘ä¸€ä¸‹äº†ã€‚</p><p>å…·ä½“æƒ…å½¢å¦‚ä¸‹ï¼š</p><p>ä¸€.æœ€å¤§çš„ç‚¹å”¯ä¸€ä¸ºmaxï¼›</p><p>1.æ¬¡å°çš„ç‚¹ä¸ºmax-1ï¼Œä¸”å…¨éƒ¨å‡ºç°åœ¨ï¼Œmaxçš„èŒƒå›´1å†…ï¼Œåˆ™éœ€è¦çš„å¼ºåº¦å¤§å°ä¸ºmax;</p><p>2.ä¸æ»¡è¶³1ï¼Œé‚£ä¹ˆéœ€è¦çš„å¼ºåº¦å¤§å°ä¸ºmax+1;</p><p>äºŒ.æœ€å¤§çš„ç‚¹ä¸å”¯ä¸€ä¸ºmax;</p><p>1.å¦‚æœæœ€å¤§çš„ç‚¹éƒ½å‡ºç°åœ¨ä¸€ä¸ªè¾ƒå°çš„ç‚¹èŒƒå›´1å†…ï¼Œæˆ–è€…å…¶ä»–å…¨éƒ¨æœ€å¤§çš„ç‚¹éƒ½å‡ºç°åœ¨ä¸€ä¸ªæœ€å¤§çš„ç‚¹èŒƒå›´1å†…ï¼Œåˆ™éœ€è¦çš„å¼ºåº¦ä¸º max+1ï¼›</p><p>2.ä¸æ»¡è¶³1ï¼Œé‚£ä¹ˆéœ€è¦çš„å¼ºåº¦å¤§å°ä¸ºmax+2ï¼›</p><p>å¯ä»¥è‡ªå·±å¸¦ç€ç”»å›¾å»ç†è§£ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">3e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,tmp;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ee[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> id;</span><br><span class="line"><span class="keyword">int</span> w;</span><br><span class="line">&#125; a[maxn];</span><br><span class="line"><span class="keyword">int</span> lo[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line"><span class="keyword">int</span> num1=<span class="number">0</span>,num2=<span class="number">0</span>,maxnum=<span class="number">-2e9</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;tmp);</span><br><span class="line">a[i]=node &#123;i,tmp&#125;;</span><br><span class="line">maxnum=max(maxnum,tmp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n<span class="number">-1</span>; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">ee[x].push_back(y);</span><br><span class="line">ee[y].push_back(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(a[i].w==maxnum)lo[num1++]=a[i].id;</span><br><span class="line"><span class="keyword">if</span>(a[i].w==maxnum<span class="number">-1</span>)  num2++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(num1==<span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">int</span> tmp=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)ee[lo[<span class="number">0</span>]].size(); ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> np=ee[lo[<span class="number">0</span>]][i];</span><br><span class="line"><span class="keyword">if</span>(a[np].w==maxnum<span class="number">-1</span>)tmp++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(tmp==num2) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;maxnum&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;maxnum+<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">bool</span> flag=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">int</span> tmp=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(a[i].w==maxnum)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;(<span class="keyword">int</span>)ee[i].size();++j)&#123;</span><br><span class="line"><span class="keyword">int</span> np=ee[i][j];</span><br><span class="line"><span class="keyword">if</span>(a[np].w==maxnum) tmp++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(tmp==num1<span class="number">-1</span>)&#123;</span><br><span class="line">flag=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;(<span class="keyword">int</span>)ee[i].size();++j)&#123;</span><br><span class="line"><span class="keyword">int</span> np=ee[i][j];</span><br><span class="line"><span class="keyword">if</span>(a[np].w==maxnum) tmp++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(tmp==num1)&#123;</span><br><span class="line">flag=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span>(flag) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;maxnum+<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;maxnum+<span class="number">2</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="dpolice-stations"><a class="markdownIt-Anchor" href="#dpolice-stations"></a> D.Police Stations</h1><p><a href="http://codeforces.com/contest/796/problem/D">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ä¸€ä¸ªè¿é€šå›¾ï¼ˆæ ‘å‹ï¼‰,æ¯ä¸ªç‚¹éƒ½æ˜¯ä¸€ä¸ªåŸå¸‚ï¼Œæœ‰äº›åŸå¸‚æ˜¯æœ‰è­¦å¯Ÿå±€çš„ï¼Œä»»ä½•åŸå¸‚éƒ½å¯ä»¥åˆ°è¾¾dè·ç¦»çš„è­¦å¯Ÿå±€ï¼Œå³æ¯ä¸ªè­¦å¯Ÿå±€éƒ½æœ‰ä¸€ä¸ªæœ‰æ•ˆèŒƒå›´d.é—®ä½ æœ€å¤šå¯ä»¥åˆ é™¤å¤šå°‘æ¡è·¯ï¼Œä½¿å¾—æ¯ä¸ªåŸå¸‚ä¾ç„¶å¯ä»¥åˆ°è¾¾è­¦å¯Ÿå±€ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> æˆ‘ä»¬å¯ä»¥è¿™æ ·æƒ³ï¼Œæ—¢ç„¶ç»™äº†ä½ kä¸ªè­¦å¯Ÿå±€ï¼Œé‚£å½“ç„¶æ˜¯æ¯ä¸ªéƒ½è¦ç”¨ä¸Šæ‰æ˜¯æœ€ä¼˜çš„ï¼Œæ¯ä¸ªåŸå¸‚éƒ½åº”è¯¥ä¼˜å…ˆé€‰æ‹©å’Œå®ƒæœ€è¿‘çš„è­¦å¯Ÿå±€ï¼Œå¦‚æœå®ƒé€‰æ‹©è¿œçš„ï¼Œåªä¼šå¤šèµ°ä¸€äº›æ²¡æœ‰å¿…è¦çš„è·¯å¾„ã€‚æ‰€ä»¥å¯ä»¥ä»æ¯ä¸ªè­¦å¯Ÿå±€åŒæ—¶å¼€å§‹å®½æœï¼ŒåŒæ—¶æ ‡è®°èµ°è¿‡çš„è¾¹ï¼Œå¦‚æœå›¾ä¸Šæ‰€æœ‰çš„åŸå¸‚éƒ½è¢«æ ‡è®°ï¼Œé‚£å°±å®½æœç»“æŸã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">3e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,k,d,cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="keyword">bool</span> edgevis[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; added;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to;</span><br><span class="line"><span class="keyword">int</span> id;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; ee[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> p;</span><br><span class="line"><span class="keyword">int</span> step;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">queue</span>&lt;node&gt; q;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">node st=q.front();</span><br><span class="line"><span class="keyword">int</span> np=st.p,nstep=st.step;</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">if</span>(nstep&gt;d)<span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)ee[np].size();++i)&#123;</span><br><span class="line">edge tt=ee[np][i];</span><br><span class="line"><span class="keyword">int</span> nto=tt.to,nid=tt.id;</span><br><span class="line"><span class="keyword">if</span>(!vis[nto])&#123;</span><br><span class="line">vis[nto]=<span class="literal">true</span>;</span><br><span class="line">edgevis[nid]=<span class="literal">true</span>;</span><br><span class="line">++cnt;</span><br><span class="line">q.push(node&#123;nto,nstep+<span class="number">1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;n,&amp;k,&amp;d);</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line"><span class="built_in">memset</span>(edgevis,<span class="literal">false</span>,<span class="keyword">sizeof</span>(edgevis));</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> tmp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;tmp);</span><br><span class="line">q.push(node&#123;tmp,<span class="number">0</span>&#125;);</span><br><span class="line">vis[tmp]=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n<span class="number">-1</span>; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line">ee[x].push_back(edge &#123;y,i&#125;);</span><br><span class="line">ee[y].push_back(edge &#123;x,i&#125;);</span><br><span class="line">&#125;</span><br><span class="line">bfs();</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;n<span class="number">-1</span>-cnt&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n<span class="number">-1</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(edgevis[i]==<span class="literal">false</span>) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>(POJ) 1050 To the Max</title>
      <link href="2018/12/10/(POJ)%201050%20To%20the%20Max/"/>
      <url>2018/12/10/(POJ)%201050%20To%20the%20Max/</url>
      
        <content type="html"><![CDATA[<p><a href="http://poj.org/problem?id=1050">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ç»™ä½ ä¸€ä¸ªçŸ©é˜µï¼Œæ±‚é‡Œé¢çš„æœ€å¤§å­çŸ©é˜µ(æ±‚å’Œæœ€å¤§)ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> ç¬¬ä¸€æƒ³æ³•å½“ç„¶æ˜¯æš´åŠ›æšä¸¾äº†ï¼Œå½“ç„¶ç«‹å³passï¼Œå¤æ‚åº¦è¿‡é«˜ï¼Œé‚£å†ç”¨å‰ç¼€å’Œå¤„ç†ä¸€ä¸‹çš„ï¼Œè¿™æ ·å¤æ‚è¿˜æ˜¯è¿‡é«˜çš„ã€‚ç›´æ¥æšä¸¾æ˜¯è‚¯å®šä¸ç°å®çš„ã€‚é‚£æˆ‘ä»¬ç›´æ¥æšä¸¾ä¸Šç•Œå‘¢ï¼Œç„¶åå°†å®ƒä¸‹é¢çš„ä¸€å±‚ä¸€å±‚çš„åŠ ä¸Šå»ï¼Œæ¯åŠ ä¸€æ¬¡éƒ½ç®—ä¸€æ¬¡æœ€å¤§å­åºåˆ—å’Œã€‚æ¯”å¦‚æšä¸¾ç¬¬iå±‚ä½œä¸ºä¸Šç•Œï¼Œæ±‚å‡ºæ­¤æ—¶çš„æœ€å¤§å­åºåˆ—å’Œå°±æ˜¯ä»¥iä¸ºä¸Šç•Œï¼Œå®½ä¸º1çš„æœ€å¤§å­çŸ©é˜µï¼›åœ¨å°†i+1å±‚çš„æ•°ä¾æ­¤åŠ ä¸Šç¬¬iå±‚ï¼Œå†æ±‚ä¸€æ¬¡ï¼Œæ­¤æ—¶æ±‚å‡ºçš„å°±æ˜¯ä»¥iä¸ºä¸Šç•Œï¼Œå®½ä¸º2çš„æœ€å¤§å­çŸ©é˜µã€‚</p><p>é‚£æ ·ä¾‹ä¸¾ä¸ªæ —å­ï¼š</p><p>0 -2 -7 0<br />9 2 -6 2<br />-4 1 -4 1<br />-1 8 0 -2     æšä¸¾ç¬¬ä¸€å±‚ä¸ºä¸Šç•Œ</p><p>tmpæ•°ç»„                         æœ€é•¿å­åºåˆ—å’Œ</p><ol><li><p>0 -2 -7 0                           0</p></li><li><p>9 0 -13 2 (ç¬¬äºŒå±‚åŠ ä¸Šç¬¬ä¸€å±‚)       9</p></li><li><p>5 1 -17 3 (ç»§ç»­ç´¯åŠ )               6</p></li><li><p>-4 9 -17 -1(ç»§ç»­ç´¯åŠ )               9       æ‰€ä»¥ä»¥ç¬¬ä¸€å±‚ä¸ºä¸Šç•Œçš„æœ€å¤§å­çŸ©é˜µå’Œä¸º9</p></li></ol><p>ä¾‹ï¼šç¬¬ä¸‰æ­¥é€‰å‡ºçš„çŸ©é˜µå°±æ˜¯</p><p>0 -2</p><p>9 2</p><p>-4 1</p><p>è¿™æ ·æšä¸¾çš„å¤æ‚åº¦å°±æ˜¯O(n^3) (æšä¸¾ä¸Šç•Œnï¼Œæšä¸¾å®½nï¼Œæ±‚æœ€é•¿å­åºåˆ—å’Œn)</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> m[maxn][maxn],ttres;</span><br><span class="line"><span class="keyword">int</span> tmp[maxn],n,ans=<span class="number">-1</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;m[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">memset</span>(tmp,<span class="number">0</span>,<span class="keyword">sizeof</span>(tmp));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=n;++j)&#123;</span><br><span class="line">ttres=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;++k)&#123;</span><br><span class="line">tmp[k]+=m[j][k];</span><br><span class="line">ttres+=tmp[k];</span><br><span class="line">ans=max(ans,ttres);</span><br><span class="line"><span class="keyword">if</span>(ttres&lt;<span class="number">0</span>)ttres=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> POJ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(POJ) 1159 Palindrome</title>
      <link href="2018/12/10/(POJ)%201159%20Palindrome/"/>
      <url>2018/12/10/(POJ)%201159%20Palindrome/</url>
      
        <content type="html"><![CDATA[<p><a href="http://poj.org/problem?id=1159">ä¼ é€é—¨</a></p><p><em><strong>é¢˜ç›®å¤§æ„ï¼š</strong></em> ç»™ä½ ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œé—®æœ€å°‘æ·»åŠ å‡ ä¸ªå­—ç¬¦å¯ä»¥ä½¿è¯¥å­—ç¬¦ä¸²å˜æˆå›æ–‡ä¸²ã€‚</p><p><em><strong>è§£é¢˜æ€è·¯ï¼š</strong></em> å…ˆæ±‚å‡ºè¯¥å­—ç¬¦ä¸²çš„æœ€é•¿å›æ–‡å­ä¸²ã€‚ç„¶åæ€»é•¿åº¦å‡å»æœ€é•¿å›æ–‡å­ä¸²çš„é•¿åº¦å°±è¡Œäº†ã€‚å·²ç»å½¢æˆå›æ–‡çš„æˆ‘ä»¬æ²¡æœ‰å¿…è¦å¤šæ­¤ä¸€ä¸¾å»æ·»åŠ å­—ç¬¦äº†ï¼Œè€Œè¿˜å•ç€çš„ï¼Œæˆ‘ä»¬åœ¨ç›¸å¯¹çš„ä½ç½®åœ¨ç»™ä»–åŠ ä¸€ä¸ªå°±è¡Œäº†ã€‚</p><p>ä½†æ˜¯ç›´æ¥åŒºé—´dpæ±‚æœ€é•¿å›æ–‡å­—ä¸²ï¼Œå¼€äºŒç»´æ•°ç»„ä¼šMLEï¼Œè€Œåˆä¸å¤ªå¥½æ»šåŠ¨ï¼ˆä¸çŸ¥é“å¯ä¸å¯ä»¥æ»šåŠ¨ï¼‰ï¼Œä¸è¿‡å¯ä»¥ç›´æ¥å¼€short è½è¿‡ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5005</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">short</span> dp[<span class="number">2</span>][maxn];</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;s;</span><br><span class="line">s.insert(s.begin(),<span class="string">&#x27; &#x27;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)dp[i][i]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> len=<span class="number">2</span>;len&lt;=n;++len)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+len<span class="number">-1</span>&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">int</span> j=i+len<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">if</span>(s[i]==s[j])dp[i][j]=dp[i+<span class="number">1</span>][j<span class="number">-1</span>]+<span class="number">2</span>;</span><br><span class="line"><span class="keyword">else</span>dp[i][j]=max(dp[i+<span class="number">1</span>][j],dp[i][j<span class="number">-1</span>]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;n-dp[<span class="number">1</span>][n]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æŠ•æœºå–å·§è‚¯å®šæ˜¯ä¸å¥½çš„ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å°†åŸå­—ç¬¦ä¸²é¢ å€’ï¼Œç„¶åæ±‚ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­ä¸²ï¼Œè¿™ä¸ªdpæ”¹æˆäºŒç»´æ»šåŠ¨è¿˜æ˜¯å¾ˆå¥½æ”¹çš„ï¼Œç”»å›¾çœ‹ä¸€ä¸‹å®ƒçš„æ›´æ–°æ–¹å¼å°±çŸ¥é“äº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">5005</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">2</span>][maxn];</span><br><span class="line"><span class="keyword">char</span> s1[maxn],s2[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">getchar();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,s1+i);</span><br><span class="line">s2[n+<span class="number">1</span>-i]=s1[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(s1[i]==s2[j])dp[i%<span class="number">2</span>][j]=dp[(i<span class="number">-1</span>)%<span class="number">2</span>][j<span class="number">-1</span>]+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span>dp[i%<span class="number">2</span>][j]=max(dp[(i<span class="number">-1</span>)%<span class="number">2</span>][j],dp[i%<span class="number">2</span>][j<span class="number">-1</span>]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;n-dp[n%<span class="number">2</span>][n]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> POJ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1119 ç¾åé‡å»º</title>
      <link href="2018/12/06/(Luogu)%20P1119%20%E7%81%BE%E5%90%8E%E9%87%8D%E5%BB%BA/"/>
      <url>2018/12/06/(Luogu)%20P1119%20%E7%81%BE%E5%90%8E%E9%87%8D%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1119">ä¼ é€é—¨</a></p><p><em><strong>é¢˜æ„ï¼š</strong></em>  æŸ¥è¯¢qæ¬¡æ±‚ä¸€ä¸ªæ‘åº„åˆ°å¦ä¸€ä¸ªæ‘åº„çš„æœ€çŸ­è·¯ï¼Œä½†è¿™ä¸ªé¢˜ç›®åˆåŠ äº†ä¸€ä¸ªé‡å»ºçš„æ¡ä»¶ï¼Œåªæœ‰å½“ä¸€æ¡è·¯è”é€šçš„ä¸¤ä¸ªæ‘åº„ (è§„å®šäº†æ‘åº„åœ¨ç¬¬å‡ å¤©è¢«ä¿®å¥½) éƒ½è¢«ä¿®å¥½è¿™æ¡è·¯æ‰å¯ä»¥é€šï¼Œæ‰€ä»¥ç‚¹åˆ°ç‚¹çš„æœ€çŸ­è·ç¦»åˆå—åˆ¶äºæ—¶é—´tã€‚</p><p><em><strong>æ€è·¯ï¼š</strong></em>  æŸ¥è¯¢æ˜¯ç‚¹åˆ°ç‚¹åœ¨ç¬¬tå¤©çš„æœ€çŸ­è·ç¦»ã€‚é¦–å…ˆè¿™æ˜¯å¤šæºæœ€çŸ­è·¯ï¼Œå„ä¸ªæ‘åº„ä¹‹é—´çš„æœ€çŸ­è·ç¦»æˆ‘ä»¬éƒ½è¦çŸ¥é“ï¼Œé€‰ç”¨floydé£Ÿç”¨æœ€ä½³ã€‚æ¥ä¸‹æ¥å»è§£å†³æ—¶é—´tçš„é—®é¢˜ã€‚é¦–å…ˆè¿™ä¸ªé—®é¢˜å¥½çš„ä¸€ç‚¹å°±æ˜¯ï¼Œæ‘åº„çš„é‡å»ºå¥½çš„æ—¶é—´æ˜¯ä¸ä¸‹é™çš„ï¼ŒæŸ¥è¯¢çš„tä¹Ÿæ˜¯ä¸ä¸‹é™çš„ï¼Œè¿™æ ·å°±very goodäº†ã€‚floydçš„ç¬¬ä¸€å±‚å¾ªç¯æ˜¯æšä¸¾è¿›è¡Œæ¾å¼›çš„ç‚¹ã€‚è¿™é‡Œå› ä¸ºå—åˆ¶äºtï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥å—ä¸€ä¸ªæŸ¥è¯¢ï¼Œå°±å°†é‡å»ºæ—¶é—´å°äºç­‰äºtçš„ç‚¹éƒ½æ‹¿å»æ¾å¼›è¿™ä¸€å¼ å›¾ï¼Œä½†æ˜¯å› ä¸ºæŸ¥è¯¢çš„ä¸¤ä¸ªæ‘åº„å¯èƒ½è¿˜æ²¡æœ‰è¢«é‡å»ºï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åˆ¤æ–­ä¸€ä¸‹ï¼Œå¦‚æœè¢«é‡å»ºè¿‡äº†è€Œä¸”è¢«æ›´æ–°ï¼Œé‚£å°±è¾“å‡ºæœ€çŸ­è·ç¦»ï¼Œåä¹‹è¾“å‡º-1ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">-0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">200</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> dist[maxn][maxn],t[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m,q;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dist));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,t+i);</span><br><span class="line">dist[i][i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> x,y,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;x,&amp;y,&amp;w);</span><br><span class="line">dist[x][y]=dist[y][x]=w;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;q);</span><br><span class="line"><span class="keyword">int</span> xx,yy,tt,k=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;q; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;xx,&amp;yy,&amp;tt);</span><br><span class="line"><span class="keyword">while</span>(t[k]&lt;=tt&amp;&amp;k&lt;n) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span> ; i&lt;n ; i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;n ;j++) &#123;</span><br><span class="line">dist[i][j]=min(dist[i][j],dist[i][k]+dist[k][j]);</span><br><span class="line">&#125;</span><br><span class="line">k++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dist[xx][yy]==INF||t[xx]&gt;tt||t[yy]&gt;tt)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span><span class="built_in">cout</span>&lt;&lt;dist[xx][yy]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€å¼€å§‹æƒ³ç”¨Dijkstraæš´åŠ›å‡ºç‚¹åˆ°ç‚¹çš„æœ€å°è·ç¦»å¹¶ç”¨è®°å¿†åŒ–å­˜å‚¨ä¸‹æ¥ã€‚ä½†æ˜¯å°±æ˜¯ä¸Tä¹Ÿä¼šMLEã€‚ä½†æœ¬èœé¸¡è¿˜æ˜¯å°†å…¶å®ç°äº†å‡ºæ¥ï¼Œå½“ç„¶æ˜¯â€œç¨»èŠ±é¦™é‡Œè¯´ä¸°å¹´ï¼Œå¬å–WAå£°ä¸€ç‰‡â€ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">-0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">200</span>+<span class="number">5</span>;</span><br><span class="line">ll n,m,q,maxday=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">int</span> t[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">ll p;</span><br><span class="line">ll dis;</span><br><span class="line">node(ll np=<span class="number">0</span>,ll ndis=<span class="number">0</span>) &#123;</span><br><span class="line">p=np,dis=ndis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> node&amp; x)<span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> dis&gt;x.dis;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line">ll id;</span><br><span class="line">ll to;</span><br><span class="line">ll w;</span><br><span class="line">edge(ll nid=<span class="number">0</span>,ll nto=<span class="number">0</span>,ll nw=<span class="number">0</span>) &#123;</span><br><span class="line">id=nid,to=nto,w=nw;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; e[maxn];</span><br><span class="line"><span class="keyword">int</span> dist[maxn][maxn][<span class="number">10005</span>];</span><br><span class="line"><span class="comment">// i-&gt;j ç¬¬tå¤©çš„æœ€çŸ­è·¯</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="keyword">int</span> start)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;=t[n<span class="number">-1</span>]+<span class="number">1</span>; ++k) &#123;</span><br><span class="line">dist[start][i][k]=INF;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">dist[start][start][t[start]]=<span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">priority_queue</span>&lt;node&gt; q;</span><br><span class="line">q.push(node(start,<span class="number">0</span>));</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">node tmp=q.top();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">int</span> np=tmp.p;</span><br><span class="line"><span class="keyword">if</span>(vis[np])<span class="keyword">continue</span>;</span><br><span class="line">vis[np]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;e[np].size(); ++i) &#123;</span><br><span class="line">edge ne=e[np][i];</span><br><span class="line">ll nto=ne.to;</span><br><span class="line">ll nw=ne.w;</span><br><span class="line">ll nday=max(t[nto],t[np]);</span><br><span class="line"><span class="keyword">if</span>(dist[start][nto][nday]&gt;dist[start][np][t[np]]+nw) &#123;</span><br><span class="line">dist[start][nto][nday]=dist[start][np][t[np]]+nw;</span><br><span class="line"><span class="comment">//cout&lt;&lt;start&lt;&lt;&quot;-&gt;&quot;&lt;&lt;nto&lt;&lt;&quot; &quot;&lt;&lt;nday&lt;&lt;&quot; :&quot;&lt;&lt;dist[start][nto][nday]&lt;&lt;endl;</span></span><br><span class="line">q.push(node(nto,dist[start][nto][nday]));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">bool</span> flag=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) &#123;</span><br><span class="line">flag=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;=t[n<span class="number">-1</span>]+<span class="number">1</span>; ++k) &#123;</span><br><span class="line"><span class="keyword">if</span>(dist[start][i][k]!=INF) &#123;</span><br><span class="line">flag=<span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(flag) &#123;</span><br><span class="line"><span class="keyword">if</span>(dist[start][i][k]==INF) &#123;</span><br><span class="line">dist[start][i][k]=dist[start][i][k<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,t+i);</span><br><span class="line">&#125;</span><br><span class="line">ll x,y,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;x,&amp;y,&amp;w);<span class="comment">//æ— å‘å›¾å»ºå›¾</span></span><br><span class="line">e[x].push_back(edge(i,y,w));</span><br><span class="line">e[y].push_back(edge(i,x,w));</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) &#123;</span><br><span class="line">Dijkstra(i);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;q);</span><br><span class="line"><span class="keyword">int</span> xx,yy,tt;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;q; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;xx,&amp;yy,&amp;tt);</span><br><span class="line"><span class="keyword">if</span>(dist[xx][yy][tt]==INF) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dist[xx][yy][tt]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœ€çŸ­è·¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1462 é€šå¾€å¥¥æ ¼ç‘ç›çš„é“è·¯(äºŒåˆ† + Spfa/Dijkstra)</title>
      <link href="2018/12/05/(Luogu)%20P1462%20%E9%80%9A%E5%BE%80%E5%A5%A5%E6%A0%BC%E7%91%9E%E7%8E%9B%E7%9A%84%E9%81%93%E8%B7%AF/"/>
      <url>2018/12/05/(Luogu)%20P1462%20%E9%80%9A%E5%BE%80%E5%A5%A5%E6%A0%BC%E7%91%9E%E7%8E%9B%E7%9A%84%E9%81%93%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1462">ä¼ é€é—¨</a></p><p><em><strong>é¢˜æ„ï¼š</strong></em> ä¸€ä¸ªè”é€šçš„æ— å‘å›¾ï¼Œé€šè¿‡æ¯ä¸€ä¸ªç‚¹ä¼šæ”¶è´¹ï¼Œé€šè¿‡æ¯ä¸€æ¡è¾¹ä¼šå‡å°‘è¡€é‡ã€‚æ±‚èƒ½åˆ°è¾¾ç»ˆç‚¹ (å³è¡€é‡åˆ°ç»ˆç‚¹è¿˜ä¸ä¸º0) çš„å„ä¸ªè·¯å¾„ä¸Š,æ”¶è´¹æœ€é«˜çš„æœ€å°å€¼ã€‚</p><p><em><strong>æ€è·¯ï¼š</strong></em> é¦–å…ˆä¸€å¼€å§‹çš„æ€è·¯æ˜¯æ‰¾åˆ°æ‰€æœ‰èƒ½åˆ°ç»ˆç‚¹çš„è·¯å¾„ï¼Œç„¶åå–æ¯æ¡è·¯å¾„ä¸Šçš„æœ€é«˜æ”¶è´¹ï¼Œæ¯”è¾ƒå–æœ€å°å€¼ï¼Œæ•°æ®é‡å¤§ï¼Œpassï¼›å†æ€è€ƒï¼Œä»–æ±‚çš„æ˜¯æœ€å¤§çš„æœ€å°å€¼ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æƒ³åˆ°äºŒåˆ†ï¼Œå»äºŒåˆ†è·¯å¾„ä¸Šçš„æœ€é«˜æ¶ˆè´¹ï¼Œç„¶ååˆ¤æ–­è¿™æ ·èƒ½ä¸èƒ½èµ°åˆ°ç»ˆç‚¹ã€‚åˆ¤æ–­çš„å‡½æ•°å°±å¯ä»¥è€ƒè™‘Spfaå’ŒDijkstraäº†,åªè¦å°†è¿™ä¸¤ä¸ªåœ¨è·‘çš„æ—¶å€™ç•¥åŠ æ”¹å˜å³å¯ï¼Œå¦‚æœé€šå‘çš„é‚£ä¸ªç‚¹ï¼Œæœ€é«˜æ¶ˆè´¹å¤§äºä½ æšä¸¾çš„æœ€é«˜æ¶ˆè´¹ï¼Œå°±ä¸åšè€ƒè™‘ã€‚æœ€åpdä¸€ä¸‹åˆ°ç»ˆç‚¹çš„éœ€è¦æ¶ˆè€—çš„æœ€å°è¡€é‡æ˜¯ä¸æ˜¯å¤§äºä½ çš„è¡€é‡bã€‚</p><p>è¿™ä¸ªé¢˜åœ¨åŒæ ·çš„è¯»å…¥æ–¹å¼ä¸‹Spfaæ˜¯è·‘çš„æ¯”Dijkstraå¿«çš„ï¼›</p><p>Spfaï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf=<span class="number">-0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> dist[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="keyword">int</span> cost[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m,b;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to;</span><br><span class="line"><span class="keyword">int</span> w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; ee[maxn];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> maxmoney)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dist));</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line">dist[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">vis[<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">q.push(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line"><span class="keyword">int</span> np=q.front();</span><br><span class="line">q.pop();</span><br><span class="line">vis[np]=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)ee[np].size(); ++i) &#123;</span><br><span class="line">edge tt=ee[np][i];</span><br><span class="line"><span class="keyword">if</span>(cost[tt.to]&lt;=maxmoney) &#123;</span><br><span class="line"><span class="keyword">if</span>(dist[tt.to]&gt;dist[np]+tt.w) &#123;</span><br><span class="line">dist[tt.to]=dist[np]+tt.w;</span><br><span class="line"><span class="keyword">if</span>(vis[tt.to]==<span class="literal">false</span>) &#123;</span><br><span class="line">q.push(tt.to);</span><br><span class="line">vis[tt.to]=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(dist[n]&gt;=b)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">else</span><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;b;</span><br><span class="line"><span class="keyword">int</span> le=INF,ri=inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;cost[i];</span><br><span class="line">le=min(le,cost[i]);</span><br><span class="line">ri=max(ri,cost[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> x,y,z;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line">ee[x].push_back(edge&#123;y,z&#125;);</span><br><span class="line">ee[y].push_back(edge&#123;x,z&#125;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(!spfa(ri))&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;AFK&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">while</span>(le&lt;ri)&#123;</span><br><span class="line"><span class="keyword">int</span> mid=(le+ri)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(spfa(mid))&#123;<span class="comment">//å¯è¾¾</span></span><br><span class="line">ri=mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;<span class="comment">//ä¸å¯è¾¾</span></span><br><span class="line">le=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;le&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Dijkstra:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf=<span class="number">-0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> dist[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="keyword">int</span> cost[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m,b;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">ll p; <span class="comment">//å½“å‰ç‚¹</span></span><br><span class="line">ll dis; <span class="comment">//èµ·å§‹ç‚¹åˆ°è¯¥ç‚¹çš„æœ€çŸ­è·ç¦»</span></span><br><span class="line">node(ll np=<span class="number">0</span>,ll ndis=<span class="number">0</span>) &#123;</span><br><span class="line">p=np,dis=ndis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> node&amp; x)<span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> dis&gt;x.dis;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to;</span><br><span class="line"><span class="keyword">int</span> w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; ee[maxn];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Dijkstra</span><span class="params">(<span class="keyword">int</span> maxmoney)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dist));</span><br><span class="line"><span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">dist[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;node&gt; q;</span><br><span class="line">q.push(node(<span class="number">1</span>,<span class="number">0</span>));</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">node tmp=q.top();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">int</span> np=tmp.p;</span><br><span class="line"><span class="keyword">if</span>(vis[np])</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">vis[np]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;ee[np].size(); ++i) &#123;</span><br><span class="line">edge ne=ee[np][i];</span><br><span class="line">ll nto=ne.to;</span><br><span class="line">ll nw=ne.w;</span><br><span class="line"><span class="keyword">if</span>(cost[nto]&lt;=maxmoney) &#123;</span><br><span class="line"><span class="keyword">if</span>(dist[nto]&gt;dist[np]+nw) &#123;</span><br><span class="line">dist[nto]=dist[np]+nw;</span><br><span class="line">q.push(node(nto,dist[nto]));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(dist[n]&gt;=b)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">else</span><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;b;</span><br><span class="line"><span class="keyword">int</span> le=INF,ri=inf;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;cost[i];</span><br><span class="line">le=min(le,cost[i]);</span><br><span class="line">ri=max(ri,cost[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> x,y,z;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line">ee[x].push_back(edge &#123;y,z&#125;);</span><br><span class="line">ee[y].push_back(edge &#123;x,z&#125;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(!Dijkstra(ri)) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;AFK&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">while</span>(le&lt;ri) &#123;</span><br><span class="line"><span class="keyword">int</span> mid=(le+ri)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(Dijkstra(mid)) &#123;<span class="comment">//å¯è¾¾</span></span><br><span class="line">ri=mid;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">//ä¸å¯è¾¾</span></span><br><span class="line">le=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;le&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒåˆ† </tag>
            
            <tag> æœ€çŸ­è·¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1983 è½¦ç«™åˆ†çº§ (æ‹“æ‰‘æœ€é•¿æœ‰æ•ˆè·¯å¾„)</title>
      <link href="2018/12/04/(Luogu)%20P1983%20%E8%BD%A6%E7%AB%99%E5%88%86%E7%BA%A7%20(%E6%8B%93%E6%89%91%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E8%B7%AF%E5%BE%84)/"/>
      <url>2018/12/04/(Luogu)%20P1983%20%E8%BD%A6%E7%AB%99%E5%88%86%E7%BA%A7%20(%E6%8B%93%E6%89%91%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E8%B7%AF%E5%BE%84)/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1983#sub">ä¼ é€é—¨</a></p><p>åšè¿™ä¸ªé¢˜çš„ç¬¬ä¸€æ­¥æ˜¯å…ˆæ€è€ƒåº”è¯¥å¦‚ä½•å»ºå›¾ï¼Œåœé çš„ç«™ä¹‹é—´æ˜¯æ²¡æœ‰ä¸¥æ ¼çš„å¤§äºå°äºå…³ç³»çš„ï¼Œæ‰€ä»¥ç›´æ¥è¿è¾¹çš„è¯æ˜¯ä¸åˆ©äºç­‰çº§çš„åˆ’åˆ†çš„ã€‚æ‰€ä»¥å†ä»”ç»†è€ƒè™‘ä¸€ä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥æ˜¯åœ¨èµ·ç‚¹åˆ°ç»ˆç‚¹ä¹‹é—´ï¼Œ è¿æ¥åœé çš„è½¦ç«™å’Œæ²¡æœ‰åœé çš„è½¦ç«™ï¼Œå› ä¸ºåœé çš„è½¦ç«™ç­‰çº§å¿…å®šæ˜¯ä¸¥æ ¼å¤§äºæœªåœé è½¦ç«™çš„ç­‰çº§ã€‚æ ¹æ®è¿™ä¸ªä¸¥æ ¼çš„å¤§å°å…³ç³»æˆ‘ä»¬å¯ä»¥å»ºæœ‰å‘å›¾ã€‚å¯ä»¥ä»ä½çš„æŒ‡å‘é«˜çš„ï¼Œä¹Ÿå¯ä»¥ä»é«˜çš„æŒ‡å‘ä½çš„ï¼Œç»“æœæ˜¯ä¸€æ ·çš„ã€‚</p><p>è¿™é‡Œæˆ‘å»ºå›¾æ˜¯ä»ä½ç­‰çº§çš„æŒ‡å‘é«˜ç­‰çº§ã€‚ç„¶åè·‘ä¸€æ¬¡æ‹“æ‰‘æœ€é•¿è·¯å¾„ï¼Œæœ€é•¿çš„è·¯å¾„å°±æ˜¯éœ€è¦çš„æœ€å°‘çš„æ ‡è®°çº§åˆ«ï¼Œå› ä¸ºæœ€é•¿çš„éƒ½å¯ä»¥è¢«æ ‡è®°å‡ºæ¥ï¼Œé‚£é‚£äº›æ¯”è¾ƒçŸ­çš„å¿…ç„¶ä¹Ÿå¯ä»¥è¢«æ ‡è®°å‡ºæ¥ã€‚å»ºå›¾è¦ç”¨ç©ºé—´æ¢æ—¶é—´ä¸ç„¶ä¼šT</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[maxn];<span class="comment">//é‚»æ¥è¡¨</span></span><br><span class="line"><span class="keyword">bool</span> vis[maxn]; <span class="comment">//è®¿é—®æ ‡è®°</span></span><br><span class="line"><span class="keyword">int</span> degree[maxn],rankk[maxn];</span><br><span class="line"><span class="comment">//åº¦ ä»¥iä¸ºç»ˆç‚¹çš„æœ€é•¿æœ‰æ•ˆè·¯å¾„</span></span><br><span class="line"><span class="keyword">bool</span> added[maxn][maxn]; <span class="comment">//æ ‡è®°æ˜¯å¦è¢«æ·»åŠ </span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">int</span> s,tmp;</span><br><span class="line"><span class="keyword">int</span> start,end;</span><br><span class="line"><span class="built_in">memset</span>(added,<span class="literal">true</span>,<span class="keyword">sizeof</span>(added));</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">unstop</span><span class="params">(maxn)</span></span>; <span class="comment">//ä¸åœé </span></span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">stop</span><span class="params">(maxn)</span></span>; <span class="comment">//åœé </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">0</span>; t&lt;m; ++t) &#123;</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;s);</span><br><span class="line">start=INF,end=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;s; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;tmp);</span><br><span class="line">vis[tmp]=<span class="literal">true</span>;<span class="comment">//åœé </span></span><br><span class="line">start=min(start,tmp);</span><br><span class="line">end=max(end,tmp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">unstop.clear();</span><br><span class="line">stop.clear();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=start;i&lt;=end;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[i])&#123;</span><br><span class="line">unstop.push_back(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(vis[i])&#123;</span><br><span class="line">stop.push_back(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)stop.size();++i)&#123; <span class="comment">//åœé çš„å‘æœªåœé çš„è¿è¾¹</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;(<span class="keyword">int</span>)unstop.size();++j)&#123;</span><br><span class="line"><span class="keyword">int</span> be=stop[i],en=unstop[j];</span><br><span class="line"><span class="keyword">if</span>(added[be][en])&#123; <span class="comment">//æ˜¯å¦å·²ç»è¢«æ·»åŠ </span></span><br><span class="line">G[be].push_back(en);</span><br><span class="line">degree[en]++;</span><br><span class="line">added[be][en]=<span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">true</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(degree[i]==<span class="number">0</span>) &#123;</span><br><span class="line">q.push(i);</span><br><span class="line">vis[i]=<span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line"><span class="keyword">int</span> np=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)G[np].size(); ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> to=G[np][i];</span><br><span class="line">degree[to]--;</span><br><span class="line">rankk[to]=max(rankk[to],rankk[np]+<span class="number">1</span>);<span class="comment">//æ›´æ–°æœ‰æ•ˆè·¯å¾„</span></span><br><span class="line">res=max(rankk[to],res); <span class="comment">//æ›´æ–°æœ€é•¿æœ‰æ•ˆè·¯å¾„</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(vis[i]&amp;&amp;degree[i]==<span class="number">0</span>) &#123;</span><br><span class="line">q.push(i);</span><br><span class="line">vis[i]=<span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res+<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//åˆå§‹åŒ–ä¸º0ï¼Œæ‰€ä»¥+1</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‹“æ‰‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P2921 [USACO08DEC]Trick or Treat on the Farm( Tarjanæ±‚å¼ºè”é€šåˆ†é‡ )</title>
      <link href="2018/12/04/(Luogu)%20P2921%20%5BUSACO08DEC%5DTrick%20or%20Treat%20on%20the%20Farm(%20Tarjan%E6%B1%82%E5%BC%BA%E8%81%94%E9%80%9A%E5%88%86%E9%87%8F%20)/"/>
      <url>2018/12/04/(Luogu)%20P2921%20%5BUSACO08DEC%5DTrick%20or%20Treat%20on%20the%20Farm(%20Tarjan%E6%B1%82%E5%BC%BA%E8%81%94%E9%80%9A%E5%88%86%E9%87%8F%20)/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P2921">ä¼ é€é—¨</a></p><p>è™½ç„¶çœ‹é¢˜è§£å¾ˆå¤šå¤§ä½¬å¹¶æ²¡æœ‰ç”¨Tarjanæ¥åšè¿™ä¸€é¢˜ï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜ç”¨Tarjanæ±‚å¼ºè”é€šåˆ†é‡æ¥è§£å†³è¿™é¢˜è¿˜æ˜¯å¾ˆæ¸…æ™°çš„ï¼Œå¦‚æœä¸€å¤´ç‰›åœ¨ä¸€ä¸ªå¼ºè”é€šåˆ†é‡é‡Œï¼Œé‚£å®ƒå¯ä»¥æ‹¿çš„ç³–æœå°±æ˜¯è¿™ä¸ªå¼ºè”é€šåˆ†é‡çš„ç‚¹æ•°ã€‚åä¹‹ç”±äºç‰›èµ°çš„çš„æ–¹å‘åªæœ‰ä¸€ä¸ªï¼Œé‚£å°±ç›´æ¥æ·±æœåˆ°ç¬¬ä¸€ä¸ªå¼ºè”é€šåˆ†é‡ï¼ŒåŠ ä¸Šè¿™ä¸ªå¼ºè”é€šåˆ†é‡çš„ç‚¹æ•°å°±æ˜¯å®ƒå¯ä»¥æ‹¿åˆ°çš„ç³–æœã€‚</p><p>è·‘å¼ºè”é€šåˆ†é‡çš„åŒæ—¶ï¼Œå°±å¯ä»¥çŸ¥é“æŸä¸ªç‚¹å±äºå“ªä¸€å—ï¼Œå¹¶ä¸”ä¸€å—æœ‰å¤šå¤§ã€‚</p><p>æ³¨ï¼šè‡ªç¯çš„ç‚¹è¦å…ˆå¤„ç†ä¸€ä¸‹ï¼Œansä¸º1ï¼Œå’Œå¯ä»¥æ·±æœåˆ°å¤§å¼ºè”é€šåˆ†é‡çš„åˆ†å¼€æ¥ï¼Œæ–¹ä¾¿å†™æ·±æœã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> low[maxn],dfn[maxn],cnt=<span class="number">0</span>,tot=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> color[maxn],sum[maxn],n;</span><br><span class="line"><span class="keyword">int</span> ans[maxn];</span><br><span class="line"><span class="keyword">bool</span> added[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; s;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tarjan</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">low[x]=dfn[x]=++cnt;</span><br><span class="line">s.push(x);</span><br><span class="line">added[x]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)G[x].size();++i)&#123;</span><br><span class="line"><span class="keyword">int</span> np=G[x][i];</span><br><span class="line"><span class="keyword">if</span>(!dfn[np])&#123;</span><br><span class="line">tarjan(np);</span><br><span class="line">low[x]=min(low[x],low[np]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(added[np])&#123;</span><br><span class="line">low[x]=min(low[x],dfn[np]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(low[x]==dfn[x])&#123;</span><br><span class="line">tot++;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line"><span class="keyword">int</span> tmp=s.top();s.pop();</span><br><span class="line">color[tmp]=tot,sum[tot]++;</span><br><span class="line">added[tmp]=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span>(tmp==x)<span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> point,<span class="keyword">int</span> np,<span class="keyword">int</span> step)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(ans[np])&#123;</span><br><span class="line">ans[point]=ans[np]+step;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="keyword">int</span>)G[np].size();++i)&#123;</span><br><span class="line">dfs(point,G[np][i],step+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(added,<span class="literal">false</span>,<span class="keyword">sizeof</span>(added));</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">int</span> t;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">G[i].push_back(t);</span><br><span class="line"><span class="keyword">if</span>(i==t)ans[i]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(!dfn[i])tarjan(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(sum[color[i]]!=<span class="number">1</span>)ans[i]=sum[color[i]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(ans[i]==<span class="number">0</span>) dfs(i,i,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tarjan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1341 æ— åºå­—æ¯å¯¹(æ¬§æ‹‰è·¯å¾„)</title>
      <link href="2018/12/03/(Luogu)P1341%E6%97%A0%E5%BA%8F%E5%AD%97%E6%AF%8D%E5%AF%B9(%E6%AC%A7%E6%8B%89%E8%B7%AF%E5%BE%84)/"/>
      <url>2018/12/03/(Luogu)P1341%E6%97%A0%E5%BA%8F%E5%AD%97%E6%AF%8D%E5%AF%B9(%E6%AC%A7%E6%8B%89%E8%B7%AF%E5%BE%84)/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1341#sub">ä¼ é€é—¨</a></p><p>è¿™ä¸ªé¢˜æ˜¯æ”¾åœ¨å›¾è®ºæ¿å—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“æƒ³åˆ°å»ºå›¾ã€‚ä½†æ˜¯å¦‚æœè¿™é“é¢˜ç›´æ¥ç»™æˆ‘ï¼Œæˆ‘è‚¯å®šä¼šè®¤ä¸ºè¿™æ˜¯ä¸€é“å•çº¯çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸ä¼šä¸å›¾è®ºæ‰¯ä¸Šå…³ç³»ã€‚ç”¨å›¾çš„æ€æƒ³å»ºä¸ªå›¾ï¼Œé¢˜ç›®ä¸€ä¸‹å°±å˜å¾—æ¸…æ™°èµ·æ¥ï¼Œè¿™å˜æˆäº†ä¸€ä¸ªä¸€ç¬”ç”»é—®é¢˜ï¼Œé‚£ä¹ˆå°±è¦æ±‚å¯ä»¥èµ°ä¸€ä¸ªæ¬§æ‹‰å›è·¯æˆ–è€…æ¬§æ‹‰è·¯å¾„ã€‚</p><ul><li><p>ç¬¬ä¸€æ­¥ï¼Œåˆ¤æ–­ï¼Œ1.å¦‚æœæœ‰ä¸åªä¸€ä¸ªè”é€šå—ï¼Œpassã€‚2.æœ‰ä¸ç­‰äº2ä¸ªå¥‡æ•°åº¦ç‚¹ï¼Œpass</p></li><li><p>ç¬¬äºŒæ­¥ï¼Œç¡®å®šèµ·ç‚¹ï¼Œå¦‚æœæ˜¯æœ‰ä¸¤ä¸ªå¥‡æ•°åº¦ç‚¹ï¼Œåˆ™ä¸€ä¸ªæ˜¯èµ·ç‚¹ï¼Œä¸€ä¸ªæ˜¯ç»ˆç‚¹ï¼Œå–å°çš„ä¸ºèµ·ç‚¹å°±è¡Œäº†ã€‚å¦‚æœéƒ½æ˜¯å¶æ•°åº¦ç‚¹ï¼Œå–ä¸€ä¸ªæœ€å° çš„å½“æˆèµ·ç‚¹ã€‚(ç”±äºæ˜¯ç”¨é‚»æ¥çŸ©é˜µå­˜å‚¨çš„ï¼Œå–ç‚¹çš„æ˜¯ä»å°åˆ°å¤§å–çš„ï¼Œæ»¡è¶³å­—å…¸åºè¾“å‡º)</p></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">257</span>;</span><br><span class="line"><span class="keyword">int</span> G[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> p[maxn];</span><br><span class="line"><span class="keyword">char</span> tmp[<span class="number">2</span>];</span><br><span class="line"><span class="keyword">char</span> ans[maxn*<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> deg[maxn];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;maxn; i++) &#123;</span><br><span class="line">p[i] = i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x==p[x]) <span class="keyword">return</span> x;</span><br><span class="line"><span class="keyword">return</span> p[x] = find(p[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">unite</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">x = find(x);</span><br><span class="line">y = find(y);</span><br><span class="line"><span class="keyword">if</span>(x==y) <span class="keyword">return</span>;</span><br><span class="line">p[x] = y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;maxn; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(G[s][i]) &#123;</span><br><span class="line">G[s][i] = <span class="number">0</span>;</span><br><span class="line">G[i][s] = <span class="number">0</span>;</span><br><span class="line">dfs(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ans[n--] = s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">ios_base::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">init();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tmp;</span><br><span class="line">G[tmp[<span class="number">0</span>]][tmp[<span class="number">1</span>]] = <span class="number">1</span>;</span><br><span class="line">G[tmp[<span class="number">1</span>]][tmp[<span class="number">0</span>]] = <span class="number">1</span>;</span><br><span class="line">deg[tmp[<span class="number">0</span>]]++;</span><br><span class="line">deg[tmp[<span class="number">1</span>]]++;</span><br><span class="line">unite(tmp[<span class="number">0</span>],tmp[<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;maxn; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(p[i]==i &amp;&amp; deg[i]) &#123;</span><br><span class="line">cnt++; <span class="comment">//è”é€šå—ä¸ªæ•° </span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cnt!=<span class="number">1</span>) &#123;<span class="comment">//ä¸æ­¢ä¸€ä¸ªè¿é€šå— </span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;No Solution&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">cnt = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> head = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="string">&#x27;A&#x27;</span>; i&lt;=<span class="string">&#x27;z&#x27;</span>; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(deg[i]&amp;<span class="number">1</span>) &#123; </span><br><span class="line">cnt++;</span><br><span class="line"><span class="keyword">if</span>(!head) head = i; <span class="comment">//æœ‰å¥‡æ•°åº¦é¡¶ç‚¹æ—¶çš„èµ·ç‚¹ </span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!head) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="string">&#x27;A&#x27;</span>; i&lt;=<span class="string">&#x27;z&#x27;</span>; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(deg[i]) &#123;</span><br><span class="line">head = i; <span class="comment">//å…¨æ˜¯å¶æ•°ç‚¹æ—¶çš„èµ·ç‚¹ </span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(cnt &amp;&amp; cnt!=<span class="number">2</span>) &#123;<span class="comment">//æœ‰ï¼2ä¸ªå¥‡æ•°ç‚¹ </span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;No Solution&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">dfs(head);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¬§æ‹‰è·¯å¾„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU 3037 Saving Beans(éš”æ¿+ç»„åˆæ•°+lucas)</title>
      <link href="2018/12/02/(HDU)3037SavingBeans/"/>
      <url>2018/12/02/(HDU)3037SavingBeans/</url>
      
        <content type="html"><![CDATA[<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=3037">ä¼ é€é—¨</a></p><p><em><strong>é¢˜æ„ï¼š</strong></em> ç›¸å½“äºnä¸ªæ•°çš„å’Œä¸è¶…è¿‡mçš„æ–¹æ¡ˆæ•°ã€‚</p><p><em><strong>æ€è·¯ï¼š</strong></em> æˆ‘ä»¬å…ˆè€ƒè™‘nä¸ªæ•°å’Œç­‰äºmçš„æƒ…å†µï¼Œå³x1+x2+â€¦xn=mï¼ˆå…è®¸xiä¸º0ï¼‰æœ‰å¤šå°‘ç§å¯èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°éš”æ¿æ³•ï¼Œä½†ç”±äºå…è®¸0çš„å‡ºç°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨1ä»£è¡¨æœå­ï¼Œæœ‰mä¸ª1ï¼Œåœ¨åŠ ä¸Šn-1ä¸ª0ä»£è¡¨ç©ºï¼Œç„¶åç”¨n-1å—éš”æ¿å°†å…¶åˆ†æˆnä»½ã€‚å³C(m+n-1,n-1)ï¼Œ</p><p>åˆC(m+n-1,n-1)=C(m+n-1,m),è¿™ä»£è¡¨ç€å’Œä¸ºmçš„æ–¹æ¡ˆæ•°ã€‚é‚£æˆ‘ä»¬å¯ä»¥å¾—çŸ¥å½“å’Œä¸ºiçš„æ–¹æ¡ˆæ•°ä¸ºC(i+n-1,i)ä¸ªï¼Œæ‰€ä»¥ç»“æœreså°±å¯ä»¥å†™å‡ºï¼›res=C(n-1,0)+C(n,1)+â€¦+C(n+m-1,m) ï¼ˆæ„Ÿè§‰å·²ç»å¾ˆæ¥è¿‘ç­”æ¡ˆäº†ï¼Œä½†æ˜¯ç”±äºnï¼Œmå¾ˆå¤§ï¼Œè¿™æ ·è¿˜æ˜¯ä¸è¡Œï¼Œè¿˜éœ€è¦åŒ–ç®€ï¼‰</p><p><strong>å…¬å¼ C(n,k) = C(n-1,k)+C(n-1,k-1)</strong></p><p>æˆ‘ä»¬å°±éœ€è¦é€šè¿‡å®ƒæ¥åŒ–ç®€ï¼Œæˆ‘ä»¬å¯ä»¥å°†C(n-1,0)å˜æˆC(n,0)ï¼Œè¿™æ ·å°±å’ŒC(n,1)ç»“åˆå˜æˆäº†C(n+1,1),ä¸€ç›´ç»“åˆåˆ°æœ€åï¼Œæˆ‘ä»¬å‘ç°å¼å­å˜æˆäº†C(n+m,m)ï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬éœ€è¦æ±‚çš„ç»“æœã€‚å‰©ä¸‹æ¥åªéœ€è¦å¥—ç”¨ä¸€ä¸‹å¢å¡æ–¯çš„æ¿å­å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line">ll n,m,p;</span><br><span class="line">ll fac[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getfac</span><span class="params">(ll p)</span> </span>&#123; <span class="comment">//é¢„å¤„ç†é˜¶å±‚</span></span><br><span class="line">fac[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=p; i++)</span><br><span class="line">fac[i]=fac[i<span class="number">-1</span>]*i%p;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function">ll <span class="title">mypow</span><span class="params">(ll a,ll n,ll p)</span> </span>&#123; <span class="comment">//å¿«é€Ÿå¹‚è¿ç®—</span></span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(n) &#123;</span><br><span class="line"><span class="keyword">if</span>(n&amp;<span class="number">1</span>)</span><br><span class="line">ans=ans*a%p;</span><br><span class="line">a=a*a%p;</span><br><span class="line">n/=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function">ll <span class="title">lucas</span><span class="params">(ll n,ll m,ll p)</span> </span>&#123;</span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(n&amp;&amp;m) &#123;</span><br><span class="line">ll a=n%p;</span><br><span class="line">ll b=m%p;</span><br><span class="line"><span class="keyword">if</span>(a&lt;b) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">ans=(ans*fac[a]*mypow(fac[b]*fac[a-b]%p,p<span class="number">-2</span>,p))%p;</span><br><span class="line">n/=p;</span><br><span class="line">m/=p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> t;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line"><span class="keyword">while</span>(t--) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;p;</span><br><span class="line">getfac(p);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;lucas(n+m,m,p)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> HDU </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU 4704 Sumï¼ˆéš”æ¿+è´¹é©¬å°å®šç†ï¼‰</title>
      <link href="2018/12/02/(HDU)4704Sum/"/>
      <url>2018/12/02/(HDU)4704Sum/</url>
      
        <content type="html"><![CDATA[<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4704">ä¼ é€é—¨</a></p><p>é¢˜æ„ï¼šè¾“å…¥ä¸€ä¸ªNï¼Œå°†Næ‹†åˆ†æˆ1-nä¸ªæ•°ï¼Œé—®æœ‰å¤šå°‘ç§ç»„æˆæ–¹æ³•ã€‚</p><p>æ€è·¯ï¼šå¯ä»¥ç”¨éš”æ¿æ³•è€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼Œæœ‰Nä¸ª1ï¼Œå°±æœ‰N-1ä¸ªç©ºéš™ï¼Œå¦‚æœæ˜¯æ‹†åˆ†æˆ1ä¸ªæ•°ï¼Œé‚£å°±æ˜¯æ”¾0å—éš”æ¿å³C(N-1,0) (emmmä¸ä¼šæ‰“æ•°å­¦å¼å­ ï¼‰  2ä¸ªæ•°å­—é‚£å°±æ˜¯C(N-1,1ï¼‰ï¼Œä»¥æ­¤ç±»æ¨åˆ°C(N-1,N-1ï¼‰ï¼›é‚£è¦è®¡ç®—å¾—ç»“æœå°±æ˜¯ 2^(N-1),ä½†ç”±äºè¿™ä¸ªNæœ‰100000ä½ï¼Œç›´æ¥å¿«é€Ÿå¹‚æ˜¯ä¸å¯èƒ½çš„ï¼Œè¿™æ—¶å€™å°±éœ€è¦è¿™é“é¢˜çš„ä¸»è§’ç™»åœºäº†ï¼Œè´¹é©¬å°å®šç†ï¼Œä¸äº†è§£çš„å¯ä»¥ç™¾åº¦ä¸€ä¸‹ã€‚</p><p><strong>å°±æ˜¯å¯¹ä»»æ„çš„P,Aäº’è´¨ï¼Œéƒ½æœ‰Açš„(P-1)æ¬¡æ–¹å–æ¨¡äºPç­‰äº1. å…¬å¼è¡¨ç¤ºä¸ºï¼š A^(Pâˆ’1)â‰¡1(mod P)</strong></p><p>é‚£ä¹ˆåœ¨è¿™é“é¢˜é‡Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ 2^(p-1)=1(mod p) , é‚£æˆ‘ä»¬å°±åªéœ€è¦æ±‚å‡º t=(N-1)%(p-1), æ±‚2^(t)å³å¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="built_in">string</span> n;</span><br><span class="line"><span class="function">ll <span class="title">mypow</span><span class="params">(ll a, ll k)</span> </span>&#123;</span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(k) &#123;</span><br><span class="line"><span class="keyword">if</span>(k&amp;<span class="number">1</span>) &#123;</span><br><span class="line">ans=(ans*a)%mod;</span><br><span class="line">k--;</span><br><span class="line">&#125;</span><br><span class="line">k/=<span class="number">2</span>;</span><br><span class="line">a=a*a%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n) &#123;</span><br><span class="line">ll k = n[<span class="number">0</span>]-<span class="string">&#x27;0&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span>(ll i=<span class="number">1</span>; i&lt;(<span class="keyword">int</span>)n.size(); ++i)</span><br><span class="line">k = (k*<span class="number">10</span> +(n[i]-<span class="string">&#x27;0&#x27;</span>)) % (mod<span class="number">-1</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,mypow(<span class="number">2</span>,k<span class="number">-1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> HDU </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU 5750 Dertouzosï¼ˆæ•°è®ºï¼‰</title>
      <link href="2018/12/02/(HDU)5750Dertouzos/"/>
      <url>2018/12/02/(HDU)5750Dertouzos/</url>
      
        <content type="html"><![CDATA[<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5750">ä¼ é€é—¨</a></p><p><em><strong>é¢˜æ„</strong></em>ï¼šåœ¨å°äºnçš„èŒƒå›´å†…ï¼Œæ‰¾å‡ºæ‰€æœ‰æœ€å¤§é™¤æ•°ä¸ºdçš„æ•°ã€‚</p><p><em><strong>æ€è·¯</strong></em>ï¼šå‡è®¾å­˜åœ¨ä¸€ä¸ªyæ»¡è¶³é¢˜ç›®æ¡ä»¶ï¼Œå³y=k<em>d,é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åˆ†æå‡ºæ¥ kä¸€å®šä¸ºè´¨æ•°ï¼Œè€Œä¸”k&lt;=d,å› ä¸ºåªæœ‰è¿™æ ·kæ‰ä¸èƒ½åˆ†è§£æˆä¸¤ä¸ªå¤§äº1çš„æ•°ï¼Œå¦‚æœä¸€æ—¦åˆ†æˆä¸¤ä¸ªå¤§äº1çš„æ•°a,b;é‚£ä¹ˆa</em>dä¹Ÿæ˜¯yçš„å› å­è€Œä¸”æ¯”då¤§äº†ã€‚æ—¢ç„¶è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç´ æ•°ç­›é¢„å¤„ç†ç´ æ•°ã€‚</p><p>æšä¸¾æ¯ä¸€ä¸ªç´ æ•°å’Œdçš„ä¹˜ç§¯æ˜¯å¦æ»¡è¶³ï¼Œé‚£ä½•æ—¶ç»ˆæ­¢å‘¢ï¼Ÿï¼ˆç´ æ•°å­˜å…¥Væ•°ç»„</p><ul><li><p>1.å½“v[i]*d&gt;=n ä¸æ»¡è¶³æ¡ä»¶äº†ï¼Œæ˜¾ç„¶è¦ç»ˆæ­¢äº†ï¼›</p></li><li><p>2.å½“v[i]æ˜¯dçš„å› å­æ—¶ï¼ˆè¿™ä¸ªä¹Ÿä¿è¯äº†v[i]&lt;dï¼‰æ­¤æ—¶ä¹Ÿè¦ç»ˆæ­¢äº†ï¼Œä½†res++ï¼›</p><p>å½“dä¸æ˜¯è´¨æ•°æ—¶ï¼Œåˆ™då¯ä»¥åˆ†æˆä¸¤ä¸ªå¤§äº1çš„æ•°ï¼Œä¸€ä¸ªæœ€å°è´¨æ•°å› å­å’Œå¦ä¸€ä¸ªæ•°ï¼Œv[i]æ˜¯æœ€å°è´¨æ•°å› å­æ—¶ï¼Œæ­¤æ—¶ä¹˜ç§¯çš„æœ€å¤§é™¤æ•°è¿˜æ˜¯ dï¼Œä½†å½“v[i]å†å¤§æ—¶ï¼Œv[i]å°±ä¼šå’Œå¦ä¸€ä¸ªæ•°ç›¸ä¹˜å˜æˆä¸€ä¸ª&gt;dçš„æ•°ã€‚</p><p>å½“dæ˜¯è´¨æ•°æ—¶ï¼Œé‚£dåªèƒ½åˆ†æˆ1å’Œdï¼Œå½“v[i]æ—¶dæ˜¯ï¼Œ ä¹˜ç§¯çš„æœ€å¤§é™¤æ•°è¿˜æ˜¯ dï¼Œv[i]å†å¤§ï¼Œé‚£æœ€å¤§é™¤æ•°å°±æˆäº†v[i]äº†ã€‚</p></li></ul><p>***ä¸€ç‚¹æ³¨æ„ï¼š*<em><em>å™¢ï¼Œè¿˜æœ‰ä¸€ç‚¹ï¼Œå°±æ˜¯ç´ æ•°ç­›çš„æ—¶å€™ï¼Œç­›é€‰çš„ä¸Šç•Œå¹¶ä¸æ˜¯nï¼ˆ1e9ï¼‰,è¿™ä¹Ÿæ˜¯ä¸€å¼€å§‹åšè¿™ä¸ªæ²¡æœ‰æ³¨æ„åˆ°çš„ï¼Œä»¥ä¸ºç´ æ•°ç­›æ•°ç»„å¼€ä¸äº†ã€‚å› ä¸ºå¦‚æœdæ˜¯è´¨æ•°é‚£ä¹ˆd</em>då°±ç»“æŸäº†ï¼Œè€Œä¸”d</em>dè¦å°äºnï¼Œå¦‚æœdä¸æ˜¯è´¨æ•°ï¼Œé‚£ä¹ˆè·‘çš„å®ƒçš„æœ€å°è´¨å› å­å°±ç»“æŸäº†ï¼›ç»¼ä¸Šï¼Œæ‰€ä»¥ç­›é€‰çš„ä¸Šç•Œæ˜¯sqrt(n)ï¼Œä¿é™©å¯ä»¥å¼€å¤§ä¸€ç‚¹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> T,n,d,psize;</span><br><span class="line">ll v[maxn];</span><br><span class="line"><span class="keyword">bool</span> pd[maxn+<span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span> </span>&#123;</span><br><span class="line">psize=<span class="number">0</span>;</span><br><span class="line">pd[<span class="number">0</span>]=<span class="literal">true</span>;</span><br><span class="line">pd[<span class="number">1</span>]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=maxn; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!pd[i]) &#123;</span><br><span class="line">v[psize++]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>*i; j&lt;=maxn; j+=i) &#123;</span><br><span class="line">pd[j]=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line">work();</span><br><span class="line"><span class="keyword">while</span>(T--) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;d);</span><br><span class="line">ll res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;psize;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(v[i]*d&gt;=n)&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">res++;</span><br><span class="line"><span class="keyword">if</span>(d%v[i]==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> HDU </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå¼ˆè®ºä¸“é¢˜</title>
      <link href="2018/11/27/%E5%8D%9A%E5%BC%88%E8%AE%BA%E4%B8%93%E9%A2%98/"/>
      <url>2018/11/27/%E5%8D%9A%E5%BC%88%E8%AE%BA%E4%B8%93%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="åšå¼ˆå…¥é—¨"><a class="markdownIt-Anchor" href="#åšå¼ˆå…¥é—¨"></a> åšå¼ˆå…¥é—¨ï¼š</h1><h3 id="ä¸€å·´ä»€åšå¼ˆ"><a class="markdownIt-Anchor" href="#ä¸€å·´ä»€åšå¼ˆ"></a> ï¼ˆä¸€ï¼‰å·´ä»€åšå¼ˆï¼š</h3><p><strong>ç†è®º:</strong> åªæœ‰ä¸€å †nä¸ªç‰©å“,ä¸¤ä¸ªäººè½®æµä»è¿™å †ç‰©å“ä¸­å–ç‰©,è§„å®šæ¯æ¬¡è‡³å°‘å–ä¸€ä¸ª,æœ€å¤šå–mä¸ª.æœ€åå–å…‰è€…å¾—èƒœ.è‹¥n%(m+1)==0ï¼Œåˆ™å…ˆæ‰‹å¿…è´¥ï¼Œå¦åˆ™å…ˆæ‰‹å¿…èƒœã€‚</p><p>æ˜¾ç„¶,å¦‚æœn=m+1,é‚£ä¹ˆç”±äºä¸€æ¬¡æœ€å¤šåªèƒ½å–mä¸ª,æ‰€ä»¥,æ— è®ºå…ˆå–è€…æ‹¿èµ°å¤šå°‘ä¸ª,åå–è€…éƒ½èƒ½å¤Ÿä¸€æ¬¡æ‹¿èµ°å‰©ä½™çš„ç‰©å“,åè€…å–èƒœ.å› æ­¤æˆ‘ä»¬å‘ç°äº†å¦‚ä½•å–èƒœçš„æ³•åˆ™ï¼šå¦‚æœn=(m+1)r+s,(rä¸ºä»»æ„è‡ªç„¶æ•°,sâ‰¤m),é‚£ä¹ˆå…ˆå–è€…è¦æ‹¿èµ°sä¸ªç‰©å“,å¦‚æœåå–è€…æ‹¿èµ°k(â‰¤m)ä¸ª,é‚£ä¹ˆå…ˆå–è€…å†æ‹¿èµ°m+1-kä¸ª,ç»“æœå‰©ä¸‹(m+1)(r-1)ä¸ª,ä»¥åä¿æŒè¿™æ ·çš„å–æ³•,é‚£ä¹ˆå…ˆå–è€…è‚¯å®šè·èƒœ.æ€»ä¹‹,è¦ä¿æŒç»™å¯¹æ‰‹ç•™ä¸‹(m+1)çš„å€æ•°,å°±èƒ½æœ€åè·èƒœ.</p><p><strong>æ€»ç»“ï¼šnä¸ªç‰©å“ï¼Œæ¯æ¬¡æœ€å¤šå–mä¸ªï¼Œè‹¥n%ï¼ˆm+1ï¼‰==0 åˆ™åæ‰‹èƒœ ï¼Œåä¹‹å…ˆæ‰‹èƒœåˆ©*</strong></p><p><em><strong>ä¾‹é¢˜ï¼š</strong></em></p><ul><li>1.hdu1846 Brave Game</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> c,n,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;c;</span><br><span class="line"><span class="keyword">while</span>(c--) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> mod=n%(m+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(mod)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;first&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;second&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>2.hdu 2149 Public Sale</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> m,n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;m&gt;&gt;n) &#123;</span><br><span class="line"><span class="keyword">if</span>(n&gt;=m) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=m; i&lt;=n<span class="number">-1</span>; ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;n&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">int</span> mod=m%(n+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(mod) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;mod&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;none&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>3.hdu 2147 kikiâ€™s game</li></ul><p>PNå›¾æ‰“è¡¨åˆ†æ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m &amp;&amp;n&amp;&amp;m)&#123;</span><br><span class="line"><span class="keyword">if</span>(n%<span class="number">2</span>==<span class="number">0</span> || m%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Wonderful!\n&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;What a pity!\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒæ–æ³¢é‚£å¥‘åšå¼ˆ"><a class="markdownIt-Anchor" href="#äºŒæ–æ³¢é‚£å¥‘åšå¼ˆ"></a> ï¼ˆäºŒï¼‰æ–æ³¢é‚£å¥‘åšå¼ˆ</h3><p><strong>ç†è®º:</strong> å‡ºé—¨å·¦è½¬ <a href="https://blog.csdn.net/dgq8211/article/details/7602807">ä¼ é€é—¨</a></p><p><em><strong>ç»“è®ºï¼šæœ‰ä¸€å †çŸ³å­ï¼Œä¸¤ä¸ªé¡¶å°–èªæ˜çš„äººç©æ¸¸æˆï¼Œå…ˆå–è€…å¯ä»¥å–èµ°ä»»æ„å¤šä¸ªï¼Œä½†ä¸èƒ½å…¨å–å®Œï¼Œä»¥åæ¯äººå–çš„çŸ³å­æ•°ä¸èƒ½è¶…è¿‡ä¸Šä¸ªäººçš„ä¸¤å€ï¼Œå½“çŸ³å­æ•°ä¸ºæ–æ³¢é‚£å¥‘æ•° ï¼Œå…ˆæ‰‹è¾“ï¼Œåä¹‹å…ˆæ‰‹èµ¢ã€‚</strong></em></p><p><em><strong>ä¾‹é¢˜ï¼š</strong></em></p><p>hdu 2516 å–çŸ³å­æ¸¸æˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å½“çŸ³å­çš„æ•°é‡ä¸ºæ–æ³¢é‚£å¥‘æ•°æ—¶ï¼Œå…ˆæ‰‹å¿…è´¥ </span></span><br><span class="line"><span class="comment">//åä¹‹ï¼Œå…ˆæ‰‹èµ¢ </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> fib[<span class="number">50</span>];</span><br><span class="line">fib[<span class="number">0</span>]=<span class="number">2</span>,fib[<span class="number">1</span>]=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;<span class="number">50</span>;++i)&#123;</span><br><span class="line">fib[i]=fib[i<span class="number">-1</span>]+fib[i<span class="number">-2</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&amp;&amp;n)&#123;</span><br><span class="line"><span class="keyword">bool</span> flag=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">50</span>;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(n==fib[i])&#123;</span><br><span class="line">flag=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Second win&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(fib[i]&gt;n)&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!flag)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;First win&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="ä¸‰å¨ä½å¤«åšå¼ˆ"><a class="markdownIt-Anchor" href="#ä¸‰å¨ä½å¤«åšå¼ˆ"></a> ï¼ˆä¸‰ï¼‰å¨ä½å¤«åšå¼ˆ</h3><p><strong>ç†è®º:</strong> å‡ºé—¨å·¦è½¬ <a href="https://blog.csdn.net/qq_34374664/article/details/52814983">ä¼ é€é—¨</a></p><p><em><strong>ç»“è®ºï¼šæœ‰ä¸¤å †å„è‹¥å¹²ä¸ªç‰©å“ï¼Œä¸¤ä¸ªäººè½®æµä»ä»»æ„ä¸€å †ä¸­å–å‡ºè‡³å°‘ä¸€ä¸ªæˆ–è€…åŒæ—¶ä»ä¸¤å †ä¸­å–å‡ºåŒæ ·å¤šçš„ç‰©å“ï¼Œè§„å®šæ¯æ¬¡è‡³å°‘å–ä¸€ä¸ªï¼Œè‡³å¤šä¸é™ï¼Œæœ€åå–å…‰è€…èƒœåˆ©ã€‚ä¸¤å †ç‰©å“a,b , c=floor((b-a)*((sqrt(5.0)+1)/2)); è‹¥a==cåˆ™åæ‰‹èµ¢ï¼Œåä¹‹å…ˆæ‰‹èµ¢</strong></em></p><p><em><strong>ä¾‹é¢˜ï¼š</strong></em></p><p>hdu 1527 å–çŸ³å­æ¸¸æˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‹¥ç¬¦åˆå¥‡å¼‚å±€åŠ¿ï¼Œåˆ™å…ˆæ‰‹è¾“ï¼Œå¦åˆ™å…ˆæ‰‹èƒœ</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> a,b,c;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b)&#123;</span><br><span class="line"><span class="keyword">if</span>(a&gt;b)swap(a,b);</span><br><span class="line">c=<span class="built_in">floor</span>((b-a)*((<span class="built_in">sqrt</span>(<span class="number">5.0</span>)+<span class="number">1</span>)/<span class="number">2</span>));</span><br><span class="line"><span class="keyword">if</span>(a==c)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span><span class="built_in">cout</span>&lt;&lt;<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h3 id="å››å°¼å§†åšå¼ˆå’Œsgå‡½æ•°æœ‰å…³"><a class="markdownIt-Anchor" href="#å››å°¼å§†åšå¼ˆå’Œsgå‡½æ•°æœ‰å…³"></a> ï¼ˆå››ï¼‰å°¼å§†åšå¼ˆï¼ˆå’ŒSGå‡½æ•°æœ‰å…³ï¼‰</h3><p><strong>ç†è®º:</strong> æ¥å§ï¼Œè¿˜æ˜¯å‡ºé—¨å·¦è½¬ <a href="https://www.cnblogs.com/jiangjun/archive/2012/11/01/2749937.html">ä¼ é€é—¨</a></p><p><em><strong>ç»“è®ºï¼šæœ‰ä»»æ„å †ç‰©å“ï¼Œæ¯å †ç‰©å“çš„ä¸ªæ•°æ˜¯ä»»æ„çš„ï¼ŒåŒæ–¹è½®æµä»ä¸­å–ç‰©å“ï¼Œæ¯ä¸€æ¬¡åªèƒ½ä»ä¸€å †ç‰©å“ä¸­å–éƒ¨åˆ†æˆ–å…¨éƒ¨ç‰©å“ï¼Œæœ€å°‘å–ä¸€ä»¶ï¼Œå–åˆ°æœ€åä¸€ä»¶ç‰©å“çš„äººè·èƒœã€‚ ç»“è®ºå°±æ˜¯ï¼šæŠŠæ¯å †ç‰©å“æ•°å…¨éƒ¨å¼‚æˆ–èµ·æ¥ï¼Œå¦‚æœå¾—åˆ°çš„å€¼ä¸º0ï¼Œé‚£ä¹ˆå…ˆæ‰‹å¿…è´¥ï¼Œå¦åˆ™å…ˆæ‰‹å¿…èƒœã€‚</strong></em></p><ul><li><strong>é‡ç‚¹</strong>ï¼š<br /><em><strong>SGå‡½æ•°ç®—æ˜¯åšå¼ˆé‡Œæœ€é‡è¦çš„éƒ¨åˆ†äº†ï¼Œèœé¸¡ç»è¿‡å‡ å¤©çš„å­¦ä¹ ä¹Ÿç®—æ˜¯ç•¥æœ‰äº†è§£ ï¼Œä¸æ˜¯å¤ªæ¸…æ¥šçš„å¯ä»¥æœå¤§ä½¬çš„åšå®¢äº†è§£ä¸€ä¸‹ï¼ˆç­‰è‡ªå·±å¯¹SGæœ‰è‡ªå·±ç†è§£æ—¶å†æ¥æ›´æ–°</strong></em></li></ul><p><em><strong>æ€»ç»“ï¼šæ— ä¸€ä¾‹å¤–è¦ç®—sgå‡½æ•°ï¼Œå¦‚æœæ¸¸æˆçš„sgå€¼ä¸º0ï¼ˆå³å„ä¸ªç‚¹çš„å¼‚æˆ–å’Œä¸º0ï¼‰ï¼Œå…ˆæ‰‹å¿…è´¥ï¼Œåä¹‹å…ˆæ‰‹èƒœåˆ©</strong></em></p><p><em><strong>ä¾‹é¢˜ï¼š</strong></em></p><p>hdu 1850 Being a Good Boy in Spring Festival</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> m;</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">105</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;m&amp;&amp;m)&#123;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>,cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">ans^=a[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(ans==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line"><span class="keyword">int</span> k=ans^a[i];</span><br><span class="line"><span class="keyword">if</span>(k&lt;a[i])&#123;</span><br><span class="line">cnt++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;cnt&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>hdu 1847 Good Luck in CET-4 Everybody!</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,a[<span class="number">15</span>],sg[<span class="number">1005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mex</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(sg[x] != <span class="number">-1</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> sg[x];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">1005</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">1005</span>; ++i)</span><br><span class="line">vis[i]=<span class="literal">false</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=<span class="number">10</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> temp=x-a[i];</span><br><span class="line"><span class="keyword">if</span>(temp&lt;<span class="number">0</span>)<span class="keyword">break</span>;</span><br><span class="line">sg[temp]=mex(temp);</span><br><span class="line">vis[sg[temp]]=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[i])&#123;</span><br><span class="line">sg[x]=i;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sg[x];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">a[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">10</span>; ++i) &#123;</span><br><span class="line">a[i]=a[i<span class="number">-1</span>]*<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n) &#123;</span><br><span class="line"><span class="built_in">memset</span>(sg,<span class="number">-1</span>,<span class="keyword">sizeof</span>(sg));</span><br><span class="line"><span class="keyword">if</span>(mex(n)) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Kiki&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Cici&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n)) &#123;</span><br><span class="line"><span class="keyword">if</span>(n%<span class="number">3</span>==<span class="number">0</span>)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Cici\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Kiki\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>poj 2960 S-Nim</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> s[<span class="number">200</span>],sg[<span class="number">10020</span>],vis[<span class="number">20000</span>];</span><br><span class="line"><span class="keyword">int</span> k,m;</span><br><span class="line"><span class="keyword">int</span> l,h[<span class="number">200</span>];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getSg</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">sg[<span class="number">0</span>] = <span class="number">0</span>;<span class="comment">//ä¸»è¦æ˜¯è®©ç»ˆæ­¢çŠ¶æ€çš„sgä¸º0</span></span><br><span class="line"><span class="built_in">memset</span>(vis, <span class="number">-1</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;=n ; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;=k &amp;&amp; s[j] &lt;= i; j++) &#123;</span><br><span class="line">vis[sg[i-s[j]]]=i;<span class="comment">//å°†æ‰€æœ‰åç»§çš„sgæ ‡è®°ä¸ºiï¼Œç„¶åæ‰¾åˆ°åç»§çš„sgæ²¡æœ‰å‡ºç°è¿‡çš„æœ€å°æ­£æ•´æ•°</span></span><br><span class="line"><span class="comment">//ä¼˜åŒ–ï¼šæ³¨æ„è¿™å„¿æ˜¯æ ‡è®°æˆäº†iï¼Œåˆšå¼€å§‹æ ‡è®°æˆäº†1ï¼Œè¿™æ ·æ¯æ¬¡éœ€åˆå§‹åŒ–mkï¼Œè€Œæ ‡è®°æˆiå°±ä¸éœ€è¦äº†</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(vis[j] == i) j++;</span><br><span class="line">sg[i] = j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;k)!=EOF &amp;&amp; k) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,s+i);</span><br><span class="line">&#125;</span><br><span class="line">sort(s+<span class="number">1</span>,s+<span class="number">1</span>+k);</span><br><span class="line">getSg(<span class="number">10005</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;m);</span><br><span class="line"><span class="keyword">while</span>(m--) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;l);</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=l; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,h+i);</span><br><span class="line">ans^=sg[h[i]];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(ans) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;W&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;L&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>luogu 1290 æ¬§å‡ é‡Œå¾·çš„æ¸¸æˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> T, m, n;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (!m)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (n/m == <span class="number">1</span>)<span class="keyword">return</span> !solve(m, n%m);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;T);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= T; i++) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line"><span class="keyword">if</span> (solve(max(n, m), min(n, m)))</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Stan wins\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Ollie wins\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><s>æ›´æ–°.jpg</s></p><p>ğŸ’©</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> ä¸“é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå¼ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ®µæ ‘åŸºç¡€æ¨¡æ¿</title>
      <link href="2018/11/17/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/"/>
      <url>2018/11/17/%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%9F%BA%E7%A1%80%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<p>é‡æ¸©äº†ä¸€éçº¿æ®µæ ‘</p><p><a href="https://blog.csdn.net/zearot/article/details/48299459">https://blog.csdn.net/zearot/article/details/48299459</a></p><p>luoguæ¿å­é¢˜https://www.luogu.org/problemnew/show/P3372</p><h3 id="æŸ¥è¯¢åŒºé—´å’Œ"><a class="markdownIt-Anchor" href="#æŸ¥è¯¢åŒºé—´å’Œ"></a> æŸ¥è¯¢åŒºé—´å’Œ</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line">ll sum[maxn&lt;&lt;<span class="number">2</span>],add[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line">ll a[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line">sum[rt]=sum[rt&lt;&lt;<span class="number">1</span>]+sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line">sum[rt]=a[l];</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(rt&lt;&lt;<span class="number">1</span>,l,mid);</span><br><span class="line">build(rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid+<span class="number">1</span>,r);</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> ln,<span class="keyword">int</span> rn)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(add[rt])&#123;</span><br><span class="line">add[rt&lt;&lt;<span class="number">1</span>]+=add[rt];</span><br><span class="line">add[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=add[rt];</span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>]+=add[rt]*ln;</span><br><span class="line">sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=add[rt]*rn;</span><br><span class="line">add[rt]=<span class="number">0</span>; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//range change</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> C,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l&amp;&amp;R&gt;=r)&#123;</span><br><span class="line">sum[rt]+=C*(r-l+<span class="number">1</span>);</span><br><span class="line">add[rt]+=C;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">pushdown(rt,mid-l+<span class="number">1</span>,r-mid);</span><br><span class="line"><span class="keyword">if</span>(L&lt;=mid)&#123;</span><br><span class="line">update(L,R,C,l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(R&gt;mid)&#123;</span><br><span class="line">update(L,R,C,mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l&amp;&amp;R&gt;=r)&#123;</span><br><span class="line"><span class="keyword">return</span> sum[rt];</span><br><span class="line">&#125;</span><br><span class="line">ll ans=<span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">pushdown(rt,mid-l+<span class="number">1</span>,r-mid);</span><br><span class="line"><span class="keyword">if</span>(L&lt;=mid)&#123;</span><br><span class="line">ans+=query(L,R,l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(R&gt;mid)&#123;</span><br><span class="line">ans+=query(L,R,mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>); </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line">ll n,m;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,a+i);</span><br><span class="line">&#125;</span><br><span class="line">build(<span class="number">1</span>,<span class="number">1</span>,n);</span><br><span class="line">ll t,x,y,k;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;t);</span><br><span class="line"><span class="keyword">if</span>(t==<span class="number">1</span>)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;k;</span><br><span class="line">update(x,y,k,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(t==<span class="number">2</span>)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;query(x,y,<span class="number">1</span>,n,<span class="number">1</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹åŒºé—´æŸ¥è¯¢æœ€å€¼"><a class="markdownIt-Anchor" href="#ä¿®æ”¹åŒºé—´æŸ¥è¯¢æœ€å€¼"></a> ä¿®æ”¹åŒºé—´æŸ¥è¯¢æœ€å€¼</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">ll mx;</span><br><span class="line">ll mi;</span><br><span class="line">&#125; s[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line">ll add[maxn&lt;&lt;<span class="number">2</span>];</span><br><span class="line">ll a[maxn];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line">s[rt].mx=max(s[rt&lt;&lt;<span class="number">1</span>].mx,s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx);</span><br><span class="line">s[rt].mi=min(s[rt&lt;&lt;<span class="number">1</span>].mi,s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mi);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;</span><br><span class="line">s[rt].mx=a[l];</span><br><span class="line">s[rt].mi=a[l];</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">build(rt&lt;&lt;<span class="number">1</span>,l,mid);</span><br><span class="line">build(rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,mid+<span class="number">1</span>,r);</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> rt,<span class="keyword">int</span> ln,<span class="keyword">int</span> rn)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(add[rt]) &#123;</span><br><span class="line">add[rt&lt;&lt;<span class="number">1</span>]+=add[rt],add[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=add[rt];</span><br><span class="line">s[rt&lt;&lt;<span class="number">1</span>].mx+=add[rt],s[rt&lt;&lt;<span class="number">1</span>].mi+=add[rt];</span><br><span class="line">s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx+=add[rt],s[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mi+=add[rt];</span><br><span class="line">add[rt]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> C,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(L&lt;=l&amp;&amp;R&gt;=r) &#123;</span><br><span class="line">s[rt].mx+=C,s[rt].mi+=C;</span><br><span class="line">add[rt]+=C;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">pushdown(rt,mid-l+<span class="number">1</span>,r-mid);</span><br><span class="line"><span class="keyword">if</span>(L&lt;=mid) &#123;</span><br><span class="line">update(L,R,C,l,mid,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(R&gt;mid) &#123;</span><br><span class="line">update(L,R,C,mid+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">pushup(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line"><span class="keyword">int</span> l,r;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">&#125;</span><br><span class="line">build(<span class="number">1</span>,<span class="number">1</span>,n);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;S :&quot;</span>&lt;&lt;s[<span class="number">1</span>].mx&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;s[<span class="number">1</span>].mi&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;l&gt;&gt;r;</span><br><span class="line">update(l,r,<span class="number">-1</span>,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">&quot; :&quot;</span>&lt;&lt;s[<span class="number">1</span>].mx&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;s[<span class="number">1</span>].mi&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€çŸ­è·¯ç®—æ³•æ¡¶ï¼ˆDijkstraï¼ŒFloydï¼ŒBellman-Fordï¼ŒSpfaï¼‰</title>
      <link href="2018/11/14/%E6%9C%80%E7%9F%AD%E8%B7%AF%E7%AE%97%E6%B3%95%E6%A1%B6/"/>
      <url>2018/11/14/%E6%9C%80%E7%9F%AD%E8%B7%AF%E7%AE%97%E6%B3%95%E6%A1%B6/</url>
      
        <content type="html"><![CDATA[<p><em><strong>è‡ªå·±å¯¹æœ€çŸ­è·¯çš„ç®€å•æ€»ç»“å¹¶ä¸æ¶‰åŠè¯¦è§£</strong></em></p><h2 id=""><a class="markdownIt-Anchor" href="#"></a> </h2><h2 id="1dijkstra"><a class="markdownIt-Anchor" href="#1dijkstra"></a> 1.Dijkstra</h2><p><em><strong>ç®—æ³•æ€æƒ³</strong></em>ï¼šï¼ˆæ±‚å•æºæœ€çŸ­è·¯ï¼Œæœ´ç´ ç®—æ³•å¤æ‚åº¦O(n^2)ï¼Œå †ä¼˜åŒ–O(nlogn)</p><p>å°†ç‚¹åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»ä¸ºå·²è¢«æ›´æ–°æœ€çŸ­è·ç¦»çš„ç‚¹ä¸ºâ€œæ ‡è®°ç‚¹â€ï¼Œå¦ä¸€ç±»ä¸ºè¿˜æ²¡æœ‰è¢«æ›´æ–°æœ€çŸ­è·ç¦»çš„ç‚¹ä¸ºâ€œæœªæ ‡è®°ç‚¹â€ã€‚åˆå§‹dist[i]=INF</p><p>ä¸€å¼€å§‹å°†èµ·ç‚¹åˆ°èµ·ç‚¹çš„è·ç¦»æ ‡è®°ä¸º0ï¼ŒåŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆdistä»å°åˆ°å¤§æ’åºï¼‰ï¼›æ¯æ¬¡å–distæœ€å°çš„ç‚¹ï¼ˆå³ä¸èµ·å§‹ç‚¹è·ç¦»æœ€å°çš„ç‚¹ï¼‰è®¾ä¸ºâ€œæ ‡è®°ç‚¹â€ï¼Œç„¶åæšä¸¾å’Œè¯¥ç‚¹ç›¸è¿çš„ç‚¹ï¼Œæ›´æ–°ä»–ä»¬çš„æœ€çŸ­è·¯dist[i]ï¼Œæ›´æ–°çš„åŸåˆ™å°±æ˜¯ä»¥è¯¥ç‚¹ä¸ºä¸­è½¬ç‚¹ï¼Œæ›´æ–°æ–¹ç¨‹ä¸ºdist[i]=min(dist[j]+nw,dist[i]) [ jä¸ºä¸­è½¬ç‚¹ï¼Œiä¸ºæ›´æ–°ç‚¹ï¼Œwä¸ºjåˆ°içš„æƒå€¼ ] ç„¶åå°†ä¸è¯¥ç‚¹ç›¸å…³è”çš„ç‚¹éƒ½åŠ å…¥é˜Ÿåˆ—ï¼Œå¾ªç¯å¾€å¤ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºã€‚æœ€åå…¨éƒ¨çš„ç‚¹éƒ½è®¿é—®å®Œæ¯•æ—¶ï¼Œdistéƒ½è¢«æ›´æ–°ï¼Œå³èµ·ç‚¹åˆ°åˆ°è¯¥ç‚¹çš„æœ€çŸ­è·¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">3e5</span>+<span class="number">5</span>;</span><br><span class="line">ll n,m,ss,ee;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">ll p; <span class="comment">//å½“å‰ç‚¹ </span></span><br><span class="line">ll dis; <span class="comment">//èµ·å§‹ç‚¹åˆ°è¯¥ç‚¹çš„æœ€çŸ­è·ç¦» </span></span><br><span class="line">node(ll np=<span class="number">0</span>,ll ndis=<span class="number">0</span>) &#123;</span><br><span class="line">p=np,dis=ndis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> node&amp; x)<span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> dis&gt;x.dis;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line">ll id; </span><br><span class="line">ll to;</span><br><span class="line">ll w;</span><br><span class="line">edge(ll nid=<span class="number">0</span>,ll nto=<span class="number">0</span>,ll nw=<span class="number">0</span>) &#123;</span><br><span class="line">id=nid,to=nto,w=nw;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; e[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line">ll dist[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">(<span class="keyword">int</span> start)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dist));</span><br><span class="line"><span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">dist[start]=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;node&gt; q;</span><br><span class="line">q.push(node(start,<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">node tmp=q.top();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">int</span> np=tmp.p;</span><br><span class="line"><span class="keyword">if</span>(vis[np])</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">vis[np]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;e[np].size(); ++i) &#123;</span><br><span class="line">edge ne=e[np][i];</span><br><span class="line">ll nto=ne.to;</span><br><span class="line">ll nw=ne.w;</span><br><span class="line">ll nid=ne.id;</span><br><span class="line"><span class="keyword">if</span>(dist[nto]&gt;dist[np]+nw) &#123;</span><br><span class="line">dist[nto]=dist[np]+nw;</span><br><span class="line">q.push(node(nto,dist[nto])); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld%lld&quot;</span>,&amp;n,&amp;m,&amp;ss,&amp;ee);</span><br><span class="line">ll x,y,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;x,&amp;y,&amp;w);<span class="comment">//æ— å‘å›¾å»ºå›¾ </span></span><br><span class="line">e[x].push_back(edge(i,y,w));</span><br><span class="line">e[y].push_back(edge(i,x,w));</span><br><span class="line">&#125;</span><br><span class="line">Dijkstra(ss);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dist[ee]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>ä¾‹é¢˜ï¼š<a href="https://www.luogu.org/problemnew/show/P2384">https://www.luogu.org/problemnew/show/P2384</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">3e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> ll mod=<span class="number">9987</span>;</span><br><span class="line">ll n,m,k;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">ll p; <span class="comment">//å½“å‰ç‚¹ </span></span><br><span class="line">ll dis; <span class="comment">//èµ·å§‹ç‚¹åˆ°è¯¥ç‚¹çš„æœ€çŸ­è·ç¦» </span></span><br><span class="line">node(ll np=<span class="number">0</span>,ll ndis=<span class="number">0</span>) &#123;</span><br><span class="line">p=np,dis=ndis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> node&amp; x)<span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> dis&gt;x.dis;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line">ll id; </span><br><span class="line">ll to;</span><br><span class="line">ll w;</span><br><span class="line">edge(ll nid=<span class="number">0</span>,ll nto=<span class="number">0</span>,ll nw=<span class="number">0</span>) &#123;</span><br><span class="line">id=nid,to=nto,w=nw;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; e[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line">ll dist[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dist));</span><br><span class="line"><span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">dist[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;node&gt; q;</span><br><span class="line">q.push(node(<span class="number">1</span>,<span class="number">0</span>));</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">node tmp=q.top();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">int</span> np=tmp.p;</span><br><span class="line"><span class="keyword">if</span>(vis[np])</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">vis[np]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)e[np].size(); ++i) &#123;</span><br><span class="line">edge ne=e[np][i];</span><br><span class="line">ll nto=ne.to;</span><br><span class="line">ll nw=ne.w;</span><br><span class="line">ll nid=ne.id;</span><br><span class="line"><span class="keyword">if</span>(dist[np]==<span class="number">0</span>)&#123;</span><br><span class="line">dist[nto]=(dist[np]+nw)%mod;</span><br><span class="line">q.push(node(nto,dist[nto]));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(dist[nto]&gt;dist[np]*nw) &#123;</span><br><span class="line">dist[nto]=(dist[np]*nw)%mod;</span><br><span class="line">q.push(node(nto,dist[nto])); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">ll x,y,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;x,&amp;y,&amp;w);<span class="comment">//æœ‰å‘å›¾å»ºå›¾ </span></span><br><span class="line">e[x].push_back(edge(i,y,w));</span><br><span class="line">&#125;</span><br><span class="line">Dijkstra();</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dist[n]%mod&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h2 id="2floyd"><a class="markdownIt-Anchor" href="#2floyd"></a> 2.Floyd</h2><p><em><strong>ç®—æ³•æ€æƒ³</strong></em>ï¼š(æ±‚å¤šæºæœ€çŸ­è·¯ï¼Œç®—æ³•å¤æ‚åº¦O(n^3)</p><p>3å±‚å¾ªç¯ï¼Œç¬¬ä¸€å±‚æšä¸¾ä¸­é—´ç‚¹k(ä»¥kä¸ºä¸­è½¬ç‚¹)ï¼Œç¬¬äºŒå±‚ä¸ç¬¬ä¸‰å±‚æšä¸¾ä¸¤ä¸ªç«¯ç‚¹iï¼Œjã€‚è‹¥æœ‰dis[i][j] &gt; dis[i][k] + dis[k][j] åˆ™æŠŠdis[i][j]æ›´æ–°æˆdis[i][k] + dis[k][j]ã€‚ä¸æ–­å»æ›´æ–°dis[i][j],å°±æ˜¯ä¸€ç§dpçš„æ€æƒ³ï¼Œå› ä¸ºç®—æ³•å¤æ‚åº¦é«˜ï¼Œä¸€èˆ¬åªæœ‰æ•°æ®é‡å°çš„æ—¶å€™æ‰ç”¨å¾—ä¸Šã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=INT_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=INT_MIN;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line">ll n,m;</span><br><span class="line">ll e[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(i==j)e[i][j]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span>e[i][j]=INF;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ll x,y,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;x,&amp;y,&amp;w);<span class="comment">//æœ‰å‘å›¾å»ºå›¾</span></span><br><span class="line">e[x][y]=w;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>; k&lt;=n; k++) &#123; <span class="comment">//ç»è¿‡kç‚¹</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123; <span class="comment">//æšä¸¾èµ·ç‚¹ç»ˆç‚¹ï¼Œçœ‹è·¯å¾„èƒ½ä¸èƒ½å‡å°‘</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++)</span><br><span class="line"><span class="keyword">if</span>(e[i][j]&gt;e[i][k]+e[k][j])</span><br><span class="line">e[i][j]=e[i][k]+e[k][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;<span class="comment">//ä»iåˆ°jçš„æœ€çŸ­è·ç¦» </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld&quot;</span>,e[i][j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹é¢˜ï¼š<a href="https://www.luogu.org/problemnew/show/P2888">https://www.luogu.org/problemnew/show/P2888</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=INT_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=INT_MIN;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line">ll n,m,k;</span><br><span class="line">ll e[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;n,&amp;m,&amp;k);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(i==j)e[i][j]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span>e[i][j]=INF;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ll x,y,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;x,&amp;y,&amp;w);</span><br><span class="line">e[x][y]=w;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>; k&lt;=n; k++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">e[i][j]=min(max(e[i][k],e[k][j]),e[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;x,&amp;y);</span><br><span class="line"><span class="keyword">if</span>(e[x][y]==INF)<span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span><span class="built_in">cout</span>&lt;&lt;e[x][y]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3bellman-ford"><a class="markdownIt-Anchor" href="#3bellman-ford"></a> 3.Bellman-Ford</h2><p>***ç®—æ³•æ€æƒ³ï¼š**<em>Bellman-Fordä¹Ÿæ˜¯æ¥ç®—å•æºæœ€çŸ­è·¯çš„ï¼Œä½†æ˜¯å¤æ‚åº¦æ˜¯O(v</em>e),æ˜¯é«˜äºDijkstraçš„ï¼Œä½†æ˜¯å®ƒå¯ä»¥ç”¨æ¥æ£€æµ‹è´Ÿæƒå›è·¯ï¼Œå’Œå¸¦è´Ÿå€¼çš„æœ€çŸ­è·¯ã€‚</p><p>å°±æ˜¯ç»è¿‡v-1æ¬¡æ¾å¼›ï¼ˆåˆå§‹ç‚¹å›ºå®šäº†ï¼Œæœ€å·®çš„æƒ…å†µä¹Ÿæ˜¯æ¯ä¸€æ¬¡æ¾å¼›åªæ¾å¼›ä¸€ä¸ªç‚¹ï¼Œæœ‰v-1ä¸ªï¼‰ï¼Œæ¯æ¬¡å»å°è¯•æ‰€æœ‰çš„è¾¹èƒ½å¦å»æ¾å¼›å„ä¸ªç‚¹ã€‚æ¾å¼›è¿‡åï¼Œå¦‚æœå†è¿›è¡Œä¸€æ¬¡æ¾å¼›è¿˜èƒ½è¢«æ¾å¼›çš„è¯ï¼Œåˆ™è¯´æ˜å­˜åœ¨è´Ÿæƒå›è·¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> dist[maxn];</span><br><span class="line"><span class="keyword">int</span> v,e;</span><br><span class="line"><span class="comment">//é¡¶ç‚¹å’Œè¾¹</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> s;</span><br><span class="line"><span class="keyword">int</span> e;</span><br><span class="line"><span class="keyword">int</span> w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; tt;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bellmanFord</span><span class="params">(<span class="keyword">int</span> src)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dist));</span><br><span class="line">dist[src]=<span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;v; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;e; ++j) &#123;</span><br><span class="line"><span class="keyword">int</span> s=tt[j].s;</span><br><span class="line"><span class="keyword">int</span> e=tt[j].e;</span><br><span class="line"><span class="keyword">int</span> w=tt[j].w;</span><br><span class="line"><span class="keyword">if</span>(dist[s]!=INF &amp;&amp; dist[e]&gt;dist[s]+w) &#123;</span><br><span class="line">dist[e]=dist[s]+w;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æµ‹è´Ÿæƒå›è·¯</span></span><br><span class="line"><span class="keyword">bool</span> isBack=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;e; ++j) &#123;</span><br><span class="line"><span class="keyword">int</span> s=tt[j].s;</span><br><span class="line"><span class="keyword">int</span> e=tt[j].e;</span><br><span class="line"><span class="keyword">int</span> w=tt[j].w;</span><br><span class="line"><span class="keyword">if</span>(dist[s]!=INF &amp;&amp; dist[e]&gt;dist[s]+w) &#123;</span><br><span class="line">isBack=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> isBack;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;v&gt;&gt;e;</span><br><span class="line"><span class="keyword">int</span> ns,ne,nw;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;e; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;ns&gt;&gt;ne&gt;&gt;nw;</span><br><span class="line">tt.push_back(edge &#123;ns,ne,nw&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> res=bellmanFord(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(res) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;æœ‰è´Ÿæƒå›è·¯&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;æ— è´Ÿæƒå›è·¯&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=v; ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dist[i]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4spfa"><a class="markdownIt-Anchor" href="#4spfa"></a> 4.Spfa</h2><p>***ç®—æ³•æ€æƒ³ï¼š***SPFA ç®—æ³•æ˜¯ Bellman-Fordç®—æ³• çš„é˜Ÿåˆ—ä¼˜åŒ–ç®—æ³•çš„åˆ«ç§°ï¼Œé€šå¸¸ç”¨äºæ±‚å«è´Ÿæƒè¾¹çš„å•æºæœ€çŸ­è·¯å¾„ï¼Œä»¥åŠåˆ¤è´Ÿæƒç¯ã€‚</p><p>ç”¨ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—æ¥ç»´æŠ¤ï¼Œæ¯æ¬¡å–å‡ºé˜Ÿé¦–ç»“ç‚¹p,ç„¶åç”¨è¯¥ç‚¹å»æ¾å¼›å’Œå®ƒç›¸è¿çš„ç‚¹toï¼Œå¦‚æœåˆ°dist[to]è¢«å‡å°ï¼Œå¹¶ä¸”æ­¤æ—¶é˜Ÿåˆ—ä¸­æ²¡æœ‰è¿™ä¸ªç‚¹ï¼Œé‚£å°±å°†å…¶åŠ å…¥é˜Ÿåˆ—ï¼ˆå› ä¸ºï¼Œé˜Ÿåˆ—åªæ˜¯ç»´æŠ¤çš„ç‚¹ï¼Œå‡è®¾tå·²ç»åœ¨é˜Ÿåˆ—ä¸­ï¼Œç›¸åŒçš„ç‚¹tå­˜å‚¨çš„distä¿¡æ¯æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œdist[t]è¢«å‡å°ï¼Œå†å°†tç‚¹åŠ å…¥é˜Ÿåˆ—æ¯«æ— æ„ä¹‰ï¼‰ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºã€‚</p><ul><li><strong>åˆ¤æ–­è´Ÿæƒç¯</strong>ï¼šå¦‚æœä¸€ä¸ªç‚¹è¢«åŠ å…¥é˜Ÿåˆ—æ¬¡æ•°è¶…è¿‡é¡¶ç‚¹æ•°Vï¼Œåˆ™å­˜åœ¨è´Ÿæƒç¯ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> dist[maxn];<span class="comment">//è·ç¦»</span></span><br><span class="line"><span class="keyword">int</span> pushnum[maxn];<span class="comment">//å…¥é˜Ÿæ¬¡æ•°</span></span><br><span class="line"><span class="keyword">bool</span> vis[maxn];<span class="comment">//æ˜¯å¦å…¥é˜Ÿä¸­</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> to;</span><br><span class="line"><span class="keyword">int</span> w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; tt[maxn];</span><br><span class="line"><span class="keyword">int</span> N,M,S;</span><br><span class="line"><span class="comment">//ç‚¹æ•°ï¼Œè¾¹æ•°ï¼Œèµ·ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> start)</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dist,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(dist));</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line"><span class="built_in">memset</span>(pushnum,<span class="number">0</span>,<span class="keyword">sizeof</span>(pushnum));</span><br><span class="line">dist[start]=<span class="number">0</span>;</span><br><span class="line">vis[start]=<span class="literal">true</span>;</span><br><span class="line">pushnum[start]++;</span><br><span class="line"> </span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">q.push(start);</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line"><span class="keyword">int</span> p=q.front();</span><br><span class="line">q.pop();</span><br><span class="line">vis[p]=<span class="literal">false</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;(<span class="keyword">int</span>)tt[p].size(); ++i) &#123;</span><br><span class="line">edge tmp=tt[p][i];</span><br><span class="line"><span class="keyword">if</span>(dist[tmp.to]&gt;dist[p]+tmp.w) &#123;</span><br><span class="line">dist[tmp.to]=dist[p]+tmp.w;</span><br><span class="line"><span class="keyword">if</span>(vis[tmp.to]==<span class="literal">false</span>) &#123;</span><br><span class="line">q.push(tmp.to);</span><br><span class="line">vis[tmp.to]=<span class="literal">true</span>;</span><br><span class="line">pushnum[tmp.to]++;</span><br><span class="line"><span class="keyword">if</span>(pushnum[tmp.to]&gt;N) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;N&gt;&gt;M&gt;&gt;S;</span><br><span class="line"><span class="keyword">int</span> x,y,z;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;M; ++i) &#123;<span class="comment">//æœ‰å‘å›¾å»ºå›¾</span></span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line">tt[x].push_back(edge &#123;y,z&#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(spfa(S)) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=N; ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;dist[i]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;æœ‰è´Ÿç¯&quot;</span>&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœ€çŸ­è·¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>D. Edge Deletion</title>
      <link href="2018/11/13/Edge%20Deletion/"/>
      <url>2018/11/13/Edge%20Deletion/</url>
      
        <content type="html"><![CDATA[<p><a href="http://codeforces.com/contest/1076/problem/D">ä¼ é€é—¨</a></p><p>å­¦ä¹ æ¥è‡ªäºï¼š<a href="http://www.cnblogs.com/Lubixiaosi-Zhaocao/p/9951711.html">http://www.cnblogs.com/Lubixiaosi-Zhaocao/p/9951711.html</a></p><p>é¢˜ç›®å¤§æ„ï¼š</p><p>ä¸€ä¸ªæ— å‘å›¾ï¼Œå„ç‚¹åˆ°ç‚¹1çš„æœ€çŸ­è·ç¦»ä¸ºdiï¼Œä¿è¯æ»¡è¶³æ¡ä»¶åˆ é™¤m-kæ¡è¾¹ä¹‹åä½¿å¾—åˆ°ç‚¹1çš„è·ç¦»ä»ä¸ºdiçš„ç‚¹æ•°é‡æœ€å¤šçš„æƒ…å†µä¸‹ï¼Œè¾“å‡ºå‰©ä½™çš„kæ¡è¾¹çš„ç¼–å·ï¼ˆè¾“å…¥é¡ºåºå³ç¼–å·ï¼‰</p><p>æ€è·¯ï¼š<br />å› ä¸ºéƒ½æ˜¯å’Œ1çš„æœ€çŸ­è·ç¦»ï¼Œæ˜¯å•æºæœ€çŸ­è·¯ï¼Œæ‰€ä»¥åº”è¯¥ä¼šç”¨åˆ°Dijkstraç®—æ³•ï¼Œä½†æ˜¯ä»–è¦è¾“å‡ºå‰©ä½™çš„kæ¡è¾¹ï¼Œè¿™é‡Œå¯ä»¥ç”¨ä¸€ä¸ªbfsï¼Œè´ªå¿ƒä»1å·å¼€å§‹å–å’Œä»¥1å·ä¸ºå‰é©±ä¸ºæœ€çŸ­è·ç¦»çš„è¾¹ï¼Œç„¶åå†å°†è¿™æ¡è¾¹çš„å¦ä¸€ä¸ªèŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ã€‚æ‰€ä»¥åœ¨è·‘Dijkstraæ—¶ï¼Œè¦ä¿å­˜åˆ°ç‚¹iæœ€çŸ­è·¯çš„å‰é©±father[i], æœ€åå°±æ˜¯åœ¨è¿™ä¸€é¢—ç”±æœ€çŸ­è·¯æ„æˆçš„æ ‘ä¸Šbfs</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">3e5</span>+<span class="number">5</span>;</span><br><span class="line">ll n,m,k;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">ll p; <span class="comment">//å½“å‰ç‚¹ </span></span><br><span class="line">ll dis; <span class="comment">//åˆ°æ”¹ç‚¹çš„è·ç¦» </span></span><br><span class="line">node(ll np=<span class="number">0</span>,ll ndis=<span class="number">0</span>) &#123;</span><br><span class="line">p=np,dis=ndis;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(<span class="keyword">const</span> node&amp; x)<span class="keyword">const</span> &#123;</span><br><span class="line"><span class="keyword">return</span> dis&gt;x.dis;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">edge</span> &#123;</span></span><br><span class="line">ll id; </span><br><span class="line">ll to;</span><br><span class="line">ll w;</span><br><span class="line">edge(ll nid=<span class="number">0</span>,ll nto=<span class="number">0</span>,ll nw=<span class="number">0</span>) &#123;</span><br><span class="line">id=nid,to=nto,w=nw;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">ll father[maxn],faedge[maxn];</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; e[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line">ll dist[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijkstra</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(dist, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dist));</span><br><span class="line"><span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">dist[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">father[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;node&gt; q;</span><br><span class="line">q.push(node(<span class="number">1</span>,<span class="number">0</span>));</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">node tmp=q.top();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">int</span> np=tmp.p;</span><br><span class="line"><span class="keyword">if</span>(vis[np])</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">vis[np]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;e[np].size(); ++i) &#123;</span><br><span class="line">edge ne=e[np][i];</span><br><span class="line">ll nto=ne.to;</span><br><span class="line">ll nw=ne.w;</span><br><span class="line">ll nid=ne.id;</span><br><span class="line"><span class="keyword">if</span>(dist[nto]&gt;dist[np]+nw) &#123;</span><br><span class="line">dist[nto]=dist[np]+nw;</span><br><span class="line">father[nto]=np; <span class="comment">//è®°å½•ntoçš„å‰é©± ï¼ˆç›¸å½“äºçˆ¶äº² </span></span><br><span class="line">faedge[nto]=nid; <span class="comment">//å¹¶è®°å½•ntoçš„å‰é©±è¾¹ </span></span><br><span class="line">q.push(node(nto,dist[nto])); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ans;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; son[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">q.push(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">while</span>(!q.empty()&amp;&amp;k&gt;<span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">int</span> tmp=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;son[tmp].size(); ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> v=son[tmp][i];</span><br><span class="line"><span class="keyword">if</span>(k&gt;<span class="number">0</span>) &#123;</span><br><span class="line">ans.push_back(faedge[v]);</span><br><span class="line">q.push(v);</span><br><span class="line">k--;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;n,&amp;m,&amp;k);</span><br><span class="line">ll x,y,w;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; ++i) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;x,&amp;y,&amp;w);</span><br><span class="line">e[x].push_back(edge(i,y,w));</span><br><span class="line">e[y].push_back(edge(i,x,w));</span><br><span class="line">&#125;</span><br><span class="line">Dijkstra();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=n; i++) &#123;</span><br><span class="line">son[father[i]].push_back(i); <span class="comment">//å°†çˆ¶äº²å…³ç³»è½¬åŒ–æˆå„¿å­å…³ç³» </span></span><br><span class="line">&#125;</span><br><span class="line">bfs();</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans.size()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;ans.size(); ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans[i]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p><s>ä¸å†™è¿™ä¸ªæˆ‘éƒ½å¿«æŠŠæœ€çŸ­è·¯ç»™å¿˜äº†</s></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´ªå¿ƒ </tag>
            
            <tag> æœç´¢ </tag>
            
            <tag> æœ€çŸ­è·¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU 1356 The Balance &amp;&amp; POJ2142</title>
      <link href="2018/11/11/(HDU)1356%20The%20Balance%20&amp;&amp;%20POJ2142/"/>
      <url>2018/11/11/(HDU)1356%20The%20Balance%20&amp;&amp;%20POJ2142/</url>
      
        <content type="html"><![CDATA[<p>é‡æ–°å¤ä¹ äº†ä¸€éæ‰©å±•æ¬§å‡ é‡Œå¾·ï¼ˆä¸€å¼€å§‹å­¦çš„éƒ½å¿˜äº†ï¼Œä¸§</p><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1356">http://acm.hdu.edu.cn/showproblem.php?pid=1356</a></p><p>è¿™é“é¢˜ä¸€çœ¼å°±å¯ä»¥çœ‹å‡ºæ¥æ˜¯æ‰©å±•æ¬§å‡ é‡Œå¾·ï¼Œä½†æ˜¯å°†ç­”æ¡ˆè§£å‡ºæ¥äº†ä¹‹åï¼Œè¿˜è¦æ‰¾åˆ°ç¬¦åˆä»–æ¡ä»¶çš„ç­”æ¡ˆï¼Œè¿™æ ·ç®—å‡ºæ¥çš„ç­”æ¡ˆå·²ç»æ˜¯ç¬¦åˆæ¡ä»¶1äº†ï¼Œæ¡ä»¶2æ˜¯ï¼ˆx+yï¼‰æœ€å°ï¼Œæ¡ä»¶3æ˜¯ï¼ˆax+byï¼‰æœ€å°</p><p>ç®—å‡ºæ¥çš„xï¼Œyæœ‰æ­£æœ‰è´Ÿï¼Œæ­£å³æ”¾åœ¨å¤©å¹³å·¦è¾¹ï¼Œè´Ÿå³å’Œç‰©å“æ”¾åœ¨å¤©å¹³å³è¾¹</p><p>å› ä¸ºa|x|=b|y|+c,è¦æ±‚a|x|+b|y|æœ€å°ï¼Œå¦‚æœa|x|å‡å°ï¼Œï¼ˆå³|x|å‡å°ï¼‰ï¼Œå› ä¸ºå¤©å¹³ä¸¤è¾¹ä¸€æ ·é‡ï¼Œæ‰€ä»¥|y|ä¹Ÿè¦å‡å°ï¼Œå½“a|x|+b|y|æœ€å°æ—¶ï¼Œå°±æ˜¯|x|+|y|æœ€å°æ—¶ï¼ˆå¯èƒ½ä¸æ˜¯å¾ˆä¸¥è°¨ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘è„‘ç³Šçš„</p><p>äºæ˜¯é¢˜æ„å°±å˜æˆäº†æ±‚|x|+|y|çš„æœ€å°å€¼äº†ã€‚x å’Œ y æ˜¯ä¸å®šå¼ ax+by=c çš„è§£ã€‚å¯ç”±æ‰©å±•æ¬§å‡ é‡Œå¾·ç®—å‡ºé€šå¼</p><p>x=x1+b/d*t ï¼›</p><p>y=y1-a/d*t ï¼›</p><p>|x|+|y|=|x0+b/d<em>t|+|y0-a/d</em>t|ï¼Œæˆ‘ä»¬è§„å®š a&gt;bï¼ˆä¸è¡Œå°±äº¤æ¢ï¼‰ï¼Œä»è¿™ä¸ªå¼å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼š|x0+b/d<em>t|æ˜¯å•è°ƒé€’å¢çš„ï¼Œ|y0-a/d</em>t|æ˜¯å•è°ƒé€’å‡çš„ï¼Œè€Œç”±äºæˆ‘ä»¬è§„å®šäº† a&gt;bï¼Œé‚£ä¹ˆå‡çš„é€Ÿåº¦æ˜¯è¦å¤§äºå¢çš„é€Ÿåº¦ï¼Œäºæ˜¯æ•´ä¸ªå‡½æ•°å‡å°‘çš„è¦æ¯”å¢åŠ çš„å¿«ï¼Œä½†æ˜¯ç”±äºç»å¯¹å€¼çš„ç¬¦å·çš„ä½œç”¨ï¼Œæœ€ç»ˆå‡½æ•°è¿˜æ˜¯é€’å¢çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°æ˜¯å‡¹çš„ï¼Œå…ˆå‡å°ï¼Œå†å¢å¤§ã€‚é‚£ä¹ˆä»€ä¹ˆæ—¶å€™æœ€å°å‘¢ï¼Ÿå¾ˆæ˜¾ç„¶æ˜¯ y0-a/d<em>t==0 çš„æ—¶å€™ï¼Œäºæ˜¯æˆ‘ä»¬çš„æœ€å°å€¼|x|+|y|ä¹Ÿä¸€å®šæ˜¯åœ¨ t=y0</em>d/aé™„è¿‘äº†ï¼Œåªè¦åœ¨é™„è¿‘æšä¸¾å‡ ä¸ªå€¼å°±èƒ½æ‰¾åˆ°æœ€ä¼˜è§£äº†ï¼ˆæˆ‘æšä¸¾äº†5ä¸ªï¼Œåº”è¯¥åˆ¤æ–­ä¸€ä¸‹2ä¸ªå°±è¡Œäº†ï¼Œä½†æ˜¯æˆ‘æ‡’ï¼Œä¸æƒ³æƒ³äº†ã€‚ã€‚ã€‚ã€‚ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN; </span><br><span class="line">ll a1,b1,d1,x,y,r;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exgcd</span><span class="params">(ll a,ll b)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(b)&#123;</span><br><span class="line">exgcd(b,a%b);</span><br><span class="line">ll k=x;</span><br><span class="line">x=y;</span><br><span class="line">y=k-a/b*y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">r=a;</span><br><span class="line">x=<span class="number">1</span>;</span><br><span class="line">y=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> flag=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;a1,&amp;b1,&amp;d1)&amp;&amp;a1||b1||d1)&#123;</span><br><span class="line">flag=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(a1&lt;b1)&#123;</span><br><span class="line">swap(a1,b1);</span><br><span class="line">flag=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">exgcd(a1,b1);</span><br><span class="line"><span class="keyword">if</span>(d1%r!=<span class="number">0</span>)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;no solution&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">ll x1=x*(d1/r),y1=y*(d1/r);</span><br><span class="line"><span class="comment">//é€šè§£ x=x1+b1/r*t , y=y1-a1/r*t ï¼Œå…¶ä¸­ t ä¸ºæ•´æ•°</span></span><br><span class="line">ll resx=x1,resy=y1;</span><br><span class="line">ll mid=y1*r/a1;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=mid<span class="number">-2</span>;i&lt;=mid+<span class="number">2</span>;++i)&#123;</span><br><span class="line">ll xx=x1+b1/r*i;</span><br><span class="line">ll yy=y1-a1/r*i;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">abs</span>(xx)+<span class="built_in">abs</span>(yy)&lt;<span class="built_in">abs</span>(resx)+<span class="built_in">abs</span>(resy))&#123;</span><br><span class="line">resx=xx,resy=yy;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!flag)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">abs</span>(resx)&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;<span class="built_in">abs</span>(resy)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">abs</span>(resy)&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;<span class="built_in">abs</span>(resx)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™„ä¸Šæˆ‘å­¦ä¹ æ‰©å±•æ¬§å‡ é‡Œå¾·çš„ç½‘å€https://www.cnblogs.com/hadilo/p/5914302.html</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> HDU </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°è®º </tag>
            
            <tag> æ‰©å±•æ¬§å‡ é‡Œå¾— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lyft Level 5 Challenge 2018 - Final Round (Open Div. 2)A,B,C</title>
      <link href="2018/11/11/Lyft%20Level%205%20Challenge%202018%20-%20Final%20Round%20(Open%20Div.%202)A,B,C/"/>
      <url>2018/11/11/Lyft%20Level%205%20Challenge%202018%20-%20Final%20Round%20(Open%20Div.%202)A,B,C/</url>
      
        <content type="html"><![CDATA[<p>æ„Ÿè§‰è¿™åœºçš„é¢˜é¢éƒ½å¥½é•¿ï¼Œçœ‹çš„è„‘å£³å­ç–¼ï¼ˆè‹±è¯­ä¸å¥½ï¼Œå•Šæˆ‘æŒ‚äº†</p><p><a href="http://codeforces.com/contest/1075">http://codeforces.com/contest/1075</a></p><h1 id="a-the-kings-race"><a class="markdownIt-Anchor" href="#a-the-kings-race"></a> A. The Kingâ€™s Race</h1><p>è€ƒè™‘å¯¹è§’çº¿ä¸ºåˆ†ç•Œ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> n,x,y;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n&gt;&gt;x&gt;&gt;y;</span><br><span class="line"><span class="keyword">if</span>((x+y)&lt;=n+<span class="number">1</span>)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;White&quot;</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Black&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="b-taxi-drivers-and-lyft"><a class="markdownIt-Anchor" href="#b-taxi-drivers-and-lyft"></a> B. Taxi drivers and Lyft</h1><p>æ¯ä¸ª0éƒ½ä¼šé€‰æ‹©ç¦»ä»–è¿‘çš„1ï¼Œé¢„å¤„ç†ä¸€ä¸‹æ¯ä¸ª0çš„å‰åæœ€è¿‘çš„1çš„ä½ç½®ï¼Œç„¶åè·‘ä¸€è¾¹å°±èƒ½ç®—å‡ºæ¯ä¸ª0åº”è¯¥ä¼šå½’å±å“ªä¸ª1äº†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line">ll n,m;</span><br><span class="line">ll res[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">T</span>&#123;</span></span><br><span class="line">ll pre;</span><br><span class="line">ll last;</span><br><span class="line">&#125;tt[maxn];</span><br><span class="line">ll x[maxn];</span><br><span class="line">ll type[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n+m;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,x+i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n+m;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,type+i);</span><br><span class="line">&#125;</span><br><span class="line">ll pp=<span class="number">-1e9</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n+m;++i)&#123;<span class="comment">//æ›´æ–°å‰é©± </span></span><br><span class="line"><span class="keyword">if</span>(type[i]==<span class="number">0</span>)&#123;</span><br><span class="line">tt[i].pre=pp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">pp=i;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">ll la=<span class="number">1e9</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=n+m<span class="number">-1</span>;i&gt;=<span class="number">0</span>;--i)&#123;<span class="comment">//æ›´æ–°åç»§ </span></span><br><span class="line"><span class="keyword">if</span>(type[i]==<span class="number">0</span>)&#123;</span><br><span class="line">tt[i].last=la;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">la=i;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m+n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(type[i]==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(tt[i].last==<span class="number">1e9</span>+<span class="number">5</span>)&#123;</span><br><span class="line">res[tt[i].pre]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(tt[i].pre==(<span class="number">-1e9</span>))&#123;</span><br><span class="line">res[tt[i].last]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">ll xx=x[i]-x[tt[i].pre];</span><br><span class="line">ll yy=x[tt[i].last]-x[i];</span><br><span class="line"><span class="keyword">if</span>(xx&lt;=yy)&#123;</span><br><span class="line">res[tt[i].pre]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">res[tt[i].last]++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n+m;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(type[i]==<span class="number">1</span>)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res[i]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="c-the-tower-is-going-home"><a class="markdownIt-Anchor" href="#c-the-tower-is-going-home"></a> C. The Tower is Going Home</h1><p><a href="http://codeforces.com/contest/1075/problem/C">http://codeforces.com/contest/1075/problem/C</a></p><p>å»é™¤æœ€å°‘çš„çº¿ä½¿å¾—å¯ä»¥ä»ï¼ˆ1ï¼Œ1ï¼‰åˆ°ï¼ˆxï¼Œ1e9ï¼‰ç”±äºæ•°æ®æ¯”è¾ƒå¤§ï¼Œæ¨¡æ‹Ÿæ˜¯ä¸å¯èƒ½çš„ã€‚ç®€å•åˆ†æè¿™æ˜¯ä¸€é“æ€ç»´é¢˜ï¼Œå¿…é¡»è¦åŒ–ç¹ä¸ºç®€</p><p>ï¼ˆåšè¿™ç§æ€ç»´é¢˜ï¼Œå°±è„‘ç³Šï¼›æˆ‘ä¸å–œæ¬¢æ€ç»´é¢˜ï¼Œä¸ï¼Œæˆ‘å–œæ¬¢</p><p>ç«–ç½®çš„çº¿æ˜¯è´¯é€šçš„éƒ½éœ€è¦è€ƒè™‘ï¼Œè€Œæ¨ªç½®çš„çº¿å¦‚æœä¸æ˜¯ä»1å¼€å§‹ï¼Œé‚£å°±ä¸éœ€è¦è€ƒè™‘ï¼ˆå¤§ä¸äº†èµ°åˆ°æœ€å·¦ç«¯ç©¿è¿‡</p><p>ç«–ç½®çš„çº¿ï¼ˆxè½´ä¸Šçš„åæ ‡ï¼‰å’Œæœ‰æ•ˆçš„æ¨ªç½®çš„çº¿ï¼ˆå³ç«¯ç‚¹ï¼‰éƒ½ä»å°åˆ°å¤§æ’åº</p><p>ç«–ç½®çš„çº¿å°†æ•´ä¸ªæ£‹ç›˜åˆ†æˆäº†n+1ä¸ªåŒºåŸŸï¼Œè€ƒè™‘ä»æ¯ä¸ªåŒºåŸŸåˆ°è¾¾ï¼ˆxï¼Œ1e9ï¼‰çš„èŠ±è´¹ï¼Œå–æœ€å°‘çš„å³å¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=<span class="number">1e9</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN; </span><br><span class="line">ll n,m,ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> x[maxn];</span><br><span class="line"><span class="keyword">int</span> h[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,x+i);</span><br><span class="line">&#125;</span><br><span class="line">sort(x,x+n);</span><br><span class="line"><span class="keyword">int</span> x1,x2,y1,num=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;x1,&amp;x2,&amp;y1);</span><br><span class="line"><span class="keyword">if</span>(x1==<span class="number">1</span>)&#123;</span><br><span class="line">h[num++]=x2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(x2==INF)ans++;</span><br><span class="line">&#125;</span><br><span class="line">sort(h,h+num);</span><br><span class="line">ans+=n;<span class="comment">//èµ°åˆ°æœ€æœ€å³ç«¯å†å‘ä¸Šçš„æƒ…å†µ</span></span><br><span class="line"><span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>,cnt=num;</span><br><span class="line"><span class="keyword">while</span>(i&lt;n)&#123;</span><br><span class="line"><span class="keyword">while</span>(j&lt;num&amp;&amp;h[j]&lt;x[i])&#123;</span><br><span class="line">cnt--;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">ans=min(ans,cnt+i); </span><br><span class="line"><span class="keyword">if</span>(ans==<span class="number">0</span>)<span class="keyword">break</span>;</span><br><span class="line">++i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ªäººèµ› Codeforces Round 411 (Div. 2)Aï¼ŒBï¼ŒCï¼ŒDï¼ŒEï¼Œhdu1356</title>
      <link href="2018/11/10/%E4%B8%AA%E4%BA%BA%E8%B5%9B1/"/>
      <url>2018/11/10/%E4%B8%AA%E4%BA%BA%E8%B5%9B1/</url>
      
        <content type="html"><![CDATA[<p>å¯ä»¥è¯´æ‰“çš„éå¸¸å¤±è´¥ï¼Œå’•äº†</p><h1 id="a-a-fake-np"><a class="markdownIt-Anchor" href="#a-a-fake-np"></a> A A. Fake NP</h1><p><a href="http://codeforces.com/problemset/problem/805/A">http://codeforces.com/problemset/problem/805/A</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN;</span><br><span class="line">ll le,ri;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;le,&amp;ri);</span><br><span class="line"><span class="keyword">if</span>(le==ri) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,le);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;2\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>äº¤äº†6æ³•ä¸è°ˆäº†</p><h1 id="b-b-3-palindrome"><a class="markdownIt-Anchor" href="#b-b-3-palindrome"></a> B B. 3-palindrome</h1><p><a href="http://codeforces.com/problemset/problem/805/B">http://codeforces.com/problemset/problem/805/B</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN;</span><br><span class="line">ll n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;n);</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; <span class="title">arr</span><span class="params">(n)</span></span>;</span><br><span class="line"><span class="keyword">bool</span> flaga = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">bool</span> flagb = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n;) &#123;</span><br><span class="line"><span class="keyword">if</span> (flaga) &#123;</span><br><span class="line">arr[i] = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">i++;</span><br><span class="line"><span class="keyword">if</span> (i &lt; n) arr[i] = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">i++;</span><br><span class="line">flaga = <span class="number">0</span>;</span><br><span class="line">flagb = <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; </span><br><span class="line">arr[i] = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">i++;</span><br><span class="line"><span class="keyword">if</span> (i &lt; n) arr[i] = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">i++;</span><br><span class="line">flaga = <span class="number">1</span>;</span><br><span class="line">flagb = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;arr[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€å¼€å§‹ä¸€ç›´reï¼ŒçœŸçš„å·²ç»å¿ƒæ€è¹¦äº†</p><h1 id="c-c-find-amir"><a class="markdownIt-Anchor" href="#c-c-find-amir"></a> C C. Find Amir</h1><p><a href="http://codeforces.com/problemset/problem/805/C">http://codeforces.com/problemset/problem/805/C</a></p><p>è™½ç„¶æ”¾åœ¨Cé¢˜ï¼Œä½†è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œéšä¾¿æ¨ä¸€ä¸‹å°±è¡Œäº†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN; </span><br><span class="line">ll n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;n);</span><br><span class="line"><span class="keyword">if</span>(n%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;(n/<span class="number">2</span><span class="number">-1</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;n/<span class="number">2</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="d"><a class="markdownIt-Anchor" href="#d"></a> <a href="http://acm.hdu.edu.cn/showproblem.php?pid=1356">D</a></h1><p>åˆæ­¥çœ‹äº†ä¸€ä¸‹æ˜¯æ‰©å±•æ¬§å‡ é‡Œå¾·ï¼Œä½†æ²¡æœ‰åšå‡ºæ¥ï¼Œå¾…è¡¥</p><p>æ’¸å®Œäº†é¢˜è§£æ„Ÿè§‰æ¯”Eéš¾å¤šäº†ï¼Œ<a href="https://blog.csdn.net/TDD_Master/article/details/83958544">https://blog.csdn.net/TDD_Master/article/details/83958544</a></p><h1 id="e-d-minimum-number-of-steps"><a class="markdownIt-Anchor" href="#e-d-minimum-number-of-steps"></a> E D. Minimum number of steps</h1><p><a href="http://codeforces.com/problemset/problem/805/D">http://codeforces.com/problemset/problem/805/D</a></p><p>æ¨åˆ°å‡ºæ¥ï¼Œä½†å› ä¸ºæ²¡æœ‰å–æ¨¡ï¼Œè€Œwa ç¡®å®äº†ï¼Œå¤ªå¿ƒæ€¥</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN;</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line">ll mmod=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="function">ll <span class="title">mod_pow</span><span class="params">(ll x,ll n,ll mod)</span> </span>&#123;</span><br><span class="line">ll res=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(n&gt;<span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(n&amp;<span class="number">1</span>)</span><br><span class="line">res=res*x%mod;</span><br><span class="line">x=x*x%mod;</span><br><span class="line">n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;s;</span><br><span class="line">ll numa=<span class="number">0</span>,numb=<span class="number">0</span>,res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;s.size();) &#123;</span><br><span class="line"><span class="keyword">if</span>(s[i]==<span class="string">&#x27;b&#x27;</span>&amp;&amp;numa!=<span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">int</span> j;</span><br><span class="line"><span class="keyword">for</span>(j=i; j&lt;s.size(); ++j) &#123;</span><br><span class="line"><span class="keyword">if</span>(s[j]==<span class="string">&#x27;a&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ll numb=j-i;</span><br><span class="line">i=j;</span><br><span class="line">ll tmp=(numb*(mod_pow(<span class="number">2</span>,numa,mmod)<span class="number">-1</span>));</span><br><span class="line">res=(res+tmp) %mmod;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(s[i]==<span class="string">&#x27;a&#x27;</span>) &#123;</span><br><span class="line">numa++;</span><br><span class="line">&#125;</span><br><span class="line">++i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res%mmod&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="e"><a class="markdownIt-Anchor" href="#e"></a> <a href="http://codeforces.com/problemset/problem/805/E">E</a></h1><p>é¢˜éƒ½æ²¡çœ‹ï¼Œå¾…è¡¥</p><p>æœç„¶æ²¡è¡¥ ğŸ’¤</p><p>å¾…æ›´æ–°â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æ€»ç»“ï¼Œä¸ªäººèµ›å¤ªç´§å¼ äº†ï¼Œè¦å¤šæ‰“æ¯”èµ›æ‰è¡Œï¼Œå“</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) ç¬¬åäº”å±Šæµ™å¤§å®æ³¢ç†å·¥æ ¡èµ›(A,B,D,E,F,H,I,J,K,L)</title>
      <link href="2018/11/07/(Nowcoder)%20%E7%AC%AC%E5%8D%81%E4%BA%94%E5%B1%8A%E6%B5%99%E5%A4%A7%E5%AE%81%E6%B3%A2%E7%90%86%E5%B7%A5%E6%A0%A1%E8%B5%9B/"/>
      <url>2018/11/07/(Nowcoder)%20%E7%AC%AC%E5%8D%81%E4%BA%94%E5%B1%8A%E6%B5%99%E5%A4%A7%E5%AE%81%E6%B3%A2%E7%90%86%E5%B7%A5%E6%A0%A1%E8%B5%9B/</url>
      
        <content type="html"><![CDATA[<p><a href="https://ac.nowcoder.com/acm/contest/303#question">ä¼ é€é—¨</a></p><p>A.<a href="https://ac.nowcoder.com/acm/contest/303/A">StarCraft</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">-0x3f3f3f3f</span>; </span><br><span class="line"><span class="keyword">int</span> n; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="number">1998</span>+n&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>B.<a href="https://ac.nowcoder.com/acm/contest/303/B">Fibonacci and Counting</a></p><p>è¿™é“é¢˜çš„ç­”æ¡ˆçœ‹æ ·ä¾‹åº”è¯¥è¿˜æ˜¯æŒºå¥½çŒœçš„ã€‚å…¶å®å°±æ˜¯gcd(F(x),F(x+1))å…ˆè¦å˜æˆgcd((F(x+1),F(x))),ç„¶åå˜æˆgcd(F(x),F(x-1)),å› ä¸ºæ–æ³¢é‚£å¥‘F(x+1)=F(x)+F(x-1),æ‰€ä»¥F(x+1)æ˜¯è‚¯å®šå°äº2*F(x),  F(x+1)%F(x)=F(x+1)-F(x)=F(x-1),gcd(F(x),F(x-1))å˜æˆgcd(2,1)-&gt;gcd(1,0),éœ€è¦næ¬¡ï¼Œåœ¨åŠ ä¸€æ¬¡äº¤æ¢ä½ç½®ï¼Œn+1.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">-0x3f3f3f3f</span>; </span><br><span class="line"><span class="keyword">int</span> T,n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;n+<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>C.<a href="https://ac.nowcoder.com/acm/contest/303/C">LCPS</a></p><p>èœ.jpgï¼›</p><p>D.Campaign</p><p>ä¸ƒå±‚å¾ªç¯æš´åŠ›æšä¸¾å°±å¯ä»¥äº†ï¼Œä¼˜é›…ä¸€ç‚¹å°±æ·±æœ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">-0x3f3f3f3f</span>; </span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> L[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> R[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> ans;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> step, <span class="keyword">long</span> <span class="keyword">long</span> ll, <span class="keyword">long</span> <span class="keyword">long</span> rr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç°åœ¨ç‚¹   ç¬¬å‡ æ­¥   åˆ°è¯¥ç‚¹çš„æ€»ä¸‹çº¿  åˆ°è¯¥ç‚¹çš„æ€»ä¸Šé™</span></span><br><span class="line">    ll += L[now];</span><br><span class="line">    rr += R[now];</span><br><span class="line">    <span class="keyword">if</span> (ll &lt;= n &amp;&amp; rr &gt;= n)&#123;</span><br><span class="line">    ans = max(ans, step);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">if</span>(ll &gt; n)&#123;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = now+<span class="number">1</span>; i &lt;= <span class="number">7</span>; ++i) &#123;</span><br><span class="line">        dfs(i, step+<span class="number">1</span>, ll, rr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">7</span>; ++i) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; L[i] &gt;&gt; R[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">7</span>; ++i) &#123;</span><br><span class="line">            dfs(i, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>E.<a href="https://ac.nowcoder.com/acm/contest/303/E">Build Pylons</a></p><p>æ’ä¸ªåº,ä»å‰å¾€åå»ºé€ å°±è¡Œäº†ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">-0x3f3f3f3f</span>; </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line">ll pos[maxn];</span><br><span class="line">ll dis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line"><span class="keyword">while</span> (T--) &#123;</span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; n &gt;&gt; k;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; pos[i];</span><br><span class="line">&#125;</span><br><span class="line">sort(pos+<span class="number">1</span>, pos+<span class="number">1</span>+n);</span><br><span class="line">ll ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> dis = pos[i] - pos[i<span class="number">-1</span>];</span><br><span class="line">ll tmp = <span class="number">0</span>;</span><br><span class="line">ll tired = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (dis) &#123;</span><br><span class="line">tmp += tired*<span class="number">2</span>+<span class="number">1</span>;</span><br><span class="line">dis--;</span><br><span class="line">tired++;</span><br><span class="line">&#125;</span><br><span class="line">ans += tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; ans + k &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>F.Pylon Link</p><p>äºŒåˆ†ç­”æ¡ˆåŠå¾„ï¼Œç”¨å¹¶æŸ¥é›†æ¥ç»´æŠ¤ï¼Œå¦‚æœä¸¤ç‚¹è·ç¦»å°äº2*Rï¼Œé‚£å°±å°†ä»–ä»¬è”é€šï¼Œæœ€åæ£€éªŒæ˜¯ä¸æ˜¯éƒ½è¢«è”é€šäº†ã€‚çˆ†intè¿˜waäº†å¥½å‡ å‘</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> inf=<span class="number">2e11</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">500</span>+<span class="number">50</span>;</span><br><span class="line"><span class="keyword">double</span> x[maxn],y[maxn],dis[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> f[maxn],n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(f[x]==x) <span class="keyword">return</span> f[x];</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> f[x]=find(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">unity</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> u=find(x),v=find(y);</span><br><span class="line">f[u]=v;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> mid)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;maxn; i++) f[i]=i;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line"><span class="keyword">if</span>(dis[i][j]&lt;=<span class="number">2</span>*mid) &#123;</span><br><span class="line"><span class="keyword">if</span>(find(i)!=find(j))</span><br><span class="line">unity(i,j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> ff=find(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=n; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>( find(i)!=ff ) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">int</span> line;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;line;</span><br><span class="line"><span class="keyword">while</span>(line--) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">double</span> L=inf,R=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x[i]&gt;&gt;y[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>; j&lt;=n; j++) &#123;</span><br><span class="line">dis[i][j]=<span class="built_in">sqrt</span>( (x[i]-x[j])*(x[i]-x[j]) +(y[i]-y[j])*(y[i]-y[j]) );</span><br><span class="line">L=min(L,dis[i][j]);</span><br><span class="line">R=max(R,dis[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">ll l=<span class="number">0</span>,r=inf;</span><br><span class="line"><span class="keyword">while</span>(r&gt;l) &#123;</span><br><span class="line">ll mid=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(check(mid)) r=mid;</span><br><span class="line"><span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;l&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>G.<a href="https://ac.nowcoder.com/acm/contest/303/G">Rubikâ€™s Cube</a></p><p>èœ.jpg</p><p>H.<a href="https://ac.nowcoder.com/acm/contest/303/H">Protoss and Zerg</a></p><p>è¿™ä¸ªè¿˜æ˜¯å¾ˆå¥½æ¨çš„.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">-0x3f3f3f3f</span>; </span><br><span class="line"><span class="keyword">const</span> ll mod=<span class="number">998244353</span>;</span><br><span class="line"><span class="function">ll <span class="title">fpow</span><span class="params">(ll x,ll y)</span> </span>&#123;</span><br><span class="line">ll ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(y) &#123;</span><br><span class="line"><span class="keyword">if</span>(y&amp;<span class="number">1</span>) (ans*=x)%=mod;</span><br><span class="line">(x*=x)%=mod;</span><br><span class="line">y&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">return</span> ans%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> line;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;line);</span><br><span class="line"><span class="keyword">while</span>(line--) &#123;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">ll res=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line"><span class="keyword">while</span>(n--) &#123;</span><br><span class="line">ll a,b;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;a,&amp;b);</span><br><span class="line">res*=((fpow(<span class="number">2</span>,a)<span class="number">-1</span>)+(fpow(<span class="number">2</span>,b)<span class="number">-1</span>));</span><br><span class="line">res%=mod;</span><br><span class="line">&#125;<span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,res%mod);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>I.Race Sorting</p><p>æ¨¡æ‹Ÿé¢˜</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">-0x3f3f3f3f</span>; </span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;t;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;z;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;p;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;ans;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line"><span class="keyword">while</span> (T--) &#123;</span><br><span class="line"><span class="keyword">int</span> rank[<span class="number">3</span>];</span><br><span class="line"><span class="built_in">memset</span>(rank, <span class="number">0</span>, <span class="keyword">sizeof</span>(rank));</span><br><span class="line">t.clear();</span><br><span class="line">z.clear();</span><br><span class="line">p.clear();</span><br><span class="line">ans.clear();</span><br><span class="line"><span class="keyword">int</span> n, tmp;</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line"><span class="keyword">while</span> (n--) &#123;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; tmp &gt;&gt; s &gt;&gt; s;</span><br><span class="line"><span class="keyword">if</span> (s == <span class="string">&quot;Terran&quot;</span>)</span><br><span class="line">t.push_back(tmp);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (s == <span class="string">&quot;Zerg&quot;</span>)</span><br><span class="line">z.push_back(tmp);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">p.push_back(tmp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line"><span class="keyword">int</span> pos1 = s.find(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line"><span class="keyword">int</span> pos2 = s.find(<span class="string">&#x27;,&#x27;</span>, pos1+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span> (s[pos1<span class="number">-1</span>] == <span class="string">&#x27;g&#x27;</span>) &#123;</span><br><span class="line">rank[<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[pos1<span class="number">-1</span>] == <span class="string">&#x27;n&#x27;</span>) &#123;</span><br><span class="line">rank[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span></span><br><span class="line">rank[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (s[pos2<span class="number">-1</span>] == <span class="string">&#x27;g&#x27;</span>) &#123;</span><br><span class="line">rank[<span class="number">2</span>] = <span class="number">2</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[pos2<span class="number">-1</span>] == <span class="string">&#x27;n&#x27;</span>) &#123;</span><br><span class="line">rank[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">&#125; <span class="keyword">else</span></span><br><span class="line">rank[<span class="number">0</span>] = <span class="number">2</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (rank[<span class="number">0</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">ans.insert(ans.end(), p.begin(), p.end());</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (rank[<span class="number">1</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">ans.insert(ans.end(), t.begin(), t.end());</span><br><span class="line">&#125; <span class="keyword">else</span></span><br><span class="line">ans.insert(ans.end(), z.begin(), z.end());</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (rank[<span class="number">0</span>] == <span class="number">2</span>) &#123;</span><br><span class="line">ans.insert(ans.end(), p.begin(), p.end());</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (rank[<span class="number">1</span>] == <span class="number">2</span>) &#123;</span><br><span class="line">ans.insert(ans.end(), t.begin(), t.end());</span><br><span class="line">&#125; <span class="keyword">else</span></span><br><span class="line">ans.insert(ans.end(), z.begin(), z.end());</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (rank[<span class="number">0</span>] == <span class="number">0</span>) &#123;</span><br><span class="line">ans.insert(ans.end(), p.begin(), p.end());</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (rank[<span class="number">1</span>] == <span class="number">0</span>) &#123;</span><br><span class="line">ans.insert(ans.end(), t.begin(), t.end());</span><br><span class="line">&#125; <span class="keyword">else</span></span><br><span class="line">ans.insert(ans.end(), z.begin(), z.end());</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ans.size(); ++i) &#123;</span><br><span class="line"><span class="keyword">if</span> (i)</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; ans[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>J.<a href="https://ac.nowcoder.com/acm/contest/303/J">Carrier</a></p><p>ç­¾åˆ°é¢˜</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">-0x3f3f3f3f</span>; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line"><span class="keyword">while</span>(T--) &#123;</span><br><span class="line"><span class="keyword">int</span> a,b,x,y;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;x&gt;&gt;y;</span><br><span class="line"><span class="keyword">if</span>(a&lt;<span class="number">350</span>) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;You have not enough minerals.&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(b&lt;<span class="number">250</span>) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;You require more vespene gas.&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(x+<span class="number">6</span>&gt;y) &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;You must construct additional pylons.&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;Carrier has arrived.&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>K.Technology Tree</p><p>æ·±æœä¸€ä¸‹ï¼Œè®°å½•æ¯ä¸ªç‚¹çš„éœ€è¦çš„çŸ¿å’Œç“¦æ–¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">-0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e4</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> T,n,q;</span><br><span class="line"><span class="keyword">int</span> f[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">PP</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> k;</span><br><span class="line"><span class="keyword">int</span> w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; e[maxn];</span><br><span class="line">PP m[maxn];</span><br><span class="line">PP res[maxn];</span><br><span class="line"><span class="keyword">int</span> degree[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="function">PP <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(vis[s])&#123;</span><br><span class="line"><span class="keyword">return</span> res[s];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(f[s]==s) &#123;</span><br><span class="line"><span class="keyword">return</span> PP &#123;m[s].k,m[s].w&#125;;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">PP tmp=dfs(f[s]);</span><br><span class="line">res[s]=PP&#123;tmp.k+m[s].k,tmp.w+m[s].w&#125;;</span><br><span class="line">vis[s]=<span class="literal">true</span>;</span><br><span class="line"><span class="keyword">return</span> res[s];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line"><span class="keyword">while</span>(T--) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;q);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;m[i].k&gt;&gt;m[i].w;</span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">1</span>) &#123;</span><br><span class="line">res[i].k=m[i].k;</span><br><span class="line">res[i].w=m[i].w;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="literal">false</span> ,<span class="keyword">sizeof</span>(vis));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;f[i];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>; i&lt;=n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(!vis[i])&#123;</span><br><span class="line">res[i]=dfs(i);</span><br><span class="line">vis[i]=<span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> x;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=q; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res[x].k&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;res[x].w&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>L.The Last Stand</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> ll inf = <span class="number">-0x3f3f3f3f</span>; </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line">ll dp[maxn][maxn];</span><br><span class="line"><span class="comment">//åˆ°iç‚¹  çŠ¶æ€ä¸ºj  çš„ç”Ÿå‘½å€¼ </span></span><br><span class="line">ll val[maxn];</span><br><span class="line">ll delta[maxn];</span><br><span class="line">ll pos[maxn];</span><br><span class="line">ll dis[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line"><span class="keyword">while</span> (T--) &#123;</span><br><span class="line">ll n, m;</span><br><span class="line"><span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; dp[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; pos[i] &gt;&gt; val[i] &gt;&gt; delta[i];</span><br><span class="line">dis[i] = pos[i] - pos[i<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line">dis[n+<span class="number">1</span>] = m-pos[n];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">dp[<span class="number">0</span>][j] = dp[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span> (dp[i<span class="number">-1</span>][j] &gt; <span class="number">0</span>) &#123;</span><br><span class="line">dp[i][j] = dp[i<span class="number">-1</span>][j] + dis[i]*delta[j];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (dp[i][j] &lt; <span class="number">1</span>)</span><br><span class="line">dp[i][j] = inf;</span><br><span class="line"><span class="keyword">if</span> (dp[i][j] &gt; <span class="number">0</span>)</span><br><span class="line">dp[i][i] = max(dp[i][i], dp[i][j] + val[i]);</span><br><span class="line"><span class="keyword">if</span> (dp[i][i] &lt; <span class="number">1</span>)</span><br><span class="line">dp[i][i] = inf;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ll ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= n; ++j) &#123;</span><br><span class="line"><span class="keyword">if</span> (dp[n][j] &gt; <span class="number">0</span>)</span><br><span class="line">ans = max(ans, dp[n][j] + dis[n+<span class="number">1</span>]*delta[j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Educational Codeforces Round 44 (Rated for Div. 2) D. Sand Fortress</title>
      <link href="2018/11/07/Educational%20Codeforces%20Round%2044%20(Rated%20for%20Div.%202)%20D.%20Sand%20Fortress/"/>
      <url>2018/11/07/Educational%20Codeforces%20Round%2044%20(Rated%20for%20Div.%202)%20D.%20Sand%20Fortress/</url>
      
        <content type="html"><![CDATA[<p>ä¼ é€ <a href="http://codeforces.com/contest/985/problem/D">http://codeforces.com/contest/985/problem/D</a></p><p>nå †æ²™å­ï¼Œæœ€å·¦è¾¹çš„æ²™å­çš„æœ€å¤§é«˜åº¦ä¸èƒ½è¶…è¿‡Hï¼Œè®©ä½ åœ¨ä¸€ä¸ªä»1åˆ°æ­£æ— ç©·çš„ä¸€ç»´å¹³é¢å†…æ”¾æ²™å­ï¼Œä¸”è¦æ»¡è¶³ç›¸é‚»ä¸¤ä¸ªåæ ‡çš„æ²™å­çš„é«˜åº¦ä¸èƒ½è¶…è¿‡1ã€‚é—®æ‰€éœ€è¦çš„æœ€å°é•¿åº¦ã€‚</p><p>é¢˜ç›®è¦æ±‚ç›¸é‚»ä¸¤ä¸ªåæ ‡çš„æ²™å­çš„é«˜åº¦ä¸èƒ½è¶…è¿‡1ï¼Œé‚£ä¹ˆå·¦å³è¾¹çš„é‚£å †æ²™å­é«˜åº¦è‚¯å®šæ˜¯1ï¼Œæ‰€ä»¥æ²™å­çš„æ‘†æ”¾æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä»é«˜åº¦ä¸ºHé€’å‡ï¼ˆæ¯æ¬¡-1ï¼‰ï¼Œå¦ä¸€ç§æ˜¯å…ˆå¢åå‡ï¼Œåƒä¸€ä¸ªå±±çš„å½¢çŠ¶ã€‚å¯ä»¥å‘ç°æ¯ä¸ªéƒ¨åˆ†éƒ½æ˜¯ä¸€ä¸ªd=1çš„ç­‰å·®æ•°åˆ—ã€‚åˆ†æä¹‹åï¼Œå°±å¯ä»¥äºŒåˆ†é•¿åº¦äº†ã€‚ä½†è¦æ³¨æ„çš„æ˜¯ç­‰å·®æ•°åˆ—æ±‚å’Œæ˜¯x*(x+1)/2ï¼Œå› ä¸ºæ•°æ®næœ€å¤§ä¸º1e18ï¼Œæ‰€ä»¥å³è¾¹ç•Œå¿…é¡»è‡ªå·±è®¾ç½®ä¸€ä¸ªæ¯”å¦‚2e9ï¼Œä¸ç„¶å³è¾¹ç•Œç›´æ¥ç”¨næ˜¯è‚¯å®šä¼šçˆ†long longçš„ã€‚</p><ul><li><p>å½“æšä¸¾é•¿åº¦ x&lt;=H æ—¶ï¼šæœ€ä¼˜çš„æ‘†æ”¾æ˜¯ä¸€ä¸ªé€’å‡çš„ç­‰å·®æ•°åˆ—ï¼Œè¿™æ ·æ”¾çš„æ²™åŒ…æœ€å¤šï¼ˆä¸ç†è§£å¯ä»¥ç”»å›¾çœ‹çœ‹</p></li><li><p>å½“æšä¸¾é•¿åº¦ x&gt;H æ—¶:æœ€ä¼˜çš„æ‘†æ”¾è‚¯å®šå°±æ˜¯ä¸€ä¸ªå±±çš„å½¢çŠ¶äº†ï¼Œä½†è¦å½“å¿ƒå½“x-Hä¸ºå¥‡æ•°çš„æƒ…å†µï¼Œæœ€é«˜ç‚¹æœ‰ä¸¤ä¸ªå¹¶åˆ—çš„</p></li></ul><p>å½“Hä¸º3æ—¶ï¼Œx=6ï¼šH 3 4 4 3 2 1 ï¼Œx=7 ï¼šH 3 4 5 4 3 2 1</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> ll cnt=<span class="number">2e9</span>;</span><br><span class="line">ll n,H;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(ll x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x&lt;=H) &#123;</span><br><span class="line"><span class="keyword">return</span> x*(x+<span class="number">1</span>)/<span class="number">2</span>&gt;=n;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">ll a=(x+H)/<span class="number">2</span>;<span class="comment">//æœ€é«˜ç‚¹</span></span><br><span class="line"><span class="keyword">if</span>((x-H)%<span class="number">2</span>!=<span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> a*(a+<span class="number">1</span>)/<span class="number">2</span>+(a+H)*(a+<span class="number">1</span>-H)/<span class="number">2</span>&gt;=n;<span class="comment">//å¥‡æ•°</span></span><br><span class="line"><span class="keyword">return</span> a*(a+<span class="number">1</span>)/<span class="number">2</span>+(a<span class="number">-1</span>+H)*(a-H)/<span class="number">2</span>&gt;=n;<span class="comment">//å¶æ•°</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;H);</span><br><span class="line">ll le=<span class="number">0</span>,ri=min(n+<span class="number">1</span>,cnt);</span><br><span class="line"><span class="keyword">while</span>(ri&gt;le) &#123; <span class="comment">//äºŒåˆ†é•¿åº¦</span></span><br><span class="line">ll mid=(le+ri)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(check(mid))</span><br><span class="line">ri=mid;</span><br><span class="line"><span class="keyword">else</span> le=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;le&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒåˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Luogu) P1434 [SHOI2002]æ»‘é›ª</title>
      <link href="2018/11/06/(Luogu)%20P1434%20%5BSHOI2002%5D%E6%BB%91%E9%9B%AA/"/>
      <url>2018/11/06/(Luogu)%20P1434%20%5BSHOI2002%5D%E6%BB%91%E9%9B%AA/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.luogu.org/problemnew/show/P1434#sub">https://www.luogu.org/problemnew/show/P1434#sub</a></p><p>è¿™ä¸ªé¢˜å¦‚æœç›´æ¥bfsæˆ–è€…dfsï¼Œå› ä¸ºæ¯ä¸ªç‚¹éƒ½è¦æœï¼Œæ‰€ä»¥å¿…å®šä¼šTï¼Œå¯ä»¥ç”¨ä¸ªæ•°ç»„ï¼Œç±»ä¼¼è®°å¿†åŒ–æœç´¢ï¼Œå»å‡å°‘æœç´¢æ—¶é—´</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> R,C,ans;</span><br><span class="line"><span class="keyword">int</span> Map[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> Len[maxn][maxn];<span class="comment">//è®°å½•(i,j)ç‚¹çš„æœ€å¤§æ·±åº¦ï¼Œå³ä»(i,j)ç‚¹çš„ä¸ºå§‹ä¸‹æ»‘æœ€é•¿é•¿åº¦ </span></span><br><span class="line"><span class="keyword">int</span> dx[]= &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dy[]= &#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(Len[i][j])<span class="keyword">return</span> Len[i][j];</span><br><span class="line">Len[i][j]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;<span class="number">4</span>; ++k) &#123;</span><br><span class="line"><span class="keyword">int</span> nx = i + dx[k];</span><br><span class="line"><span class="keyword">int</span> ny = j + dy[k];</span><br><span class="line"><span class="keyword">if</span> (nx&gt;=<span class="number">1</span>&amp;&amp;nx&lt;=R&amp;&amp;ny&gt;=<span class="number">1</span>&amp;&amp;ny&lt;=C&amp;&amp;Map[i][j]&gt;Map[nx][ny])</span><br><span class="line">Len[i][j]=max(Len[i][j],<span class="number">1</span>+dfs(nx,ny));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> Len[i][j];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;R,&amp;C);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=R; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=C; ++j) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;Map[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">memset</span>(Len,<span class="number">0</span>,<span class="keyword">sizeof</span>(Len));</span><br><span class="line">ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=R; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=C; ++j) &#123;</span><br><span class="line">ans=max(dfs(i,j),ans);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä¸€å¼€å§‹æ˜¯æ¯ä¸ªç‚¹éƒ½å»bfsä¸€ä¸‹ï¼Œbfsçš„è¿‡ç¨‹å»ä¸æ–­æ›´æ–°èµ·å§‹ç‚¹åˆ°åˆ°è¯¥ç‚¹çš„æœ€å¤§é•¿åº¦ï¼Œå±…ç„¶åªTäº†ä¸¤ä¸ªç‚¹ï¼Œå…¶ä»–çš„ç‚¹è·‘çš„è¿˜æŒºå¿«çš„</p><p>ä¸§~~</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> R,C,ans;</span><br><span class="line"><span class="keyword">int</span> Map[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> Len[maxn][maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">T</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> dx[]= &#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> dy[]= &#123;<span class="number">1</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line"><span class="built_in">queue</span>&lt;T&gt; q;</span><br><span class="line">Len[i][j]=<span class="number">1</span>;</span><br><span class="line">T tmp;</span><br><span class="line">tmp.x=i,tmp.y=j;</span><br><span class="line">q.push(tmp);</span><br><span class="line"><span class="keyword">while</span>(!q.empty()) &#123;</span><br><span class="line">T tmp=q.front(),t;</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">int</span> lle=Len[tmp.x][tmp.y];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> nx=tmp.x+dx[i];</span><br><span class="line"><span class="keyword">int</span> ny=tmp.y+dy[i];</span><br><span class="line"><span class="keyword">if</span>(nx&gt;=<span class="number">1</span>&amp;&amp;nx&lt;=R&amp;&amp;ny&gt;=<span class="number">1</span>&amp;&amp;ny&lt;=C&amp;&amp;Map[tmp.x][tmp.y]&gt;Map[nx][ny]) &#123;</span><br><span class="line">t.x=nx,t.y=ny;</span><br><span class="line"><span class="keyword">if</span>(Len[nx][ny]==<span class="number">0</span>)&#123;</span><br><span class="line">Len[nx][ny]=max(Len[nx][ny],lle+<span class="number">1</span>);</span><br><span class="line">q.push(t);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(Len[nx][ny]&lt;lle+<span class="number">1</span>)&#123;</span><br><span class="line">Len[nx][ny]=max(Len[nx][ny],lle+<span class="number">1</span>);</span><br><span class="line">q.push(t);</span><br><span class="line">&#125;</span><br><span class="line">ans=max(ans,Len[nx][ny]);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;R,&amp;C);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=R; ++i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=C; ++j) &#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;Map[i][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ans=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=R;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=C;++j)&#123;</span><br><span class="line"><span class="built_in">memset</span>(Len,<span class="number">0</span>,<span class="keyword">sizeof</span>(Len));</span><br><span class="line">bfs(i,j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Luogu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœç´¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ 1659 Frogs&#39; Neighborhood</title>
      <link href="2018/11/06/(POJ)%201659%20Frogs&#39;%20Neighborhood/"/>
      <url>2018/11/06/(POJ)%201659%20Frogs&#39;%20Neighborhood/</url>
      
        <content type="html"><![CDATA[<p>è€å¸ˆè¯´æ˜¯é˜¿åŸºç±³å®šå¾‹çš„é¢˜ï¼Œæ ¹æ®æ¯ä¸ªç‚¹çš„åº¦æ•°åˆ¤æ–­è¿™äº›ç‚¹èƒ½ä¸èƒ½æ„æˆå›¾ã€‚</p><p>å®åˆ™ç”¨èµ·æ¥æˆ‘è®¤ä¸ºæ˜¯ä¸€ç§è´ªå¿ƒçš„æ€æƒ³ï¼Œä¸¾ä¸ªæ —å­ï¼šï¼ˆé¦–å…ˆä¸å¯èƒ½æœ‰ç‚¹çš„åº¦æ•°ä¸ºè´Ÿ</p><ul><li>ï¼ˆ1ï¼‰å„ä¸ªç‚¹çš„åº¦æ•° 4 3 1 5 4 2 1 ï¼ˆæ¯æ¬¡éƒ½ä»å¤§åˆ°å°æ’åºï¼‰</li></ul><p>5 4 4 3 2 1 1ï¼Œå…ˆè§£å†³åº¦æ•°æœ€å¤šçš„ç‚¹ä»–æœ‰5ä¸ªé‚»å±…ï¼ˆæ˜¯é‚»å±…ï¼Œé‚£åº¦æ•°-1ï¼‰ï¼Œå½“ç„¶æ˜¯ä¼˜å…ˆè€ƒè™‘ä»–åé¢çš„5ä¸ªï¼Œå› ä¸ºæ˜¯ç›¸è¾ƒè€Œè¨€é‚»å±…ï¼ˆåº¦æ•°ï¼‰æ¯”è¾ƒå¤šçš„ï¼Œå¦‚æœå…ˆè€ƒè™‘åº¦æ•°å°‘çš„ï¼Œé‚£å®ƒçš„åº¦æ•°å¾ˆå¿«ä¸ºè´Ÿï¼Œæ˜¾ç„¶ä¸åˆç†</p><p>3 3 2 1 1 0 -&gt; 2 1 1 0 0 -&gt; 0 0 0 0  æœ€åå˜æˆäº†ä¸€ä¸ªå…¨æ˜¯0çš„åºåˆ—ï¼Œè¯´æ˜å„ä¸ªç‚¹çš„åº¦æ•°æ°å¥½åŒ¹é…ï¼Œèƒ½æ„æˆä¸€ä¸ªæ‰€ç»™åºåˆ—åº¦æ•°çš„å›¾ã€‚</p><ul><li>ï¼ˆ2ï¼‰å„ä¸ªç‚¹çš„åº¦æ•° 4 3 1 4 2 0</li></ul><p>4 4 3 2 1 0 -&gt; 3 2 1 0 0 -&gt;1 0 -1 0 å‡ºç°ä¸€ä¸ªç‚¹açš„åº¦æ•°ä¸ºè´Ÿæ•°äº†ï¼Œè¯´æ˜è¿™ä¸ªå›¾è‚¯å®šæ„æˆä¸äº†äº†ï¼Œå› ä¸ºæ˜¯ä»å¤§åˆ°å°æ’åºçš„ï¼Œæ‰€ä»¥æœ€å¤§çš„ç‚¹é€‰æ‹©å’Œaæˆ–aåé¢çš„ç‚¹å½“é‚»å±…ï¼Œéƒ½ä¼šä½¿å…¶åº¦æ•°ä¸ºè´Ÿ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> T,N;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">S</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> id;</span><br><span class="line"><span class="keyword">int</span> num;</span><br><span class="line">&#125;f[<span class="number">1000</span>];</span><br><span class="line"><span class="keyword">int</span> tt[<span class="number">20</span>][<span class="number">20</span>];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(S a,S b)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a.num&gt;b.num; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;++i)&#123;</span><br><span class="line">sort(f+i,f+<span class="number">1</span>+N,cmp);<span class="comment">//æ¯æ¬¡å»æ‰ä¸€ä¸ªæœ€å¤§çš„æ’åº</span></span><br><span class="line"><span class="keyword">int</span> num=f[i].num;<span class="comment">//æœ€å¤§çš„é‚£ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;=i+num;++j)&#123;<span class="comment">//åœ¨è¿™ä¸ªæ•°åé¢çš„numä½éƒ½-1ï¼Œå‡å»ä¸€ä¸ªåº¦</span></span><br><span class="line">tt[f[i].id][f[j].id]=<span class="number">1</span>;<span class="comment">//æ ‡è®°ä¸€ä¸‹ä»–ä»¬æ˜¯è”é€šçš„</span></span><br><span class="line">tt[f[j].id][f[i].id]=<span class="number">1</span>;</span><br><span class="line">f[j].num--;<span class="comment">//åº¦æ•°-1</span></span><br><span class="line"><span class="keyword">if</span>(f[j].num&lt;<span class="number">0</span>)&#123;<span class="comment">//å¦‚æœåº¦æ•°&lt;0äº†ï¼Œåˆ™è¯´æ˜è¿™ä¸ªå›¾ä¸èƒ½è”é€šäº†ï¼Œå› ä¸ºåº¦æ•°ä¸å¯èƒ½ä¸ºè´Ÿæ•°</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line"><span class="built_in">memset</span>(tt,<span class="number">0</span>,<span class="keyword">sizeof</span>(tt));</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;N);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;f[i].num;</span><br><span class="line">f[i].id=i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(solve())&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;YES&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=N;++j)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;tt[i][j]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;NO&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> POJ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è´ªå¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ 2018 Best Cow Fences</title>
      <link href="2018/11/05/(POJ)%202018%20Best%20Cow%20Fences/"/>
      <url>2018/11/05/(POJ)%202018%20Best%20Cow%20Fences/</url>
      
        <content type="html"><![CDATA[<p>æ˜¯ä¸€é“ç»å…¸çš„äºŒåˆ†é¢˜ï¼ˆå¯æˆ‘ä¸€å¼€å§‹å¹¶ä¸ä¼šåš <a href="http://poj.org/problem?id=2018">http://poj.org/problem?id=2018</a></p><p>ä»é¢˜æ„æ¥çœ‹å¾ˆå¿«å°±èƒ½åˆ†æå‡ºè¿™æ˜¯ä¸€é“äºŒåˆ†é¢˜ï¼Œè€Œä¸”åº”è¯¥æ˜¯äºŒåˆ†ç­”æ¡ˆï¼Œä½†éš¾ç‚¹å°±æ˜¯å¦‚ä½•åœ¨Oï¼ˆnï¼‰çš„å¤æ‚åº¦å†…åˆ¤æ–­å®ƒæ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå…·ä½“çš„è§£é‡Šæˆ‘å·²ç»æ³¨é‡Šä¸Šäº†ï¼Œè¿˜æ˜¯ä¸å¤ªæ¸…æ¥šçš„ï¼Œå¯ä»¥ç»“åˆç”»å›¾æ¥çœ‹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> N,F;</span><br><span class="line"><span class="keyword">int</span> f[maxn];</span><br><span class="line"><span class="keyword">double</span> tmp[maxn],ssum[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">double</span> mid)</span></span>&#123;<span class="comment">//æ ¸å¿ƒ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;++i)&#123;</span><br><span class="line">tmp[i]=(<span class="keyword">double</span>)f[i]-mid;<span class="comment">//æ¯ä¸ªå‰ªæ‰å¹³å‡å€¼ï¼Œå³å»æ‰¾æœ‰æ²¡æœ‰ä¸€æ®µå’Œ&gt;=0ä¸”é•¿åº¦&gt;=F </span></span><br><span class="line">ssum[i]=ssum[i<span class="number">-1</span>]+tmp[i];<span class="comment">//å‰ç¼€å’Œ </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">double</span> ans=<span class="number">-1</span>,mmin=<span class="number">1e9</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=F;i&lt;=N;++i)&#123; <span class="comment">//ä»¥iä¸ºå³ç«¯ç‚¹ï¼Œå¯å–é•¿åº¦&gt;=Fçš„ï¼Œå³å·¦ç«¯ç‚¹å¯ä»¥åœ¨1~i-F+1é‡Œå– </span></span><br><span class="line"><span class="comment">//ä¸æ–­è·Ÿæ–°å°äºå¹³å‡å€¼çš„é‚£ä¸€éƒ¨åˆ†(å‰ç¼€å’Œè¶Šå°ï¼Œå°äº0ï¼Œè¯´æ˜ä»–è¾¾ä¸åˆ°midå¹³å‡å€¼</span></span><br><span class="line">mmin=min(mmin,ssum[i-F]); <span class="comment">//åªä¼šæ‹‰ä½å¹³å‡å€¼ </span></span><br><span class="line">ans=max(ans,ssum[i]-mmin);<span class="comment">//å‰ªæ‰æ‹‰ä½å¹³å‡å€¼çš„ï¼Œå³å¾—åˆ°ä»¥iä¸ºå³ç«¯ç‚¹æœ€å¤§çš„å¹³å‡å€¼ </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(ans&gt;=<span class="number">0</span>)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;N,&amp;F);</span><br><span class="line"><span class="keyword">int</span> mmax=<span class="number">-1</span>,mmin=<span class="number">1e9</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,f+i);</span><br><span class="line">mmax=max(mmax,f[i]);</span><br><span class="line">mmin=min(mmin,f[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">double</span> le=<span class="keyword">double</span>(mmin),ri=<span class="keyword">double</span>(mmax);</span><br><span class="line"><span class="keyword">while</span>(ri-le&gt;(<span class="keyword">double</span>)<span class="number">1e-6</span>)&#123;</span><br><span class="line"><span class="keyword">double</span> mid=(le+ri)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span>(cmp(mid))</span><br><span class="line">le=mid;</span><br><span class="line"><span class="keyword">else</span>ri=mid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;(<span class="keyword">int</span>)(ri*<span class="number">1000</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> POJ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒåˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Div.2) C. Vasya and Robot</title>
      <link href="2018/11/05/Vasya%20and%20Robot/"/>
      <url>2018/11/05/Vasya%20and%20Robot/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸ªé¢˜ç›®ç¬¬ä¸€çœ¼çœ‹å¹¶ä¸æ˜¯ä¸€ä¸ªäºŒåˆ†ï¼Œä»”ç»†æ€è€ƒä¸€ä¸‹ï¼Œè¦æšä¸¾é•¿åº¦ï¼Œç„¶ååˆè¦æšä¸¾èµ·ç‚¹ï¼Œè¿™é‡Œå·²ç»æ˜¯O(n^2)çš„å¤æ‚åº¦äº†ï¼Œè¿˜è¦åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æœé¢„å¤„ç†äº†ï¼Œæ˜¯èƒ½åœ¨O(1)çš„å¤æ‚åº¦è§£å†³çš„ã€‚æ‰€ä»¥æšä¸¾é•¿åº¦è¿™è¾¹å¯ä»¥ç”¨ä¸€ä¸ªäºŒåˆ†ï¼Œè¿™æ ·å¤æ‚åº¦å°±æ˜¯O(nlogn)äº†ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé¢˜ç›®ã€‚</p><p>å¦‚ä½•åœ¨O(n)çš„å¤æ‚åº¦åˆ¤æ–­è¿™ä¸ªé•¿åº¦æ»¡ä¸æ»¡è¶³è¦æ±‚å‘¢ï¼Ÿ</p><p>æšä¸¾èµ·ç‚¹å°±è¦O(n)äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯O(1)åˆ¤æ–­Oä¸OKï¼›é¢„å¤„ç†åˆ°ç¬¬iä¸ªå­—æ¯æ—¶å¾€å³å¾€ä¸Šåç§»äº†å‡ ä½ï¼Œé‚£ä¹ˆæšä¸¾åˆ°ä¸€æ®µåŒºé—´çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†é‚£ä¸€æ®µåŒºé—´çš„æ“ä½œå…¨éƒ¨æ’¤é”€ï¼ˆåæ­£å…¨æ”¹ï¼Œé•¿åº¦ä¹Ÿæ˜¯lenï¼‰ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„ä½ç½®ç§»åˆ°ç›®æ ‡ç‚¹æœ€å°‘çš„æ“ä½œnum å°±æ˜¯ç°åœ¨çš„ä½ç½®å’Œç»ˆç‚¹åœ¨Xè½´ä¸Šçš„åç§»é‡+Yè½´ä¸Šçš„åç§»é‡ï¼Œå¦‚æœlen&gt;num,é‚£ä¹ˆlen-numä¸€å®šè¦æ˜¯å¶æ•°ï¼Œè¿™æ ·ä¸Šä¸‹å·¦å³æ‰å¯ä»¥æŠµæ¶ˆã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll n,ex,ey;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">2e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">X</span>&#123;</span></span><br><span class="line">ll r,u;</span><br><span class="line">&#125;f[maxn]; </span><br><span class="line"><span class="keyword">bool</span> flag=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">pd</span><span class="params">(<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+len<span class="number">-1</span>&lt;=n;++i)&#123;</span><br><span class="line">ll rr=f[i+len<span class="number">-1</span>].r-f[i<span class="number">-1</span>].r,uu=f[i+len<span class="number">-1</span>].u-f[i<span class="number">-1</span>].u;<span class="comment">//åŒºé—´rå’Œuçš„åç§»é‡</span></span><br><span class="line">ll num=<span class="built_in">abs</span>(ex-(f[n].r-rr))+<span class="built_in">abs</span>(ey-(f[n].u-uu));<span class="comment">//æ‰€éœ€è¦çš„æœ€å°æ“ä½œæ•°</span></span><br><span class="line"><span class="keyword">if</span>(len&gt;=num&amp;&amp;(len-num)%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">flag=<span class="number">1</span>;<span class="comment">//è¯´æ˜å¯ä»¥èµ°åˆ°ç»ˆç‚¹</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,&amp;n);</span><br><span class="line">getchar();</span><br><span class="line">f[<span class="number">0</span>].r=<span class="number">0</span>,f[<span class="number">0</span>].u=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> tmp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%c&quot;</span>,&amp;tmp);<span class="comment">//é¢„å¤„ç†</span></span><br><span class="line"><span class="keyword">if</span>(tmp==<span class="string">&#x27;R&#x27;</span>)f[i].r=f[i<span class="number">-1</span>].r+<span class="number">1</span>,f[i].u=f[i<span class="number">-1</span>].u;</span><br><span class="line"><span class="keyword">if</span>(tmp==<span class="string">&#x27;L&#x27;</span>)f[i].r=f[i<span class="number">-1</span>].r<span class="number">-1</span>,f[i].u=f[i<span class="number">-1</span>].u;</span><br><span class="line"><span class="keyword">if</span>(tmp==<span class="string">&#x27;U&#x27;</span>)f[i].u=f[i<span class="number">-1</span>].u+<span class="number">1</span>,f[i].r=f[i<span class="number">-1</span>].r;</span><br><span class="line"><span class="keyword">if</span>(tmp==<span class="string">&#x27;D&#x27;</span>)f[i].u=f[i<span class="number">-1</span>].u<span class="number">-1</span>,f[i].r=f[i<span class="number">-1</span>].r;</span><br><span class="line">&#125;</span><br><span class="line">getchar();</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;ex,&amp;ey);</span><br><span class="line"><span class="keyword">if</span>(f[n].r==ex&amp;&amp;f[n].u==ey)<span class="built_in">cout</span>&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">int</span> le=<span class="number">0</span>,ri=n+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(ri&gt;le)&#123;</span><br><span class="line"><span class="keyword">int</span> mid=(le+ri)/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span>(pd(mid))ri=mid;</span><br><span class="line"><span class="keyword">else</span>le=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!flag)<span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span><span class="built_in">cout</span>&lt;&lt;le&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒåˆ† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) E è¯¡å¼‚æ•°å­—ï¼ˆæ•°ä½dpï¼‰</title>
      <link href="2018/10/21/(Nowcoder)%20E%20%E8%AF%A1%E5%BC%82%E6%95%B0%E5%AD%97/"/>
      <url>2018/10/21/(Nowcoder)%20E%20%E8%AF%A1%E5%BC%82%E6%95%B0%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<p>ç‰›å®¢å°ç™½æœˆèµ›8çœŸçš„æ‰“çš„è‡ªé—­äº†ï¼Œæ„Ÿè§‰ä¸€ç‚¹éƒ½ä¸å°ç™½ T_T (è‚¯å®šæ˜¯æˆ‘å¤ªèœäº†ï¼Œæ²¡é”™å°±æ˜¯è¿™æ ·çš„)</p><p>é¢˜ç›®é“¾æ¥https://www.nowcoder.com/acm/contest/214/E</p><p>é¢˜è§£è¯´è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æ•°ä½dpï¼Œæ²¡æ¥è§¦è¿‡ï¼Œæ„Ÿè§‰æŒºéš¾çš„ï¼ˆå¤§æ¦‚è¿™å°±æ˜¯èœå§ï¼‰</p><p>å…ˆç¨å¾®äº†è§£äº†ä¸€ä¸‹æ•°ä½dpï¼Œé™„ä¸Šå†™çš„éå¸¸å¥½çš„æ•°ä½dpè¯¦è§£https://blog.csdn.net/wust_zzwh/article/details/52100392</p><p>ç„¶åçœ‹æ‡‚äº†å¤§ä½¬çš„ä»£ç ï¼Œæ•²äº†ä¸€ä¸‹å†é™„ä¸Šäº†æˆ‘çš„ç†è§£.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll mod=<span class="number">20020219</span>;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line">ll lim[<span class="number">20</span>],len[<span class="number">20</span>];<span class="comment">//limåˆ†åˆ«è®°å½•æ¯ä¸ªæ•°çš„æœ€å¤§é‡å¤æ¬¡æ•°ï¼Œæ²¡æœ‰å°±ç½®å¤§ </span></span><br><span class="line">ll a[<span class="number">100</span>][<span class="number">100</span>][<span class="number">100</span>];<span class="comment">//lenå°†æ•°å­˜å…¥æ•°ç»„ï¼Œæ¯ä¸ªä½ç½®ä¹Ÿä»£è¡¨ç€ä¸Šé™ </span></span><br><span class="line"><span class="comment">//  pos   pre   num</span></span><br><span class="line"><span class="comment">// è®°å½•ç€ä½æ•°ä¸ºpos(åŒ…æ‹¬å‰å¯¼0ï¼Œ0012ä¹Ÿç®—4ä½æ•°)ï¼Œå‰é©±æ˜¯preï¼Œå‰é©±é‡å¤æ•°ä¸ºnumçš„æ»¡è¶³æ¡ä»¶çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">// posä½çš„æ¯ä¸€ä¸ªä½ç½®çš„èŒƒå›´éƒ½æ˜¯0-9ï¼Œ(å°±æ˜¯ä»£è¡¨å®Œæ•´çš„posä½æ•°) </span></span><br><span class="line">ll le,ri,n; </span><br><span class="line"><span class="function">ll <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">bool</span> limit,<span class="keyword">int</span> pre,<span class="keyword">int</span> num)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(num&gt;lim[pre])<span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//è¶…è¿‡preå…è®¸å‡ºç°çš„æœ€å¤§æ¬¡æ•°ï¼Œè¿”å›0 </span></span><br><span class="line"><span class="keyword">if</span>(pos==<span class="number">0</span>)<span class="keyword">return</span> <span class="number">1</span>;<span class="comment">// 0ä½è¿”å›1 </span></span><br><span class="line"><span class="keyword">if</span>(!limit &amp;&amp; a[pos][pre][num]!=<span class="number">-1</span>) <span class="keyword">return</span> a[pos][pre][num];<span class="comment">//å‰é©±ä¸æ˜¯ä¸Šé™ï¼Œè€Œä¸”è¢«æ›´æ–°è¿‡ç›´æ¥ç”¨ </span></span><br><span class="line"><span class="comment">//å¦‚æœå‰é©±æ˜¯ä¸Šé™ï¼Œåˆ™åé¢ä¸Šé™ä¹Ÿå—åˆ°é™åˆ¶ï¼Œä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„posä½ï¼Œæ•…ä¸å¯ç”¨ </span></span><br><span class="line"><span class="keyword">int</span> up=limit?len[pos]:<span class="number">9</span>; <span class="comment">//å¦‚æœå‰é©±è¾¾åˆ°ä¸Šé™ï¼Œåˆ™è¿™ä¸ªä½ç½®çš„ä¸Šé™ä¸ºè§£å†³æ•°çš„ä¸Šé™</span></span><br><span class="line">ll sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=up;++i) &#123;</span><br><span class="line">sum=(sum+dfs(pos<span class="number">-1</span>,limit&amp;&amp;i==len[pos],i,i==pre?num+<span class="number">1</span>:<span class="number">1</span>))%mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> limit?sum:a[pos][pre][num]=sum;<span class="comment">//å‰é©±ä¸æ˜¯ä¸Šé™å°±æ›´æ–°ï¼Œå¦åˆ™ç›´æ¥return </span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">(ll xx)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(xx==<span class="number">-1</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">ll cnt=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(xx)&#123;</span><br><span class="line">len[++cnt]=xx%<span class="number">10</span>;<span class="comment">//æ¯ä¸€ä½æ”¾å…¥æ•°ç»„ï¼Œcntä»£è¡¨ä½æ•° </span></span><br><span class="line">xx/=<span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=len[cnt];++i)&#123;<span class="comment">//æœ€é«˜ä½ä»0-len[cnt]æšä¸¾ </span></span><br><span class="line">ans=(ans+dfs(cnt<span class="number">-1</span>,i==len[cnt],i,<span class="number">1</span>))%mod;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">return</span> ans%mod;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line">fill(lim,lim+<span class="number">11</span>,<span class="number">0xffffffff</span>);</span><br><span class="line"><span class="built_in">memset</span>(a,<span class="number">-1</span>,<span class="keyword">sizeof</span>(a));</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;le,&amp;ri,&amp;n);</span><br><span class="line">ll xx,max_num;</span><br><span class="line"><span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;xx,&amp;max_num);</span><br><span class="line">lim[xx]=min(lim[xx],max_num);<span class="comment">//æ›´æ–° xxæœ€å¤§èƒ½å‡ºç°lim[xx]æ¬¡</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;(solve(ri)-solve(le<span class="number">-1</span>)+mod)%mod&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> æ•°ä½dp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round</title>
      <link href="2018/10/06/Codeforces%20Round%20#514/"/>
      <url>2018/10/06/Codeforces%20Round%20#514/</url>
      
        <content type="html"><![CDATA[<h2 id="a-cashier"><a class="markdownIt-Anchor" href="#a-cashier"></a> A. Cashier</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX; </span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line">ll n,L,a; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;n,&amp;L,&amp;a);</span><br><span class="line"><span class="keyword">int</span> le=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> num=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> s,h;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;s,&amp;h);</span><br><span class="line">num+=(s-le)/a;</span><br><span class="line">le=s+h;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(L&gt;le)&#123;</span><br><span class="line">num+=(L-le)/a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;num&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="b-forgery"><a class="markdownIt-Anchor" href="#b-forgery"></a> B. Forgery</h2><p>æˆ‘æ˜¯å…ˆè®°å½•äº†è¦å¡«çš„åœ°æ–¹å’Œä¸èƒ½å¡«çš„åœ°æ–¹ï¼Œç„¶åå»æŠŠèƒ½å¡«çš„åœ°æ–¹å…¨éƒ½å¡«èµ·æ¥ï¼Œæœ€åæ£€æŸ¥ä¸€ä¸‹ å¦‚æœè¿˜æ˜¯æœ‰çš„è¦å¡«çš„åœ°æ–¹è¿˜æ²¡è¢«å¡«å¥½ï¼Œé‚£å°±NOï¼Œå¦åˆ™YES</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX; </span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">char</span> M[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> xx[]=&#123;<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> yy[]=&#123;<span class="number">1</span> ,<span class="number">1</span>,<span class="number">1</span>, <span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">look</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line"><span class="keyword">bool</span> flag1=<span class="number">0</span>,flag2=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(M[x+xx[i]][y+yy[i]]==<span class="string">&#x27;.&#x27;</span>)&#123;</span><br><span class="line">flag2=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(M[x+xx[i]][y+yy[i]]==<span class="string">&#x27;X&#x27;</span>)&#123;</span><br><span class="line">flag1=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(!flag1&amp;&amp;flag2)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;++i)&#123;</span><br><span class="line">M[x+xx[i]][y+yy[i]]=<span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line"><span class="keyword">char</span> tt;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;++j)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;tt;</span><br><span class="line"><span class="keyword">if</span>(tt==<span class="string">&#x27;#&#x27;</span>)M[i][j]=<span class="string">&#x27;.&#x27;</span>;</span><br><span class="line"><span class="keyword">else</span>M[i][j]=<span class="string">&#x27;X&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(n&lt;<span class="number">3</span>||m&lt;<span class="number">3</span>)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;NO&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n<span class="number">-1</span>;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;m<span class="number">-1</span>;++j)&#123;</span><br><span class="line">look(i, j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> flag=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(M[i][j]==<span class="string">&#x27;.&#x27;</span>)&#123;</span><br><span class="line">flag=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(flag)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;NO&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;YES&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="c-sequence-transformation"><a class="markdownIt-Anchor" href="#c-sequence-transformation"></a> C. Sequence Transformation</h2><p>ä¸€æ®µè¿ç»­æ•°çš„æœ€å¤§å…¬çº¦æ•°æ˜¯1ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥è‚¯å®šæ˜¯è¦æŠŠ1å…ˆåˆ é™¤ï¼Œè¦ä¸ç„¶æœ€å¤§å…¬çº¦æ•°ä¸å¯èƒ½è¶…è¿‡1ï¼Œæ¥ä¸‹æ¥æœ€æƒ³è®©ä»–å‡ºç°çš„æœ€å¤§å…¬çº¦æ•°æ˜¯2ï¼ˆå› ä¸ºæ˜¯å­—å…¸åºï¼‰ï¼Œæ‰€æœ‰å¶æ•°éƒ½å¯ä»¥è¢«2æ•´é™¤ï¼Œè€Œä¸€ä¸²å¥‡æ•°çš„æœ€å¤§å…¬çº¦æ•°å°±æ˜¯1äº†ï¼ˆé™¤äº†n==3è¿™ç§æƒ…å†µï¼Œç‰¹åˆ¤ä¸€ä¸‹ï¼‰ï¼Œå¾ˆæ˜æ˜¾æ¥ä¸‹æ¥çš„å°±æ˜¯å°†å¥‡æ•°å…¨éƒ¨åˆ é™¤ï¼Œè€Œå‰©ä¸‹çš„å¶æ•°æ¯æ¬¡å°†é—´éš”çš„åˆ å»ï¼Œå…¬çº¦æ•°å°±ä¼šä¹˜2ï¼ˆæ¯”å¦‚2 4 6 8 10ï¼Œåˆ é™¤2 6 10ï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX; </span><br><span class="line"><span class="comment">//const ll maxn=1e5+5;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,res=<span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line"><span class="keyword">while</span>(n)&#123;</span><br><span class="line"><span class="keyword">if</span>(n==<span class="number">3</span>)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d %d %d&quot;</span>,res,res,res*<span class="number">3</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n/<span class="number">2</span>+n%<span class="number">2</span>;++i) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,res);</span><br><span class="line">n/=<span class="number">2</span>;</span><br><span class="line">res*=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Codeforces </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>2018å¾å·ç½‘ç»œèµ›F,H,I</title>
      <link href="2018/09/11/2018%E5%BE%90%E5%B7%9E%E7%BD%91%E7%BB%9C%E8%B5%9B/"/>
      <url>2018/09/11/2018%E5%BE%90%E5%B7%9E%E7%BD%91%E7%BB%9C%E8%B5%9B/</url>
      
        <content type="html"><![CDATA[<p>åªèƒ½æ¥åˆ’æ°´ï¼Œåªåšäº†3é¢˜ã€‚</p><p>Fï¼šé˜Ÿå‹åˆ‡çš„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> line,k,T,ans,x,y,len;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line"><span class="keyword">while</span>(T--)</span><br><span class="line">&#123;</span><br><span class="line">ans=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;line);</span><br><span class="line"><span class="built_in">map</span> &lt;<span class="built_in">pair</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; ,<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; mp;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=line;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;k);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=k;j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;x,&amp;y);</span><br><span class="line"><span class="keyword">if</span>(!mp[<span class="built_in">make_pair</span>(x,y)].empty()&amp;&amp;mp[<span class="built_in">make_pair</span>(x,y)].back() ==i ) <span class="keyword">continue</span>;</span><br><span class="line">mp[<span class="built_in">make_pair</span>(x,y)].push_back(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> it=mp.begin();it!=mp.end();++it)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;v=it-&gt;second; </span><br><span class="line"><span class="keyword">if</span>(!v.size()) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123;</span><br><span class="line">len = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; v.size(); ++i) </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (v[i]-v[i - <span class="number">1</span>]==<span class="number">1</span>)len++;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123;</span><br><span class="line">ans = max(ans, len);</span><br><span class="line">len = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ans = max(ans, len);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Hï¼šæ‰€æ±‚çš„ç­”æ¡ˆå°±æ˜¯ä»lå¼€å§‹çš„å‰ç¼€å’Œï¼Œç”¨çº¿æ®µæ ‘ç»´æŠ¤å‰ç¼€å’Œå°±è¡Œäº†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 100007  <span class="comment">//å…ƒç´ æ€»ä¸ªæ•°</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ls l,m,rt&lt;&lt;1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rs m+1,r,rt&lt;&lt;1|1</span></span><br><span class="line">ll Sum[maxn&lt;&lt;<span class="number">2</span>],Add[maxn&lt;&lt;<span class="number">2</span>];<span class="comment">//Sumæ±‚å’Œï¼ŒAddä¸ºæ‡’æƒ°æ ‡è®° </span></span><br><span class="line">ll A[maxn];<span class="comment">//å­˜åŸæ•°ç»„æ•°æ®ä¸‹æ ‡[1,n] </span></span><br><span class="line">ll X[maxn];</span><br><span class="line">ll n,q;</span><br><span class="line"><span class="comment">//PushUpå‡½æ•°æ›´æ–°èŠ‚ç‚¹ä¿¡æ¯ ï¼Œè¿™é‡Œæ˜¯æ±‚å’Œ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PushUp</span><span class="params">(ll rt)</span></span>&#123;Sum[rt]=Sum[rt&lt;&lt;<span class="number">1</span>]+Sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PushDown</span><span class="params">(ll rt,ll ln,ll rn)</span></span>&#123;</span><br><span class="line"><span class="comment">//ln,rnä¸ºå·¦å­æ ‘ï¼Œå³å­æ ‘çš„æ•°å­—æ•°é‡ã€‚ </span></span><br><span class="line"><span class="keyword">if</span>(Add[rt])&#123;</span><br><span class="line"><span class="comment">//ä¸‹æ¨æ ‡è®° </span></span><br><span class="line">Add[rt&lt;&lt;<span class="number">1</span>]+=Add[rt];</span><br><span class="line">Add[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=Add[rt];</span><br><span class="line"><span class="comment">//ä¿®æ”¹å­èŠ‚ç‚¹çš„Sumä½¿ä¹‹ä¸å¯¹åº”çš„Addç›¸å¯¹åº” </span></span><br><span class="line">Sum[rt&lt;&lt;<span class="number">1</span>]+=Add[rt]*ln;</span><br><span class="line">Sum[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]+=Add[rt]*rn;</span><br><span class="line"><span class="comment">//æ¸…é™¤æœ¬èŠ‚ç‚¹æ ‡è®° </span></span><br><span class="line">Add[rt]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Buildå‡½æ•°å»ºæ ‘ </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(ll l,ll r,ll rt)</span></span>&#123; <span class="comment">//l,rè¡¨ç¤ºå½“å‰èŠ‚ç‚¹åŒºé—´ï¼Œrtè¡¨ç¤ºå½“å‰èŠ‚ç‚¹ç¼–å·</span></span><br><span class="line"><span class="keyword">if</span>(l==r) &#123;<span class="comment">//è‹¥åˆ°è¾¾å¶èŠ‚ç‚¹ </span></span><br><span class="line">Sum[rt]=A[l];<span class="comment">//å‚¨å­˜æ•°ç»„å€¼ </span></span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">ll m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="comment">//å·¦å³é€’å½’ </span></span><br><span class="line">Build(l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line">Build(m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"><span class="comment">//æ›´æ–°ä¿¡æ¯ </span></span><br><span class="line">PushUp(rt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span><span class="params">(ll L,ll R,ll C,ll l,ll r,ll rt)</span></span>&#123;<span class="comment">//L,Rè¡¨ç¤ºæ“ä½œåŒºé—´ï¼Œl,rè¡¨ç¤ºå½“å‰èŠ‚ç‚¹åŒºé—´ï¼Œrtè¡¨ç¤ºå½“å‰èŠ‚ç‚¹ç¼–å· </span></span><br><span class="line"><span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R)&#123;<span class="comment">//å¦‚æœæœ¬åŒºé—´å®Œå…¨åœ¨æ“ä½œåŒºé—´[L,R]ä»¥å†… </span></span><br><span class="line">Sum[rt]+=C*(r-l+<span class="number">1</span>);<span class="comment">//æ›´æ–°æ•°å­—å’Œï¼Œå‘ä¸Šä¿æŒæ­£ç¡®</span></span><br><span class="line">Add[rt]+=C;<span class="comment">//å¢åŠ Addæ ‡è®°ï¼Œè¡¨ç¤ºæœ¬åŒºé—´çš„Sumæ­£ç¡®ï¼Œå­åŒºé—´çš„Sumä»éœ€è¦æ ¹æ®Addçš„å€¼æ¥è°ƒæ•´</span></span><br><span class="line"><span class="keyword">return</span> ; </span><br><span class="line">&#125;</span><br><span class="line">ll m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">PushDown(rt,m-l+<span class="number">1</span>,r-m);<span class="comment">//ä¸‹æ¨æ ‡è®°</span></span><br><span class="line"><span class="comment">//è¿™é‡Œåˆ¤æ–­å·¦å³å­æ ‘è·Ÿ[L,R]æœ‰æ— äº¤é›†ï¼Œæœ‰äº¤é›†æ‰é€’å½’ </span></span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) Update(L,R,C,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(R &gt;  m) Update(L,R,C,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>); </span><br><span class="line">PushUp(rt);<span class="comment">//æ›´æ–°æœ¬èŠ‚ç‚¹ä¿¡æ¯ </span></span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="function">ll <span class="title">Query</span><span class="params">(ll L,ll R,ll l,ll r,ll rt)</span></span>&#123;<span class="comment">//L,Rè¡¨ç¤ºæ“ä½œåŒºé—´ï¼Œl,rè¡¨ç¤ºå½“å‰èŠ‚ç‚¹åŒºé—´ï¼Œrtè¡¨ç¤ºå½“å‰èŠ‚ç‚¹ç¼–å·</span></span><br><span class="line"><span class="keyword">if</span>(L &lt;= l &amp;&amp; r &lt;= R)&#123;</span><br><span class="line"><span class="comment">//åœ¨åŒºé—´å†…ï¼Œç›´æ¥è¿”å› </span></span><br><span class="line"><span class="keyword">return</span> Sum[rt];</span><br><span class="line">&#125;</span><br><span class="line">ll m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="comment">//ä¸‹æ¨æ ‡è®°ï¼Œå¦åˆ™Sumå¯èƒ½ä¸æ­£ç¡®</span></span><br><span class="line">PushDown(rt,m-l+<span class="number">1</span>,r-m); </span><br><span class="line"></span><br><span class="line"><span class="comment">//ç´¯è®¡ç­”æ¡ˆ</span></span><br><span class="line">ll ANS=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= m) ANS+=Query(L,R,l,m,rt&lt;&lt;<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(R &gt;  m) ANS+=Query(L,R,m+<span class="number">1</span>,r,rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"><span class="keyword">return</span> ANS;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;n,&amp;q);</span><br><span class="line">ll temp;</span><br><span class="line"><span class="keyword">for</span>(ll i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>,X+i);</span><br><span class="line">A[i]=A[i<span class="number">-1</span>]+X[i];</span><br><span class="line">&#125;</span><br><span class="line">Build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">ll x,y,z;</span><br><span class="line"><span class="keyword">for</span>(ll i=<span class="number">0</span>;i&lt;q;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld%lld&quot;</span>,&amp;x,&amp;y,&amp;z);</span><br><span class="line"><span class="keyword">if</span>(x==<span class="number">1</span>)&#123;<span class="comment">//æŸ¥è¯¢ </span></span><br><span class="line">ll count=z-y+<span class="number">1</span>;</span><br><span class="line">ll ans=Query(y,z,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span>(y==<span class="number">1</span>)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">ans=ans-count*(Query(y<span class="number">-1</span>,y<span class="number">-1</span>,<span class="number">1</span>,n,<span class="number">1</span>));</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;<span class="comment">//ä¿®æ”¹ </span></span><br><span class="line">ll ago=X[y];</span><br><span class="line">X[y]=z;</span><br><span class="line">ll change=z-ago;</span><br><span class="line">Update(y,n,change,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>I:ansæ˜¯0çš„æ—¶å€™ç»“æœæ˜¯1ï¼Œç»“æœå¯¼è‡´Waäº†12å‘ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;T);</span><br><span class="line"><span class="keyword">while</span> (T--)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> N;</span><br><span class="line"><span class="keyword">char</span> ch;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d %c&quot;</span>,&amp;N,&amp;ch);</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">ll ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;N; ++i)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">abs</span>((<span class="keyword">int</span>)(ch-s[i]))!=<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">ans = (N-i)*<span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">abs</span>((<span class="keyword">int</span>)(ch-s[i]))&lt;<span class="number">10</span>)</span><br><span class="line">&#123;</span><br><span class="line">ans--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans==<span class="number">0</span>?<span class="number">1</span>:ans);</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>C++ stringå­—ç¬¦ä¸²æˆªå–</title>
      <link href="2018/09/05/C++%20string%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%AA%E5%8F%96/"/>
      <url>2018/09/05/C++%20string%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%AA%E5%8F%96/</url>
      
        <content type="html"><![CDATA[<p>å¾ˆä¹…æ²¡å†™é¢˜è¿stringå­—ç¬¦ä¸²çš„æˆªå–éƒ½å¿˜äº†ï¼›</p><p>é™„ä¸Šï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">s</span><span class="params">(<span class="string">&quot;abaacd&quot;</span>)</span></span>;</span><br><span class="line"><span class="built_in">string</span> res=s.substr(<span class="number">1</span>,<span class="number">4</span>);<span class="comment">//ä»ç¬¬ä¸€ä¸ªä½ç½®æˆªå–4ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"><span class="comment">//è¾“å‡º baac </span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>å†é™„ä¸Šä¸€é¢˜http://codeforces.com/contest/1029/problem/Aæ„Ÿè§‰è‡ªå·±å†™çš„æŒºéº»çƒ¦çš„é¥¿ã€‚ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX; </span><br><span class="line"><span class="keyword">int</span> k,t;</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;k&gt;&gt;t&gt;&gt;s)&#123;</span><br><span class="line"><span class="built_in">string</span> res=s;</span><br><span class="line"><span class="built_in">string</span> temp;</span><br><span class="line"><span class="keyword">int</span> num;</span><br><span class="line"><span class="keyword">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;s.size();++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(s[i]==s[<span class="number">0</span>])&#123;</span><br><span class="line"><span class="comment">//cout&lt;&lt;&quot;i: &quot;&lt;&lt;i&lt;&lt;endl;</span></span><br><span class="line">num=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(j=i;j&lt;s.size();++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(s[num]!=s[j])&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">num++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(j&gt;=s.size())&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i&gt;=s.size())&#123;</span><br><span class="line">temp=s;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;t<span class="number">-1</span>;++k)&#123;</span><br><span class="line">res+=temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">temp=s.substr(num,s.size()-num);</span><br><span class="line"><span class="comment">//cout&lt;&lt;temp&lt;&lt;endl;</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;t<span class="number">-1</span>;++k)&#123;</span><br><span class="line">res+=temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">res.clear();</span><br><span class="line">temp.clear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€å°ç”Ÿæˆæ ‘prim&amp;&amp;kruscal å’Œ æ¨¡æ¿é¢˜</title>
      <link href="2018/09/03/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91&amp;%E6%A8%A1%E6%9D%BF%E9%A2%98/"/>
      <url>2018/09/03/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91&amp;%E6%A8%A1%E6%9D%BF%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯æˆ‘åŸæ¥çš„primå¤ªä¸ä¼˜ç¾äº†ï¼Œä»Šå¤©é‡æ‰“ä¸€å‘</p><p>æœ€å°ç”Ÿæˆæ ‘ä¸¤ç§ç®—æ³•çš„åŸç†å¯ä»¥çœ‹https://www.cnblogs.com/adforce/p/3247437.htmlå†™çš„å¾ˆå¥½å¾ˆæ¸…æ¥šï¼Œæˆ‘å°±ä¸ç­é—¨å¼„æ–§äº†</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=INT_MAX;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">6</span>;</span><br><span class="line"><span class="keyword">bool</span> visit[maxn];</span><br><span class="line"><span class="keyword">int</span> dir[maxn]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; path;<span class="comment">//å­˜å–è·¯å¾„ </span></span><br><span class="line"><span class="keyword">int</span> Map[maxn][maxn]=&#123; &#123;INF,<span class="number">7</span>,<span class="number">4</span>,INF,INF,INF&#125;,  <span class="comment">//INFä»£è¡¨ä¸¤ç‚¹ä¹‹é—´ä¸å¯è¾¾</span></span><br><span class="line">&#123;<span class="number">7</span>,INF,<span class="number">6</span>,<span class="number">2</span>,INF,<span class="number">4</span>&#125;,</span><br><span class="line">&#123;<span class="number">4</span>,<span class="number">6</span>,INF,INF,<span class="number">9</span>,<span class="number">8</span>&#125;,</span><br><span class="line">&#123;INF,<span class="number">2</span>,INF,INF,INF,<span class="number">7</span>&#125;,</span><br><span class="line">&#123;INF,INF,<span class="number">9</span>,INF,INF,<span class="number">1</span>&#125;,</span><br><span class="line">&#123;INF,<span class="number">4</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">1</span>,INF&#125;</span><br><span class="line">&#125;;<span class="comment">//è¿é€šæƒ…å†µ</span></span><br><span class="line"><span class="function">ll <span class="title">prim</span><span class="params">(<span class="keyword">int</span> cur)</span></span>&#123;<span class="comment">//è¿”å›æœ€å°ç”Ÿæˆæ ‘çš„è·¯å¾„å’Œ </span></span><br><span class="line">path.clear();</span><br><span class="line">path.push_back(cur);</span><br><span class="line"><span class="comment">//cout&lt;&lt;cur&lt;&lt;endl;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> i=<span class="number">0</span>,j=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> root=cur;</span><br><span class="line"><span class="built_in">memset</span>(visit,<span class="number">0</span>,<span class="keyword">sizeof</span>(visit)); </span><br><span class="line">visit[cur]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;maxn;++i)&#123;</span><br><span class="line">dir[i]=Map[root][i];<span class="comment">//åˆå§‹åŒ–å„ä¸ªç‚¹åˆ°æ ‘çš„é•¿åº¦</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;maxn;++i)&#123;</span><br><span class="line"><span class="keyword">int</span> temp=INF;</span><br><span class="line"><span class="keyword">int</span> aid;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;maxn;++j)&#123;</span><br><span class="line"><span class="keyword">if</span>(!visit[j]&amp;&amp;dir[j]&lt;temp)&#123;<span class="comment">//æ‰¾åˆ°åˆ°è¿™æ£µæ ‘è·ç¦»æœ€å°å¥¥å¾·ç‚¹</span></span><br><span class="line">aid=j;</span><br><span class="line">temp=dir[j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">res+=temp;</span><br><span class="line">visit[aid]=<span class="number">1</span>;</span><br><span class="line"><span class="comment">//cout&lt;&lt;aid&lt;&lt;endl;</span></span><br><span class="line">path.push_back(aid);</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;maxn;++j)&#123;<span class="comment">//æ›´æ–°å„ä¸ªç‚¹åˆ°è¿™æ£µæ ‘çš„è·¯å¾„</span></span><br><span class="line"><span class="keyword">if</span>(!visit[j]&amp;&amp;dir[j]&gt;Map[aid][j])&#123;</span><br><span class="line">dir[j]=Map[aid][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;path.size()<span class="number">-1</span>;++i)<span class="comment">//æ‰“å°è·¯å¾„ï¼Œæˆ–è€…ç›´æ¥ä¸Šé¢çš„coutå°±è¡Œäº† </span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;path[i]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;path[path.size()<span class="number">-1</span>]&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//å¡«å……Map</span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;prim(<span class="number">0</span>)&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h1 id="prim"><a class="markdownIt-Anchor" href="#prim"></a> prim</h1><p>çŸäº†ä¸€æ‰‹åŸºå‹çš„ä»£ç ï¼Œç”¨ä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–äº†ï¼Œæ‰€ä»¥æ¯”åŸæ¥çš„primeæ•ˆç‡æ›´é«˜ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN; </span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e5</span>+<span class="number">7</span>; </span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> to;</span><br><span class="line"><span class="keyword">int</span> val;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> node &amp;a)<span class="keyword">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> val&gt;a.val;<span class="comment">//ä¼˜å…ˆé˜Ÿåˆ—é»˜è®¤ä»å¤§åˆ°å° </span></span><br><span class="line">&#125;<span class="comment">//æ‰€ä»¥åä¸€ä¸‹è®©ä»–ä»å°åˆ°å¤§æ’åº </span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">prim</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;node&gt; q;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">vis[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G[<span class="number">1</span>].size();++i)&#123;</span><br><span class="line">q.push(G[<span class="number">1</span>][i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">node tmp=q.top();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">if</span>(vis[tmp.to])</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">vis[tmp.to]=<span class="number">1</span>;</span><br><span class="line">ans+=tmp.val;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G[tmp.to].size();++i)&#123;</span><br><span class="line">q.push(G[tmp.to][i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¡«é‚»æ¥è¡¨ </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;prim()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><h1 id="kruscal"><a class="markdownIt-Anchor" href="#kruscal"></a> kruscal</h1><p>æ„Ÿè§‰å¹¶æŸ¥é›†åŠ ä¸åŠ å…¥æŒ‰ç§©åˆå¹¶ï¼Œå¯¹æ•ˆç‡çš„å½±å“å¹¶ä¸æ˜¯å¾ˆé«˜ï¼ˆæ¬¢è¿æŒ‡æ­£</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN; </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> size=<span class="number">1e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> n,father[size],rankk[size]; </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span><span class="comment">//è¾¹ </span></span><br><span class="line"><span class="keyword">int</span> val;</span><br><span class="line"><span class="keyword">int</span> s;</span><br><span class="line"><span class="keyword">int</span> e;</span><br><span class="line">node()&#123;&#125;;</span><br><span class="line">node(<span class="keyword">int</span> v,<span class="keyword">int</span> ss,<span class="keyword">int</span> ee)&#123;</span><br><span class="line">val=v,s=ss,e=ee;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setall</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> ss,<span class="keyword">int</span> ee)</span></span>&#123;</span><br><span class="line">val=v,s=ss,e=ee;</span><br><span class="line">&#125;</span><br><span class="line">&#125;edge[size*size/<span class="number">2</span>];<span class="comment">//å¦‚æœç»™äº†è¾¹çš„æ•°é‡ï¼Œåˆ™ç”¨ç»™çš„ï¼Œå¦åˆ™ä¼šçˆ† </span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_set</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line">father[i]=i;</span><br><span class="line">rankk[i]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//æŸ¥æ‰¾çˆ¶äº²èŠ‚ç‚¹é¡ºä¾¿è·¯å¾„å‹ç¼© </span></span><br><span class="line"><span class="keyword">if</span>(x!=father[x])&#123;</span><br><span class="line">father[x]=find(father[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> father[x];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//åˆå¹¶x,yæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼šåˆ©ç”¨Find_Setæ‰¾åˆ°å…¶ä¸­ä¸¤ä¸ª</span></span><br><span class="line"><span class="comment">//é›†åˆçš„ç¥–å…ˆï¼Œå°†ä¸€ä¸ªé›†åˆçš„ç¥–å…ˆæŒ‡å‘å¦ä¸€ä¸ªé›†åˆçš„ç¥–å…ˆã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Union</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="comment">//æŒ‰ç§©åˆå¹¶</span></span><br><span class="line">x=find(x);</span><br><span class="line">y=find(y);</span><br><span class="line"><span class="keyword">if</span>(x==y)&#123;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;<span class="comment">//ä¸ç”¨æŒ‰ç§©åˆå¹¶</span></span><br><span class="line">father[x]=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">if(rankk[x]&lt;rankk[y])&#123;</span></span><br><span class="line"><span class="comment">father[x]=find(y);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">else&#123;</span></span><br><span class="line"><span class="comment">if(rankk[x]==rankk[y])&#123;</span></span><br><span class="line"><span class="comment">rankk[x]++;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">father[y]=find(x);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a.val&lt;b.val;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kruskal</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;<span class="comment">//nä¸ºè¾¹çš„æ•°é‡ </span></span><br><span class="line">ll sum=<span class="number">0</span>;</span><br><span class="line">make_set();</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(find(edge[i].s)!=find(edge[i].e))&#123;</span><br><span class="line">Union(edge[i].s,edge[i].e);</span><br><span class="line">sum+=edge[i].val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;<span class="comment">//è¾¹çš„æ•°é‡ </span></span><br><span class="line"><span class="comment">//å»ºè¾¹ </span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">sort(edge,edge+cnt,cmp);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;kruskal(cnt)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>å¤§ä½¬çš„æ€»ç»“ï¼š</p><p>æ–¹æ³•ä¸Šï¼šKruskalåœ¨æ‰€æœ‰è¾¹ä¸­ä¸æ–­å¯»æ‰¾æœ€å°çš„è¾¹ï¼ŒPrimåœ¨Uå’ŒVä¸¤ä¸ªé›†åˆä¹‹é—´å¯»æ‰¾æƒå€¼æœ€å°çš„è¿æ¥ï¼Œå…±åŒç‚¹æ˜¯æ„é€ è¿‡ç¨‹éƒ½ä¸èƒ½å½¢æˆç¯ã€‚</p><p>æ—¶é—´ä¸Šï¼šPrimé€‚åˆç¨ å¯†å›¾ï¼Œå¤æ‚åº¦ä¸ºO(n * n)ï¼Œå› æ­¤é€šå¸¸ä½¿ç”¨é‚»æ¥çŸ©é˜µå‚¨å­˜ï¼Œå¤æ‚åº¦ä¸ºO(e * loge)ï¼Œè€ŒKruskalå¤šç”¨é‚»æ¥è¡¨ï¼Œç¨ å¯†å›¾ Prim &gt; Kruskalï¼Œç¨€ç–å›¾ Kruskal &gt; Primã€‚</p><p>ç©ºé—´ä¸Šï¼š Primé€‚åˆç‚¹å°‘è¾¹å¤šï¼ŒKruskalé€‚åˆè¾¹å¤šç‚¹å°‘ã€‚</p><p>é™„ä¸Šå‡ åˆ°æ¿å­é¢˜ï¼Œä¾›å›æµ‹è¯•ç»ƒä¹ </p><p><a href="http://hihocoder.com/problemset/problem/1097">http://hihocoder.com/problemset/problem/1097</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN; </span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e5</span>+<span class="number">7</span>; </span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> to;</span><br><span class="line"><span class="keyword">int</span> val;</span><br><span class="line">node()&#123;&#125;</span><br><span class="line">node(<span class="keyword">int</span> t,<span class="keyword">int</span> v)&#123;</span><br><span class="line">to=t,val=v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setall</span><span class="params">(<span class="keyword">int</span> t,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">to=t,val=v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> node &amp;a)<span class="keyword">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> val&gt;a.val;<span class="comment">//ä¼˜å…ˆé˜Ÿåˆ—é»˜è®¤ä»å¤§åˆ°å° </span></span><br><span class="line">&#125;<span class="comment">//æ‰€ä»¥åä¸€ä¸‹è®©ä»–ä»å°åˆ°å¤§æ’åº </span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; G[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">prim</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;node&gt; q;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">vis[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G[<span class="number">1</span>].size();++i)&#123;</span><br><span class="line">q.push(G[<span class="number">1</span>][i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">node tmp=q.top();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">if</span>(vis[tmp.to])</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">vis[tmp.to]=<span class="number">1</span>;</span><br><span class="line">ans+=tmp.val;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G[tmp.to].size();++i)&#123;</span><br><span class="line">q.push(G[tmp.to][i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> N;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;N);</span><br><span class="line"><span class="keyword">int</span> v;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;++i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=N;++j)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;v);</span><br><span class="line">G[i].push_back(node(j,v));</span><br><span class="line">G[j].push_back(node(i,v));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;prim()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="http://hihocoder.com/problemset/problem/1098">http://hihocoder.com/problemset/problem/1098</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN; </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> size=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> father[size],rankk[size]; </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span><span class="comment">//è¾¹ </span></span><br><span class="line"><span class="keyword">int</span> val;</span><br><span class="line"><span class="keyword">int</span> s;</span><br><span class="line"><span class="keyword">int</span> e;</span><br><span class="line">node()&#123;&#125;;</span><br><span class="line">node(<span class="keyword">int</span> v,<span class="keyword">int</span> ss,<span class="keyword">int</span> ee)&#123;</span><br><span class="line">val=v,s=ss,e=ee;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setall</span><span class="params">(<span class="keyword">int</span> v,<span class="keyword">int</span> ss,<span class="keyword">int</span> ee)</span></span>&#123;</span><br><span class="line">val=v,s=ss,e=ee;</span><br><span class="line">&#125;</span><br><span class="line">&#125;edge[<span class="number">1000005</span>];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_set</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line">father[i]=i;</span><br><span class="line">rankk[i]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;<span class="comment">//æŸ¥æ‰¾çˆ¶äº²èŠ‚ç‚¹é¡ºä¾¿è·¯å¾„å‹ç¼© </span></span><br><span class="line"><span class="keyword">if</span>(x!=father[x])&#123;</span><br><span class="line">father[x]=find(father[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> father[x];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//åˆå¹¶x,yæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼šåˆ©ç”¨Find_Setæ‰¾åˆ°å…¶ä¸­ä¸¤ä¸ª</span></span><br><span class="line"><span class="comment">//é›†åˆçš„ç¥–å…ˆï¼Œå°†ä¸€ä¸ªé›†åˆçš„ç¥–å…ˆæŒ‡å‘å¦ä¸€ä¸ªé›†åˆçš„ç¥–å…ˆã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Union</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="comment">//æŒ‰ç§©åˆå¹¶</span></span><br><span class="line">x=find(x);</span><br><span class="line">y=find(y);</span><br><span class="line"><span class="keyword">if</span>(x==y)&#123;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;<span class="comment">//ä¸ç”¨æŒ‰ç§©åˆå¹¶</span></span><br><span class="line">father[x]=y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//if(rankk[x]&lt;rankk[y])&#123;</span></span><br><span class="line"><span class="comment">//father[x]=find(y);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//else&#123;</span></span><br><span class="line"><span class="comment">//if(rankk[x]==rankk[y])&#123;</span></span><br><span class="line"><span class="comment">//rankk[x]++;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//father[y]=find(x);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a.val&lt;b.val;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kruskal</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;<span class="comment">//nä¸ºè¾¹çš„æ•°é‡ </span></span><br><span class="line">ll sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(find(edge[i].s)!=find(edge[i].e))&#123;</span><br><span class="line">Union(edge[i].s,edge[i].e);</span><br><span class="line">sum+=edge[i].val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> N,M;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cnt=<span class="number">0</span>;<span class="comment">//è¾¹çš„æ•°é‡ </span></span><br><span class="line"><span class="comment">//å»ºè¾¹ </span></span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;N,&amp;M);</span><br><span class="line">make_set(N+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">int</span> ss,ee,val;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;M;++i)&#123;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;ss,&amp;ee,&amp;val);</span><br><span class="line">edge[i].setall(val,ss,ee);</span><br><span class="line">cnt++;</span><br><span class="line">&#125;</span><br><span class="line">sort(edge,edge+cnt,cmp);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;kruskal(cnt)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>HDU 1232ç•…é€šå·¥ç¨‹http://acm.hdu.edu.cn/showproblem.php?pid=1232</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN; </span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">1e3</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">bool</span> vis[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="keyword">int</span> to;</span><br><span class="line"><span class="keyword">int</span> val;</span><br><span class="line">node()&#123;</span><br><span class="line">&#125;</span><br><span class="line">node(<span class="keyword">int</span> t,<span class="keyword">int</span> v)&#123;</span><br><span class="line">to=t;</span><br><span class="line">val=v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setall</span><span class="params">(<span class="keyword">int</span> t,<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">to=t;</span><br><span class="line">val=v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> node&amp;a)<span class="keyword">const</span>&#123;</span><br><span class="line"><span class="keyword">return</span> val&gt;a.val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;; </span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; G[maxn];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">prim</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">priority_queue</span>&lt;node&gt; q;</span><br><span class="line">vis[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G[<span class="number">1</span>].size();++i)&#123;</span><br><span class="line">q.push(G[<span class="number">1</span>][i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">node t=q.top();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">if</span>(vis[t.to])</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">vis[t.to]=<span class="number">1</span>;</span><br><span class="line">res+=t.val;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G[t.to].size() ;++i)&#123;</span><br><span class="line">q.push(G[t.to][i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m)!=EOF)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;maxn;++i)&#123;</span><br><span class="line">G[i].clear();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(n==<span class="number">0</span>)<span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)&#123;</span><br><span class="line"><span class="keyword">int</span> x,y,d;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>,&amp;x,&amp;y,&amp;d);</span><br><span class="line">G[x].push_back(node(y,d));</span><br><span class="line">G[y].push_back(node(x,d));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(n&lt;m<span class="number">-1</span>)<span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;?&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">int</span> ans=prim();</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=m;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(vis[i]==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i&gt;m)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;?&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>HDU 1879ç»§ç»­ç•…é€šå·¥ç¨‹http://acm.hdu.edu.cn/showproblem.php?pid=1879</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//#include&lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll INF=LONG_LONG_MAX;</span><br><span class="line"><span class="keyword">const</span> ll inf=LONG_LONG_MIN;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">106</span>;</span><br><span class="line"><span class="keyword">int</span> father[maxn],rankk[maxn];</span><br><span class="line"><span class="keyword">int</span> N;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line"><span class="keyword">int</span> s;</span><br><span class="line"><span class="keyword">int</span> e;</span><br><span class="line"><span class="keyword">int</span> val;</span><br><span class="line">node() &#123;&#125;</span><br><span class="line">node(<span class="keyword">int</span> ns,<span class="keyword">int</span> ne,<span class="keyword">int</span> v) &#123;</span><br><span class="line">s=ns,e=ne,val=v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setall</span><span class="params">(<span class="keyword">int</span> ns,<span class="keyword">int</span> ne,<span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">s=ns,e=ne,val=v;</span><br><span class="line">&#125;</span><br><span class="line">&#125; edge[maxn*maxn&gt;&gt;<span class="number">1</span>];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_set</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i) &#123;</span><br><span class="line">father[i]=i;</span><br><span class="line">rankk[i]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(x!=father[x]) &#123;</span><br><span class="line">father[x]=find(father[x]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> father[x];</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Union</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">x=find(x);</span><br><span class="line">y=find(y);</span><br><span class="line"><span class="keyword">if</span>(x==y)</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">if</span>(rankk[x]&lt;rankk[y])&#123;</span><br><span class="line">father[x]=find(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(rankk[x]==rankk[y])&#123;</span><br><span class="line">rankk[x]++;</span><br><span class="line">&#125;</span><br><span class="line">father[y]=find(x);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a.val&lt;b.val;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kruskal</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; ++i) &#123;</span><br><span class="line"><span class="keyword">if</span>(find(edge[i].s)!=find(edge[i].e)) &#123;</span><br><span class="line">Union(edge[i].s,edge[i].e);</span><br><span class="line">ans+=edge[i].val;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;N)!=EOF&amp;&amp;N) &#123;</span><br><span class="line">make_set(<span class="number">105</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;N*(N<span class="number">-1</span>)/<span class="number">2</span>; ++i) &#123;</span><br><span class="line"><span class="keyword">int</span> x,y,v,p;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,&amp;x,&amp;y,&amp;v,&amp;p);</span><br><span class="line">edge[i].setall(x,y,v);</span><br><span class="line"><span class="keyword">if</span>(p==<span class="number">1</span>) &#123;</span><br><span class="line">father[x]=y;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">sort(edge,edge+N*(N<span class="number">-1</span>)/<span class="number">2</span>,cmp);</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;kruskal(N*(N<span class="number">-1</span>)/<span class="number">2</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœ€å°ç”Ÿæˆæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ é«˜æ•ˆä½è¿ç®—å‡½æ•° ä¹‹ __builtin_</title>
      <link href="2018/08/09/builtin%E5%87%BD%E6%95%B0/"/>
      <url>2018/08/09/builtin%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>1.int ffs(ui x){//è¯¥å‡½æ•°åˆ¤æ–­nçš„äºŒè¿›åˆ¶æœ«å°¾æœ€åä¸€ä¸ª1çš„ä½ç½®ï¼Œä»ä¸€å¼€å§‹<br />return __builtin_ffs(x);<br />}</p><p>2.int popcount(ui x){//è¯¥å‡½æ•°æ—¶åˆ¤æ–­nçš„äºŒè¿›åˆ¶ä¸­æœ‰å¤šå°‘ä¸ª1<br />return __builtin_popcount(x);<br />}</p><p>3.int ctz(ui x){//è¯¥å‡½æ•°åˆ¤æ–­nçš„äºŒè¿›åˆ¶æœ«å°¾åé¢0çš„ä¸ªæ•°ï¼Œå½“xä¸º0æ—¶ï¼Œå’Œxçš„ç±»å‹æœ‰å…³<br />return __builtin_ctz(x);<br />}</p><p>4.int clz(ui x){//xå‰å¯¼0çš„ä¸ªæ•°ã€‚x=0æ—¶å’Œxçš„ç±»å‹æœ‰å…³<br />return __builtin_clz(x);<br />}</p><p>5.int parity(ui x){//è¯¥å‡½æ•°æ˜¯åˆ¤æ–­nçš„äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°çš„å¥‡å¶æ€§<br />return __builtin_parity(x);<br />}</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> ui;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ffs</span><span class="params">(ui x)</span></span>&#123;<span class="comment">//è¯¥å‡½æ•°åˆ¤æ–­nçš„äºŒè¿›åˆ¶æœ«å°¾æœ€åä¸€ä¸ª1çš„ä½ç½®ï¼Œä»ä¸€å¼€å§‹</span></span><br><span class="line"><span class="keyword">return</span> __builtin_ffs(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">popcount</span><span class="params">(ui x)</span></span>&#123;<span class="comment">//è¯¥å‡½æ•°æ—¶åˆ¤æ–­nçš„äºŒè¿›åˆ¶ä¸­æœ‰å¤šå°‘ä¸ª1</span></span><br><span class="line"><span class="keyword">return</span> __builtin_popcount(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ctz</span><span class="params">(ui x)</span></span>&#123;<span class="comment">//è¯¥å‡½æ•°åˆ¤æ–­nçš„äºŒè¿›åˆ¶æœ«å°¾åé¢0çš„ä¸ªæ•°ï¼Œå½“nä¸º0æ—¶ï¼Œå’Œnçš„ç±»å‹æœ‰å…³</span></span><br><span class="line"><span class="keyword">return</span> __builtin_ctz(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">clz</span><span class="params">(ui x)</span></span>&#123;<span class="comment">//xå‰å¯¼0çš„ä¸ªæ•°ã€‚x=0æ—¶ç»“æœæœªå®šä¹‰ã€‚</span></span><br><span class="line"><span class="keyword">return</span> __builtin_clz(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">parity</span><span class="params">(ui x)</span></span>&#123;<span class="comment">//è¯¥å‡½æ•°æ˜¯åˆ¤æ–­nçš„äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°çš„å¥‡å¶æ€§</span></span><br><span class="line"><span class="keyword">return</span> __builtin_parity(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;__builtin_ffs : &quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ffs(<span class="number">1</span>)&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//1äºŒè¿›åˆ¶1   /è¾“å‡º1 </span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ffs(<span class="number">8</span>)&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//8äºŒè¿›åˆ¶1000   /è¾“å‡º4 </span></span><br><span class="line"><span class="comment">//è¦æ˜¯è¦è¾“å‡ºæœ€åä¸€ä¸ªä¸€çš„ä½ç½®åº”å½“-1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;__builtin_popcount : &quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;popcount(<span class="number">15</span>)&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//1111  /è¾“å‡º4</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;__builtin_ctz :&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;ctz(<span class="number">8</span>)&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//1000 /è¾“å‡º3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;__builtin_clz :&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;clz(<span class="number">8</span>)&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//...1000 /è¾“å‡º28 </span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">&quot;__builtin_parity :&quot;</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;parity(<span class="number">15</span>)&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//1111 /å¶æ•°ä¸ªï¼Œè¾“å‡º0</span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;parity(<span class="number">7</span>)&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//111 /å¥‡æ•°ä¸ªï¼Œè¾“å‡º1 </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) 2018ç‰›è¯¾å¤šæ ¡ç¬¬ä¸‰åœºA.C.H</title>
      <link href="2018/07/26/(Nowcoder)%E7%89%9B%E8%AF%BE%E5%A4%9A%E6%A0%A1%E7%AC%AC%E4%B8%89%E5%9C%BA/"/>
      <url>2018/07/26/(Nowcoder)%E7%89%9B%E8%AF%BE%E5%A4%9A%E6%A0%A1%E7%AC%AC%E4%B8%89%E5%9C%BA/</url>
      
        <content type="html"><![CDATA[<p>åˆä¸€æ¬¡æˆåŠŸçš„ç­¾åˆ°äº†ï¼ˆå¤§å“­~~~~~~ï¼‰åªåšäº†2é¢˜ç„¶åå°±ä¸€ç›´æŒ‚æœºäº†ï¼Œä¼šçš„æ…¢æ…¢è¡¥å§ã€‚</p><h2 id="a-pacm-team"><a class="markdownIt-Anchor" href="#a-pacm-team"></a> A PACM Team</h2><p>å¥½å§ï¼Œä»ä¸€å¼€å§‹å°±çœ‹é”™äº†é¢˜ç›®ï¼Œè¿™æ˜¯ä¸€ä¸ªå››ç»´èƒŒåŒ…é—®é¢˜ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 40</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n, P, A, C, M, p[N], a[N], c[N], m[N], g[N], f[N][N][N][N];</span><br><span class="line"><span class="comment">//fæ•°ç»„è®°å½•p,a,c,mäººæ•°æœ‰Nï¼ŒNï¼ŒNï¼ŒNäººæ—¶çš„æœ€å¤§å–å€¼ </span></span><br><span class="line"><span class="keyword">bool</span> h[N][N][N][N][N];<span class="comment">//è®°å½•è·¯å¾„ </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) <span class="built_in">cin</span> &gt;&gt; p[i] &gt;&gt; a[i] &gt;&gt; c[i] &gt;&gt; m[i] &gt;&gt; g[i];</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; P &gt;&gt; A &gt;&gt; C &gt;&gt; M;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> jp = P; jp &gt;= p[i]; jp --)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> ja = A; ja &gt;= a[i]; ja --)</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> jc = C; jc &gt;= c[i]; jc --)</span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> jm = M; jm &gt;= m[i]; jm --)</span><br><span class="line">                        <span class="keyword">if</span> (f[jp - p[i]][ja - a[i]][jc - c[i]][jm - m[i]] + g[i] &gt; f[jp][ja][jc][jm])</span><br><span class="line">                        &#123;</span><br><span class="line">                            f[jp][ja][jc][jm] = f[jp - p[i]][ja - a[i]][jc - c[i]][jm - m[i]] + g[i];</span><br><span class="line">                            h[i][jp][ja][jc][jm] = <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">    <span class="keyword">int</span> ans[N];</span><br><span class="line">    ans[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; i --)<span class="comment">//æ¢å¤è·¯å¾„ å³å–çš„é˜Ÿä¼ </span></span><br><span class="line">        <span class="keyword">if</span> (h[i][P][A][C][M])</span><br><span class="line">        &#123;</span><br><span class="line">            ans[++ ans[<span class="number">0</span>]] = i - <span class="number">1</span>;</span><br><span class="line">            P -= p[i];</span><br><span class="line">            A -= a[i];</span><br><span class="line">            C -= c[i];</span><br><span class="line">            M -= m[i];</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans[<span class="number">0</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= ans[<span class="number">0</span>]; i ++) <span class="built_in">cout</span> &lt;&lt; ans[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="c-shuffle-cards"><a class="markdownIt-Anchor" href="#c-shuffle-cards"></a> C Shuffle Cards</h2><p>ropeå¤§æ³•å¥½å•Šï¼Œstlå¤§æ³•å¥½å•Šï¼Œä¸è¿‡è¿˜æ˜¯å¾—å»å­¦ä¹ ä¸€ä¸‹splayå•Š</p><p>è´´ä¸€ä¸ªrope ä¸äº†è§£çš„å¯ä»¥æˆ³ä¸€ä¸‹https://blog.csdn.net/iamzky/article/details/38348653</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/rope&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_cxx;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> a,b;</span><br><span class="line">rope&lt;<span class="keyword">int</span>&gt; R;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) R.push_back(i);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        R = R.substr(a<span class="number">-1</span>, b) + R.substr(<span class="number">0</span>, a<span class="number">-1</span>) + R.substr(a+b<span class="number">-1</span>, n-a-b+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, R[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>splayä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">300000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> n, root, ch[maxn][<span class="number">2</span>], s[maxn], v[maxn];</span><br><span class="line"><span class="keyword">bool</span> rev[maxn];</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lc ch[o][0]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rc ch[o][1]</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">maintain</span><span class="params">(<span class="keyword">int</span> o)</span> </span>&#123; </span><br><span class="line">s[o] = s[lc] + s[rc] + <span class="number">1</span>; </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span>&amp; o, <span class="keyword">int</span> d)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"><span class="keyword">int</span> k = ch[o][d^<span class="number">1</span>]; ch[o][d^<span class="number">1</span>] = ch[k][d]; ch[k][d] = o; </span><br><span class="line">maintain(o); maintain(k); o = k;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> o)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">rev[o] ^= <span class="number">1</span>; </span><br><span class="line">rev[lc] ^= <span class="number">1</span>; </span><br><span class="line">rev[rc] ^= <span class="number">1</span>; </span><br><span class="line">swap(lc, rc); </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> o, <span class="keyword">int</span> k)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"><span class="keyword">if</span>(s[lc] + <span class="number">1</span> == k) <span class="keyword">return</span> <span class="number">-1</span>; </span><br><span class="line"><span class="keyword">return</span> k &lt; s[lc] + <span class="number">1</span> ? <span class="number">0</span> : <span class="number">1</span>; </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span>&amp; o, <span class="keyword">int</span> k)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(rev[o]) pushdown(o); <span class="comment">//notice</span></span><br><span class="line"><span class="keyword">int</span> d = cmp(o, k);</span><br><span class="line"><span class="keyword">if</span>(d == <span class="number">-1</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span>(d == <span class="number">1</span>) k -= s[lc] + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> p = ch[o][d];</span><br><span class="line"><span class="keyword">if</span>(rev[p]) pushdown(p); <span class="comment">//notice</span></span><br><span class="line"><span class="keyword">int</span> d2 = cmp(p, k);</span><br><span class="line"><span class="keyword">int</span> k2 = (d2 == <span class="number">0</span>) ? k : k-s[ch[p][<span class="number">0</span>]]<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">if</span>(d2 != <span class="number">-1</span>) &#123;</span><br><span class="line">splay(ch[p][d2], k2);</span><br><span class="line"><span class="keyword">if</span>(d == d2) rotate(o, d^<span class="number">1</span>); <span class="keyword">else</span> rotate(ch[o][d], d);</span><br><span class="line">&#125;</span><br><span class="line">rotate(o, d^<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rever</span><span class="params">(<span class="keyword">int</span>&amp; o, <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">splay(o, L); </span><br><span class="line">splay(rc, R - s[lc] + <span class="number">1</span>); <span class="comment">//R+2 - (s[lc]+1)</span></span><br><span class="line">rev[ch[rc][<span class="number">0</span>]] ^= <span class="number">1</span>; </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p, <span class="keyword">int</span> d)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> cur;</span><br><span class="line"><span class="keyword">if</span>(L == R) cur = L;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cur = (L + R) &gt;&gt; <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(L &lt;= cur - <span class="number">1</span>) build(L, cur - <span class="number">1</span>, cur, <span class="number">0</span>); </span><br><span class="line"><span class="keyword">if</span>(cur + <span class="number">1</span> &lt;= R) build(cur + <span class="number">1</span>, R, cur, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">maintain(cur);</span><br><span class="line">ch[p][d] = cur;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> o)</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(rev[o]) pushdown(o);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(lc) print(lc);</span><br><span class="line"><span class="keyword">if</span>(v[o] != INF) <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, v[o]);</span><br><span class="line"><span class="keyword">if</span>(rc) print(rc);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> m;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">v[<span class="number">1</span>] = v[n + <span class="number">2</span>] = INF;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) v[i + <span class="number">1</span>] = i;</span><br><span class="line"></span><br><span class="line">build(<span class="number">1</span>, n + <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>); </span><br><span class="line">root = (n + <span class="number">3</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line"><span class="keyword">int</span> l, len;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;l, &amp;len);</span><br><span class="line">rever(root, <span class="number">1</span>,l+len<span class="number">-1</span>);</span><br><span class="line">rever(root,<span class="number">1</span>,len);</span><br><span class="line">rever(root,len+<span class="number">1</span>,l+len<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line">print(root);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨ä¸‰æ¬¡åŒºé—´ç¿»è½¬ï¼Œè§£å†³å¹³ç§»ï¼Œä¸æ‡‚å¾—ç”»ä¸ªå›¾ï¼Œä¸¾ä¸ªæ —å­å°±è¡Œäº†ã€‚</p><h2 id="h-diff-prime-pairs"><a class="markdownIt-Anchor" href="#h-diff-prime-pairs"></a> H Diff-prime Pairs</h2><p><img src="https://uploadfiles.nowcoder.com/files/20180717/305345_1531803986831_equation?tex=%5Cfrac%7Bi%7D%7Bgcd%28i%2C%20j%29%7D" alt="img" /> =k1(ç´ æ•°)        <img src="https://uploadfiles.nowcoder.com/files/20180717/305345_1531803986872_equation?tex=%5Cfrac%7Bj%7D%7Bgcd%28i%2Cj%29%7D" alt="img" />=k2(ç´ æ•°ï¼‰</p><p>ç›¸é™¤å¾—åˆ° i/j=k1/k2   å½“iå’ŒjåŒæ—¶ä¹˜ä»¥ä¸€ä¸ªæ•°tæ—¶ä¹Ÿæ˜¯æ»¡è¶³è¿™ä¸ªç­‰å¼ï¼Œå¯çŸ¥ti ä¸ tjä¹Ÿæ˜¯æ»¡è¶³æ¡ä»¶çš„ä¸€ä¸ªæ•°å¯¹</p><p>æ‰€ä»¥å½“æˆ‘ä»¬æ‰¾åˆ°ä¸¤ä¸ªåœ¨1~n èŒƒå›´å†…çš„ç´ æ•°a,bæ—¶ï¼Œä»–ä»¬çš„å€æ•°ä¹Ÿæ˜¯æ»¡è¶³æ¡ä»¶çš„ï¼Œé‚£ä¹ˆæœ‰å‡ å¯¹å‘¢ï¼Œå¯¹æ•°çš„ä¸ªæ•°å½“ç„¶æ˜¯ç”±æ•°å€¼è¾ƒå¤§çš„å†³å®šï¼Œå°±æ˜¯n/maxï¼ˆa,b)ï¼›</p><p>æ€è·¯ï¼šå…ˆæ±‚å‡ºæ‰€ç»™1~nçš„æ‰€æœ‰ç´ æ•° å­˜å…¥æ•°ç»„ï¼ˆ2ï¼Œ3ï¼Œ5ï¼Œ7â€¦ï¼‰</p><p>ç¬¬ä¸€ä¸ªç´ æ•°2å‰é¢æ—¶æ²¡æœ‰å’Œä»–é…å¯¹çš„ï¼Œé‚£å°±ä»3å¼€å§‹ã€‚å½“ç®—åˆ°ç¬¬iä¸ªç´ æ•°tempæ—¶ï¼Œè®¡ç®—å‡º1~næ˜¯tempå€æ•°çš„ä¸ªæ•°ï¼Œç„¶åå†ä¹˜ä»¥tempå‰é¢ç´ æ•°çš„ä¸ªæ•°ï¼ˆæ¯”tempå°çš„ç´ æ•°è‚¯å®šå¯ä»¥æ‰¾åˆ°å’Œtempç›¸åŒå€æ•°çš„æ•°çš„ï¼‰ã€‚æœ€åä¸è¦å¿˜è®°*2ï¼Œæ­¤é¢˜å°±okäº†.</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 10000005</span></span><br><span class="line"><span class="keyword">int</span> prime[MAX];<span class="comment">//å­˜æ”¾ç´ æ•° </span></span><br><span class="line"><span class="keyword">bool</span> check[MAX];<span class="comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯ç´ æ•° 0ä¸ºä¸æ˜¯ç´ æ•° </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> count;</span><br><span class="line"><span class="built_in">memset</span>(check, <span class="number">0</span>, <span class="keyword">sizeof</span>(check));</span><br><span class="line">        count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!check[i])</span><br><span class="line">                prime[count++] = i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; count; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (i*prime[j] &gt; MAX)</span><br><span class="line">                    <span class="keyword">break</span>; <span class="comment">// è¿‡å¤§çš„æ—¶å€™è·³å‡º</span></span><br><span class="line">                check[i*prime[j]] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> ((i%prime[j]) == <span class="number">0</span>) <span class="comment">// å¦‚æœiæ˜¯ä¸€ä¸ªåˆæ•°ï¼Œè€Œä¸”i % prime[j] == 0</span></span><br><span class="line">                    <span class="keyword">break</span>; </span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> all=solve(n);<span class="comment">//ç´ æ•°çš„ä¸ªæ•° </span></span><br><span class="line">ll res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;all;++i)&#123;</span><br><span class="line"><span class="keyword">int</span> temp=n/prime[i];<span class="comment">//è®¡ç®—å‡º1~næ˜¯prime[i]å€æ•°çš„ä¸ªæ•° </span></span><br><span class="line">res+=temp*i;<span class="comment">//ä¹˜ä»¥å‡ºç°åœ¨prime[i]å‰é¢ç´ æ•°çš„ä¸ªæ•° </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;res*<span class="number">2</span>&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//(x,y)å’Œ(y,x)ç®—ä¸¤ç§ æ‰€ä»¥ä¹˜ä»¥2 </span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>(ä¸€ç»´&amp;äºŒç»´&amp;ä¸‰ç»´)æ ‘çŠ¶æ•°ç»„åŠå…¶æ¨¡æ¿ æ•´ç†</title>
      <link href="2018/07/23/(%E4%B8%80%E7%BB%B4&amp;%E4%BA%8C%E7%BB%B4&amp;%E4%B8%89%E7%BB%B4)%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E5%8F%8A%E5%85%B6%E6%A8%A1%E6%9D%BF/"/>
      <url>2018/07/23/(%E4%B8%80%E7%BB%B4&amp;%E4%BA%8C%E7%BB%B4&amp;%E4%B8%89%E7%BB%B4)%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E5%8F%8A%E5%85%B6%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ç»´æ ‘çŠ¶æ•°ç»„"><a class="markdownIt-Anchor" href="#ä¸€ç»´æ ‘çŠ¶æ•°ç»„"></a> ä¸€ç»´æ ‘çŠ¶æ•°ç»„</h1><blockquote><p>å­¦ä¹ æ¥è‡ªhttps://www.bilibili.com/video/av18735440?from=search&amp;seid=12510069409139918776ç”µå­ç§‘æŠ€å¤§å­¦ç®—æ³•è®²å ‚</p></blockquote><blockquote><p><a href="https://www.cnblogs.com/RabbitHu/p/BIT.html%E5%A4%A7%E4%BD%AC%E7%9A%84%E6%96%87%E7%AB%A0%EF%BC%8C%E4%BE%B5%E5%88%A0%EF%BC%8C%E6%9C%AC%E6%96%87%E6%8E%A8%E7%90%86%E9%83%BD%E6%9D%A5%E8%87%AA%E8%AF%A5%E6%96%87%E3%80%82">https://www.cnblogs.com/RabbitHu/p/BIT.htmlå¤§ä½¬çš„æ–‡ç« ï¼Œä¾µåˆ ï¼Œæœ¬æ–‡æ¨ç†éƒ½æ¥è‡ªè¯¥æ–‡ã€‚</a></p></blockquote><p>è¿™é‡Œdæ•°ç»„æ˜¯æˆ‘çš„æ ‘çŠ¶æ•°ç»„,aæ•°ç»„å°±æ˜¯åˆå§‹æ•°ç»„äº†ï¼Œè®©ä½ ä¿®æ”¹æŸ¥è¯¢çš„ã€‚</p><p><img src="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=760882210,3135546395&amp;fm=26&amp;gp=0.jpg" alt="img0" /></p><p>â€‹      è¿™å°±æ˜¯æ ‘çŠ¶æ•°ç»„çš„å­˜å‚¨æ–¹å¼ï¼Œä¸éš¾çœ‹å‡ºå®ƒçš„å­˜å‚¨æ˜¯å’ŒäºŒè¿›åˆ¶æœ‰å…³çš„ï¼ˆæ»‘ç¨½ï¼Œå¥½çœ‹å‡ºä¸ªé¬¼ï¼‰ä¸¾ä¸ªæ —å­d[6]=a[5]+a[6]; ï¼ˆ6çš„äºŒè¿›åˆ¶æ•°æ˜¯110ï¼Œæœ«å°¾ä¸€ä¸ª0ï¼Œé‚£d[6]å°±æ˜¯å­˜å‚¨2^1ä¸ªå…ƒç´ çš„å’Œï¼‰ åŒç†æˆ‘ä»¬ä¹Ÿå¯ä»¥éªŒè¯d[8]=a[1]+â€¦a[8] (å› ä¸º8çš„äºŒè¿›åˆ¶æ•°æ˜¯1000ï¼Œæœ‰3ä¸ªé›¶ï¼Œå°±æ˜¯å­˜å‚¨2^3ä¸ª) ï¼› è€ŒæŸ¥è¯¢å‰ç¼€å’Œï¼Œå°±éœ€è¦ç”¨åˆ°lowbitè¿™ä¸ªå‡½æ•°ï¼Œéå¸¸å·§å¦™ï¼Œè§†é¢‘è¯´çš„éå¸¸æ¸…æ¥šã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> x&amp;(-x);</span><br><span class="line">&#125; </span><br><span class="line">x-=lowbit(x);</span><br><span class="line"><span class="keyword">or</span> x+=lowbit(x);</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ x+=x&amp;(-x) or x-=x&amp;(-x)</p><p>æ¯”å¦‚æŸ¥è¯¢13è¿™ä¸ªä½ç½®çš„å‰ç¼€å’Œ 13çš„äºŒè¿›åˆ¶æ•°ä¸º1101ï¼Œæˆ‘ä»¬å°†å…¶æ‹†åˆ†ä¸ºï¼ˆlowbitå°±æ˜¯åœ¨æ­¤èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œå–å¾—æœ€åä¸€ä¸ª1ï¼‰</p><p>1101          d[13]        a[13]         //ä»åå¾€å‰ä»¥1ä¸ºæœ«å°¾ï¼Œåé¢å…¨æ˜¯0</p><p>1100          d[12]        a[9]+a[12]</p><p>1000          d[8]         a[1]+â€¦a[8]</p><p>æ‰€ä»¥å‰13çš„å‰ç¼€å’Œå°±æ˜¯ d[13] +d[12] +d[8]</p><p>è€Œä¿®æ”¹å’ŒæŸ¥è¯¢çš„é¡ºåºæ˜¯åçš„ã€‚</p><p><em>è¿™é‡Œæˆ‘æ¬è¿äº†å¤§ä½¬çš„ä»£ç </em></p><h2 id="å•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢"></a> å•ç‚¹ä¿®æ”¹+åŒºé—´æŸ¥è¯¢</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å•ç‚¹ä¿®æ”¹+åŒºé—´æŸ¥è¯¢ </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e7</span>+<span class="number">5</span>;</span><br><span class="line">ll sum[maxn],n;<span class="comment">//æ•°ç»„ä»1å¼€å§‹åˆ°n </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//ç»™ä½ç½®på¢åŠ x</span></span><br><span class="line">    <span class="keyword">while</span>(p &lt;= n) sum[p] += x, p += p &amp; -p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">ask</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123; <span class="comment">//æ±‚ä½ç½®pçš„å‰ç¼€å’Œ</span></span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(p) res += sum[p], p -= p &amp; -p;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">range_ask</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123; <span class="comment">//åŒºé—´æ±‚å’Œ</span></span><br><span class="line">    <span class="keyword">return</span> ask(r) - ask(l - <span class="number">1</span>);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€ŒåŒºé—´ä¿®æ”¹çš„è¯ï¼Œå…¶å®å°±æ˜¯ç”¨äº†ä¸€ä¸ªå·®åˆ†çš„æ€æƒ³äº†ï¼›</p><p>æ¯”å¦‚ aæ•°ç»„     1 1 1 1 1</p><p>â€‹    bæ•°ç»„     1 0 0 0 0    b[n]=a[n]-a[n-1]</p><p>æˆ‘æƒ³è¦å†aæ•°ç»„çš„2~3éƒ½åŠ ä¸Š2ï¼›</p><p>â€‹    aæ•°ç»„     1 3 3 3 1</p><p>â€‹    bæ•°ç»„     1 2 0 0 -2  æˆ‘ä»¬å‘ç°åªè¦ä¿®æ”¹bæ•°ç»„ä¸¤ä¸ªå…ƒç´ å°±å¯ä»¥æ¥ç»´æŠ¤aæ•°ç»„äº†</p><p>aæ•°ç»„å°±æ˜¯bæ•°ç»„çš„å‰ç¼€å’Œ</p><p>æ‰€ä»¥åŒºé—´ä¿®æ”¹ åªè¦ä¿®æ”¹ä¿©ä¸ªå…ƒç´ å°±è¡Œäº†ï¼ˆèˆ’èˆ’æœæœï¼‰ã€‚</p><h2 id="åŒºé—´ä¿®æ”¹å•ç‚¹æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åŒºé—´ä¿®æ”¹å•ç‚¹æŸ¥è¯¢"></a> åŒºé—´ä¿®æ”¹+å•ç‚¹æŸ¥è¯¢</h2><p>ï¼ˆè¿™é‡Œéƒ½æ¬è¿çš„å¤§ä½¬çš„è¯¦è§£ï¼‰</p><p><img src="https://img-blog.csdn.net/20180723170043290?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RERF9NYXN0ZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img1" /></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŒºé—´ä¿®æ”¹+å•ç‚¹æŸ¥è¯¢ </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e7</span>+<span class="number">5</span>;<span class="comment">//è¿™é‡Œå¯ä»¥ç†è§£æˆ åŸæ•°ç»„æ˜¯sumæ•°ç»„çš„å‰ç¼€å’Œ </span></span><br><span class="line">ll sum[maxn],n;<span class="comment">//æ•°ç»„ä»1å¼€å§‹åˆ°n </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//è¿™ä¸ªå‡½æ•°ç”¨æ¥åœ¨æ ‘çŠ¶æ•°ç»„ä¸­ç›´æ¥ä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">while</span>(p &lt;= n) sum[p] += x, p += p &amp; -p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">range_add</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span></span>&#123; <span class="comment">//ç»™åŒºé—´[l, r]åŠ ä¸Šx</span></span><br><span class="line">    add(l, x), add(r + <span class="number">1</span>, -x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ask</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123; <span class="comment">//å•ç‚¹æŸ¥è¯¢</span></span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(p) res += sum[p], p -= p &amp; -p;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h2 id="åŒºé—´ä¿®æ”¹åŒºé—´æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åŒºé—´ä¿®æ”¹åŒºé—´æŸ¥è¯¢"></a> åŒºé—´ä¿®æ”¹+åŒºé—´æŸ¥è¯¢</h2><p><img src="https://img-blog.csdn.net/20180723170056229?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RERF9NYXN0ZXI=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img2" /></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŒºé—´ä¿®æ”¹+åŒºé—´æŸ¥è¯¢ </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll; </span><br><span class="line"><span class="keyword">const</span> ll maxn=<span class="number">1e7</span>+<span class="number">5</span>;</span><br><span class="line">ll d[maxn];<span class="comment">//è®°å½•åŸæ•°ç»„çš„å‰ç¼€å’Œ </span></span><br><span class="line">ll sum1[maxn];</span><br><span class="line">ll sum2[maxn];</span><br><span class="line">ll n,M;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(ll p, ll x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = p; i &lt;= n; i += i &amp; -i)</span><br><span class="line">        sum1[i] += x, sum2[i] += x * p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">range_add</span><span class="params">(ll l, ll r, ll x)</span></span>&#123;</span><br><span class="line">    add(l, x), add(r + <span class="number">1</span>, -x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">ask</span><span class="params">(ll p)</span></span>&#123;</span><br><span class="line">    ll res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = p; i; i -= i &amp; -i)</span><br><span class="line">        res += (p + <span class="number">1</span>) * sum1[i] - sum2[i];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">range_ask</span><span class="params">(ll l, ll r)</span></span>&#123;<span class="comment">//låˆ°rçš„åŒºé—´å’Œ </span></span><br><span class="line">    <span class="keyword">return</span> ask(r) - ask(l - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//å…ˆä¸è€ƒè™‘åŸæ•°ç»„çš„å½±å“ï¼Œç›´æ¥åŒºé—´ä¿®æ”¹ä¿®æ”¹sum1å’Œsum2</span></span><br><span class="line">    <span class="comment">//æœ€åè¦æ±‚[l,r]çš„åŒºé—´å’Œçš„è¯ </span></span><br><span class="line"><span class="comment">//ç»“æœå°±æ˜¯range_ask(l,r)+d[r]-d[l-1]</span></span><br><span class="line"><span class="comment">// d[r]-d[l-1]è€ƒè™‘åŸæ•°ç»„çš„å‰ç¼€å’Œ</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h1 id="äºŒç»´æ ‘çŠ¶æ•°ç»„"><a class="markdownIt-Anchor" href="#äºŒç»´æ ‘çŠ¶æ•°ç»„"></a> äºŒç»´æ ‘çŠ¶æ•°ç»„</h1><p>å¦‚æœä¸æ˜¯åšé¢˜ï¼Œ<s>è°ä¼šæäºŒç»´æ•°ç»„å‘¢</s>ã€‚</p><p>åœ¨ä¸€ç»´æ ‘çŠ¶æ•°ç»„ä¸­ï¼Œtree[x]ï¼ˆæ ‘çŠ¶æ•°ç»„ä¸­çš„é‚£ä¸ªâ€œæ•°ç»„â€ï¼‰è®°å½•çš„æ˜¯å³ç«¯ç‚¹ä¸ºxã€é•¿åº¦ä¸ºlowbit(x)çš„åŒºé—´çš„åŒºé—´å’Œã€‚<br />é‚£ä¹ˆåœ¨äºŒç»´æ ‘çŠ¶æ•°ç»„ä¸­ï¼Œå¯ä»¥ç±»ä¼¼åœ°å®šä¹‰tree[x] [y]è®°å½•çš„æ˜¯å³ä¸‹è§’ä¸º(x, y)ï¼Œé«˜ä¸ºlowbit(x), å®½ä¸º lowbit(y)çš„åŒºé—´çš„åŒºé—´å’Œã€‚</p><p>è¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ã€‚</p><h2 id="å•ç‚¹ä¿®æ”¹-åŒºé—´æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å•ç‚¹ä¿®æ”¹-åŒºé—´æŸ¥è¯¢"></a> å•ç‚¹ä¿®æ”¹ + åŒºé—´æŸ¥è¯¢</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">3e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> sum[maxn][maxn],n;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> z)</span></span>&#123;<span class="comment">//å°†(x,y) +x</span></span><br><span class="line"><span class="keyword">int</span> py=y;</span><br><span class="line"><span class="keyword">while</span>(x&lt;=n+<span class="number">3</span>)&#123;</span><br><span class="line">y=py;</span><br><span class="line"><span class="keyword">while</span>(y&lt;=n+<span class="number">3</span>)sum[x][y]+=z,y+=y&amp;-y;</span><br><span class="line">x+=x&amp;-x;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il ll <span class="title">ask</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="comment">//æ±‚å·¦ä¸Š(1,1)å³ä¸‹(x,y)çš„çŸ©é˜µå’Œ</span></span><br><span class="line">ll res=<span class="number">0</span>,py=y;</span><br><span class="line"><span class="keyword">while</span>(x)&#123;</span><br><span class="line">y=py;</span><br><span class="line"><span class="keyword">while</span>(y)res+=sum[x][y],y-=y&amp;-y;</span><br><span class="line">x-=x&amp;-x;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŒºé—´ä¿®æ”¹-å•ç‚¹æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åŒºé—´ä¿®æ”¹-å•ç‚¹æŸ¥è¯¢"></a> åŒºé—´ä¿®æ”¹ + å•ç‚¹æŸ¥è¯¢</h2><p><img src="https://img-blog.csdnimg.cn/20190515150934156.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RERF9NYXN0ZXI=,size_16,color_FFFFFF,t_70" alt="img3" /></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">3e3</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> sum[maxn][maxn],n;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> z)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> py=y;</span><br><span class="line"><span class="keyword">while</span>(x&lt;=n+<span class="number">3</span>)&#123;</span><br><span class="line">y=py;</span><br><span class="line"><span class="keyword">while</span>(y&lt;=n+<span class="number">3</span>)sum[x][y]+=z,y+=y&amp;-y;</span><br><span class="line">x+=x&amp;-x;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">r_add</span><span class="params">(<span class="keyword">int</span> xa,<span class="keyword">int</span> ya,<span class="keyword">int</span> xb,<span class="keyword">int</span> yb,<span class="keyword">int</span> z)</span></span>&#123;<span class="comment">//ç»™å·¦ä¸Š(xa,ya)å³ä¸‹(xb,yb)çŸ©é˜µ+z </span></span><br><span class="line">add(xa,ya,z),add(xa,yb+<span class="number">1</span>,-z),add(xb+<span class="number">1</span>,ya,-z),add(xb+<span class="number">1</span>,yb+z,z);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function">il ll <span class="title">ask</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;<span class="comment">//æŸ¥è¯¢(x,y)è¿™ç‚¹çš„å€¼</span></span><br><span class="line">ll res=<span class="number">0</span>,py=y;</span><br><span class="line"><span class="keyword">while</span>(x)&#123;</span><br><span class="line">y=py;</span><br><span class="line"><span class="keyword">while</span>(y)res+=sum[x][y],y-=y&amp;-y;</span><br><span class="line">x-=x&amp;-x;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h2 id="åŒºé—´ä¿®æ”¹-åŒºé—´æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#åŒºé—´ä¿®æ”¹-åŒºé—´æŸ¥è¯¢"></a> åŒºé—´ä¿®æ”¹ + åŒºé—´æŸ¥è¯¢</h2><p><img src="https://img-blog.csdnimg.cn/20190515151116992.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1RERF9NYXN0ZXI=,size_16,color_FFFFFF,t_70" alt="img4" /></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">3e3</span>+<span class="number">5</span>;</span><br><span class="line">ll t1[maxn][maxn],t2[maxn][maxn],t3[maxn][maxn],t4[maxn][maxn];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> z)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> py=y;</span><br><span class="line"><span class="keyword">while</span>(x&lt;=n+<span class="number">3</span>)&#123;</span><br><span class="line">y=py;</span><br><span class="line"><span class="keyword">while</span>(y&lt;=n+<span class="number">3</span>)&#123;</span><br><span class="line">t1[x][y]+=z,t2[x][y]+=z*x,t3[x][y]+=z*y,t4[x][y]+=z*x*y;</span><br><span class="line">y+=y&amp;-y;</span><br><span class="line">&#125;</span><br><span class="line">x+=x&amp;-x;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">r_add</span><span class="params">(<span class="keyword">int</span> xa,<span class="keyword">int</span> ya,<span class="keyword">int</span> xb,<span class="keyword">int</span> yb,<span class="keyword">int</span> z)</span></span>&#123;</span><br><span class="line">add(xa,ya,z),add(xa,yb+<span class="number">1</span>,-z),add(xb+<span class="number">1</span>,ya,-z),add(xb+<span class="number">1</span>,yb+<span class="number">1</span>,z);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il ll <span class="title">ask</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">ll res=<span class="number">0</span>,py=y;</span><br><span class="line"><span class="keyword">while</span>(x)&#123;</span><br><span class="line">y=py;</span><br><span class="line"><span class="keyword">while</span>(y)&#123;</span><br><span class="line">res+=(x+<span class="number">1</span>)*(y+<span class="number">1</span>)*t1[x][y]-(y+<span class="number">1</span>)*t2[x][y];</span><br><span class="line">res+=-(x+<span class="number">1</span>)*t3[x][y]+t4[x][y];</span><br><span class="line">y-=y&amp;-y;</span><br><span class="line">&#125;</span><br><span class="line">x-=x&amp;-x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il ll <span class="title">r_ask</span><span class="params">(<span class="keyword">int</span> xa,<span class="keyword">int</span> ya,<span class="keyword">int</span> xb,<span class="keyword">int</span> yb)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> ask(xb,yb)-ask(xb,ya<span class="number">-1</span>)-ask(xa<span class="number">-1</span>,yb)+ask(xa<span class="number">-1</span>,ya<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h1 id="ä¸‰ç»´æ ‘çŠ¶æ•°ç»„"><a class="markdownIt-Anchor" href="#ä¸‰ç»´æ ‘çŠ¶æ•°ç»„"></a> ä¸‰ç»´æ ‘çŠ¶æ•°ç»„</h1><h2 id="åŒºé—´ä¿®æ”¹-å•ç‚¹ä¿®æ”¹"><a class="markdownIt-Anchor" href="#åŒºé—´ä¿®æ”¹-å•ç‚¹ä¿®æ”¹"></a> åŒºé—´ä¿®æ”¹ + å•ç‚¹ä¿®æ”¹</h2><p>åŸç†å’ŒäºŒç»´ä¸€æ ·ä¸è¿‡å°±æ˜¯å†å¤šåŠ äº†ä¸€ç»´ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŒºé—´ä¿®æ”¹+å•ç‚¹æŸ¥è¯¢ </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SZ(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">105</span>;</span><br><span class="line"><span class="keyword">int</span> sum[maxn][maxn][maxn],n;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> z,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=x; i&lt;=n+<span class="number">2</span>; i+=i&amp;-i) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=y; j&lt;=n+<span class="number">2</span>; j+=j&amp;-j) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=z; k&lt;=n+<span class="number">2</span>; k+=k&amp;-k)</span><br><span class="line">sum[i][j][k]+=w;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">void</span> <span class="title">r_add</span><span class="params">(<span class="keyword">int</span> x1,<span class="keyword">int</span> y1,<span class="keyword">int</span> z1,<span class="keyword">int</span> x2,<span class="keyword">int</span> y2,<span class="keyword">int</span> z2,<span class="keyword">int</span> w)</span> </span>&#123;</span><br><span class="line">add(x1,y1,z1,w);</span><br><span class="line">add(x1,y2+<span class="number">1</span>,z1,-w);</span><br><span class="line">add(x2+<span class="number">1</span>,y1,z1,-w);</span><br><span class="line">add(x2+<span class="number">1</span>,y2+<span class="number">1</span>,z1,w);</span><br><span class="line"> </span><br><span class="line">add(x1,y1,z2+<span class="number">1</span>,-w);</span><br><span class="line">add(x1,y2+<span class="number">1</span>,z2+<span class="number">1</span>,w);</span><br><span class="line">add(x2+<span class="number">1</span>,y1,z2+<span class="number">1</span>,w);</span><br><span class="line">add(x2+<span class="number">1</span>,y2+<span class="number">1</span>,z2+<span class="number">1</span>,-w);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">il <span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> z)</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=x;i;i-=i&amp;-i)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=y;j;j-=j&amp;-j)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=z;k;k-=k&amp;-k)</span><br><span class="line">res+=sum[i][j][k];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="built_in">std</span>::ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä»–çš„è¿˜æ²¡é‡åˆ°//</p><p>æœ€åè†œå·¨ä½¬ï¼Orz</p><p>å®Œç»“æ’’èŠ±ï¼ï¼ï¼ï¼</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> æ¨¡æ¿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ ‘çŠ¶æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸»å¸­æ ‘åˆä½“ä¼š</title>
      <link href="2018/07/23/%E4%B8%BB%E5%B8%AD%E6%A0%91%E5%88%9D%E4%BD%93%E4%BC%9A/"/>
      <url>2018/07/23/%E4%B8%BB%E5%B8%AD%E6%A0%91%E5%88%9D%E4%BD%93%E4%BC%9A/</url>
      
        <content type="html"><![CDATA[<p><strong>èŠ±äº†å·®ä¸å¤šä¸€å¤©çš„æ—¶é—´ï¼Œå…ˆå¤§è‡´äº†è§£äº†ä¸»å¸­æ ‘è¿™ä¸ªé»‘ç§‘æŠ€</strong></p><p>ç»™ä¸Šä¸€ä¸ªé“¾æ¥ï¼Œæˆ‘è§‰å¾—æ˜¯æˆ‘çœ‹çš„æœ€å®¹æ˜“ç†è§£çš„ä¸»å¸­æ ‘äº†https://www.cnblogs.com/zyf0163/p/4749042.html</p><p>ä¸ºäº†æ›´æ–¹ä¾¿ä½ ä»¬ç†è§£ï¼Œæˆ‘å¯¹ä»–çš„ä»£ç å¢åŠ äº†æˆ‘çš„ç†è§£è¿™æ˜¯ä¸€é“hduçš„é¢˜ç›®ï¼Œä¸€é“æ¿å­é¢˜å»ºè®®åšä¸€ä¸‹http://acm.hdu.edu.cn/showproblem.php?pid=2665</p><p>è¿™é‡Œé™„ä¸Šä»£ç è¯¦è§£ï¼ˆä¸å¯¹ä¹‹å¤„æœ›æŒ‡æ­£ï¼‰</p><h1 id="hdu2665"><a class="markdownIt-Anchor" href="#hdu2665"></a> HDU2665</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100000</span> + <span class="number">5</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> a[N], b[N], rt[N * <span class="number">20</span>], ls[N * <span class="number">20</span>], rs[N * <span class="number">20</span>], sum[N * <span class="number">20</span>];</span><br><span class="line"><span class="comment">//rt[]æ˜¯è®°å½•ç€ç¬¬å‡ ä¸ªçˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">//ls[]æ˜¯å·¦åˆ†æ”¯ å­˜ç€å¯¹åº”èŠ‚ç‚¹çš„å·¦åˆ†æ”¯ </span></span><br><span class="line"><span class="comment">//rs[]æ˜¯å³åˆ†æ”¯ å­˜ç€å¯¹åº”èŠ‚ç‚¹çš„å³åˆ†æ”¯</span></span><br><span class="line"><span class="comment">//sum[]æ˜¯å‡ºç°çš„æ¬¡æ•° </span></span><br><span class="line"><span class="keyword">int</span> n, k, tot, sz, ql, qr, x, q, T;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(<span class="keyword">int</span> &amp;o, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>&#123;</span><br><span class="line">    o = ++ tot;<span class="comment">//totæ˜¯è§£å†³å­˜å‚¨åœ¨sumä¸­çš„ä½ç½® </span></span><br><span class="line">    sum[o] = <span class="number">0</span>;<span class="comment">//åˆå€¼éƒ½æ˜¯0 </span></span><br><span class="line">    <span class="keyword">if</span>(l == r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    Build(ls[o], l, m);<span class="comment">//å®Œå–„å·¦æ”¯ </span></span><br><span class="line">    Build(rs[o], m + <span class="number">1</span>, r);<span class="comment">//å†å®Œå–„å³æ”¯ </span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> &amp;o, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> last, <span class="keyword">int</span> p)</span></span>&#123;</span><br><span class="line">    o = ++ tot;<span class="comment">//lastå°±æ˜¯å‰é¢çš„ä¸€æ£µæ ‘ </span></span><br><span class="line">    ls[o] = ls[last];</span><br><span class="line">    rs[o] = rs[last];</span><br><span class="line">    sum[o] = sum[last] + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(l == r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(p &lt;= m)  update(ls[o], l, m, ls[last], p);<span class="comment">//æ ¹æ®på‡ºç°çš„ä½ç½®åªæ›´æ–°æ‰ä¸€æ¡è·¯ ,ls[o]è¢«totæ›´æ–°é‡æ–°åˆ†é…äº†åœ¨sumä¸­çš„ä½ç½® </span></span><br><span class="line">    <span class="keyword">else</span> update(rs[o], m + <span class="number">1</span>, r, rs[last], p);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> ss, <span class="keyword">int</span> tt, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l == r) <span class="keyword">return</span> l;<span class="comment">//æœ€åè¿”å›çš„æ˜¯ä»–åœ¨bæ•°ç»„é‡Œå‡ºç°çš„ä½ç½® </span></span><br><span class="line">    <span class="keyword">int</span> m = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> cnt = sum[ls[tt]] - sum[ls[ss]];<span class="comment">//åœ¨æ‰€ç»™çš„èŒƒå›´ä¸­ï¼Œå‡ºç°åœ¨bæ•°ç»„ä¸­l~mä½ç½®çš„ä¸ªæ•° </span></span><br><span class="line">    <span class="keyword">if</span>(k &lt;= cnt) <span class="keyword">return</span> query(ls[ss], ls[tt], l, m, k);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> query(rs[ss], rs[tt], m + <span class="number">1</span>, r, k - cnt);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;ql, &amp;qr, &amp;x);</span><br><span class="line">    <span class="keyword">int</span> ans = query(rt[ql - <span class="number">1</span>], rt[qr], <span class="number">1</span>, sz, x);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, b[ans]);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span>(T--)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;q);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++) <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, a + i), b[i] = a[i];</span><br><span class="line">        sort(b + <span class="number">1</span>, b + n + <span class="number">1</span>);<span class="comment">//bæ•°ç»„æ’åº </span></span><br><span class="line">        sz = unique(b + <span class="number">1</span>, b + n + <span class="number">1</span>) - (b + <span class="number">1</span>);<span class="comment">//ä¸é‡å¤çš„æœ‰å¤šå°‘ä¸ª </span></span><br><span class="line">        tot = <span class="number">0</span>;</span><br><span class="line">        Build(rt[<span class="number">0</span>],<span class="number">1</span>, sz);<span class="comment">//æ€»å…±æœ‰szä¸ªä¸é‡å¤çš„æ•°ï¼Œæ‰€ä»¥æœ€ä¸‹é¢ä¸€å±‚æœ‰1~szä¸ª</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//        for(int i = 0; i &lt;= 4 * n; i ++)printf(&quot;%d,rt =  %d,ls =  %d, rs = %d, sum = %d\n&quot;, i, rt[i], ls[i], rs[i], sum[i]);</span></span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)a[i] = lower_bound(b + <span class="number">1</span>, b + sz + <span class="number">1</span>, a[i]) - b;<span class="comment">//a[i]å˜æˆè®°å½•a[i]å…ƒç´ åœ¨bæ•°ç»„ä¸­çš„ä½ç½® </span></span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)update(rt[i], <span class="number">1</span>, sz, rt[i - <span class="number">1</span>], a[i]);<span class="comment">//ä»1æ›´æ–°åˆ°n,ä¸»å¸­æ ‘å®Œæˆ </span></span><br><span class="line"><span class="comment">//        for(int i = 0; i &lt;= 5 * n; i ++)printf(&quot;%d,rt =  %d,ls =  %d, rs = %d, sum = %d\n&quot;, i, rt[i], ls[i], rs[i], sum[i]);</span></span><br><span class="line">        <span class="keyword">while</span>(q --)work();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="p3919-æ¨¡æ¿å¯æŒä¹…åŒ–æ•°ç»„å¯æŒä¹…åŒ–çº¿æ®µæ ‘å¹³è¡¡æ ‘"><a class="markdownIt-Anchor" href="#p3919-æ¨¡æ¿å¯æŒä¹…åŒ–æ•°ç»„å¯æŒä¹…åŒ–çº¿æ®µæ ‘å¹³è¡¡æ ‘"></a> <a href="https://www.luogu.org/problemnew/show/P3919">P3919 ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–æ•°ç»„ï¼ˆå¯æŒä¹…åŒ–çº¿æ®µæ ‘/å¹³è¡¡æ ‘ï¼‰</a></h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> il inline</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> fi first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> se second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ms(_data,v) memset(_data,v,sizeof(_data))</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sc(n) scanf(<span class="meta-string">&quot;%d&quot;</span>,&amp;n)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SC(n,m) scanf(<span class="meta-string">&quot;%d %d&quot;</span>,&amp;n,&amp;m)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> sz(a) int((a).size())</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rep(i,a,b) for(int i=a;i&lt;=b;++i)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> drep(i,a,b)for(int i=a;i&gt;=b;--i)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> ll inf=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI=<span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps=<span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span>+<span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> a[N],b[N],rt[N*<span class="number">20</span>],ls[N*<span class="number">20</span>],rs[N*<span class="number">20</span>];</span><br><span class="line">ll sum[N*<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> tot,sz; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Build</span><span class="params">(<span class="keyword">int</span> &amp;o,<span class="keyword">int</span> l,<span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">o=++ tot;</span><br><span class="line"><span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">sum[o]=a[l];</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">Build(ls[o],l,m);</span><br><span class="line">Build(rs[o],m+<span class="number">1</span>,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> &amp;o,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> last,<span class="keyword">int</span> p,<span class="keyword">int</span> c,<span class="keyword">bool</span> fg)</span> </span>&#123;</span><br><span class="line">o=++tot;</span><br><span class="line">ls[o]=ls[last];</span><br><span class="line">rs[o]=rs[last];</span><br><span class="line"><span class="keyword">if</span>(fg) <span class="keyword">return</span> ;</span><br><span class="line"><span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">sum[o]=c;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(p&lt;=m)  update(ls[o],l,m,ls[last],p,c,fg);</span><br><span class="line"><span class="keyword">else</span> update(rs[o],m+<span class="number">1</span>,r,rs[last],p,c,fg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> id, <span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span>(l == r)<span class="keyword">return</span> sum[id];</span><br><span class="line"><span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span>(k&lt;=m) <span class="keyword">return</span> query(ls[id],l,m,k);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> query(rs[id],m+<span class="number">1</span>,r,k);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n,m,x,y,c,d;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SC(n,m);</span><br><span class="line">rep(i,<span class="number">1</span>,n) sc(a[i]);</span><br><span class="line">tot=<span class="number">0</span>;</span><br><span class="line">Build(rt[<span class="number">0</span>],<span class="number">1</span>,n);</span><br><span class="line">rep(i,<span class="number">1</span>,m)&#123;</span><br><span class="line">sc(x),sc(y),sc(c);</span><br><span class="line"><span class="keyword">if</span>(y==<span class="number">1</span>)&#123;</span><br><span class="line">sc(d);</span><br><span class="line">update(rt[i],<span class="number">1</span>,n,rt[x],c,d,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;query(rt[x],<span class="number">1</span>,n,c)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">update(rt[i],<span class="number">1</span>,n,rt[x],<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä»€ä¹ˆåŠ¨æ€ä¸»å¸­æ ‘ï¼Œç­‰å˜åŒ–è¿˜éœ€ä¸€æ­¥æ­¥å­¦ä¹ ï¼ˆæ¥è‡ªèœé¸¡çš„å¹æ¯ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸»å¸­æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(Nowcoder) 2018ç‰›å®¢å¤šæ ¡ç¬¬äºŒåœºAï¼ŒDï¼ŒI</title>
      <link href="2018/07/22/(Nowcoder)%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%E7%AC%AC%E4%BA%8C%E5%9C%BA/"/>
      <url>2018/07/22/(Nowcoder)%E7%89%9B%E5%AE%A2%E5%A4%9A%E6%A0%A1%E7%AC%AC%E4%BA%8C%E5%9C%BA/</url>
      
        <content type="html"><![CDATA[<p><strong>åªä¼š3é“ç­¾åˆ°é¢˜ ï¼ˆå“­å”§å”§ï¼‰ A run ï¼ŒD money ï¼ŒI carã€‚<s>ï¼ˆå‘äº†3æ¬¡äº†è¿˜ä¿å­˜ä¸äº†ï¼Œä¸å‘é¢˜è§£å°±å¯ä»¥ä¿å­˜äº†ï¼ŒğŸ˜‡ï¼‰</s></strong></p><h1 id="1a-run"><a class="markdownIt-Anchor" href="#1a-run"></a> 1.A run</h1><p>é¢˜è§£æ˜¯ç”¨dpï¼Œæˆ‘ä»¬æ˜¯è”æƒ³åˆ°äº†èµ°æ¥¼æ¢¯é—®é¢˜ï¼Œå°†èµ·çœ‹æˆä¸€æ¬¡èµ°1ç±³æˆ–è€…èµ°k+1ç±³ï¼Œè¿™æ ·ç”¨ä¸ªè®°å¿†åŒ–æœç´¢åŠ å‰ç¼€å’Œå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">include&lt;iostream&gt;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1</span>&lt;&lt;<span class="number">20</span>; </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> q,k;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> res[<span class="number">100005</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ssum[<span class="number">100005</span>];</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(res[i]!=<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> res[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(i&lt;k)&#123;</span><br><span class="line">res[i]=<span class="number">1</span>;</span><br><span class="line">ssum[i]=i;<span class="comment">//</span></span><br><span class="line"><span class="keyword">return</span> res[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i==k)&#123;</span><br><span class="line">res[i]=<span class="number">2</span>;</span><br><span class="line">ssum[i]=i+<span class="number">1</span>;<span class="comment">//</span></span><br><span class="line"><span class="keyword">return</span> res[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i==k+<span class="number">1</span>)&#123;</span><br><span class="line">res[i]=<span class="number">3</span>;</span><br><span class="line">ssum[i]=i+<span class="number">3</span>;<span class="comment">//</span></span><br><span class="line"><span class="keyword">return</span> res[i];</span><br><span class="line">&#125;</span><br><span class="line">res[i]=func(i<span class="number">-1</span>)+func(i-k<span class="number">-1</span>);</span><br><span class="line">ssum[i]=ssum[i<span class="number">-1</span>]+res[i];</span><br><span class="line"><span class="keyword">return</span> res[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;q,&amp;k)!=EOF)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">memset</span>(res,<span class="number">0</span>,<span class="keyword">sizeof</span>(res));</span><br><span class="line"><span class="built_in">memset</span>(ssum,<span class="number">0</span>,<span class="keyword">sizeof</span>(ssum));</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=q;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> L,R;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>,&amp;L,&amp;R);</span><br><span class="line"><span class="keyword">if</span>(ssum[R]!=<span class="number">0</span>&amp;&amp;ssum[L<span class="number">-1</span>]!=<span class="number">0</span>&amp;&amp;ssum[R]-ssum[L<span class="number">-1</span>]!=<span class="number">0</span>)&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,(ssum[R]-ssum[L<span class="number">-1</span>])%mod);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=L;j&lt;=R;j++)</span><br><span class="line">&#123;</span><br><span class="line">ans+=func(j);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans%mod);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2money"><a class="markdownIt-Anchor" href="#2money"></a> 2.money</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> T,n;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line"><span class="keyword">while</span>(T--)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> a[n];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">long</span> <span class="keyword">long</span> i=<span class="number">0</span>;i&lt;n;++i)</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> value=<span class="number">0</span>,count=<span class="number">0</span>,temp=a[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">long</span> <span class="keyword">long</span> i=<span class="number">0</span>;i&lt;n;++i)&#123;</span><br><span class="line"><span class="keyword">if</span>(a[i]&lt;a[i<span class="number">-1</span>]&amp;&amp;i!=<span class="number">0</span>)&#123;</span><br><span class="line">value+=a[i<span class="number">-1</span>]-temp;</span><br><span class="line"><span class="keyword">if</span>(a[i<span class="number">-1</span>]-temp&gt;<span class="number">0</span>)&#123;</span><br><span class="line">count+=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">temp=a[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(a[n<span class="number">-1</span>]&gt;temp)&#123;</span><br><span class="line">value+=a[n<span class="number">-1</span>]-temp;</span><br><span class="line">count+=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;value&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;count&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3car"><a class="markdownIt-Anchor" href="#3car"></a> 3.car</h1><p>å…ˆè€ƒè™‘å½“æ–¹æ ¼æ²¡æœ‰ç ´åçš„æ—¶å€™ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å¾—å‡ºnä¸ºå¶æœ‰2<em>nè¾†ï¼Œnä¸ºå¥‡æ•°æ—¶2</em>ï¼ˆn-1ï¼‰+1è¾†ï¼ˆå¯ä»¥è¯æ˜å‡ºæ¥ï¼Œæˆ–è€…æ‰¾è§„å¾‹ï¼‰ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è€ƒè™‘è¢«ç ´åçš„åœ°æ–¹ï¼Œç„¶åå‡å»ç›¸åº”çš„è½¦è¾†ï¼Œè¿™ä¸ªæ˜¯æœ‰è§„å¾‹çš„ã€‚è¦å°å¿ƒçš„å°±æ˜¯å¥‡æ•°æ—¶ï¼Œä¸­å¿ƒåå­—æ¶çš„ä½ç½®ã€‚æˆ‘å†™çš„æ¯”è¾ƒç¹çï¼Œæ±‚ä¸ªå¤§ä½¬çš„ç®€å•æ€è·¯ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m)&#123;</span><br><span class="line"><span class="keyword">bool</span> h[n+<span class="number">1</span>];<span class="comment">//è®°å½•è¡Œ </span></span><br><span class="line"><span class="keyword">bool</span> l[n+<span class="number">1</span>];<span class="comment">//è®°å½•åˆ— </span></span><br><span class="line"><span class="built_in">memset</span>(h,<span class="number">0</span>,<span class="keyword">sizeof</span>(h));</span><br><span class="line"><span class="built_in">memset</span>(l,<span class="number">0</span>,<span class="keyword">sizeof</span>(l));</span><br><span class="line"><span class="keyword">int</span> x,y;</span><br><span class="line"><span class="keyword">if</span>(n%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">int</span> st=<span class="number">2</span>*n;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line"><span class="keyword">if</span>(h[x]==<span class="number">0</span>&amp;&amp;l[y]==<span class="number">0</span>)&#123;</span><br><span class="line">st-=<span class="number">2</span>;</span><br><span class="line">h[x]=<span class="number">1</span>,l[y]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(h[x]!=<span class="number">0</span>&amp;&amp;l[y]==<span class="number">0</span>)&#123;</span><br><span class="line">st-=<span class="number">1</span>;</span><br><span class="line">l[y]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(h[x]==<span class="number">0</span>&amp;&amp;l[y]!=<span class="number">0</span>)&#123;</span><br><span class="line">st-=<span class="number">1</span>;</span><br><span class="line">h[x]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;st&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">int</span> st=<span class="number">2</span>*(n<span class="number">-1</span>);<span class="comment">//å…ˆä¸è€ƒè™‘ä¸­é—´åå­—çº¿ä¸Šå¯èƒ½å‡ºç°çš„æ±½è½¦ </span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;++i)&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line"><span class="keyword">if</span>(x==(n+<span class="number">1</span>)/<span class="number">2</span>||y==(n+<span class="number">1</span>)/<span class="number">2</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(x==(n+<span class="number">1</span>)/<span class="number">2</span>&amp;&amp;y!=(n+<span class="number">1</span>)/<span class="number">2</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(l[y]==<span class="number">0</span>)&#123;</span><br><span class="line">st-=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(y==(n+<span class="number">1</span>)/<span class="number">2</span>&amp;&amp;x!=(n+<span class="number">1</span>)/<span class="number">2</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(h[x]==<span class="number">0</span>)&#123;</span><br><span class="line">st-=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">h[x]=<span class="number">1</span>,l[y]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(h[x]==<span class="number">0</span>&amp;&amp;l[y]==<span class="number">0</span>)&#123;</span><br><span class="line">st-=<span class="number">2</span>;</span><br><span class="line">h[x]=<span class="number">1</span>,l[y]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(h[x]!=<span class="number">0</span>&amp;&amp;l[y]==<span class="number">0</span>)&#123;</span><br><span class="line">st-=<span class="number">1</span>;</span><br><span class="line">l[y]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(h[x]==<span class="number">0</span>&amp;&amp;l[y]!=<span class="number">0</span>)&#123;</span><br><span class="line">st-=<span class="number">1</span>;</span><br><span class="line">h[x]=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(l[(n+<span class="number">1</span>)/<span class="number">2</span>]==<span class="number">1</span>&amp;&amp;h[(n+<span class="number">1</span>)/<span class="number">2</span>]==<span class="number">1</span>)</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;st&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;st+<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>å®Œç»“ï¼Œæ’’èŠ±ï¼ï¼ï¼ï¼ï¼ï¼</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
          <category> Nowcoder </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
